import {
  __commonJS
} from "./chunk-LQ2VYIYD.js";

// node_modules/zego-zim-web/index.js
var require_zego_zim_web = __commonJS({
  "node_modules/zego-zim-web/index.js"(exports, module) {
    !function(e, t) {
      if ("object" == typeof exports && "object" == typeof module)
        module.exports = t();
      else if ("function" == typeof define && define.amd)
        define([], t);
      else {
        var r, n = t();
        for (r in n)
          ("object" == typeof exports ? exports : e)[r] = n[r];
      }
    }("undefined" != typeof self ? self : exports, function() {
      return function(e) {
        var t = {};
        function r(n) {
          if (t[n])
            return t[n].exports;
          var i = t[n] = { i: n, l: false, exports: {} };
          return e[n].call(i.exports, i, i.exports, r), i.l = true, i.exports;
        }
        return r.m = e, r.c = t, r.d = function(e2, t2, n) {
          r.o(e2, t2) || Object.defineProperty(e2, t2, { enumerable: true, get: n });
        }, r.r = function(e2) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
        }, r.t = function(e2, t2) {
          if (1 & t2 && (e2 = r(e2)), 8 & t2)
            return e2;
          if (4 & t2 && "object" == typeof e2 && e2 && e2.__esModule)
            return e2;
          var n = /* @__PURE__ */ Object.create(null);
          if (r.r(n), Object.defineProperty(n, "default", { enumerable: true, value: e2 }), 2 & t2 && "string" != typeof e2)
            for (var i in e2)
              r.d(n, i, (function(t3) {
                return e2[t3];
              }).bind(null, i));
          return n;
        }, r.n = function(e2) {
          var t2 = e2 && e2.__esModule ? function() {
            return e2.default;
          } : function() {
            return e2;
          };
          return r.d(t2, "a", t2), t2;
        }, r.o = function(e2, t2) {
          return Object.prototype.hasOwnProperty.call(e2, t2);
        }, r.p = "", r(r.s = 21);
      }([function(e, t, r) {
        "use strict";
        var n = r(25), i = (r.d(t, "c", function() {
          return n.a;
        }), r.d(t, "g", function() {
          return n.b;
        }), r.d(t, "h", function() {
          return n.c;
        }), r.d(t, "i", function() {
          return n.d;
        }), r.d(t, "k", function() {
          return n.e;
        }), r.d(t, "l", function() {
          return n.f;
        }), r.d(t, "o", function() {
          return n.g;
        }), r.d(t, "p", function() {
          return n.h;
        }), r.d(t, "r", function() {
          return n.i;
        }), r.d(t, "t", function() {
          return n.j;
        }), r.d(t, "w", function() {
          return n.k;
        }), r.d(t, "x", function() {
          return n.l;
        }), r.d(t, "y", function() {
          return n.m;
        }), r.d(t, "z", function() {
          return n.n;
        }), r.d(t, "A", function() {
          return n.o;
        }), r.d(t, "C", function() {
          return n.p;
        }), r.d(t, "D", function() {
          return n.q;
        }), r.d(t, "E", function() {
          return n.r;
        }), r.d(t, "F", function() {
          return n.s;
        }), r.d(t, "H", function() {
          return n.t;
        }), r.d(t, "I", function() {
          return n.u;
        }), r.d(t, "K", function() {
          return n.v;
        }), r.d(t, "L", function() {
          return n.w;
        }), r.d(t, "M", function() {
          return n.x;
        }), r.d(t, "N", function() {
          return n.y;
        }), r.d(t, "P", function() {
          return n.z;
        }), r.d(t, "S", function() {
          return n.A;
        }), r.d(t, "T", function() {
          return n.B;
        }), r.d(t, "U", function() {
          return n.C;
        }), r.d(t, "V", function() {
          return n.D;
        }), r.d(t, "Z", function() {
          return n.E;
        }), r.d(t, "ab", function() {
          return n.F;
        }), r.d(t, "bb", function() {
          return n.G;
        }), r.d(t, "cb", function() {
          return n.H;
        }), r.d(t, "db", function() {
          return n.I;
        }), r.d(t, "fb", function() {
          return n.J;
        }), r.d(t, "hb", function() {
          return n.K;
        }), r.d(t, "ib", function() {
          return n.L;
        }), r.d(t, "jb", function() {
          return n.M;
        }), r.d(t, "kb", function() {
          return n.N;
        }), r.d(t, "lb", function() {
          return n.O;
        }), r.d(t, "mb", function() {
          return n.P;
        }), r.d(t, "nb", function() {
          return n.Q;
        }), r.d(t, "ob", function() {
          return n.R;
        }), r.d(t, "qb", function() {
          return n.S;
        }), r(34)), o = (r.d(t, "a", function() {
          return i.a;
        }), r.d(t, "b", function() {
          return i.b;
        }), r.d(t, "f", function() {
          return i.c;
        }), r.d(t, "n", function() {
          return i.d;
        }), r.d(t, "q", function() {
          return i.e;
        }), r.d(t, "v", function() {
          return i.f;
        }), r.d(t, "G", function() {
          return i.g;
        }), r.d(t, "J", function() {
          return i.h;
        }), r.d(t, "O", function() {
          return i.i;
        }), r.d(t, "Q", function() {
          return i.j;
        }), r.d(t, "R", function() {
          return i.k;
        }), r.d(t, "W", function() {
          return i.l;
        }), r.d(t, "eb", function() {
          return i.m;
        }), r.d(t, "gb", function() {
          return i.n;
        }), r(35)), s = (r.d(t, "d", function() {
          return o.a;
        }), r.d(t, "e", function() {
          return o.b;
        }), r.d(t, "j", function() {
          return o.c;
        }), r.d(t, "pb", function() {
          return o.d;
        }), r(36)), a = (r.d(t, "m", function() {
          return s.a;
        }), r.d(t, "u", function() {
          return s.b;
        }), r(37)), u = (r.d(t, "s", function() {
          return a.a;
        }), r(38)), c = (r.d(t, "B", function() {
          return u.a;
        }), r(39));
        r.d(t, "X", function() {
          return c.a;
        }), r.d(t, "Y", function() {
          return c.b;
        });
      }, function(e, t, r) {
        "use strict";
        var n = r(23), i = (r.d(t, "o", function() {
          return n.a;
        }), r.d(t, "q", function() {
          return n.b;
        }), r.d(t, "r", function() {
          return n.c;
        }), r(14)), o = (r.d(t, "x", function() {
          return i.a;
        }), r(24));
        r.d(t, "a", function() {
          return o.a;
        }), r.d(t, "b", function() {
          return o.b;
        }), r.d(t, "c", function() {
          return o.c;
        }), r.d(t, "d", function() {
          return o.d;
        }), r.d(t, "e", function() {
          return o.e;
        }), r.d(t, "f", function() {
          return o.f;
        }), r.d(t, "g", function() {
          return o.g;
        }), r.d(t, "h", function() {
          return o.h;
        }), r.d(t, "i", function() {
          return o.i;
        }), r.d(t, "j", function() {
          return o.j;
        }), r.d(t, "k", function() {
          return o.k;
        }), r.d(t, "l", function() {
          return o.l;
        }), r.d(t, "m", function() {
          return o.m;
        }), r.d(t, "n", function() {
          return o.n;
        }), r.d(t, "p", function() {
          return o.o;
        }), r.d(t, "s", function() {
          return o.p;
        }), r.d(t, "t", function() {
          return o.q;
        }), r.d(t, "u", function() {
          return o.r;
        }), r.d(t, "v", function() {
          return o.s;
        }), r.d(t, "w", function() {
          return o.t;
        });
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        var n = r(54), i = r(62), o = r(80), s = r(82), a = r(90), u = r(94), c = r(0), l = c.Y.Manager, d = (p.getInstance = function() {
          return this.instance || (this.instance = new p());
        }, p.prototype.getVersion = function() {
          return "2.15.0";
        }, p.prototype.createEngine = function(e2) {
          var t2 = { appID: e2, msg: "first create", tag: "2024/3/29 17:36:07", version: "2.15.0" }, r2 = this.handle;
          return this.enginMap.get(r2) ? (t2.msg = "had created", this.logger.info(l, c.X.Create, t2), null) : (e2 = new i.a(r2, e2), this.enginMap.set(r2, e2), this.logger.info(l, c.X.Create, t2), e2);
        }, p.prototype.destroyEngine = function(e2) {
          this.logger.info(l, c.X.Destroy), e2 && (this.enginMap.delete(e2.engineConfig.handle), e2.destroy());
        }, p.prototype.setLogConfig = function(e2) {
          this.logger.info(l, c.X.SetLogConfig, e2), this.logger.setLogConfig(Object.assign({ logLevel: "info" }, e2));
        }, p.prototype.setAdvancedConfig = function(e2, t2) {
          this.settings.advancedConfig[e2] = t2;
        }, p.prototype.setGeofencingConfig = function(e2, t2) {
          var r2, n2;
          return (t2 == c.C.Include || t2 == c.C.Exclude) && e2 && 0 < e2.length && e2.every(function(e3) {
            return 2 <= e3 && e3 <= 7;
          }) ? (e2 = e2.map(function(e3) {
            return 0 | e3;
          }), this.settings.advancedConfig.geoFence.type = t2, this.settings.advancedConfig.geoFence.areas = e2, n2 = t2 == c.C.Include ? e2[n2 = 1 < e2.length ? (Math.random() * e2.length | 0) % e2.length : 0] : ((r2 = new Set(Object.keys(c.B).map(function(e3) {
            return +e3;
          }))).delete(1), e2.forEach(function(e3) {
            r2.delete(e3), c.B[e3].relatives.forEach(function(e4) {
              return r2.delete(e4);
            });
          }), n2 = 1 < (e2 = Array.from(r2)).length ? (Math.random() * e2.length | 0) % e2.length : 0, e2[n2] || 1), this.settings.advancedConfig.geoFence.id = n2, this.settings.advancedConfig.geoFence.host = c.B[n2].host, this.logger.info(l, c.X.SetGeoFence, this.settings.advancedConfig.geoFence), 1 != this.settings.advancedConfig.geoFence.id) : (this.logger.info(l, c.X.SetGeoFence, { type: t2, areas: e2 }), false);
        }, p);
        function p() {
          if (this.handle = Symbol(), this.enginMap = /* @__PURE__ */ new Map(), p.instance)
            return p.instance;
          this.logger = new a.a(this.getVersion()), this.settings = new u.a(this.getVersion()), this.dataReport = new s.a(this.settings), this.crypto = new n.a(), this.protobuf = new o.a(this.crypto, this.settings), p.instance = this;
        }
      }, function(e, t) {
        e.exports = n;
        var r = null;
        try {
          r = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;
        } catch (e2) {
        }
        function n(e2, t2, r2) {
          this.low = 0 | e2, this.high = 0 | t2, this.unsigned = !!r2;
        }
        function i(e2) {
          return true === (e2 && e2.__isLong__);
        }
        Object.defineProperty(n.prototype, "__isLong__", { value: true }), n.isLong = i;
        var o = {}, s = {};
        function a(e2, t2) {
          var r2, n2, i2;
          return t2 ? (i2 = 0 <= (e2 >>>= 0) && e2 < 256) && (n2 = s[e2]) ? n2 : (r2 = c(e2, (0 | e2) < 0 ? -1 : 0, true), i2 && (s[e2] = r2), r2) : (i2 = -128 <= (e2 |= 0) && e2 < 128) && (n2 = o[e2]) ? n2 : (r2 = c(e2, e2 < 0 ? -1 : 0, false), i2 && (o[e2] = r2), r2);
        }
        function u(e2, t2) {
          if (isNaN(e2))
            return t2 ? b : _;
          if (t2) {
            if (e2 < 0)
              return b;
            if (f <= e2)
              return C;
          } else {
            if (e2 <= -g)
              return I;
            if (g <= e2 + 1)
              return k;
          }
          return e2 < 0 ? u(-e2, t2).neg() : c(e2 % h | 0, e2 / h | 0, t2);
        }
        function c(e2, t2, r2) {
          return new n(e2, t2, r2);
        }
        n.fromInt = a, n.fromNumber = u, n.fromBits = c;
        var l = Math.pow;
        function d(e2, t2, r2) {
          if (0 === e2.length)
            throw Error("empty string");
          if ("NaN" === e2 || "Infinity" === e2 || "+Infinity" === e2 || "-Infinity" === e2)
            return _;
          if (t2 = "number" == typeof t2 ? (r2 = t2, false) : !!t2, (r2 = r2 || 10) < 2 || 36 < r2)
            throw RangeError("radix");
          var n2;
          if (0 < (n2 = e2.indexOf("-")))
            throw Error("interior hyphen");
          if (0 === n2)
            return d(e2.substring(1), t2, r2).neg();
          for (var i2 = u(l(r2, 8)), o2 = _, s2 = 0; s2 < e2.length; s2 += 8) {
            var a2 = Math.min(8, e2.length - s2), c2 = parseInt(e2.substring(s2, s2 + a2), r2);
            o2 = a2 < 8 ? (a2 = u(l(r2, a2)), o2.mul(a2).add(u(c2))) : (o2 = o2.mul(i2)).add(u(c2));
          }
          return o2.unsigned = t2, o2;
        }
        function p(e2, t2) {
          return "number" == typeof e2 ? u(e2, t2) : "string" == typeof e2 ? d(e2, t2) : c(e2.low, e2.high, "boolean" == typeof t2 ? t2 : e2.unsigned);
        }
        n.fromString = d, n.fromValue = p;
        var h = 4294967296, f = h * h, g = f / 2, m = a(1 << 24), _ = a(0), b = (n.ZERO = _, a(0, true)), v = (n.UZERO = b, a(1)), y = (n.ONE = v, a(1, true)), M = (n.UONE = y, a(-1)), k = (n.NEG_ONE = M, c(-1, 2147483647, false)), C = (n.MAX_VALUE = k, c(-1, -1, true)), I = (n.MAX_UNSIGNED_VALUE = C, c(0, -2147483648, false));
        (e = (n.MIN_VALUE = I, n.prototype)).toInt = function() {
          return this.unsigned ? this.low >>> 0 : this.low;
        }, e.toNumber = function() {
          return this.unsigned ? (this.high >>> 0) * h + (this.low >>> 0) : this.high * h + (this.low >>> 0);
        }, e.toString = function(e2) {
          if ((e2 = e2 || 10) < 2 || 36 < e2)
            throw RangeError("radix");
          if (this.isZero())
            return "0";
          var t2, r2;
          if (this.isNegative())
            return this.eq(I) ? (r2 = u(e2), r2 = (t2 = this.div(r2)).mul(r2).sub(this), t2.toString(e2) + r2.toInt().toString(e2)) : "-" + this.neg().toString(e2);
          for (var n2 = u(l(e2, 6), this.unsigned), i2 = this, o2 = ""; ; ) {
            var s2 = i2.div(n2), a2 = (i2.sub(s2.mul(n2)).toInt() >>> 0).toString(e2);
            if ((i2 = s2).isZero())
              return a2 + o2;
            for (; a2.length < 6; )
              a2 = "0" + a2;
            o2 = "" + a2 + o2;
          }
        }, e.getHighBits = function() {
          return this.high;
        }, e.getHighBitsUnsigned = function() {
          return this.high >>> 0;
        }, e.getLowBits = function() {
          return this.low;
        }, e.getLowBitsUnsigned = function() {
          return this.low >>> 0;
        }, e.getNumBitsAbs = function() {
          if (this.isNegative())
            return this.eq(I) ? 64 : this.neg().getNumBitsAbs();
          for (var e2 = 0 != this.high ? this.high : this.low, t2 = 31; 0 < t2 && 0 == (e2 & 1 << t2); t2--)
            ;
          return 0 != this.high ? t2 + 33 : t2 + 1;
        }, e.isZero = function() {
          return 0 === this.high && 0 === this.low;
        }, e.eqz = e.isZero, e.isNegative = function() {
          return !this.unsigned && this.high < 0;
        }, e.isPositive = function() {
          return this.unsigned || 0 <= this.high;
        }, e.isOdd = function() {
          return 1 == (1 & this.low);
        }, e.isEven = function() {
          return 0 == (1 & this.low);
        }, e.equals = function(e2) {
          return i(e2) || (e2 = p(e2)), (this.unsigned === e2.unsigned || this.high >>> 31 != 1 || e2.high >>> 31 != 1) && this.high === e2.high && this.low === e2.low;
        }, e.eq = e.equals, e.notEquals = function(e2) {
          return !this.eq(e2);
        }, e.neq = e.notEquals, e.ne = e.notEquals, e.lessThan = function(e2) {
          return this.comp(e2) < 0;
        }, e.lt = e.lessThan, e.lessThanOrEqual = function(e2) {
          return this.comp(e2) <= 0;
        }, e.lte = e.lessThanOrEqual, e.le = e.lessThanOrEqual, e.greaterThan = function(e2) {
          return 0 < this.comp(e2);
        }, e.gt = e.greaterThan, e.greaterThanOrEqual = function(e2) {
          return 0 <= this.comp(e2);
        }, e.gte = e.greaterThanOrEqual, e.ge = e.greaterThanOrEqual, e.compare = function(e2) {
          if (i(e2) || (e2 = p(e2)), this.eq(e2))
            return 0;
          var t2 = this.isNegative(), r2 = e2.isNegative();
          return t2 && !r2 ? -1 : !t2 && r2 ? 1 : this.unsigned ? e2.high >>> 0 > this.high >>> 0 || e2.high === this.high && e2.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e2).isNegative() ? -1 : 1;
        }, e.comp = e.compare, e.negate = function() {
          return !this.unsigned && this.eq(I) ? I : this.not().add(v);
        }, e.neg = e.negate, e.add = function(e2) {
          i(e2) || (e2 = p(e2));
          var t2 = this.high >>> 16, r2 = 65535 & this.high, n2 = this.low >>> 16, o2 = 65535 & this.low, s2 = e2.high >>> 16, a2 = 65535 & e2.high, u2 = e2.low >>> 16, l2 = 0, d2 = 0, h2 = 0, f2 = 0;
          return d2 += (h2 = h2 + ((f2 += o2 + (65535 & e2.low)) >>> 16) + (n2 + u2)) >>> 16, c((h2 &= 65535) << 16 | (f2 &= 65535), ((l2 += (d2 += r2 + a2) >>> 16) + (t2 + s2) & 65535) << 16 | (d2 &= 65535), this.unsigned);
        }, e.subtract = function(e2) {
          return i(e2) || (e2 = p(e2)), this.add(e2.neg());
        }, e.sub = e.subtract, e.multiply = function(e2) {
          if (this.isZero())
            return _;
          if (i(e2) || (e2 = p(e2)), r)
            return c(r.mul(this.low, this.high, e2.low, e2.high), r.get_high(), this.unsigned);
          if (e2.isZero())
            return _;
          if (this.eq(I))
            return e2.isOdd() ? I : _;
          if (e2.eq(I))
            return this.isOdd() ? I : _;
          if (this.isNegative())
            return e2.isNegative() ? this.neg().mul(e2.neg()) : this.neg().mul(e2).neg();
          if (e2.isNegative())
            return this.mul(e2.neg()).neg();
          if (this.lt(m) && e2.lt(m))
            return u(this.toNumber() * e2.toNumber(), this.unsigned);
          var t2 = this.high >>> 16, n2 = 65535 & this.high, o2 = this.low >>> 16, s2 = 65535 & this.low, a2 = e2.high >>> 16, l2 = 65535 & e2.high, d2 = e2.low >>> 16, h2 = 0, f2 = 0, g2 = 0, b2 = (b2 = 0) + ((f2 = f2 + ((g2 += s2 * (e2 = 65535 & e2.low)) >>> 16) + o2 * e2) >>> 16) + ((f2 = (65535 & f2) + s2 * d2) >>> 16);
          return c((f2 &= 65535) << 16 | (g2 &= 65535), ((h2 += (b2 += n2 * e2) >>> 16) + ((b2 = (65535 & b2) + o2 * d2) >>> 16) + ((b2 = (65535 & b2) + s2 * l2) >>> 16) + (t2 * e2 + n2 * d2 + o2 * l2 + s2 * a2) & 65535) << 16 | (b2 &= 65535), this.unsigned);
        }, e.mul = e.multiply, e.divide = function(e2) {
          if ((e2 = i(e2) ? e2 : p(e2)).isZero())
            throw Error("division by zero");
          var t2, n2, o2;
          if (r)
            return this.unsigned || -2147483648 !== this.high || -1 !== e2.low || -1 !== e2.high ? c((this.unsigned ? r.div_u : r.div_s)(this.low, this.high, e2.low, e2.high), r.get_high(), this.unsigned) : this;
          if (this.isZero())
            return this.unsigned ? b : _;
          if (this.unsigned) {
            if ((e2 = e2.unsigned ? e2 : e2.toUnsigned()).gt(this))
              return b;
            if (e2.gt(this.shru(1)))
              return y;
            n2 = b;
          } else {
            if (this.eq(I))
              return e2.eq(v) || e2.eq(M) ? I : e2.eq(I) ? v : (o2 = this.shr(1).div(e2).shl(1)).eq(_) ? e2.isNegative() ? v : M : (t2 = this.sub(e2.mul(o2)), o2.add(t2.div(e2)));
            if (e2.eq(I))
              return this.unsigned ? b : _;
            if (this.isNegative())
              return e2.isNegative() ? this.neg().div(e2.neg()) : this.neg().div(e2).neg();
            if (e2.isNegative())
              return this.div(e2.neg()).neg();
            n2 = _;
          }
          for (t2 = this; t2.gte(e2); ) {
            o2 = Math.max(1, Math.floor(t2.toNumber() / e2.toNumber()));
            for (var s2 = Math.ceil(Math.log(o2) / Math.LN2), a2 = s2 <= 48 ? 1 : l(2, s2 - 48), d2 = u(o2), h2 = d2.mul(e2); h2.isNegative() || h2.gt(t2); )
              h2 = (d2 = u(o2 -= a2, this.unsigned)).mul(e2);
            d2.isZero() && (d2 = v), n2 = n2.add(d2), t2 = t2.sub(h2);
          }
          return n2;
        }, e.div = e.divide, e.modulo = function(e2) {
          return i(e2) || (e2 = p(e2)), r ? c((this.unsigned ? r.rem_u : r.rem_s)(this.low, this.high, e2.low, e2.high), r.get_high(), this.unsigned) : this.sub(this.div(e2).mul(e2));
        }, e.mod = e.modulo, e.rem = e.modulo, e.not = function() {
          return c(~this.low, ~this.high, this.unsigned);
        }, e.and = function(e2) {
          return i(e2) || (e2 = p(e2)), c(this.low & e2.low, this.high & e2.high, this.unsigned);
        }, e.or = function(e2) {
          return i(e2) || (e2 = p(e2)), c(this.low | e2.low, this.high | e2.high, this.unsigned);
        }, e.xor = function(e2) {
          return i(e2) || (e2 = p(e2)), c(this.low ^ e2.low, this.high ^ e2.high, this.unsigned);
        }, e.shiftLeft = function(e2) {
          return i(e2) && (e2 = e2.toInt()), 0 == (e2 &= 63) ? this : e2 < 32 ? c(this.low << e2, this.high << e2 | this.low >>> 32 - e2, this.unsigned) : c(0, this.low << e2 - 32, this.unsigned);
        }, e.shl = e.shiftLeft, e.shiftRight = function(e2) {
          return i(e2) && (e2 = e2.toInt()), 0 == (e2 &= 63) ? this : e2 < 32 ? c(this.low >>> e2 | this.high << 32 - e2, this.high >> e2, this.unsigned) : c(this.high >> e2 - 32, 0 <= this.high ? 0 : -1, this.unsigned);
        }, e.shr = e.shiftRight, e.shiftRightUnsigned = function(e2) {
          var t2;
          return i(e2) && (e2 = e2.toInt()), 0 == (e2 &= 63) ? this : (t2 = this.high, e2 < 32 ? c(this.low >>> e2 | t2 << 32 - e2, t2 >>> e2, this.unsigned) : c(32 === e2 ? t2 : t2 >>> e2 - 32, 0, this.unsigned));
        }, e.shru = e.shiftRightUnsigned, e.shr_u = e.shiftRightUnsigned, e.toSigned = function() {
          return this.unsigned ? c(this.low, this.high, false) : this;
        }, e.toUnsigned = function() {
          return this.unsigned ? this : c(this.low, this.high, true);
        }, e.toBytes = function(e2) {
          return e2 ? this.toBytesLE() : this.toBytesBE();
        }, e.toBytesLE = function() {
          var e2 = this.high, t2 = this.low;
          return [255 & t2, t2 >>> 8 & 255, t2 >>> 16 & 255, t2 >>> 24, 255 & e2, e2 >>> 8 & 255, e2 >>> 16 & 255, e2 >>> 24];
        }, e.toBytesBE = function() {
          var e2 = this.high, t2 = this.low;
          return [e2 >>> 24, e2 >>> 16 & 255, e2 >>> 8 & 255, 255 & e2, t2 >>> 24, t2 >>> 16 & 255, t2 >>> 8 & 255, 255 & t2];
        }, n.fromBytes = function(e2, t2, r2) {
          return r2 ? n.fromBytesLE(e2, t2) : n.fromBytesBE(e2, t2);
        }, n.fromBytesLE = function(e2, t2) {
          return new n(e2[0] | e2[1] << 8 | e2[2] << 16 | e2[3] << 24, e2[4] | e2[5] << 8 | e2[6] << 16 | e2[7] << 24, t2);
        }, n.fromBytesBE = function(e2, t2) {
          return new n(e2[4] << 24 | e2[5] << 16 | e2[6] << 8 | e2[7], e2[0] << 24 | e2[1] << 16 | e2[2] << 8 | e2[3], t2);
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "b", function() {
          return i;
        }), r.d(t, "a", function() {
          return o;
        }), r.d(t, "g", function() {
          return s;
        }), r.d(t, "d", function() {
          return a;
        }), r.d(t, "f", function() {
          return c;
        }), r.d(t, "e", function() {
          return l;
        }), r.d(t, "c", function() {
          return h;
        });
        var n, i = { importantLevel: 0, reportSize: 2e3, reportNum: 20, bps: 16e3, netTimeout: 3 }, o = { totalAvailCache: 102400, cacheMaxSize: 2e4, cacheDelPer: 0.2 }, s = (n = 1, function() {
          return n++;
        }), a = (u.prototype.isEmpty = function() {
          return 0 == this.items.length;
        }, u.prototype.enqueue = function(e2) {
          this.items.push(e2);
        }, u.prototype.dequeue = function() {
          return this.items.shift();
        }, u.prototype.front = function() {
          return this.isEmpty() ? "No elements in Queue" : this.items[0];
        }, u.prototype.size = function() {
          return this.items.length;
        }, u.prototype.clear = function() {
          this.items = [];
        }, u);
        function u() {
          this.items = [], this.items = [];
        }
        var c = { TIMEOUT: { code: 100001, msg: "network timeout" }, DATAEXIST: { code: 100002, msg: "data exist" } }, l = -1, d = (Object.defineProperty(p.prototype, "id", { get: function() {
          return this._id || null;
        }, set: function(e2) {
          this._id = e2;
        }, enumerable: false, configurable: true }), Object.defineProperty(p.prototype, "data", { get: function() {
          return this._data;
        }, set: function(e2) {
          this._data = e2;
        }, enumerable: false, configurable: true }), p.prototype.hasNext = function() {
          return this.next && this.next.id;
        }, p.prototype.hasPrev = function() {
          return this.prev && this.prev.id;
        }, p);
        function p(e2, t2) {
          void 0 === e2 && (e2 = null), void 0 === t2 && (t2 = null), this.next = null, this.prev = null, this._id = e2, this._data = t2;
        }
        f.prototype.insertBefore = function(e2, t2) {
          return (t2 = new d(this._idCounter, t2)).next = e2, t2.prev = e2.prev, e2.prev && (e2.prev.next = t2), e2.prev = t2, ++this._idCounter, ++this._numNodes, t2;
        }, f.prototype.addLast = function(e2) {
          return this.insertBefore(this.end, e2);
        }, f.prototype.add = function(e2) {
          return this.addLast(e2);
        }, f.prototype.getFirst = function() {
          return 0 === this._numNodes ? null : this.start.next;
        }, f.prototype.getLast = function() {
          return 0 === this._numNodes ? null : this.end.prev;
        }, f.prototype.size = function() {
          return this._numNodes;
        }, f.prototype.getFromFirst = function(e2) {
          var t2 = 0, r2 = this.start.next;
          if (0 <= e2)
            for (; t2 < e2 && null !== r2; )
              r2 = r2.next, ++t2;
          else
            r2 = null;
          if (null === r2)
            throw "Index out of bounds.";
          return r2;
        }, f.prototype.get = function(e2) {
          return 0 === e2 ? this.getFirst() : e2 === this._numNodes - 1 ? this.getLast() : this.getFromFirst(e2);
        }, f.prototype.remove = function(e2) {
          return e2.prev && (e2.prev.next = e2.next), e2.next && (e2.next.prev = e2.prev), --this._numNodes, e2;
        }, f.prototype.removeFirst = function() {
          var e2 = null;
          return 0 < this._numNodes && this.start.next ? this.remove(this.start.next) : e2;
        }, f.prototype.removeLast = function() {
          var e2 = null;
          return 0 < this._numNodes && this.end.prev ? this.remove(this.end.prev) : e2;
        }, f.prototype.removeAll = function() {
          this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0;
        }, f.prototype.each = function(e2) {
          for (var t2 = this.start; t2.hasNext(); )
            e2(t2 = t2.next);
        }, f.prototype.find = function(e2) {
          for (var t2 = this.start, r2 = false, n2 = null; t2.hasNext() && !r2; )
            e2(t2 = t2.next) && (n2 = t2, r2 = true);
          return n2;
        }, f.prototype.map = function(e2) {
          for (var t2 = this.start, r2 = []; t2.hasNext(); )
            e2(t2 = t2.next) && r2.push(t2);
          return r2;
        }, f.prototype.push = function(e2) {
          return this.addLast(e2);
        }, f.prototype.unshift = function(e2) {
          0 < this._numNodes ? this.insertBefore(this.start.next, e2) : this.insertBefore(this.end, e2);
        }, f.prototype.pop = function() {
          return this.removeLast();
        }, f.prototype.shift = function() {
          return this.removeFirst();
        };
        var h = f;
        function f() {
          this.start = new d(), this.end = new d(), this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null;
        }
      }, function(e, t, r) {
        (function(t2) {
          e.exports = function(e2) {
            var n;
            if ("undefined" != typeof window && window.crypto && (n = window.crypto), "undefined" != typeof self && self.crypto && (n = self.crypto), !(n = !(n = !(n = "undefined" != typeof globalThis && globalThis.crypto ? globalThis.crypto : n) && "undefined" != typeof window && window.msCrypto ? window.msCrypto : n) && void 0 !== t2 && t2.crypto ? t2.crypto : n))
              try {
                n = r(95);
              } catch (s2) {
              }
            var i = Object.create || function(e3) {
              return o.prototype = e3, e3 = new o(), o.prototype = null, e3;
            };
            function o() {
            }
            var s = {}, a = s.lib = {}, u = a.Base = { extend: function(e3) {
              var t3 = i(this);
              return e3 && t3.mixIn(e3), t3.hasOwnProperty("init") && this.init !== t3.init || (t3.init = function() {
                t3.$super.init.apply(this, arguments);
              }), (t3.init.prototype = t3).$super = this, t3;
            }, create: function() {
              var e3 = this.extend();
              return e3.init.apply(e3, arguments), e3;
            }, init: function() {
            }, mixIn: function(e3) {
              for (var t3 in e3)
                e3.hasOwnProperty(t3) && (this[t3] = e3[t3]);
              e3.hasOwnProperty("toString") && (this.toString = e3.toString);
            }, clone: function() {
              return this.init.prototype.extend(this);
            } }, c = a.WordArray = u.extend({ init: function(e3, t3) {
              e3 = this.words = e3 || [], this.sigBytes = null != t3 ? t3 : 4 * e3.length;
            }, toString: function(e3) {
              return (e3 || d).stringify(this);
            }, concat: function(e3) {
              var t3 = this.words, r2 = e3.words, n2 = this.sigBytes, i2 = e3.sigBytes;
              if (this.clamp(), n2 % 4)
                for (var o2 = 0; o2 < i2; o2++) {
                  var s2 = r2[o2 >>> 2] >>> 24 - o2 % 4 * 8 & 255;
                  t3[n2 + o2 >>> 2] |= s2 << 24 - (n2 + o2) % 4 * 8;
                }
              else
                for (var a2 = 0; a2 < i2; a2 += 4)
                  t3[n2 + a2 >>> 2] = r2[a2 >>> 2];
              return this.sigBytes += i2, this;
            }, clamp: function() {
              var t3 = this.words, r2 = this.sigBytes;
              t3[r2 >>> 2] &= 4294967295 << 32 - r2 % 4 * 8, t3.length = e2.ceil(r2 / 4);
            }, clone: function() {
              var e3 = u.clone.call(this);
              return e3.words = this.words.slice(0), e3;
            }, random: function(e3) {
              for (var t3 = [], r2 = 0; r2 < e3; r2 += 4)
                t3.push(function() {
                  if (n) {
                    if ("function" == typeof n.getRandomValues)
                      try {
                        return n.getRandomValues(new Uint32Array(1))[0];
                      } catch (e4) {
                      }
                    if ("function" == typeof n.randomBytes)
                      try {
                        return n.randomBytes(4).readInt32LE();
                      } catch (e4) {
                      }
                  }
                  throw new Error("Native crypto module could not be used to get secure random number.");
                }());
              return new c.init(t3, e3);
            } }), l = s.enc = {}, d = l.Hex = { stringify: function(e3) {
              for (var t3 = e3.words, r2 = e3.sigBytes, n2 = [], i2 = 0; i2 < r2; i2++) {
                var o2 = t3[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255;
                n2.push((o2 >>> 4).toString(16)), n2.push((15 & o2).toString(16));
              }
              return n2.join("");
            }, parse: function(e3) {
              for (var t3 = e3.length, r2 = [], n2 = 0; n2 < t3; n2 += 2)
                r2[n2 >>> 3] |= parseInt(e3.substr(n2, 2), 16) << 24 - n2 % 8 * 4;
              return new c.init(r2, t3 / 2);
            } }, p = l.Latin1 = { stringify: function(e3) {
              for (var t3 = e3.words, r2 = e3.sigBytes, n2 = [], i2 = 0; i2 < r2; i2++) {
                var o2 = t3[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255;
                n2.push(String.fromCharCode(o2));
              }
              return n2.join("");
            }, parse: function(e3) {
              for (var t3 = e3.length, r2 = [], n2 = 0; n2 < t3; n2++)
                r2[n2 >>> 2] |= (255 & e3.charCodeAt(n2)) << 24 - n2 % 4 * 8;
              return new c.init(r2, t3);
            } }, h = l.Utf8 = { stringify: function(e3) {
              try {
                return decodeURIComponent(escape(p.stringify(e3)));
              } catch (e4) {
                throw new Error("Malformed UTF-8 data");
              }
            }, parse: function(e3) {
              return p.parse(unescape(encodeURIComponent(e3)));
            } }, f = a.BufferedBlockAlgorithm = u.extend({ reset: function() {
              this._data = new c.init(), this._nDataBytes = 0;
            }, _append: function(e3) {
              "string" == typeof e3 && (e3 = h.parse(e3)), this._data.concat(e3), this._nDataBytes += e3.sigBytes;
            }, _process: function(t3) {
              var r2, n2 = this._data, i2 = n2.words, o2 = n2.sigBytes, s2 = this.blockSize, a2 = o2 / (4 * s2), u2 = (a2 = t3 ? e2.ceil(a2) : e2.max((0 | a2) - this._minBufferSize, 0)) * s2;
              t3 = e2.min(4 * u2, o2);
              if (u2) {
                for (var l2 = 0; l2 < u2; l2 += s2)
                  this._doProcessBlock(i2, l2);
                r2 = i2.splice(0, u2), n2.sigBytes -= t3;
              }
              return new c.init(r2, t3);
            }, clone: function() {
              var e3 = u.clone.call(this);
              return e3._data = this._data.clone(), e3;
            }, _minBufferSize: 0 }), g = (a.Hasher = f.extend({ cfg: u.extend(), init: function(e3) {
              this.cfg = this.cfg.extend(e3), this.reset();
            }, reset: function() {
              f.reset.call(this), this._doReset();
            }, update: function(e3) {
              return this._append(e3), this._process(), this;
            }, finalize: function(e3) {
              return e3 && this._append(e3), this._doFinalize();
            }, blockSize: 16, _createHelper: function(e3) {
              return function(t3, r2) {
                return new e3.init(r2).finalize(t3);
              };
            }, _createHmacHelper: function(e3) {
              return function(t3, r2) {
                return new g.HMAC.init(e3, r2).finalize(t3);
              };
            } }), s.algo = {});
            return s;
          }(Math);
        }).call(this, r(11));
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return E;
        });
        r = "function" == typeof atob, t = "function" == typeof btoa;
        var n = "function" == typeof Buffer;
        const i = "function" == typeof TextDecoder ? new TextDecoder() : void 0, o = "function" == typeof TextEncoder ? new TextEncoder() : void 0, s = Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="), a = ((e2) => {
          let t2 = {};
          return e2.forEach((e3, r2) => t2[e3] = r2), t2;
        })(s), u = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/, c = String.fromCharCode.bind(String), l = "function" == typeof Uint8Array.from ? Uint8Array.from.bind(Uint8Array) : (e2, t2 = (e3) => e3) => new Uint8Array(Array.prototype.slice.call(e2, 0).map(t2)), d = (e2) => e2.replace(/=/g, "").replace(/[+\/]/g, (e3) => "+" == e3 ? "-" : "_"), p = (e2) => e2.replace(/[^A-Za-z0-9\+\/]/g, "");
        var h = (e2) => {
          let t2, r2, n2, i2, o2 = "";
          var a2 = e2.length % 3;
          for (let a3 = 0; a3 < e2.length; ) {
            if (255 < (r2 = e2.charCodeAt(a3++)) || 255 < (n2 = e2.charCodeAt(a3++)) || 255 < (i2 = e2.charCodeAt(a3++)))
              throw new TypeError("invalid character found");
            t2 = r2 << 16 | n2 << 8 | i2, o2 += s[t2 >> 18 & 63] + s[t2 >> 12 & 63] + s[t2 >> 6 & 63] + s[63 & t2];
          }
          return a2 ? o2.slice(0, a2 - 3) + "===".substring(a2) : o2;
        };
        const f = t ? (e2) => btoa(e2) : n ? (e2) => Buffer.from(e2, "binary").toString("base64") : h, g = n ? (e2) => Buffer.from(e2).toString("base64") : (e2) => {
          let t2 = [];
          for (let r2 = 0, n2 = e2.length; r2 < n2; r2 += 4096)
            t2.push(c.apply(null, e2.subarray(r2, r2 + 4096)));
          return f(t2.join(""));
        }, m = (e2, t2 = false) => t2 ? d(g(e2)) : g(e2), _ = (e2) => {
          var t2;
          return e2.length < 2 ? (t2 = e2.charCodeAt(0)) < 128 ? e2 : t2 < 2048 ? c(192 | t2 >>> 6) + c(128 | 63 & t2) : c(224 | t2 >>> 12 & 15) + c(128 | t2 >>> 6 & 63) + c(128 | 63 & t2) : (t2 = 65536 + 1024 * (e2.charCodeAt(0) - 55296) + (e2.charCodeAt(1) - 56320), c(240 | t2 >>> 18 & 7) + c(128 | t2 >>> 12 & 63) + c(128 | t2 >>> 6 & 63) + c(128 | 63 & t2));
        }, b = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, v = (e2) => e2.replace(b, _), y = n ? (e2) => Buffer.from(e2, "utf8").toString("base64") : o ? (e2) => g(o.encode(e2)) : (e2) => f(v(e2)), M = (e2, t2 = false) => t2 ? d(y(e2)) : y(e2);
        t = (e2) => M(e2, true);
        const k = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g, C = (e2) => {
          switch (e2.length) {
            case 4:
              var t2 = ((7 & e2.charCodeAt(0)) << 18 | (63 & e2.charCodeAt(1)) << 12 | (63 & e2.charCodeAt(2)) << 6 | 63 & e2.charCodeAt(3)) - 65536;
              return c(55296 + (t2 >>> 10)) + c(56320 + (1023 & t2));
            case 3:
              return c((15 & e2.charCodeAt(0)) << 12 | (63 & e2.charCodeAt(1)) << 6 | 63 & e2.charCodeAt(2));
            default:
              return c((31 & e2.charCodeAt(0)) << 6 | 63 & e2.charCodeAt(1));
          }
        }, I = (e2) => e2.replace(k, C);
        var S = (e2) => {
          if (e2 = e2.replace(/\s+/g, ""), !u.test(e2))
            throw new TypeError("malformed base64.");
          e2 += "==".slice(2 - (3 & e2.length));
          let t2, r2, n2, i2 = "";
          for (let o2 = 0; o2 < e2.length; )
            t2 = a[e2.charAt(o2++)] << 18 | a[e2.charAt(o2++)] << 12 | (r2 = a[e2.charAt(o2++)]) << 6 | (n2 = a[e2.charAt(o2++)]), i2 += 64 === r2 ? c(t2 >> 16 & 255) : 64 === n2 ? c(t2 >> 16 & 255, t2 >> 8 & 255) : c(t2 >> 16 & 255, t2 >> 8 & 255, 255 & t2);
          return i2;
        };
        const D = r ? (e2) => atob(p(e2)) : n ? (e2) => Buffer.from(e2, "base64").toString("binary") : S, q = n ? (e2) => l(Buffer.from(e2, "base64")) : (e2) => l(D(e2), (e3) => e3.charCodeAt(0)), w = (e2) => q(R(e2)), A = n ? (e2) => Buffer.from(e2, "base64").toString("utf8") : i ? (e2) => i.decode(q(e2)) : (e2) => I(D(e2)), R = (e2) => p(e2.replace(/[-_]/g, (e3) => "-" == e3 ? "+" : "/")), x = (e2) => A(R(e2));
        function T() {
          var e2 = (e3, t2) => Object.defineProperty(String.prototype, e3, G(t2));
          e2("fromBase64", function() {
            return x(this);
          }), e2("toBase64", function(e3) {
            return M(this, e3);
          }), e2("toBase64URI", function() {
            return M(this, true);
          }), e2("toBase64URL", function() {
            return M(this, true);
          }), e2("toUint8Array", function() {
            return w(this);
          });
        }
        function L() {
          var e2 = (e3, t2) => Object.defineProperty(Uint8Array.prototype, e3, G(t2));
          e2("toBase64", function(e3) {
            return m(this, e3);
          }), e2("toBase64URI", function() {
            return m(this, true);
          }), e2("toBase64URL", function() {
            return m(this, true);
          });
        }
        const G = (e2) => ({ value: e2, enumerable: false, writable: true, configurable: true }), E = { version: "3.7.2", VERSION: "3.7.2", atob: D, atobPolyfill: S, btoa: f, btoaPolyfill: h, fromBase64: x, toBase64: M, encode: M, encodeURI: t, encodeURL: t, utob: v, btou: I, decode: x, isValid: (e2) => "string" == typeof e2 && (e2 = e2.replace(/\s+/g, "").replace(/={0,2}$/, ""), !/[^\s0-9a-zA-Z\+/]/.test(e2) || !/[^\s0-9a-zA-Z\-_]/.test(e2)), fromUint8Array: m, toUint8Array: w, extendString: T, extendUint8Array: L, extendBuiltins: () => {
          T(), L();
        } };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        }), r.d(t, "b", function() {
          return o;
        });
        var n, i = { DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, REPORT: 99, DISABLE: 100, debug: 0, info: 1, warn: 2, error: 3, report: 99, disable: 100 }, o = (n = 1, function() {
          return n++;
        });
      }, function(e, t, r) {
        e.exports = function(e2) {
          for (var t2 = Math, r2 = e2, n = r2.lib, i = n.WordArray, o = n.Hasher, s = r2.algo, a = [], u = 0; u < 64; u++)
            a[u] = 4294967296 * t2.abs(t2.sin(u + 1)) | 0;
          var c = s.MD5 = o.extend({ _doReset: function() {
            this._hash = new i.init([1732584193, 4023233417, 2562383102, 271733878]);
          }, _doProcessBlock: function(e3, t3) {
            for (var r3 = 0; r3 < 16; r3++) {
              var n2 = t3 + r3, i2 = e3[n2];
              e3[n2] = 16711935 & (i2 << 8 | i2 >>> 24) | 4278255360 & (i2 << 24 | i2 >>> 8);
            }
            var o2 = this._hash.words, s2 = e3[t3 + 0], u2 = e3[t3 + 1], c2 = e3[t3 + 2], f = e3[t3 + 3], g = e3[t3 + 4], m = e3[t3 + 5], _ = e3[t3 + 6], b = e3[t3 + 7], v = e3[t3 + 8], y = e3[t3 + 9], M = e3[t3 + 10], k = e3[t3 + 11], C = e3[t3 + 12], I = e3[t3 + 13], S = e3[t3 + 14], D = e3[t3 + 15], q = o2[0], w = o2[1], A = o2[2], R = o2[3];
            q = l(q, w, A, R, s2, 7, a[0]), R = l(R, q, w, A, u2, 12, a[1]), A = l(A, R, q, w, c2, 17, a[2]), w = l(w, A, R, q, f, 22, a[3]), q = l(q, w, A, R, g, 7, a[4]), R = l(R, q, w, A, m, 12, a[5]), A = l(A, R, q, w, _, 17, a[6]), w = l(w, A, R, q, b, 22, a[7]), q = l(q, w, A, R, v, 7, a[8]), R = l(R, q, w, A, y, 12, a[9]), A = l(A, R, q, w, M, 17, a[10]), w = l(w, A, R, q, k, 22, a[11]), q = l(q, w, A, R, C, 7, a[12]), R = l(R, q, w, A, I, 12, a[13]), A = l(A, R, q, w, S, 17, a[14]), q = d(q, w = l(w, A, R, q, D, 22, a[15]), A, R, u2, 5, a[16]), R = d(R, q, w, A, _, 9, a[17]), A = d(A, R, q, w, k, 14, a[18]), w = d(w, A, R, q, s2, 20, a[19]), q = d(q, w, A, R, m, 5, a[20]), R = d(R, q, w, A, M, 9, a[21]), A = d(A, R, q, w, D, 14, a[22]), w = d(w, A, R, q, g, 20, a[23]), q = d(q, w, A, R, y, 5, a[24]), R = d(R, q, w, A, S, 9, a[25]), A = d(A, R, q, w, f, 14, a[26]), w = d(w, A, R, q, v, 20, a[27]), q = d(q, w, A, R, I, 5, a[28]), R = d(R, q, w, A, c2, 9, a[29]), A = d(A, R, q, w, b, 14, a[30]), q = p(q, w = d(w, A, R, q, C, 20, a[31]), A, R, m, 4, a[32]), R = p(R, q, w, A, v, 11, a[33]), A = p(A, R, q, w, k, 16, a[34]), w = p(w, A, R, q, S, 23, a[35]), q = p(q, w, A, R, u2, 4, a[36]), R = p(R, q, w, A, g, 11, a[37]), A = p(A, R, q, w, b, 16, a[38]), w = p(w, A, R, q, M, 23, a[39]), q = p(q, w, A, R, I, 4, a[40]), R = p(R, q, w, A, s2, 11, a[41]), A = p(A, R, q, w, f, 16, a[42]), w = p(w, A, R, q, _, 23, a[43]), q = p(q, w, A, R, y, 4, a[44]), R = p(R, q, w, A, C, 11, a[45]), A = p(A, R, q, w, D, 16, a[46]), q = h(q, w = p(w, A, R, q, c2, 23, a[47]), A, R, s2, 6, a[48]), R = h(R, q, w, A, b, 10, a[49]), A = h(A, R, q, w, S, 15, a[50]), w = h(w, A, R, q, m, 21, a[51]), q = h(q, w, A, R, C, 6, a[52]), R = h(R, q, w, A, f, 10, a[53]), A = h(A, R, q, w, M, 15, a[54]), w = h(w, A, R, q, u2, 21, a[55]), q = h(q, w, A, R, v, 6, a[56]), R = h(R, q, w, A, D, 10, a[57]), A = h(A, R, q, w, _, 15, a[58]), w = h(w, A, R, q, I, 21, a[59]), q = h(q, w, A, R, g, 6, a[60]), R = h(R, q, w, A, k, 10, a[61]), A = h(A, R, q, w, c2, 15, a[62]), w = h(w, A, R, q, y, 21, a[63]), o2[0] = o2[0] + q | 0, o2[1] = o2[1] + w | 0, o2[2] = o2[2] + A | 0, o2[3] = o2[3] + R | 0;
          }, _doFinalize: function() {
            var e3 = this._data, r3 = e3.words, n2 = 8 * this._nDataBytes, i2 = 8 * e3.sigBytes;
            r3[i2 >>> 5] |= 128 << 24 - i2 % 32;
            var o2 = t2.floor(n2 / 4294967296), s2 = n2;
            r3[15 + (i2 + 64 >>> 9 << 4)] = 16711935 & (o2 << 8 | o2 >>> 24) | 4278255360 & (o2 << 24 | o2 >>> 8), r3[14 + (i2 + 64 >>> 9 << 4)] = 16711935 & (s2 << 8 | s2 >>> 24) | 4278255360 & (s2 << 24 | s2 >>> 8), e3.sigBytes = 4 * (r3.length + 1), this._process();
            for (var a2 = this._hash, u2 = a2.words, c2 = 0; c2 < 4; c2++) {
              var l2 = u2[c2];
              u2[c2] = 16711935 & (l2 << 8 | l2 >>> 24) | 4278255360 & (l2 << 24 | l2 >>> 8);
            }
            return a2;
          }, clone: function() {
            var e3 = o.clone.call(this);
            return e3._hash = this._hash.clone(), e3;
          } });
          function l(e3, t3, r3, n2, i2, o2, s2) {
            var a2 = e3 + (t3 & r3 | ~t3 & n2) + i2 + s2;
            return (a2 << o2 | a2 >>> 32 - o2) + t3;
          }
          function d(e3, t3, r3, n2, i2, o2, s2) {
            var a2 = e3 + (t3 & n2 | r3 & ~n2) + i2 + s2;
            return (a2 << o2 | a2 >>> 32 - o2) + t3;
          }
          function p(e3, t3, r3, n2, i2, o2, s2) {
            var a2 = e3 + (t3 ^ r3 ^ n2) + i2 + s2;
            return (a2 << o2 | a2 >>> 32 - o2) + t3;
          }
          function h(e3, t3, r3, n2, i2, o2, s2) {
            var a2 = e3 + (r3 ^ (t3 | ~n2)) + i2 + s2;
            return (a2 << o2 | a2 >>> 32 - o2) + t3;
          }
          return r2.MD5 = o._createHelper(c), r2.HmacMD5 = o._createHmacHelper(c), e2.MD5;
        }(r(5));
      }, function(e, t, r) {
        "use strict";
        e.exports = r(101);
      }, function(e, t, r) {
        "use strict";
        (function(e2) {
          var n = t;
          function i(e3, t2, r2) {
            for (var n2 = Object.keys(t2), i2 = 0; i2 < n2.length; ++i2)
              void 0 !== e3[n2[i2]] && r2 || (e3[n2[i2]] = t2[n2[i2]]);
            return e3;
          }
          function o(e3) {
            function t2(e4, r2) {
              if (!(this instanceof t2))
                return new t2(e4, r2);
              Object.defineProperty(this, "message", { get: function() {
                return e4;
              } }), Error.captureStackTrace ? Error.captureStackTrace(this, t2) : Object.defineProperty(this, "stack", { value: new Error().stack || "" }), r2 && i(this, r2);
            }
            return (t2.prototype = Object.create(Error.prototype)).constructor = t2, Object.defineProperty(t2.prototype, "name", { get: function() {
              return e3;
            } }), t2.prototype.toString = function() {
              return this.name + ": " + this.message;
            }, t2;
          }
          n.asPromise = r(102), n.base64 = r(103), n.EventEmitter = r(104), n.float = r(105), n.inquire = r(106), n.utf8 = r(107), n.pool = r(108), n.LongBits = r(109), n.isNode = Boolean(void 0 !== e2 && e2 && e2.process && e2.process.versions && e2.process.versions.node), n.global = n.isNode && e2 || "undefined" != typeof window && window || "undefined" != typeof self && self || this, n.emptyArray = Object.freeze ? Object.freeze([]) : [], n.emptyObject = Object.freeze ? Object.freeze({}) : {}, n.isInteger = Number.isInteger || function(e3) {
            return "number" == typeof e3 && isFinite(e3) && Math.floor(e3) === e3;
          }, n.isString = function(e3) {
            return "string" == typeof e3 || e3 instanceof String;
          }, n.isObject = function(e3) {
            return e3 && "object" == typeof e3;
          }, n.isset = n.isSet = function(e3, t2) {
            var r2 = e3[t2];
            return !(null == r2 || !e3.hasOwnProperty(t2)) && ("object" != typeof r2 || 0 < (Array.isArray(r2) ? r2 : Object.keys(r2)).length);
          }, n.Buffer = function() {
            try {
              var e3 = n.inquire("buffer").Buffer;
              return e3.prototype.utf8Write ? e3 : null;
            } catch (e4) {
              return null;
            }
          }(), n._Buffer_from = null, n._Buffer_allocUnsafe = null, n.newBuffer = function(e3) {
            return "number" == typeof e3 ? n.Buffer ? n._Buffer_allocUnsafe(e3) : new n.Array(e3) : n.Buffer ? n._Buffer_from(e3) : "undefined" == typeof Uint8Array ? e3 : new Uint8Array(e3);
          }, n.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, n.Long = n.global.dcodeIO && n.global.dcodeIO.Long || n.global.Long || n.inquire("long"), n.key2Re = /^true|false|0|1$/, n.key32Re = /^-?(?:0|[1-9][0-9]*)$/, n.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, n.longToHash = function(e3) {
            return e3 ? n.LongBits.from(e3).toHash() : n.LongBits.zeroHash;
          }, n.longFromHash = function(e3, t2) {
            return e3 = n.LongBits.fromHash(e3), n.Long ? n.Long.fromBits(e3.lo, e3.hi, t2) : e3.toNumber(Boolean(t2));
          }, n.merge = i, n.lcFirst = function(e3) {
            return e3.charAt(0).toLowerCase() + e3.substring(1);
          }, n.newError = o, n.ProtocolError = o("ProtocolError"), n.oneOfGetter = function(e3) {
            for (var t2 = {}, r2 = 0; r2 < e3.length; ++r2)
              t2[e3[r2]] = 1;
            return function() {
              for (var e4 = Object.keys(this), r3 = e4.length - 1; -1 < r3; --r3)
                if (1 === t2[e4[r3]] && void 0 !== this[e4[r3]] && null !== this[e4[r3]])
                  return e4[r3];
            };
          }, n.oneOfSetter = function(e3) {
            return function(t2) {
              for (var r2 = 0; r2 < e3.length; ++r2)
                e3[r2] !== t2 && delete this[e3[r2]];
            };
          }, n.toJSONOptions = { longs: String, enums: String, bytes: String, json: true }, n._configure = function() {
            var e3 = n.Buffer;
            e3 ? (n._Buffer_from = e3.from !== Uint8Array.from && e3.from || function(t2, r2) {
              return new e3(t2, r2);
            }, n._Buffer_allocUnsafe = e3.allocUnsafe || function(t2) {
              return new e3(t2);
            }) : n._Buffer_from = n._Buffer_allocUnsafe = null;
          };
        }).call(this, r(11));
      }, function(e, t) {
        var r = /* @__PURE__ */ function() {
          return this;
        }();
        try {
          r = r || new Function("return this")();
        } catch (e2) {
          "object" == typeof window && (r = window);
        }
        e.exports = r;
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        var n = r(2), i = r(1), o = r(0), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, a = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, u = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, c = o.Y.Conversation, l = (d.prototype.destroy = function() {
          this.dbMgr = null, this.connMgr = null, this.eventBus = null, this.logger = null, this.engineConfig = null;
        }, d.prototype.setDBConv = function(e2) {
          Object.assign(e2, this.dbConv), this.dbConv = e2;
        }, d.prototype.sendCommand = function(e2, t2, r2) {
          var n2, a2 = this, u2 = Date.now(), l2 = { time: u2, convID: this.convID, message: s({}, e2) }, d2 = (e2.messageID && e2.orderKey && (e2 = s(s({}, e2), { extendedData: "" })), this.initSendingMessage(e2, t2), e2.receiptStatus = o.cb.None, e2.isMentionAll = false, e2.mentionedUserIDs = [], u2 - this.lastSendTime < this.engineConfig.cloudSetting.qps.send_msg);
          if (e2.type == o.hb.Command && d2)
            return n2 = Object(i.x)(o.t.CommonModuleTriggerSDKFrequencyLimit), d2 = { convID: this.convID, error: n2 }, this.logger.warn(c, o.X.SendMessage, d2), e2.sentStatus = o.fb.Failed, this.emitMessageSentStatusChanged(e2), Promise.reject(n2);
          if (this.lastSendTime = u2, r2 && "function" == typeof r2.onMessageAttached)
            try {
              r2.onMessageAttached(e2);
            } catch (n3) {
            }
          return d2 = u2 - this.lastSendTime < this.engineConfig.cloudSetting.qps.send_barrage_msg, e2.type == o.hb.Barrage && d2 ? new Promise(function(t3) {
            setTimeout(function() {
              e2.sentStatus = o.fb.Success, e2.messageID = e2.localMessageID, e2.timestamp = a2.settings.getRealClientTimestamp(u2), a2.emitMessageSentStatusChanged(e2), a2.logger.info(c, o.X.SendMessage, l2), t3({ message: e2 });
            }, 80 * Math.random() + 50);
          }) : (r2 = e2.message, d2 = { msg_type: e2.type, priority_type: t2.priority, msg: "string" == typeof r2 ? Object(i.k)(r2) : r2, conv_id: this.convID, payload: Object(i.k)(e2.extendedData) }, t2 = s(s({}, this.getAssociatedReqBody()), { conv_id: this.convID, command_msg_info: d2 }), this.connMgr.sendRequest(this.convTypeMap.commandMsgCmd, t2).then(function(t3) {
            if (u2 = a2.settings.getRealClientTimestamp(u2), t3.code)
              return e2.sentStatus = o.fb.Failed, e2.messageID = e2.localMessageID, e2.timestamp = u2, a2.emitMessageSentStatusChanged(e2), r3 = a2.withSendMessageErrorCode(t3), l2.error = r3, a2.logger.warn(c, o.X.SendMessage, l2), Promise.reject(r3);
            var r3 = t3.msg_id;
            t3 = t3.command_svr_info;
            return e2.sentStatus = o.fb.Success, e2.messageID = t3 ? t3.msg_id : r3, e2.timestamp = t3 ? t3.msg_time : u2, a2.emitMessageSentStatusChanged(e2), a2.logger.info(c, o.X.SendMessage, l2), { message: e2 };
          }));
        }, d.prototype.sendMessage = function(e2, t2, r2, n2, u2, l2) {
          var d2 = this, p = Date.now(), h = (m = (l2 = l2 || { time: p, convID: this.convID, message: s({}, e2) }, e2.type >= o.hb.Image && e2.type <= o.hb.Video || e2.type == o.hb.Combine)) ? o.X.SendMediaMessage : o.X.SendMessage;
          if (m || this.initSendingMessage(e2, t2), !r2 && p - this.lastSendTime < this.engineConfig.cloudSetting.qps.send_msg)
            return g = Object(i.x)(o.t.CommonModuleTriggerSDKFrequencyLimit), f = { convID: this.convID, error: g }, this.logger.warn(c, h, f), e2.sentStatus = o.fb.Failed, this.emitMessageSentStatusChanged(e2), Promise.reject(g);
          this.lastSendTime = p;
          var f = Object(i.k)(e2.message), g = (m ? e2.message = "" : this.emitSendingMessage(e2, n2), r2 && (e2.clientSeq = ++this.clientMsgSeq), { msg_type: e2.type, priority_type: t2.priority, msg: f, payload: Object(i.k)(e2.extendedData || ""), has_receipt: t2.hasReceipt && this.convType !== o.r.Room ? 1 : void 0, conv_id: this.convID, msg_client_info: { conv_sid: e2.clientSid, client_msg_seq: e2.clientSeq } }), m = (p = s(s({}, this.getAssociatedReqBody()), { conv_id: this.convID, fetch_peer_user_info: this.convType != o.r.Peer || this.dbConv.conversationName ? void 0 : 1, msg_info: g }), e2.type == o.hb.Custom && (g.sub_msg_type = e2.subType, g.searched_content = e2.searchedContent), e2.isMentionAll && (g.at_all = true), e2.mentionedUserIDs && e2.mentionedUserIDs.length && (g.at = e2.mentionedUserIDs), this.convType != o.r.Room && (g.offline_push = Object(i.g)(t2.pushConfig, t2.isNotifyMentionedUsers)), this.engineConfig.cloudSetting.req_to.send_msg);
          return this.connMgr.sendRequest(this.convTypeMap.textMsgCmd, p, o.j.API, m).then(function(t3) {
            if (111100 == t3.code)
              return d2.dbConv.state = t3.conv_disable && d2.convType == o.r.Peer ? o.q.Disable : o.q.Normal, d2.updateConvWhenSendedMessage(t3), l2.result = d2.saveLocalMessage(e2, o.fb.Success, t3.audit_info), d2.logger.info(c, h, l2), { message: e2 };
            if (6000104 == t3.code)
              return d2.queryMessageStatus([e2], true).then(function(t4) {
                var n4, i2 = (t4 = a(t4, 2))[0];
                if (t4 = t4[1])
                  return r2 && d2.dbMgr.deleteMessageList(d2.convID, d2.convType, [e2]), n4 = t4.conversationSeq, s2 = d2.dbConv.state, d2.dbConv.state = o.q.Normal, d2.saveMessageList([t4], n4, s2, o.eb.Sended), l2.result = n4, d2.logger.info(c, h, l2), Object.assign(e2, t4), { message: e2 };
                var s2 = d2.handleSendMessageFail(e2, i2, h, l2, r2);
                if (r2)
                  throw s2;
                return Promise.reject(s2);
              });
            if (t3.code) {
              var n3 = d2.handleSendMessageFail(e2, t3, h, l2, r2);
              if (r2)
                throw n3;
              return Promise.reject(n3);
            }
            return d2.handleSendMessageSuccess(e2, t3, h, l2, r2);
          });
        }, d.prototype.sendMediaMessage = function(e2, t2, r2, a2) {
          var u2, l2, d2, p, h = this, f = { time: /* @__PURE__ */ new Date(), uploadTime: 0, convID: this.convID, message: s({}, e2) }, g = e2.type >= o.hb.Image && e2.type <= o.hb.Video, m = e2.type == o.hb.Combine ? e2.type : e2.type - 10;
          if (g && e2.isServerMessage && (e2.fileUID = ""), this.initSendingMessage(e2, t2), this.emitSendingMessage(e2, r2), e2.type == o.hb.Combine && (e2.aesKey = e2.aesKey || n.a.getInstance().crypto.generateNonce(), u2 = e2.conversationType, l2 = e2.localMessageID, d2 = e2.conversationID, p = e2.aesKey, e2.combineID = "0-" + u2 + "_" + l2 + "_" + p + "-" + d2), e2.fileDownloadUrl || e2.fileUID)
            return e2.message = this.encodeMediaMsgBody(e2, m), this.sendMessage(e2, t2, false, void 0, a2, f);
          var _ = e2.type == o.hb.Combine ? this.getCombineMessageFile(e2) : e2.fileLocalPath;
          return this.dbMgr.getFileInfo(_).then(function(t3) {
            return e2.fileUID = t3.md5, e2.fileName = e2.fileName || t3.name, e2.fileSize = +e2.fileSize || t3.size || 1, h.saveLocalMessage(e2, o.fb.Sending), t3 = { md5: e2.fileUID, name: e2.fileName, size: e2.fileSize, file_type: m, duration: h.getMediaMessageDuration(e2) }, h.connMgr.sendRequest(o.d.file_upload, t3);
          }).then(function(n2) {
            if (n2.code)
              throw Object(i.x)(o.t.MessageModuleFileServerError, n2.message, n2.code);
            function s2(t3) {
              if (r2 && "function" == typeof r2.onMediaUploadingProgress && g) {
                var n3 = t3.loaded || t3.totalBytesSent || t3.totalBytesWritten || 0;
                t3 = t3.total || t3.totalBytesExpectedToSend || t3.totalBytesExpectedToWrite || 1;
                try {
                  r2.onMediaUploadingProgress(e2, n3, t3);
                } catch (t4) {
                }
              }
            }
            if (s2({ loaded: 0, total: e2.fileSize }), 1 == n2.state)
              return s2({ loaded: e2.fileSize, total: e2.fileSize }), h.fetchFileProcess(e2, t2, m, f, a2);
            var u3 = Date.now(), c2 = { file_size: e2.fileSize, file_type: e2.type, file_env: i.p ? i.p._zim_env : "" };
            return h.dbMgr.uploadFile(n2.upload_req, _, s2).then(function() {
              return c2.time_consumed = Date.now() - u3, h.dataReport.reportSDKEvent("/sdk/file/upload_msg", c2), f.uploadTime = c2.time_consumed, h.fetchFileProcess(e2, t2, m, f, a2);
            }, function(e3) {
              throw c2.time_consumed = Date.now() - u3, c2.error = e3.code, c2.error_message = e3.message, h.dataReport.reportSDKEvent("/sdk/file/upload_msg", c2), e3.code = 0, e3;
            });
          }).catch(function(e3) {
            var t3 = i.p ? i.p._zim_env : "", r3 = e3 ? e3.code : 0, n2 = e3 ? e3.stack || e3.message || e3.errMsg : r3;
            e3 = r3 ? e3 : Object(i.x)(o.t.MessageModuleSendMessageFailed, n2);
            throw f.error = e3, h.logger.warn(c, o.X.SendMediaMessage, f), r3 || (h.dataReport.reportSDKEvent("/sdk/log", { error_message: "API.sendMediaMessage:" + t3 + n2 }), h.logger.upload("sendMediaMessage error", true)), e3;
          });
        }, d.prototype.deleteMessages = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), convID: this.convID, config: t2 };
          if (t2 && t2.isAlsoDeleteServerMessage) {
            if (0 == (t2 = e2.filter(function(e3) {
              return !e3.isUserInserted && !e3.isBroadcastMessage && e3.sentStatus == o.fb.Success;
            })).length)
              return this.deleteLocalMessages(e2, n2);
            var s2 = this.convType == o.r.Peer ? o.d.c2c_del_msg : o.d.group_del_msg;
            t2 = this.convType == o.r.Peer ? { conv_id: this.convID, conv_type: this.convType, msg_ids: t2.map(function(e3) {
              return e3.messageID;
            }) } : { conv_id: this.convID, conv_msg_seq: t2.map(function(e3) {
              return e3.conversationSeq;
            }) };
            return this.connMgr.sendRequest(s2, t2).then(function(t3) {
              return t3.code ? (t3 = Object(i.x)(o.t.ConversationModuleServerError, t3.message, t3.code), n2.error = t3, r2.logger.warn(c, o.X.DeleteMessages, n2), Promise.reject(t3)) : r2.deleteLocalMessages(e2, n2);
            });
          }
          return this.deleteLocalMessages(e2, n2);
        }, d.prototype.deleteAllMessage = function(e2) {
          var t2, r2 = this, n2 = { time: /* @__PURE__ */ new Date(), convID: this.convID, config: e2 };
          return e2 && e2.isAlsoDeleteServerMessage ? (e2 = this.convType == o.r.Peer ? o.d.c2c_del_all_msg : o.d.group_del_all_msg, t2 = { conv_id: this.convID, conv_type: this.convType }, this.connMgr.sendRequest(e2, t2).then(function(e3) {
            return e3.code ? (e3 = Object(i.x)(o.t.ConversationModuleServerError, e3.message, e3.code), n2.error = e3, r2.logger.warn(c, o.X.DeleteAllMessage, n2), Promise.reject(e3)) : r2.deleteLocalAllMessage(n2);
          })) : this.deleteLocalAllMessage(n2);
        }, d.prototype.queryHistoryMessage = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            function n2(e3, n3) {
              c2 ? e3.sort(function(e4, t3) {
                return t3.orderKey - e4.orderKey;
              }) : e3.sort(function(e4, t3) {
                return e4.orderKey - t3.orderKey;
              });
              var a2 = 0, u2 = (a2 = i2 ? e3.findIndex(function(e4) {
                return i2 === e4.messageID;
              }) + 1 : a2) + s2;
              e3 = e3.slice(a2, u2), c2 && e3.sort(function(e4, t3) {
                return e4.orderKey - t3.orderKey;
              }), _.seqs = [l2, d2, p, a2, s2].join(), b.count = e3.length, b.statusMap = _, n3 && (b.dataReport = n3), (u2 = e3.filter(function(e4) {
                return e4.sentStatus == o.fb.Sending;
              })).length && t2.queryMessageStatus(u2);
              var h2 = [];
              e3 = e3.map(function(e4) {
                return e4.type == o.hb.Tips && e4.event == o.ob.Unknown && h2.push(e4), t2.convMgr.transformDBMessage(e4);
              }), h2.length && t2.dbMgr.addMessageList(t2.convID, t2.convType, h2), r2({ list: e3, log: b });
            }
            var i2 = e2.nextMessage ? e2.nextMessage.messageID : "", s2 = e2.count, c2 = e2.reverse, l2 = t2.dbConv.msgSeq || 0, d2 = t2.dbConv.maxSeq || 0, p = e2.nextMessage ? e2.nextMessage.conversationSeq : 0, h = !p && c2, f = false, g = 0, m = 0, _ = (c2 ? (m = p ? p - 1 : l2, g = Math.max(t2.dbConv.deletedMsgMaxSeq || 0, m - s2)) : (g = Math.max(t2.dbConv.deletedMsgMaxSeq || 0, p), m = g + s2), { reverse: c2, seqs: "", degree: {}, flag: {} }), b = { time: /* @__PURE__ */ new Date(), convID: t2.convID, smin: g, smax: m, lmin: 0, lmax: 0, dbCount: 0, count: 0 };
            t2.dbMgr.getMessageList(t2.dbConv, e2).then(function(r3) {
              r3.length <= 0 && (t2.dbConv.msgSeq = 0, t2.dbConv.maxSeq = 0, d2 = l2 = 0);
              var i3 = t2.dbConv.deletedMsgMaxSeq || 0, p2 = t2.dbConv.deletedMsgSeqs || [], v = r3.filter(function(e3) {
                return !e3.isUserInserted && e3.sentStatus == o.fb.Success;
              }).map(function(e3) {
                return e3.conversationSeq;
              }), y = (p2.length && v.push.apply(v, u([], a(p2), false)), v.sort(function(e3, t3) {
                return e3 - t3;
              }), v[0] || 0), M = v[v.length - 1] || 0;
              if (b.dbCount = r3.length, b.lmin = y, b.lmax = M, !h && r3.length >= s2 && M - y < v.length && y <= g + 1 && m <= M)
                return n2(r3);
              function k(a2) {
                var u2, l3, d3, v2, y2;
                t2.dbMgr && (q += a2.list.length, l3 = u2 = 0, a2.list.forEach(function(e3, r4) {
                  var n3 = e3.msg_svr_info.msg_id, o2 = e3.msg_svr_info.conv_msg_seq, s3 = e3.msg_svr_info.msg_time;
                  x.push(o2), -1 == p2.indexOf(o2) && i3 < o2 && !w.has(n3) && s3 > t2.engineConfig.user.deleteAllMsgTime && (S < o2 && (S = o2), (!I || o2 < I) && (I = o2), w.set(n3, t2.transform2Message(e3, true))), 0 == r4 ? u2 = o2 : r4 == a2.list.length - 1 && (l3 = o2), null != (s3 = e3.msg_info.msg) && s3.length || (_.flag[o2] = e3.msg_info.msg);
                }), _.degree[D] = I + "," + S + "," + u2 + "," + l3, v2 = h ? f : c2, a2.nextSeq && w.size < s2 && (!v2 && S < m || v2 && g < I) ? t2.fetchServerPageMessage(a2.nextSeq, ++D, A, v2).then(k) : (a2.degree = D, a2.svrCount = q, d3 = t2.dataReport.endNetworkRequest(t2.convTypeMap.fetchMsgList.cmd, R, a2), v2 = Array.from(w.values()), (y2 = t2.dbConv.state) != o.q.Delete && v2.length && (t2.dbConv.state = o.q.Normal), t2.insertDeletedMsgSeqs(x, b), v2.length ? t2.saveMessageList(v2, S, y2, o.eb.Fetch).then(function() {
                  return t2.dbMgr.getMessageList(t2.dbConv, e2);
                }).then(function(e3) {
                  return n2(e3, d3);
                }) : n2(r3)));
              }
              var C, I = 0, S = 0, D = 1, q = 0, w = /* @__PURE__ */ new Map(), A = o.v.Biz, R = ++t2.mergeMsgListSeq + t2.convType + t2.convID, x = [];
              if (h)
                d2 && l2 <= d2 ? t2.fetchServerPageMessage(l2, D, A, f, R).then(k) : (f = true, C = Math.min(100, l2 - d2), t2.fetchServerPageMessage(-1, D, A, f, R, C).then(k));
              else {
                var T = c2 ? y : M, L = 100;
                if (c2)
                  if (m <= M) {
                    for (var G = v.length - 1; 0 < G; G--)
                      if (1 < v[G] - v[G - 1]) {
                        T = v[G], L = Math.min(100, v[G] - v[G - 1]), _.seqs = v[G - 1] + "," + T;
                        break;
                      }
                  } else
                    T = m + 1, L = Math.min(100, m + 1 - M);
                else if (T = M, y <= g + 1) {
                  for (G = 1; G < v.length; G++)
                    if (1 < v[G] - v[G - 1]) {
                      T = v[G - 1], L = Math.min(100, v[G] - v[G - 1]), _.seqs = T + "," + v[G];
                      break;
                    }
                } else
                  T = g, L = Math.min(100, y - g + 1);
                t2.fetchServerPageMessage(T, D, A, c2, R, L).then(k);
              }
            });
          });
        }, d.prototype.insertMessageToLocalDB = function(e2, t2) {
          var r2 = this, n2 = (Object.isFrozen(e2) && (e2 = s({}, e2)), this.dbConv.msgSeq || 0), i2 = { convID: this.convID, dbSeq: n2, orderKey: this.dbConv.maxOrderKey, message: s({}, e2) }, a2 = (e2.clientSeq = ++this.clientMsgSeq, e2.clientSid = "" + this.convSid, e2.localMessageID = e2.clientSid + e2.clientSeq, e2.messageID = e2.localMessageID, e2.conversationSeq = n2, e2.orderKey = (this.dbConv.maxOrderKey || 0) + 1, e2.conversationID = this.convID, e2.conversationType = this.convType, e2.direction = o.ab.Send, e2.sentStatus = o.fb.Success, e2.timestamp = this.settings.getRealClientTimestamp(), e2.isUserInserted = !t2, e2.receiptStatus = o.cb.None, JSON.parse(JSON.stringify(e2))), u2 = this.dbConv.state;
          return u2 == o.q.Delete && t2 != o.eb.Tips && (this.dbConv.state = o.q.Normal), this.saveMessageList([a2], n2, u2, t2 || o.eb.Insert).then(function() {
            return r2.logger.info(c, o.X.InsertMessageToLocalDB, i2), { message: e2 };
          });
        }, d.prototype.onPushMessage = function(e2, t2) {
          t2 && (this.dbConv.sendMsgCount = t2);
          t2 = o.eb.Push;
          var r2, n2, i2 = false, s2 = (e2 = this.transform2Message(e2, false), this.dbConv.state), a2 = this.dbConv.lastMessage, u2 = this.engineConfig.user.userID;
          e2.type == o.hb.Tips && (e2.event == o.ob.GroupDismissed || e2.event == o.ob.GroupKickedOut && e2.targetUserList.find(function(e3) {
            return e3.userID == u2;
          }) || e2.event == o.ob.GroupLeft && e2.operatedUser.userID == u2) && (t2 = o.eb.Tips, s2 == o.q.Disable && a2 && a2.localMessageID == a2.messageID && a2.type == o.hb.Tips && a2.event == e2.event && (i2 = true, this.dbMgr.deleteMessageList(this.convID, this.convType, [a2]))), t2 != o.eb.Tips && (this.dbConv.state = o.q.Normal), this.convType != o.r.Room && e2.direction == o.ab.Receive && (a2 = -1 != e2.mentionedUserIDs.indexOf(u2) ? 1 : 0, r2 = e2.isMentionAll ? 2 : 0, (a2 || r2) && ((n2 = this.dbConv.mentionedInfoList || []).push({ type: a2 | r2, messageID: e2.messageID, fromUserID: e2.senderUserID, seq: e2.conversationSeq }), this.dbConv.mentionedInfoList = n2)), this.saveMessageList([e2], e2.conversationSeq, s2, t2), i2 || this.emitReceiveMessage([e2]);
        }, d.prototype.onPushMsgDelete = function(e2, t2) {
          var r2 = this, n2 = this.dbConv.readMsgSeq || 0;
          this.dbMgr.deleteMessageListFromRemote(this.convID, this.convType, e2, n2, function(n3, i2, s2) {
            0 < n3.length && (n3 = { conversationID: r2.convID, conversationType: r2.convType, isDeleteConversationAllMessage: false, messageList: n3, messageDeleteType: o.Z.MessageListDeleted }, r2.eventBus.emit(o.u.MsgDeleted, n3)), r2.afterDeleteLocalMessages(e2, i2, false, t2, s2);
          });
        }, d.prototype.onPushAllMsgDelete = function(e2, t2) {
          function r2(r3) {
            var s3 = { conversationID: n2.convID, conversationType: n2.convType, isDeleteConversationAllMessage: true, messageList: [], messageDeleteType: o.Z.ConversationAllMessagesDeleted }, c3 = (s3 = (n2.eventBus.emit(o.u.MsgDeleted, s3), [0, n2.dbConv.unreadMessageCount, 0]), false);
            n2.dbConv.deletedMsgCount = r3, (l2 = n2.dbConv.lastMessage) && !l2.isUserInserted && l2.sentStatus == o.fb.Success && l2.conversationSeq == e2 && (c3 = true, s3[0] = l2.conversationSeq, n2.dbConv.lastMessage = void 0);
            var l2 = Math.max(a2 - i2 - u2 - r3, 0);
            (s3[2] = l2) != n2.dbConv.unreadMessageCount && (c3 = true, n2.dbConv.unreadMessageCount = l2, n2.emitUnreadMessageCount(t2)), c3 && n2.emitConversationChanged(o.o.Updated, t2), n2.dbMgr.addConversationList([n2.dbConv], t2 + s3.join());
          }
          var n2 = this, i2 = Math.max(e2, this.dbConv.readMsgSeq || 0), s2 = (this.dbConv.readMsgSeq = i2, this.dbConv.deletedMsgMaxSeq = Math.max(e2, this.dbConv.deletedMsgMaxSeq || 0), []), a2 = (this.dbConv.deletedMsgSeqs && this.dbConv.deletedMsgSeqs.length && (this.dbConv.deletedMsgSeqs = this.dbConv.deletedMsgSeqs.filter(function(t3) {
            return i2 < t3 && s2.push(t3), e2 < t3;
          })), this.filterMentionedInfoList(), this.dbConv.msgSeq || 0), u2 = this.dbConv.sendMsgCount || 0, c2 = 0 < s2.length;
          c2 || r2(this.dbConv.deletedMsgCount), this.dbMgr.deleteAllMessageFromRemote(this.convID, this.convType, e2, s2, c2 ? r2 : void 0);
        }, d.prototype.filterMentionedInfoList = function() {
          var e2, t2, r2 = this.dbConv.mentionedInfoList;
          r2 && r2.length && (e2 = this.dbConv.deletedMsgSeqs || [], t2 = this.dbConv.readMsgSeq || 0, this.dbConv.mentionedInfoList = r2.filter(function(r3) {
            return r3.seq > t2 && -1 == e2.indexOf(r3.seq);
          }));
        }, d.prototype.insertDeletedMsgSeqs = function(e2, t2) {
          e2.sort(function(e3, t3) {
            return e3 - t3;
          });
          for (var r2 = [], n2 = 0; n2 < e2.length - 1; n2++) {
            var i2 = e2[n2 + 1] - e2[n2];
            if (1 < i2)
              for (var o2 = 1; o2 < i2; o2++)
                r2.push(e2[n2] + o2);
          }
          r2.length && (t2 && (t2.delSeqs = r2.join()), (t2 = this.dbConv.deletedMsgSeqs) && t2.length && r2.push.apply(r2, u([], a(t2), false)), this.dbConv.deletedMsgSeqs = Array.from(new Set(r2)), this.filterMentionedInfoList());
        }, d.prototype.deleteLocalMessages = function(e2, t2) {
          var r2 = this, n2 = this.dbConv.readMsgSeq || 0, i2 = [], s2 = 0;
          return e2.forEach(function(e3) {
            e3.isUserInserted || e3.isBroadcastMessage || e3.sentStatus != o.fb.Success || (i2.push(e3.conversationSeq), e3.direction === o.ab.Receive && e3.conversationSeq > n2 && s2++);
          }), this.dbMgr.deleteMessageList(this.convID, this.convType, e2, true).then(function(e3) {
            return r2.afterDeleteLocalMessages(i2, s2, true, "deleteMsgs", e3), r2.logger.info(c, o.X.DeleteMessages, t2), i2;
          });
        }, d.prototype.afterDeleteLocalMessages = function(e2, t2, r2, n2, i2) {
          var s2, a2 = false, u2 = (e2 = (this.dbConv.deletedMsgSeqs = e2.concat(this.dbConv.deletedMsgSeqs || []), this.filterMentionedInfoList(), this.dbConv.lastMessage ? this.dbConv.lastMessage.messageID : ""), i2 ? i2.messageID : "");
          i2 && u2 != e2 && (this.dbConv.orderKey = i2.timestamp), e2 != u2 && (a2 = true), this.dbConv.lastMessage = i2, i2 = [e2, u2, 0, this.dbConv.unreadMessageCount, t2];
          0 < t2 && (t2 += this.dbConv.deletedMsgCount || 0, this.dbConv.deletedMsgCount = t2, e2 = this.dbConv.readMsgSeq || 0, u2 = this.dbConv.msgSeq || 0, s2 = this.dbConv.sendMsgCount || 0, e2 = Math.max(u2 - e2 - s2 - t2, 0), i2[2] = e2, r2 && 0 == e2 && (this.dbConv.readMsgSeq = u2, this.dbConv.sendMsgCount = 0, this.dbConv.deletedMsgCount = 0, this.updateServerReadMsgSeq(u2)), this.dbConv.unreadMessageCount != e2 && (a2 = true, this.dbConv.unreadMessageCount = e2, this.emitUnreadMessageCount(n2))), a2 && this.emitConversationChanged(o.o.Updated, n2), this.dbMgr.addConversationList([this.dbConv], n2 + i2.join());
        }, d.prototype.deleteLocalAllMessage = function(e2) {
          this.dbMgr.deleteAllMessage(this.convID, this.convType);
          var t2 = this.dbConv.msgSeq || 0, r2 = (this.dbConv.sendMsgCount = 0, this.dbConv.deletedMsgCount = 0, this.dbConv.unreadMessageCount = 0, this.dbConv.readMsgSeq = t2, this.dbConv.deletedMsgMaxSeq = t2, this.dbConv.deletedMsgSeqs = [], this.dbConv.mentionedInfoList = [], this.dbConv.lastMessage = void 0, "deleteAllMsg");
          return this.emitConversationChanged(o.o.Updated, r2), this.emitUnreadMessageCount(r2), this.updateServerReadMsgSeq(t2), this.dbMgr.addConversationList([this.dbConv], r2), this.logger.info(c, o.X.DeleteAllMessage, e2), Promise.resolve({ conversationID: this.convID, conversationType: this.convType });
        }, d.prototype.updateServerReadMsgSeq = function(e2) {
          this.dbConv.state || (e2 = { conv_id: this.convID, conv_type: this.convType, read_seq: e2 }, this.connMgr.sendRequest(o.d.conv_read_seq, e2, o.j.SDK));
        }, d.prototype.fetchServerPageMessage = function(e2, t2, r2, n2, i2, s2) {
          if (s2 = this.getFetchMessageReqBody(e2, r2, n2 ? 1 : 0, s2 || 100), this.convType == o.r.Room && !s2)
            return Promise.resolve({ nextSeq: 0, list: [] });
          s2.degree = t2, s2.how = r2;
          var a2 = this.convTypeMap.fetchMsgList, u2 = r2 == o.v.Biz ? o.j.API : o.j.SDK;
          return 1 == t2 && i2 && this.dataReport.beginNetworkRequest(a2.cmd, i2, u2, s2), this.connMgr.sendRequest(a2, s2, u2).then(function(t3) {
            if (t3.code)
              return t3.list = [], t3;
            var i3 = t3.max_conv_msg_seq, s3 = t3.next_conv_msg_seq, a3 = { fetch_end: t3.fetch_end, next_seq: s3, maxSeq: i3, nextSeq: s3, list: t3.msgs };
            return (r2 == o.v.SDKLogin || t3.fetch_end || !n2 && (i3 ? i3 <= e2 || i3 <= s3 : s3 <= e2)) && (a3.nextSeq = 0), a3;
          });
        }, d.prototype.saveLocalMessage = function(e2, t2, r2) {
          var n2 = this.dbConv.msgSeq || 0, i2 = (e2.messageID || (e2.messageID = e2.localMessageID), e2.sentStatus = t2, e2.timestamp = this.settings.getRealClientTimestamp(), e2.conversationSeq = n2, e2.orderKey = (this.dbConv.maxOrderKey || 0) + 1, JSON.parse(JSON.stringify(e2))), s2 = t2 == o.fb.Sending ? o.eb.Sending : o.eb.Sended;
          return this.saveMessageList([i2], n2, this.dbConv.state, s2), t2 != o.fb.Sending && this.emitMessageSentStatusChanged(e2, r2), e2.conversationSeq;
        }, d.prototype.saveMessageList = function(e2, t2, r2, n2) {
          var i2 = this;
          if (0 == e2.length)
            return Promise.resolve();
          e2.sort(function(e3, t3) {
            return e3.orderKey - t3.orderKey;
          });
          var s2 = { maxSeq: this.dbConv.maxSeq || 0, msgSeq: this.dbConv.msgSeq || 0, maxOrderKey: this.dbConv.maxOrderKey || 0, lastMessage: this.dbConv.lastMessage || { messageID: "" } }, a2 = s2.lastMessage.orderKey || 0, u2 = e2[e2.length - 1], c2 = (this.dbConv.maxSeq = Math.max(s2.maxSeq, t2), this.dbConv.maxOrderKey = Math.max(s2.maxOrderKey, u2.orderKey), t2 = Math.max(s2.msgSeq, t2), this.dbConv.msgSeq = t2, "saveMsgs_" + n2);
          return this.dbMgr.addMessageList(this.convID, this.convType, e2, n2 == o.eb.Fetch, function(e3) {
            i2.engineConfig.mailHBConfig.group_tips && 0 < e3.length && (i2.dbConv.deletedMsgCount += e3.filter(function(e4) {
              return e4.type == o.hb.Tips;
            }).length), i2.convType == o.r.Room || n2 != o.eb.Fetch && n2 != o.eb.Push || (e3 = i2.dbConv.readMsgSeq || 0, l2 = i2.dbConv.sendMsgCount || 0, d2 = i2.dbConv.deletedMsgCount || 0, n2 != o.eb.Push || s2.msgSeq || (e3 = t2 - 1, i2.dbConv.readMsgSeq = e3), (e3 = Math.max(t2 - e3 - l2 - d2, 0)) != i2.dbConv.unreadMessageCount && (i2.dbConv.unreadMessageCount = e3, i2.emitUnreadMessageCount(c2))), i2.convType != o.r.Room && s2.lastMessage.messageID != u2.messageID && (s2.lastMessage.sentStatus == o.fb.Failed || u2.orderKey >= a2 || n2 == o.eb.Push) && (i2.dbConv.draft = "", i2.dbConv.orderKey = u2.timestamp, i2.dbConv.lastMessage = i2.convMgr.transformDBMessage(u2), n2 != o.eb.Sending && n2 != o.eb.Tips && (l2 = n2 == o.eb.Sended || s2.maxOrderKey && r2 != o.q.Delete ? i2.dbConv.state == o.q.Disable ? o.o.Disabled : o.o.Updated : o.o.Added, i2.emitConversationChanged(l2, c2)));
            var l2, d2 = [s2.msgSeq, s2.maxSeq, s2.maxOrderKey, a2, u2.orderKey].join();
            i2.dbMgr.addConversationList([i2.dbConv], c2 + "_" + d2);
          });
        }, d.prototype.transform2Message = function(e2, t2) {
          var r2 = e2.msg_info, n2 = (e2 = e2.msg_svr_info, r2.msg_type), s2 = e2.sender_user_id;
          return (n2 = { type: 200 <= n2 && n2 <= 400 ? o.hb.Custom : n2, localMessageID: "", messageID: e2.msg_id, timestamp: e2.msg_time, extendedData: r2.payload && n2 != o.hb.Revoke ? Object(i.h)(r2.payload) : void 0, conversationID: this.convID, conversationType: this.convType, senderUserID: s2, sentStatus: o.fb.Success, direction: s2 === this.engineConfig.user.userID ? o.ab.Send : o.ab.Receive, conversationSeq: e2.conv_msg_seq, orderKey: 0, isUserInserted: false, isServerMessage: !!e2.is_server, receiptStatus: o.cb.None, isMentionAll: !!r2.at_all, mentionedUserIDs: r2.at, clientSeq: r2.msg_client_info ? r2.msg_client_info.client_msg_seq : 0, clientSid: r2.msg_client_info ? r2.msg_client_info.conv_sid : "" }).localMessageID = n2.clientSid + n2.clientSeq, this.calculateMessageOrderKey(n2, true), this.protobuf.decodeMsgBody(this.engineConfig, n2, r2.msg, e2.version), n2.type == o.hb.Tips || (n2.type == o.hb.Custom && (n2.subType = r2.sub_msg_type || 0, n2.searchedContent = r2.searched_content), n2.type != o.hb.Revoke && r2.msg_status && (n2.receiptStatus = Object(i.v)(r2.msg_status).receipt, t2 && this.dbMgr.checkMessageStatus(n2)), n2.reactions = this.convMgr.handleReactionList(n2, e2.reactions)), n2;
        }, d.prototype.withSendMessageErrorCode = function(e2) {
          return e2 = Object(i.x)(o.t.MessageModuleSendMessageFailed, e2.message, e2.code), this.convType == o.r.Group && -1 == this.auditErrorCodes.indexOf(e2.code) && (e2.code = 6000203), e2;
        }, d.prototype.calculateMessageOrderKey = function(e2, t2) {
          if (e2.orderKey)
            return e2.orderKey;
          var r2 = o.m.MESSAGE_SEQ_MULTIPLIER, n2 = e2.clientSeq, i2 = e2.clientSid;
          if (!n2 || !i2)
            return e2.orderKey = e2.conversationSeq * r2, e2.orderKey;
          var s2 = this.msgCaches[e2.senderUserID];
          if (!s2)
            return e2.orderKey = e2.conversationSeq * r2, t2 && (this.msgCaches[e2.senderUserID] = s2 = [e2]), e2.orderKey;
          var a2 = s2.find(function(t3) {
            return t3.messageID == e2.messageID;
          });
          if (a2 && a2.orderKey)
            return e2.orderKey = a2.orderKey, a2.orderKey;
          var u2 = 0, c2 = 0, l2 = 0, d2 = 0, p = (s2.forEach(function(e3) {
            var t3 = e3.clientSeq;
            e3.clientSid == i2 && t3 && (n2 < t3 && (!c2 || t3 < c2) ? (c2 = t3, d2 = e3.conversationSeq * r2) : t3 < n2 && (!u2 || u2 < t3) && (u2 = t3, l2 = e3.conversationSeq * r2));
          }), e2.conversationSeq * r2);
          return u2 && c2 ? (p <= l2 || d2 <= p) && (p = l2 + Math.floor(Math.random() * (d2 - l2 + 1))) : p < l2 ? p = l2 + n2 - u2 : c2 && d2 < p && (p = d2 + n2 - c2), e2.orderKey = p, !a2 && t2 && s2.push(e2), 100 < s2.length && (s2.sort(function(e3, t3) {
            return e3.orderKey - t3.orderKey;
          }), s2.splice(0, 90)), e2.orderKey;
        }, d.prototype.mergeServerMessageList = function(e2, t2) {
          var r2, n2, i2, s2, a2, u2, l2, d2, p, h, f = this;
          this.isFetchMessageWhenLogin(e2) && (r2 = Math.max(this.dbConv.maxSeq || 0, this.dbConv.deletedMsgMaxSeq || 0), t2 = t2 || this.dbConv.msgSeq || 0, e2 == o.v.SDKHb && t2 <= r2 || (n2 = /* @__PURE__ */ new Map(), i2 = ++this.mergeMsgListSeq + this.convType + this.convID, u2 = 1, l2 = a2 = s2 = 0, d2 = { time: /* @__PURE__ */ new Date(), convID: this.convID, how: e2, dbSeq: r2, msgSeq: t2, emitSeq: 0, statusMap: { degree: {}, flag: {} } }, p = function(t3) {
            var h2, g, m, _, b, v;
            f.dbMgr && (h2 = f.dbConv.deletedMsgSeqs || [], g = [], l2 += t3.list.length, _ = m = 0, t3.list.forEach(function(e3, i3) {
              var o2 = e3.msg_svr_info.msg_id, u3 = e3.msg_svr_info.conv_msg_seq;
              g.push(u3), -1 == h2.indexOf(u3) && r2 < u3 && !n2.has(o2) && (a2 < u3 && (a2 = u3), (!s2 || u3 < s2) && (s2 = u3), n2.set(o2, f.transform2Message(e3, true))), 0 == i3 ? m = u3 : i3 == t3.list.length - 1 && (_ = u3), 31 == e3.msg_info.msg_type || null != (o2 = e3.msg_info.msg) && o2.length || (d2.statusMap.flag[u3] = e3.msg_info.msg);
            }), d2.statusMap.degree[u2] = s2 + "," + a2 + "," + m + "," + _, t3.nextSeq ? f.fetchServerPageMessage(t3.nextSeq, ++u2, e2, false).then(p) : (t3.degree = u2, t3.svrCount = l2, t3.dbSeq = r2, b = Array.from(n2.values()), (v = f.dbConv.state) != o.q.Delete && b.length && (f.dbConv.state = o.q.Normal), f.insertDeletedMsgSeqs(g, d2), f.saveMessageList(b, a2, v, o.eb.Fetch), f.emitReceiveMessage(b), d2.dataReport = f.dataReport.endNetworkRequest(f.convTypeMap.fetchMsgList, i2, t3), f.logger.info(c, "mergeSvrMsgs", d2)));
          }, e2 == o.v.SDKLogin ? r2 < t2 ? this.fetchServerPageMessage(t2 + 1, u2, e2, true, i2, t2 + 1 - r2).then(p) : this.dbConv.state == o.q.Delete && this.convType == o.r.Peer && (-1 == (h = 0 < t2 ? t2 + 1 : -1) || r2 < t2) && this.fetchServerPageMessage(h, u2, e2, true, i2, 0 < t2 ? t2 + 1 - r2 : 0).then(p) : this.fetchServerPageMessage(r2, u2, e2, false, i2).then(p)));
        }, d.prototype.fetchMsgListFromCache = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            e2.sort(function(e3, t3) {
              return e3 - t3;
            });
            var n2 = /* @__PURE__ */ new Map();
            if (Object.values(t2.msgCaches).forEach(function(t3) {
              t3 && t3.length && t3.forEach(function(t4) {
                var r3 = t4.conversationSeq;
                -1 != e2.indexOf(r3) && n2.set(r3, t4);
              });
            }), n2.size == e2.length)
              return r2(n2);
            t2.dbMgr.getMessageListBySeqs(t2.convID, t2.convType, e2).then(r2);
          });
        }, d.prototype.updateMsgCacheList = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            var r2, n2 = t2.msgCaches[e3.senderUserID];
            n2 && n2.length && -1 != (r2 = n2.findIndex(function(t3) {
              return t3.messageID == e3.messageID;
            })) && (n2[r2] = e3);
          });
        }, d.prototype.fetchFileProcess = function(e2, t2, r2, n2, s2) {
          var a2 = this, u2 = { md5: e2.fileUID, file_type: r2 };
          return this.connMgr.sendRequest(o.d.file_process, u2).then(function(u3) {
            if (u3.code)
              throw Object(i.x)(o.t.MessageModuleSendMessageFailed, u3.message, u3.code);
            return e2.message = a2.encodeMediaMsgBody(e2, r2), e2.fileLocalPath && (e2.fileLocalPath = ""), a2.sendMessage(e2, t2, true, void 0, s2, n2);
          });
        }, d.prototype.emitUnreadMessageCount = function(e2) {
          this.convType != o.r.Room && this.eventBus.exec(o.u.IUnreadMsgCount, e2);
        }, d.prototype.emitConversationChanged = function(e2, t2, r2) {
          var n2;
          this.convType != o.r.Room && this.dbConv.state != o.q.Delete && (n2 = Object(i.s)(o.m.convKeys, this.dbConv), (r2 = this.convMgr.transformDBMessage(r2)) && (n2.orderKey = r2.timestamp, n2.lastMessage = r2), this.eventBus.emit(o.u.ConvChanged, { infoList: [{ event: e2, conversation: n2 }] }, t2));
        }, d.prototype.initSendingMessage = function(e2, t2) {
          e2.messageID && e2.conversationSeq ? (e2.extendedData = "", e2.localExtendedData = "", e2.isMentionAll = false, e2.mentionedUserIDs && (e2.mentionedUserIDs = []), e2.reactions && (e2.reactions = [])) : e2.mentionedUserIDs && e2.mentionedUserIDs.length && (e2.mentionedUserIDs = Array.from(new Set(e2.mentionedUserIDs.filter(function(e3) {
            return e3;
          })))), e2.messageID = "", e2.conversationSeq = 0, e2.orderKey = 0, e2.clientSeq = ++this.clientMsgSeq, e2.clientSid = "" + this.convSid, e2.localMessageID = e2.clientSid + e2.clientSeq, e2.conversationID = this.convID, e2.conversationType = this.convType, e2.senderUserID = this.engineConfig.user.userID, e2.direction = o.ab.Send, e2.sentStatus = o.fb.Sending, e2.timestamp = this.settings.getRealClientTimestamp(), e2.isUserInserted = false, e2.isBroadcastMessage = false, e2.isServerMessage = false, e2.receiptStatus = t2.hasReceipt ? o.cb.Processing : o.cb.None;
        }, d.prototype.emitSendingMessage = function(e2, t2) {
          if (t2 && "function" == typeof t2.onMessageAttached)
            try {
              t2.onMessageAttached(e2);
            } catch (e3) {
            }
          t2 = o.o.Added, this.dbConv.state == o.q.Delete ? this.dbConv.state = o.q.Normal : this.dbConv.maxOrderKey && (t2 = this.dbConv.state == o.q.Disable ? o.o.Disabled : o.o.Updated), this.emitConversationChanged(t2, "sendingMessage_" + this.dbConv.maxOrderKey, e2);
        }, d.prototype.emitReceiveMessage = function(e2) {
          var t2 = this;
          e2.length && (e2.sort(function(e3, t3) {
            return e3.orderKey - t3.orderKey;
          }), e2 = e2.map(function(e3) {
            return t2.convMgr.transformDBMessage(e3);
          }), this.eventBus.emit(this.convTypeMap.receiveMessage, { messageList: e2, fromConversationID: this.convID }));
        }, d.prototype.getMediaMessageDuration = function(e2) {
          var t2 = 0;
          return e2.type == o.hb.Audio ? t2 = +e2.audioDuration || 0 : e2.type == o.hb.Video && (t2 = +e2.videoDuration || 0), t2;
        }, d.prototype.encodeMediaMsgBody = function(e2, t2) {
          t2 = { version: "1", file_type: t2, file_name: e2.fileName || "", file_size: String(+e2.fileSize || 0), file_uid: e2.fileUID || "", file_download_url: e2.fileDownloadUrl || "" };
          var r2 = e2.type;
          if (r2 == o.hb.Image) {
            var n2 = e2.thumbnailDownloadUrl, i2 = e2.largeImageDownloadUrl, s2 = e2.originalImageWidth, a2 = e2.originalImageHeight, u2 = e2.thumbnailWidth, c2 = e2.thumbnailHeight, l2 = e2.largeImageWidth, d2 = e2.largeImageHeight;
            n2 && (t2.thumbnail_download_url = n2), i2 && (t2.large_image_download_url = i2), s2 && (t2.origin_width = s2), a2 && (t2.origin_height = a2), u2 && (t2.small_width = u2), c2 && (t2.small_height = c2), l2 && (t2.big_width = l2), d2 && (t2.big_height = d2);
          } else if (r2 == o.hb.Audio)
            i2 = e2.audioDuration, t2.media_duration = String(i2 || 0);
          else if (r2 == o.hb.Video)
            s2 = e2.videoDuration, n2 = e2.videoFirstFrameDownloadUrl, a2 = e2.videoFirstFrameWidth, u2 = e2.videoFirstFrameHeight, t2.media_duration = String(s2 || 0), n2 && (t2.video_first_frame_download_url = n2), a2 && (t2.frame_width = a2), u2 && (t2.frame_height = u2);
          else if (r2 == o.hb.Combine)
            return t2.media_duration = e2.aesKey, c2 = { title: e2.title, summary: e2.summary, file_body: t2 }, this.protobuf.encodeMediaMsgBody(r2, c2);
          return this.protobuf.encodeMediaMsgBody(r2, t2);
        }, d.prototype.emitMessageSentStatusChanged = function(e2, t2) {
          t2 = { status: e2.sentStatus, reason: t2, message: e2 }, this.eventBus.emit(o.u.MsgSentStatus, { infos: [t2] });
        }, d.prototype.queryMessageStatus = function(e2, t2) {
          var r2 = this, n2 = e2.map(function(e3) {
            return { conv_sid: e3.clientSid, client_msg_seq: e3.clientSeq };
          });
          n2 = s(s({}, this.getAssociatedReqBody()), { room_id: this.convID, client_infos: n2 });
          return this.connMgr.sendRequest(this.convTypeMap.msgStatusQuery, n2, o.j.SDK).then(function(n3) {
            var s2 = [];
            return n3.msgs = n3.msgs || [], n3.msgs.forEach(function(t3) {
              var n4, a2, u2, c2, l2 = t3.msg_info, d2 = (t3 = t3.msg_svr_info, l2.msg_status), p = l2.msg_client_info;
              (l2 = (l2 = e2.find(function(e3) {
                return e3.clientSeq == p.client_msg_seq && e3.clientSid == p.conv_sid;
              })) ? JSON.parse(JSON.stringify(l2)) : null) && l2.sentStatus !== o.fb.Success && (n4 = t3.conv_msg_seq, a2 = t3.msg_id, u2 = t3.msg_time, c2 = t3.msg_rsp, t3 = t3.version, l2.sentStatus = o.fb.Success, l2.messageID = a2, l2.timestamp = u2, l2.conversationSeq = n4, d2 && l2.receiptStatus == o.cb.Processing && (l2.receiptStatus = Object(i.v)(d2).receipt), l2.fileUID && (l2.type == o.hb.Combine || l2.type >= o.hb.Image && l2.type <= o.hb.Video) && (l2.localMessageID = l2.clientSid + l2.clientSeq, r2.protobuf.decodeMsgBody(r2.engineConfig, l2, c2, t3)), r2.calculateMessageOrderKey(l2, true), s2.push(l2));
            }), n3.fail_list = n3.fail_list || [], n3.fail_list.forEach(function(t3) {
              var r3, n4 = t3.client_info;
              t3 = t3.reason;
              (r3 = (r3 = e2.find(function(e3) {
                return e3.clientSeq == n4.client_msg_seq && e3.clientSid == n4.conv_sid;
              })) ? JSON.parse(JSON.stringify(r3)) : null) && 1 == t3 && (r3.sentStatus = o.fb.Failed, s2.push(r3));
            }), 0 < s2.length && (t2 || r2.dbMgr.addMessageList(r2.convID, r2.convType, s2, true), r2.eventBus.emit(o.u.MsgSentStatus, { infos: s2.map(function(e3) {
              return { status: e3.sentStatus, message: r2.convMgr.transformDBMessage(e3) };
            }) })), [n3, s2[0]];
          });
        }, d.prototype.updateConvWhenSendedMessage = function(e2) {
          e2.peer_user_name && (this.dbConv.conversationName = Object(i.h)(e2.peer_user_name)), e2.peer_user_avatar && (this.dbConv.conversationAvatarUrl = Object(i.h)(e2.peer_user_avatar)), e2.send_count_after_read && (this.dbConv.sendMsgCount = e2.send_count_after_read);
        }, d.prototype.handleSendMessageFail = function(e2, t2, r2, n2, i2) {
          this.dbConv.state = t2.conv_disable && this.convType == o.r.Peer ? o.q.Disable : o.q.Normal;
          var s2 = 6000104 == t2.code ? o.fb.Sending : o.fb.Failed;
          n2.result = this.saveLocalMessage(e2, s2, t2.audit_info), e2 = this.withSendMessageErrorCode(t2);
          return i2 || (n2.error = e2, this.logger.warn(c, r2, n2)), e2;
        }, d.prototype.handleSendMessageSuccess = function(e2, t2, r2, n2, s2) {
          this.updateConvWhenSendedMessage(t2);
          var a2 = (p = t2.msg_svr_info).conv_msg_seq, u2 = p.msg_id, l2 = p.msg_time, d2 = p.msg_rsp, p = p.version;
          (l2 = (e2.sentStatus = o.fb.Success, e2.messageID = u2, e2.timestamp = l2, e2.conversationSeq = a2, t2.msg_status || (null == (u2 = t2.msg_info) ? void 0 : u2.msg_status))) && e2.receiptStatus == o.cb.Processing && (e2.receiptStatus = Object(i.v)(l2).receipt), u2 = null, this.convType == o.r.Group && t2.receipt_seq && (u2 = { seq: t2.receipt_seq, count: t2.unread_count || 0 }), s2 && (this.dbMgr.deleteMessageList(this.convID, this.convType, [e2]), e2.localMessageID = e2.clientSid + e2.clientSeq), (s2 || e2.fileUID) && this.protobuf.decodeMsgBody(this.engineConfig, e2, d2, p), e2.type == o.hb.Text && null != (l2 = t2.audit_message_info) && l2.filtered_text && (e2.message = t2.audit_message_info.filtered_text), s2 = JSON.parse(JSON.stringify(e2)), e2.orderKey = this.calculateMessageOrderKey(s2, true), d2 = this.dbConv.state;
          return this.dbConv.state = o.q.Normal, this.saveMessageList([s2], a2, d2, o.eb.Sended), this.emitMessageSentStatusChanged(e2, t2.audit_info), n2.result = a2, this.logger.info(c, r2, n2), { message: e2, receiptInfo: u2 };
        }, d.prototype.getCombineMessageFile = function(e2) {
          var t2 = this, r2 = [], o2 = /* @__PURE__ */ new Set(), s2 = e2.conversationType + "_" + e2.localMessageID + "_" + e2.aesKey, a2 = n.a.getInstance().crypto.generateNonce(), u2 = (this.getCombineMessageChild(e2, r2, o2, s2, 1, a2, e2.senderUserID, e2.conversationID), {});
          o2.forEach(function(e3) {
            var r3 = t2.engineConfig.dbUserMap.get(e3);
            r3 && (u2[e3] = { sender_user_name: Object(i.k)(r3.userName), sender_user_avatar: Object(i.k)(r3.userAvatarUrl), update_time: r3.updateTime || 0 });
          }), s2 = this.protobuf.encodeMsgCombineInfo({ send_user_map: u2, child: r2 }, e2.aesKey), a2 = this.settings.deviceInfo.sdk_ver + "_" + e2.type + "_" + e2.aesKey;
          return i.p ? { fileName: a2, fileBody: s2 } : new File([s2], a2);
        }, d.prototype.getCombineMessageChild = function(e2, t2, r2, s2, u2, c2, l2, d2) {
          var p = this, h = [], f = a(s2.split("_"), 2), g = f[0], m = f[1];
          e2.messageList.forEach(function(e3) {
            var a2 = n.a.getInstance().crypto.generateNonce(), f2 = "0", _ = (1 < u2 && (a2 = e3.cbID.replace(e3.cbID.substring(8), c2.substring(8)), f2 = "0" == e3.parentID ? c2 : e3.parentID.replace(f2.substring(8), c2.substring(8))), { msg_type: e3.type, sender_user_id: e3.senderUserID, msg_time: e3.timestamp, root_id: m, cb_id: a2, parent_id: f2, is_server: e3.isServerMessage ? 1 : 0, root_conv_type: g, root_send_user_id: l2, root_conv_id: d2 });
            (_ = (e3.subType && (_.sub_type = e3.subType), e3.searchedContent && (_.searched_content = e3.searchedContent), e3.extendedData && (_.extended_data = e3.extendedData), e3.type == o.hb.Combine ? (_.msg = p.encodeMediaMsgBody(e3, e3.type), e3.messageList && 0 < e3.messageList.length && p.getCombineMessageChild(e3, t2, r2, s2, u2 + 1, a2, l2, d2)) : e3.type >= o.hb.Image && e3.type <= o.hb.Video ? _.msg = p.encodeMediaMsgBody(e3, e3.type - 10) : _.msg = Object(i.k)(e3.message), r2.add(e3.senderUserID), t2.push(_), JSON.parse(JSON.stringify(e3)))).rootID = s2, _.cbID = a2, _.parentID = f2, _.type == o.hb.Combine && (_.combineID = _.cbID + "-" + s2 + "-" + p.convID), h.push(_);
          }), e2.messageList = h;
        }, d);
        function d(e2, t2, r2, i2, o2, s2) {
          this.logger = n.a.getInstance().logger, this.dataReport = n.a.getInstance().dataReport, this.protobuf = n.a.getInstance().protobuf, this.settings = n.a.getInstance().settings, this.lastSendTime = 0, this.convSid = this.settings.getRealClientTimestamp(), this.clientMsgSeq = 0, this.dbConv = {}, this.mergeMsgListSeq = 0, this.msgCaches = {}, this.auditErrorCodes = [6000104, 6000221, , 6000222, 6000230, 6000231], this.dbConv.conversationID = e2, this.convID = e2, this.engineConfig = t2, this.eventBus = r2, this.dbMgr = i2, this.connMgr = o2, this.convMgr = s2;
        }
      }, function(e, t, r) {
        e.exports = function(e2) {
          for (var t2 = e2, r2 = t2.lib.BlockCipher, n = t2.algo, i = [], o = [], s = [], a = [], u = [], c = [], l = [], d = [], p = [], h = [], f = [], g = 0; g < 256; g++)
            f[g] = g < 128 ? g << 1 : g << 1 ^ 283;
          var m = 0, _ = 0;
          for (g = 0; g < 256; g++) {
            var b = _ ^ _ << 1 ^ _ << 2 ^ _ << 3 ^ _ << 4;
            b = b >>> 8 ^ 255 & b ^ 99, i[m] = b, o[b] = m;
            var v = f[m], y = f[v], M = f[y], k = 257 * f[b] ^ 16843008 * b;
            s[m] = k << 24 | k >>> 8, a[m] = k << 16 | k >>> 16, u[m] = k << 8 | k >>> 24, c[m] = k;
            k = 16843009 * M ^ 65537 * y ^ 257 * v ^ 16843008 * m;
            l[b] = k << 24 | k >>> 8, d[b] = k << 16 | k >>> 16, p[b] = k << 8 | k >>> 24, h[b] = k, m ? (m = v ^ f[f[f[M ^ v]]], _ ^= f[f[_]]) : m = _ = 1;
          }
          var C = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], I = n.AES = r2.extend({ _doReset: function() {
            if (!this._nRounds || this._keyPriorReset !== this._key) {
              for (var e3 = this._keyPriorReset = this._key, t3 = e3.words, r3 = e3.sigBytes / 4, n2 = 4 * ((this._nRounds = r3 + 6) + 1), o2 = this._keySchedule = [], s2 = 0; s2 < n2; s2++)
                s2 < r3 ? o2[s2] = t3[s2] : (c2 = o2[s2 - 1], s2 % r3 ? r3 > 6 && s2 % r3 == 4 && (c2 = i[c2 >>> 24] << 24 | i[c2 >>> 16 & 255] << 16 | i[c2 >>> 8 & 255] << 8 | i[255 & c2]) : (c2 = i[(c2 = c2 << 8 | c2 >>> 24) >>> 24] << 24 | i[c2 >>> 16 & 255] << 16 | i[c2 >>> 8 & 255] << 8 | i[255 & c2], c2 ^= C[s2 / r3 | 0] << 24), o2[s2] = o2[s2 - r3] ^ c2);
              for (var a2 = this._invKeySchedule = [], u2 = 0; u2 < n2; u2++) {
                s2 = n2 - u2;
                if (u2 % 4)
                  var c2 = o2[s2];
                else
                  c2 = o2[s2 - 4];
                a2[u2] = u2 < 4 || s2 <= 4 ? c2 : l[i[c2 >>> 24]] ^ d[i[c2 >>> 16 & 255]] ^ p[i[c2 >>> 8 & 255]] ^ h[i[255 & c2]];
              }
            }
          }, encryptBlock: function(e3, t3) {
            this._doCryptBlock(e3, t3, this._keySchedule, s, a, u, c, i);
          }, decryptBlock: function(e3, t3) {
            var r3 = e3[t3 + 1];
            e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = r3, this._doCryptBlock(e3, t3, this._invKeySchedule, l, d, p, h, o);
            r3 = e3[t3 + 1];
            e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = r3;
          }, _doCryptBlock: function(e3, t3, r3, n2, i2, o2, s2, a2) {
            for (var u2 = this._nRounds, c2 = e3[t3] ^ r3[0], l2 = e3[t3 + 1] ^ r3[1], d2 = e3[t3 + 2] ^ r3[2], p2 = e3[t3 + 3] ^ r3[3], h2 = 4, f2 = 1; f2 < u2; f2++) {
              var g2 = n2[c2 >>> 24] ^ i2[l2 >>> 16 & 255] ^ o2[d2 >>> 8 & 255] ^ s2[255 & p2] ^ r3[h2++], m2 = n2[l2 >>> 24] ^ i2[d2 >>> 16 & 255] ^ o2[p2 >>> 8 & 255] ^ s2[255 & c2] ^ r3[h2++], _2 = n2[d2 >>> 24] ^ i2[p2 >>> 16 & 255] ^ o2[c2 >>> 8 & 255] ^ s2[255 & l2] ^ r3[h2++], b2 = n2[p2 >>> 24] ^ i2[c2 >>> 16 & 255] ^ o2[l2 >>> 8 & 255] ^ s2[255 & d2] ^ r3[h2++];
              c2 = g2, l2 = m2, d2 = _2, p2 = b2;
            }
            g2 = (a2[c2 >>> 24] << 24 | a2[l2 >>> 16 & 255] << 16 | a2[d2 >>> 8 & 255] << 8 | a2[255 & p2]) ^ r3[h2++], m2 = (a2[l2 >>> 24] << 24 | a2[d2 >>> 16 & 255] << 16 | a2[p2 >>> 8 & 255] << 8 | a2[255 & c2]) ^ r3[h2++], _2 = (a2[d2 >>> 24] << 24 | a2[p2 >>> 16 & 255] << 16 | a2[c2 >>> 8 & 255] << 8 | a2[255 & l2]) ^ r3[h2++], b2 = (a2[p2 >>> 24] << 24 | a2[c2 >>> 16 & 255] << 16 | a2[l2 >>> 8 & 255] << 8 | a2[255 & d2]) ^ r3[h2++];
            e3[t3] = g2, e3[t3 + 1] = m2, e3[t3 + 2] = _2, e3[t3 + 3] = b2;
          }, keySize: 8 });
          return t2.AES = r2._createHelper(I), e2.AES;
        }(r(5), (r(96), r(8), r(22), r(99)));
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        var n = { 0: "Success.", 1: "Failed.", 6000001: "The incoming parameter is invalid.", 6000002: "The SDK is not initialized.", 6000003: "Invalid AppID.", 6000004: "Trigger SDK internal frequency limit.", 6000005: "Trigger background service frequency limit.", 6000006: "Switch server internal error.", 6000007: "ZIM service internal error.", 6000010: "Failed to upload log.", 6000011: "User is not exist.", 6000012: "Trigger frequency limit when querying user information.", 6000013: "Unsupported request.", 6000014: "The ZIM service is being activated for you, please try again in five minutes.", 6000015: "Exceed DAU limit.", 6000016: "Exceed MAU limit.", 6000101: "Login failed.", 6000102: "Login failed due to background service.", 6000103: "Token is invalid.", 6000104: "Network error.", 6000106: "Token expired.", 6000107: "Token version number is wrong.", 6000108: "Token duration is too short.", 6000109: "Token duration is too long.", 6000111: "User has already logged in.", 6000121: "User is not logged in.", 6000201: "Internal error sending message.", 6000202: "Error sending message background service.", 6000203: "Message sending failed.", 6000204: "The message target does not exist.", 6000211: "File is not exist.", 6000212: "File server internal error.", 6000213: "File type is not supported.", 6000214: "File size is invalid.", 6000215: "File duration is invalid.", 6000221: "Failed to pass security audit.", 6000222: "Security audit failed.", 6000230: "Failed to pass custom security audit.", 6000270: "Call invitation failed.", 6000271: "Failed to cancel call invitation.", 6000272: "Failed to initiate call invitation service.", 6000273: "The non-initiator cancel the call invitation.", 6000274: "Uninvited users.", 6000275: "CallID already exists.", 6000276: "CallID does not exist.", 6000277: "Receipt error.", 6000278: "Revoke time is exceed.", 6000279: "The message has been revoked.", 6000280: "The message reaction type exist.", 6000281: "The user invited by the call does not exist.", 6000282: "The number of message receipts exceeds the limit.", 6000283: "User is already in call.", 6000301: "Internal error in room.", 6000302: "Error in room service.", 6000303: "Failed to create room.", 6000304: "Failed to join room.", 6000306: "Failed to leave the room.", 6000310: "Failed to query room members.", 6000311: "Failed to query room members.", 6000321: "The user is not in the room.", 6000322: "Room does not exist.", 6000323: "Room already exist.", 6000324: "The maximum number of rooms can exist at the same time.", 6000325: "The number of rooms a user can join at the same time has reached the upper limit.", 6000330: "Internal error in room attributes.", 6000331: "Failed to operate room attributes.", 6000333: "Failed to query room attributes.", 6000334: "The number of room attributes exceeds limit.", 6000335: "The key length of room attribute exceeds limit.", 6000336: "The value length of room attribute exceeds limit.", 6000337: "The total value length of the room attributes exceeds limit.", 6000350: "Internal error in room member attributes.", 6000351: "The total length of room member attributes exceeds limit.", 6000352: "The key length of room member attribute exceeds limit.", 6000353: "The value length of room member attributes exceeds limit.", 6000357: "The member number of room member attributes exceeds limit.", 6000501: "Internal error in group.", 6000502: "Error in group service.", 6000503: "Failed to create group.", 6000504: "Failed to dismiss group.", 6000505: "Failed to join group.", 6000506: "Failed to leave group.", 6000507: "Failed to kick group member.", 6000508: "Failed to invite user to group.", 6000509: "Failed to transfer group owner.", 6000510: "Failed to update group information.", 6000511: "Failed to query group information.", 6000512: "Failed to operate group attributes.", 6000513: "Failed to query group attributes.", 6000514: "Failed to update group member information.", 6000515: "Failed to query group member information.", 6000516: "Failed to query group list.", 6000517: "Failed to query group member list.", 6000521: "User is not in group.", 6000522: "User is already in the group.", 6000523: "Group does not exist.", 6000524: "Group already exists.", 6000525: "The group members have reached the limit.", 6000526: "Group attribute does not exist.", 6000527: "Cannot create group after dismissed.", 6000531: "The number of group attributes exceeds limit.", 6000532: "The key length of group attribute exceeds limit.", 6000533: "The value length of group attribute exceeds limit.", 6000534: "The total value length of the group attributes exceeds limit.", 6000541: "There is no operation permission for group-related interfaces.", 6000542: "Not allowed to join the group.", 6000543: "Need to apply to join the group.", 6000544: "Need to be invited to apply into the group.", 6000601: "Internal error in conversation.", 6000602: "Error in conversation service.", 6000603: "Conversation does not exist.", 6000604: "The number of pinned conversations has reached the upper limit.", 106120: "The number of single pass conversations states exceeds the limit.", 106121: "There are conversations with duplicate settings.", 106122: "Peer id is empty", 106123: "Not allowed to set oneself", 106124: "Already set c2c mute", 106125: "Already cancel c2c mute", 106126: "The number of undisturbed conversations exceeds the limit." }, i = function(e2, t2, r2) {
          return t2 = r2 && 6000104 != r2 ? (e2 = function(e3) {
            switch (e3) {
              case 50012:
                return 6000121;
              case 100002:
              case 100003:
              case 100004:
              case 50013:
              case 50014:
              case 104002:
                return 6000001;
              case 50008:
              case 103019:
              case 100017:
              case 103020:
              case 103034:
              case 103041:
              case 103042:
              case 103044:
              case 103016:
              case 103017:
              case 108050:
                return 6000005;
              case 102002:
                return 6000016;
              case 102003:
                return 6000015;
              case 100018:
                return 6000012;
              case 100021:
                return 6000013;
              case 50001:
              case 50002:
              case 50003:
              case 50004:
              case 50005:
              case 50007:
              case 50009:
              case 50101:
              case 50102:
              case 50105:
              case 50106:
              case 50107:
              case 50108:
              case 50110:
                return 6000006;
              case 50111:
                return 6000103;
              case 100001:
              case 102001:
              case 100005:
              case 100006:
              case 100007:
              case 100008:
              case 100009:
              case 100010:
              case 100011:
              case 101001:
              case 101002:
              case 101003:
              case 101004:
                return 6000007;
              case 105e3:
              case 105004:
              case 103033:
                return 6000011;
              case 103015:
              case 103001:
                return 6000321;
              case 103021:
                return 6000322;
              case 103032:
                return 6000323;
              case 103050:
                return 6000311;
              case 103018:
                return 6000324;
              case 103010:
                return 6000325;
              case 103022:
                return 6000334;
              case 103023:
                return 6000335;
              case 103024:
                return 6000336;
              case 103025:
                return 6000337;
              case 103039:
                return 6000352;
              case 103040:
                return 6000353;
              case 103038:
                return 6000351;
              case 103045:
                return 6000357;
              case 107003:
                return 6000271;
              case 107004:
                return 6000272;
              case 107005:
              case 61002:
              case 61003:
                return 6000276;
              case 107006:
              case 107007:
                return 6000272;
              case 107012:
                return 6000273;
              case 107014:
                return 6000274;
              case 107019:
                return 6000275;
              case 107026:
                return 6000281;
              case 111101:
                return 6000230;
              case 108065:
              case 108066:
                return 6000231;
              case 111003:
              case 111006:
              case 111007:
                return 6000221;
              case 111002:
              case 111004:
              case 111005:
                return 6000222;
              case 61004:
                return 6000272;
              case 109001:
                return 6000204;
              case 108054:
              case 106019:
                return 6000277;
              case 100039:
                return 6000282;
              case 107025:
                return 6000283;
              case 106022:
                return 6000604;
              case 100015:
              case 110002:
              case 110003:
              case 110005:
              case 110006:
              case 110007:
              case 110008:
              case 110009:
              case 110010:
              case 110011:
              case 110012:
              case 110013:
              case 110014:
              case 110015:
                return 6000212;
              case 110004:
                return 6000211;
              case 110016:
              case 110019:
              case 110021:
              case 110023:
                return 6000213;
              case 110017:
              case 110020:
              case 110022:
              case 110024:
                return 6000214;
              case 110018:
                return 6000215;
              case 108035:
              case 108051:
                return 6000521;
              case 108003:
              case 108074:
              case 108080:
                return 6000541;
              case 108072:
                return 6000542;
              case 108073:
                return 6000543;
              case 108040:
                return 6000531;
              case 108041:
                return 6000532;
              case 108042:
                return 6000533;
              case 108037:
                return 6000522;
              case 108038:
              case 108039:
                return 6000514;
              case 108043:
                return 6000524;
              case 108060:
                return 6000527;
              case 108044:
              case 106011:
                return 6000523;
              case 108046:
                return 6000526;
              case 108049:
                return 6000525;
              case 100012:
                return 6000278;
              case 100013:
                return 6000279;
              case 100022:
                return 6000278;
              case 100037:
                return 6000280;
              case 106024:
              case 106025:
              case 106026:
              case 106027:
              case 106030:
              case 106034:
              case 106033:
              case 106036:
              case 106039:
              case 106103:
                return 6000001;
              case 106032:
                return 6000801;
              case 106035:
                return 6000802;
              case 106031:
                return 6000803;
              case 106112:
                return 6000284;
              case 106101:
                return 6000804;
              case 106102:
                return 6000805;
              case 106105:
                return 6000815;
              case 106106:
                return 6000816;
              case 106110:
                return 6000806;
              case 106111:
                return 6000807;
              case 106104:
                return 6000808;
              case 106028:
                return 6000810;
              default:
                return 0;
            }
          }(r2) || e2, "code: " + r2 + ", message: " + (t2 || n[e2])) : t2 || n[e2], { code: e2 = 6000104 == r2 ? r2 : e2, message: t2 };
        };
      }, function(e, t, r) {
        e.exports = r(5).enc.Hex;
      }, function(e, t, r) {
        e.exports = r(5).enc.Utf8;
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        }), r.d(t, "b", function() {
          return d;
        });
        var n = r(19), i = (o.prototype.toString = function(e2) {
          if (this.s < 0)
            return "-" + this.negate().toString(e2);
          var t2;
          if (16 == e2)
            t2 = 4;
          else if (8 == e2)
            t2 = 3;
          else if (2 == e2)
            t2 = 1;
          else if (32 == e2)
            t2 = 5;
          else {
            if (4 != e2)
              return this.toRadix(e2);
            t2 = 2;
          }
          var r2, i2 = (1 << t2) - 1, o2 = false, s2 = "", a2 = this.t, u2 = this.DB - a2 * this.DB % t2;
          if (0 < a2--)
            for (u2 < this.DB && 0 < (r2 = this[a2] >> u2) && (o2 = true, s2 = Object(n.a)(r2)); 0 <= a2; )
              u2 < t2 ? (r2 = (this[a2] & (1 << u2) - 1) << t2 - u2, r2 |= this[--a2] >> (u2 += this.DB - t2)) : (r2 = this[a2] >> (u2 -= t2) & i2, u2 <= 0 && (u2 += this.DB, --a2)), (o2 = 0 < r2 || o2) && (s2 += Object(n.a)(r2));
          return o2 ? s2 : "0";
        }, o.prototype.negate = function() {
          var e2 = l();
          return o.ZERO.subTo(this, e2), e2;
        }, o.prototype.abs = function() {
          return this.s < 0 ? this.negate() : this;
        }, o.prototype.compareTo = function(e2) {
          var t2 = this.s - e2.s;
          if (0 != t2)
            return t2;
          var r2 = this.t;
          if (0 != (t2 = r2 - e2.t))
            return this.s < 0 ? -t2 : t2;
          for (; 0 <= --r2; )
            if (0 != (t2 = this[r2] - e2[r2]))
              return t2;
          return 0;
        }, o.prototype.bitLength = function() {
          return this.t <= 0 ? 0 : this.DB * (this.t - 1) + _(this[this.t - 1] ^ this.s & this.DM);
        }, o.prototype.mod = function(e2) {
          var t2 = l();
          return this.abs().divRemTo(e2, null, t2), this.s < 0 && 0 < t2.compareTo(o.ZERO) && e2.subTo(t2, t2), t2;
        }, o.prototype.modPowInt = function(e2, t2) {
          return t2 = new (e2 < 256 || t2.isEven() ? s : u)(t2), this.exp(e2, t2);
        }, o.prototype.intValue = function() {
          if (this.s < 0) {
            if (1 == this.t)
              return this[0] - this.DV;
            if (0 == this.t)
              return -1;
          } else {
            if (1 == this.t)
              return this[0];
            if (0 == this.t)
              return 0;
          }
          return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];
        }, o.prototype.signum = function() {
          return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1;
        }, o.prototype.copyTo = function(e2) {
          for (var t2 = this.t - 1; 0 <= t2; --t2)
            e2[t2] = this[t2];
          e2.t = this.t, e2.s = this.s;
        }, o.prototype.fromInt = function(e2) {
          this.t = 1, this.s = e2 < 0 ? -1 : 0, 0 < e2 ? this[0] = e2 : e2 < -1 ? this[0] = e2 + this.DV : this.t = 0;
        }, o.prototype.fromString = function(e2, t2) {
          var r2;
          if (16 == t2)
            r2 = 4;
          else if (8 == t2)
            r2 = 3;
          else if (256 == t2)
            r2 = 8;
          else if (2 == t2)
            r2 = 1;
          else if (32 == t2)
            r2 = 5;
          else {
            if (4 != t2)
              return void this.fromRadix(e2, t2);
            r2 = 2;
          }
          this.t = 0, this.s = 0;
          for (var n2 = e2.length, i2 = false, s2 = 0; 0 <= --n2; ) {
            var a2 = 8 == r2 ? 255 & +e2[n2] : g(e2, n2);
            a2 < 0 ? "-" == e2.charAt(n2) && (i2 = true) : (i2 = false, 0 == s2 ? this[this.t++] = a2 : s2 + r2 > this.DB ? (this[this.t - 1] |= (a2 & (1 << this.DB - s2) - 1) << s2, this[this.t++] = a2 >> this.DB - s2) : this[this.t - 1] |= a2 << s2, (s2 += r2) >= this.DB && (s2 -= this.DB));
          }
          8 == r2 && 0 != (128 & +e2[0]) && (this.s = -1, 0 < s2 && (this[this.t - 1] |= (1 << this.DB - s2) - 1 << s2)), this.clamp(), i2 && o.ZERO.subTo(this, this);
        }, o.prototype.clamp = function() {
          for (var e2 = this.s & this.DM; 0 < this.t && this[this.t - 1] == e2; )
            --this.t;
        }, o.prototype.dlShiftTo = function(e2, t2) {
          for (var r2 = this.t - 1; 0 <= r2; --r2)
            t2[r2 + e2] = this[r2];
          for (r2 = e2 - 1; 0 <= r2; --r2)
            t2[r2] = 0;
          t2.t = this.t + e2, t2.s = this.s;
        }, o.prototype.drShiftTo = function(e2, t2) {
          for (var r2 = e2; r2 < this.t; ++r2)
            t2[r2 - e2] = this[r2];
          t2.t = Math.max(this.t - e2, 0), t2.s = this.s;
        }, o.prototype.lShiftTo = function(e2, t2) {
          for (var r2 = e2 % this.DB, n2 = this.DB - r2, i2 = (1 << n2) - 1, o2 = Math.floor(e2 / this.DB), s2 = this.s << r2 & this.DM, a2 = this.t - 1; 0 <= a2; --a2)
            t2[a2 + o2 + 1] = this[a2] >> n2 | s2, s2 = (this[a2] & i2) << r2;
          for (a2 = o2 - 1; 0 <= a2; --a2)
            t2[a2] = 0;
          t2[o2] = s2, t2.t = this.t + o2 + 1, t2.s = this.s, t2.clamp();
        }, o.prototype.rShiftTo = function(e2, t2) {
          t2.s = this.s;
          var r2 = Math.floor(e2 / this.DB);
          if (r2 >= this.t)
            t2.t = 0;
          else {
            var n2 = e2 % this.DB, i2 = this.DB - n2, o2 = (1 << n2) - 1;
            t2[0] = this[r2] >> n2;
            for (var s2 = r2 + 1; s2 < this.t; ++s2)
              t2[s2 - r2 - 1] |= (this[s2] & o2) << i2, t2[s2 - r2] = this[s2] >> n2;
            0 < n2 && (t2[this.t - r2 - 1] |= (this.s & o2) << i2), t2.t = this.t - r2, t2.clamp();
          }
        }, o.prototype.subTo = function(e2, t2) {
          for (var r2 = 0, n2 = 0, i2 = Math.min(e2.t, this.t); r2 < i2; )
            n2 += this[r2] - e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
          if (e2.t < this.t) {
            for (n2 -= e2.s; r2 < this.t; )
              n2 += this[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 += this.s;
          } else {
            for (n2 += this.s; r2 < e2.t; )
              n2 -= e2[r2], t2[r2++] = n2 & this.DM, n2 >>= this.DB;
            n2 -= e2.s;
          }
          t2.s = n2 < 0 ? -1 : 0, n2 < -1 ? t2[r2++] = this.DV + n2 : 0 < n2 && (t2[r2++] = n2), t2.t = r2, t2.clamp();
        }, o.prototype.multiplyTo = function(e2, t2) {
          var r2 = this.abs(), n2 = e2.abs(), i2 = r2.t;
          for (t2.t = i2 + n2.t; 0 <= --i2; )
            t2[i2] = 0;
          for (i2 = 0; i2 < n2.t; ++i2)
            t2[i2 + r2.t] = r2.am(0, n2[i2], t2, i2, 0, r2.t);
          t2.s = 0, t2.clamp(), this.s != e2.s && o.ZERO.subTo(t2, t2);
        }, o.prototype.squareTo = function(e2) {
          for (var t2 = this.abs(), r2 = e2.t = 2 * t2.t; 0 <= --r2; )
            e2[r2] = 0;
          for (r2 = 0; r2 < t2.t - 1; ++r2) {
            var n2 = t2.am(r2, t2[r2], e2, 2 * r2, 0, 1);
            (e2[r2 + t2.t] += t2.am(r2 + 1, 2 * t2[r2], e2, 2 * r2 + 1, n2, t2.t - r2 - 1)) >= t2.DV && (e2[r2 + t2.t] -= t2.DV, e2[r2 + t2.t + 1] = 1);
          }
          0 < e2.t && (e2[e2.t - 1] += t2.am(r2, t2[r2], e2, 2 * r2, 0, 1)), e2.s = 0, e2.clamp();
        }, o.prototype.divRemTo = function(e2, t2, r2) {
          if (!((d2 = e2.abs()).t <= 0)) {
            var n2 = this.abs();
            if (n2.t < d2.t)
              return null != t2 && t2.fromInt(0), void (null != r2 && this.copyTo(r2));
            null == r2 && (r2 = l());
            var i2 = l(), s2 = this.s, a2 = (e2 = e2.s, this.DB - _(d2[d2.t - 1])), u2 = (0 < a2 ? (d2.lShiftTo(a2, i2), n2.lShiftTo(a2, r2)) : (d2.copyTo(i2), n2.copyTo(r2)), i2.t), c2 = i2[u2 - 1];
            if (0 != c2) {
              var d2 = c2 * (1 << this.F1) + (1 < u2 ? i2[u2 - 2] >> this.F2 : 0), p2 = this.FV / d2, h2 = (1 << this.F1) / d2, f2 = 1 << this.F2, g2 = r2.t, m2 = g2 - u2, b = null == t2 ? l() : t2;
              for (i2.dlShiftTo(m2, b), 0 <= r2.compareTo(b) && (r2[r2.t++] = 1, r2.subTo(b, r2)), o.ONE.dlShiftTo(u2, b), b.subTo(i2, i2); i2.t < u2; )
                i2[i2.t++] = 0;
              for (; 0 <= --m2; ) {
                var v = r2[--g2] == c2 ? this.DM : Math.floor(r2[g2] * p2 + (r2[g2 - 1] + f2) * h2);
                if ((r2[g2] += i2.am(0, v, r2, m2, 0, u2)) < v)
                  for (i2.dlShiftTo(m2, b), r2.subTo(b, r2); r2[g2] < --v; )
                    r2.subTo(b, r2);
              }
              null != t2 && (r2.drShiftTo(u2, t2), s2 != e2 && o.ZERO.subTo(t2, t2)), r2.t = u2, r2.clamp(), 0 < a2 && r2.rShiftTo(a2, r2), s2 < 0 && o.ZERO.subTo(r2, r2);
            }
          }
        }, o.prototype.invDigit = function() {
          if (this.t < 1)
            return 0;
          var e2 = this[0];
          if (0 == (1 & e2))
            return 0;
          var t2 = 3 & e2;
          return 0 < (t2 = (t2 = (t2 = (t2 = t2 * (2 - (15 & e2) * t2) & 15) * (2 - (255 & e2) * t2) & 255) * (2 - ((65535 & e2) * t2 & 65535)) & 65535) * (2 - e2 * t2 % this.DV) % this.DV) ? this.DV - t2 : -t2;
        }, o.prototype.isEven = function() {
          return 0 == (0 < this.t ? 1 & this[0] : this.s);
        }, o.prototype.exp = function(e2, t2) {
          if (4294967295 < e2 || e2 < 1)
            return o.ONE;
          var r2, n2 = l(), i2 = l(), s2 = t2.convert(this), a2 = _(e2) - 1;
          for (s2.copyTo(n2); 0 <= --a2; )
            t2.sqrTo(n2, i2), 0 < (e2 & 1 << a2) ? t2.mulTo(i2, s2, n2) : (r2 = n2, n2 = i2, i2 = r2);
          return t2.revert(n2);
        }, o.prototype.chunkSize = function(e2) {
          return Math.floor(Math.LN2 * this.DB / Math.log(e2));
        }, o.prototype.toRadix = function(e2) {
          if (null == e2 && (e2 = 10), 0 == this.signum() || e2 < 2 || 36 < e2)
            return "0";
          var t2 = this.chunkSize(e2), r2 = Math.pow(e2, t2), n2 = m(r2), i2 = l(), o2 = l(), s2 = "";
          for (this.divRemTo(n2, i2, o2); 0 < i2.signum(); )
            s2 = (r2 + o2.intValue()).toString(e2).substr(1) + s2, i2.divRemTo(n2, i2, o2);
          return o2.intValue().toString(e2) + s2;
        }, o.prototype.fromRadix = function(e2, t2) {
          this.fromInt(0);
          for (var r2 = this.chunkSize(t2 = null == t2 ? 10 : t2), n2 = Math.pow(t2, r2), i2 = false, s2 = 0, a2 = 0, u2 = 0; u2 < e2.length; ++u2) {
            var c2 = g(e2, u2);
            c2 < 0 ? "-" == e2.charAt(u2) && 0 == this.signum() && (i2 = true) : (a2 = t2 * a2 + c2, ++s2 >= r2 && (this.dMultiply(n2), this.dAddOffset(a2, 0), a2 = s2 = 0));
          }
          0 < s2 && (this.dMultiply(Math.pow(t2, s2)), this.dAddOffset(a2, 0)), i2 && o.ZERO.subTo(this, this);
        }, o.prototype.dMultiply = function(e2) {
          this[this.t] = this.am(0, e2 - 1, this, 0, 0, this.t), ++this.t, this.clamp();
        }, o.prototype.dAddOffset = function(e2, t2) {
          if (0 != e2) {
            for (; this.t <= t2; )
              this[this.t++] = 0;
            for (this[t2] += e2; this[t2] >= this.DV; )
              this[t2] -= this.DV, ++t2 >= this.t && (this[this.t++] = 0), ++this[t2];
          }
        }, o);
        function o(e2, t2) {
          null != e2 && (null == t2 && "string" != typeof e2 ? this.fromString(e2, 256) : this.fromString(e2, t2));
        }
        a.prototype.convert = function(e2) {
          return e2.s < 0 || 0 <= e2.compareTo(this.m) ? e2.mod(this.m) : e2;
        }, a.prototype.revert = function(e2) {
          return e2;
        }, a.prototype.reduce = function(e2) {
          e2.divRemTo(this.m, null, e2);
        }, a.prototype.mulTo = function(e2, t2, r2) {
          e2.multiplyTo(t2, r2), this.reduce(r2);
        }, a.prototype.sqrTo = function(e2, t2) {
          e2.squareTo(t2), this.reduce(t2);
        };
        var s = a;
        function a(e2) {
          this.m = e2;
        }
        c.prototype.convert = function(e2) {
          var t2 = l();
          return e2.abs().dlShiftTo(this.m.t, t2), t2.divRemTo(this.m, null, t2), e2.s < 0 && 0 < t2.compareTo(i.ZERO) && this.m.subTo(t2, t2), t2;
        }, c.prototype.revert = function(e2) {
          var t2 = l();
          return e2.copyTo(t2), this.reduce(t2), t2;
        }, c.prototype.reduce = function(e2) {
          for (; e2.t <= this.mt2; )
            e2[e2.t++] = 0;
          for (var t2 = 0; t2 < this.m.t; ++t2) {
            var r2 = 32767 & e2[t2], n2 = r2 * this.mpl + ((r2 * this.mph + (e2[t2] >> 15) * this.mpl & this.um) << 15) & e2.DM;
            for (e2[r2 = t2 + this.m.t] += this.m.am(0, n2, e2, t2, 0, this.m.t); e2[r2] >= e2.DV; )
              e2[r2] -= e2.DV, e2[++r2]++;
          }
          e2.clamp(), e2.drShiftTo(this.m.t, e2), 0 <= e2.compareTo(this.m) && e2.subTo(this.m, e2);
        }, c.prototype.mulTo = function(e2, t2, r2) {
          e2.multiplyTo(t2, r2), this.reduce(r2);
        }, c.prototype.sqrTo = function(e2, t2) {
          e2.squareTo(t2), this.reduce(t2);
        };
        var u = c;
        function c(e2) {
          this.m = e2, this.mp = e2.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << e2.DB - 15) - 1, this.mt2 = 2 * e2.t;
        }
        function l() {
          return new i(null);
        }
        function d(e2, t2) {
          return new i(e2, t2);
        }
        r = (t = "undefined" != typeof navigator) && "Microsoft Internet Explorer" == navigator.appName ? (i.prototype.am = function(e2, t2, r2, n2, i2, o2) {
          for (var s2 = 32767 & t2, a2 = t2 >> 15; 0 <= --o2; ) {
            var u2 = 32767 & this[e2], c2 = this[e2++] >> 15, l2 = a2 * u2 + c2 * s2;
            i2 = ((u2 = s2 * u2 + ((32767 & l2) << 15) + r2[n2] + (1073741823 & i2)) >>> 30) + (l2 >>> 15) + a2 * c2 + (i2 >>> 30), r2[n2++] = 1073741823 & u2;
          }
          return i2;
        }, 30) : t && "Netscape" != navigator.appName ? (i.prototype.am = function(e2, t2, r2, n2, i2, o2) {
          for (; 0 <= --o2; ) {
            var s2 = t2 * this[e2++] + r2[n2] + i2;
            i2 = Math.floor(s2 / 67108864), r2[n2++] = 67108863 & s2;
          }
          return i2;
        }, 26) : (i.prototype.am = function(e2, t2, r2, n2, i2, o2) {
          for (var s2 = 16383 & t2, a2 = t2 >> 14; 0 <= --o2; ) {
            var u2 = 16383 & this[e2], c2 = this[e2++] >> 14, l2 = a2 * u2 + c2 * s2;
            i2 = ((u2 = s2 * u2 + ((16383 & l2) << 14) + r2[n2] + i2) >> 28) + (l2 >> 14) + a2 * c2, r2[n2++] = 268435455 & u2;
          }
          return i2;
        }, 28);
        for (var p = (i.prototype.DB = r, i.prototype.DM = (1 << r) - 1, i.prototype.DV = 1 << r, i.prototype.FV = Math.pow(2, 52), i.prototype.F1 = 52 - r, i.prototype.F2 = 2 * r - 52, []), h = "0".charCodeAt(0), f = 0; f <= 9; ++f)
          p[h++] = f;
        for (h = "a".charCodeAt(0), f = 10; f < 36; ++f)
          p[h++] = f;
        for (h = "A".charCodeAt(0), f = 10; f < 36; ++f)
          p[h++] = f;
        function g(e2, t2) {
          return null == (e2 = p[e2.charCodeAt(t2)]) ? -1 : e2;
        }
        function m(e2) {
          var t2 = l();
          return t2.fromInt(e2), t2;
        }
        function _(e2) {
          var t2, r2 = 1;
          return 0 != (t2 = e2 >>> 16) && (e2 = t2, r2 += 16), 0 != (t2 = e2 >> 8) && (e2 = t2, r2 += 8), 0 != (t2 = e2 >> 4) && (e2 = t2, r2 += 4), 0 != (t2 = e2 >> 2) && (e2 = t2, r2 += 2), 0 != (t2 = e2 >> 1) && (e2 = t2, r2 += 1), r2;
        }
        i.ZERO = m(0), i.ONE = m(1);
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(2), i = r(1), o = r(0), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, a = o.Y.Group, u = (c.prototype.destroy = function() {
          this.connMgr = null, this.eventBus = null, this.logger = null, this.settings = null, this.engineConfig = null, this.dbMgr = null, this.dbGroupMemberMap.clear();
        }, c.prototype.setDBGroup = function(e2, t2) {
          var r2 = this;
          this.dbGroupApplyMap = e2, t2 && (this.dbGroup = t2, this.dbGroup.mutedInfo || (this.dbGroup.mutedInfo = { mode: 0, expiredTime: 0, roles: [] }), this.dbGroup.verifyInfo || (this.dbGroup.verifyInfo = { joinMode: 0, inviteMode: 0, beInviteMode: 0 }), this.dbGroupMemberMap.size < 3 && this.dbMgr.getGroupMemberList(this.groupID).then(function(e3) {
            t2.totalMemberCount || (t2.totalMemberCount = e3.filter(function(e4) {
              return !e4.state;
            }).length);
            var n2 = r2.settings.getRealClientTimestamp();
            e3.forEach(function(e4) {
              -1 != e4.muteExpiredTime && e4.muteExpiredTime <= n2 && (e4.muteExpiredTime = 0), r2.dbGroupMemberMap.set(e4.userID, e4);
            });
          }));
        }, c.prototype.createGroup = function(e2, t2, r2) {
          var n2 = this, s2 = { time: /* @__PURE__ */ new Date(), groupInfo: e2, config: r2, userIDs: t2 }, u2 = [], c2 = (Array.isArray(t2) && (t2 = t2.filter(function(e3) {
            return !!Object(i.n)(e3) || (u2.push({ userID: e3, reason: 6000001 }), false);
          }), t2 = Array.from(new Set(t2))), r2.groupAttributes), l = Object.keys(c2).map(function(e3) {
            return { key: e3, value: c2[e3], seq: 1 };
          }), d = { group_id: e2.groupID || "", group_name: e2.groupName || "", group_notice: r2.groupNotice || "", group_avatar: Object(i.k)(e2.groupAvatarUrl || ""), user_ids: t2, limit_info: { maxMemberCount: r2.maxMemberCount, joinMode: r2.joinMode, inviteMode: r2.inviteMode, beInviteMode: r2.beInviteMode }, attributes: l };
          return this.connMgr.sendRequest(o.d.group_create, d).then(function(t3) {
            if (t3.code)
              return c3 = Object(i.x)(o.t.GroupModuleCreateGroupError, t3.message, t3.code), s2.error = c3, n2.logger.warn(a, o.X.CreateGroup, s2), Promise.reject(c3);
            t3.error_users.forEach(function(e3) {
              return u2.push(n2.createErrorUser(e3));
            }), n2.groupID = t3.group_id, n2.dbGroup.groupID = n2.groupID, n2.dbGroup.totalMemberCount = t3.member_count, t3.attributes = { attributes: l, seq: t3.group_attribute_seq }, t3.group_name = e2.groupName, t3.group_notice = r2.groupNotice, t3.group_avatar = d.group_avatar, t3.limit_info = d.limit_info;
            var c3 = n2.createGroupCallback(t3);
            return n2.logger.info(a, o.X.CreateGroup, s2), { groupInfo: n2.createGroupFullInfo(), userList: c3, errorUserList: u2 };
          });
        }, c.prototype.joinGroup = function(e2, t2) {
          var r2 = this, n2 = e2 ? o.X.JoinGroup : o.X.SendGroupJoinApp, u2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID }, c2 = { group_id: this.groupID, user_id: null == t2 ? void 0 : t2.wording, offline_info: Object(i.g)(null == t2 ? void 0 : t2.pushConfig) };
          return this.connMgr.sendRequest(e2 ? o.d.group_enter : o.d.group_apply, c2).then(function(c3) {
            var l, d;
            return c3.code ? (l = Object(i.x)(o.t.GroupModuleJoinGroupError, c3.message, c3.code), u2.error = l, r2.logger.warn(a, n2, u2), Promise.reject(l)) : e2 && c3.group_list_seq || c3.group_info && c3.group_info.group_id ? (e2 || Object.assign(c3, c3.group_info), r2.dbGroup.totalMemberCount = c3.member_count, c3.member.member_data.user_avatar || (c3.member.member_data.user_avatar = r2.engineConfig.user.userAvatarUrl), c3.op_user = s(s({}, c3.member.member_data), { user_id: c3.member.user_id }), c3.members = [c3.member], l = r2.joinGroupCallback(c3, o.P.Joined, o.L.Joined), r2.logger.info(a, n2, u2), { groupInfo: l }) : (c3.apply_group_info && c3.apply_group_info.create_time && (l = { type: o.F.Join, state: o.E.Waiting, updateTime: c3.apply_group_info.update_time, createTime: c3.apply_group_info.create_time, wording: (null == t2 ? void 0 : t2.wording) || "", seq: c3.apply_group_info.base_info.update_time, groupInfo: { groupID: r2.groupID, groupName: Object(i.h)(c3.apply_group_info.base_info.user_name), groupAvatarUrl: Object(i.h)(c3.apply_group_info.base_info.avatar) }, applyUser: Object(i.u)(r2.engineConfig.user.userID, r2.engineConfig) }, r2.syncGroupApplyMap(l) ? r2.eventBus.emit(o.u.GroupAppUpd, { applicationList: [l] }) : (d = o.D.Added, r2.eventBus.emit(o.u.GroupAppList, { action: d, applicationList: [l] })), r2.updateGroupApplySeq(c3.apply_group_info.apply_list_seq)), void r2.logger.info(a, n2, u2));
          });
        }, c.prototype.inviteUsers = function(e2, t2, r2) {
          var n2 = this, s2 = e2 ? o.X.SendGroupInviteApp : o.X.InviteUsersIntoGroup, u2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userIDs: t2 }, c2 = [], l = (t2 = t2.filter(function(e3) {
            return !(!Object(i.n)(e3) || e3 == n2.engineConfig.user.userID) || (c2.push({ userID: e3, reason: 6000001 }), false);
          }), t2 = Array.from(new Set(t2)), null == r2 ? void 0 : r2.wording);
          r2 = e2 ? { group_id: this.groupID, user_infos: t2.map(function(e3) {
            return { key: e3, value: l };
          }), offline_info: Object(i.g)(null == r2 ? void 0 : r2.pushConfig) } : { group_id: this.groupID, user_ids: t2 };
          return this.connMgr.sendRequest(o.d.group_invite, r2).then(function(t3) {
            if (t3.code)
              return r3 = Object(i.x)(o.t.GroupModuleInviteUserIntoGroupError, t3.message, t3.code), u2.error = r3, n2.logger.warn(a, s2, u2), Promise.reject(r3);
            n2.dbGroup.totalMemberCount = t3.member_count, t3.error_users.forEach(function(e3) {
              return c2.push(n2.createErrorUser(e3));
            });
            var r3 = n2.checkSyncUsers(t3, "inviteUse", true), d = (r3.length && n2.eventBus.emit(o.u.GroupMemberState, { groupID: n2.groupID, state: o.S.Enter, event: o.P.Invited, userList: r3, operatedInfo: n2.createOwnerOperator() }), []), p = [];
            if (t3.apply_users && t3.apply_users.length) {
              for (var h = [n2.dbGroup.groupAppSeq || 0], f = n2.dbGroup.dataSeq, g = { groupID: n2.groupID, groupName: n2.dbGroup.groupName, groupAvatarUrl: n2.dbGroup.groupAvatarUrl }, m = (t3 = (t3.apply_users.forEach(function(t4) {
                h.push(t4.apply_list_seq);
                var r4 = { userID: t4.base_info.user_id, userName: Object(i.h)(t4.base_info.user_name), userAvatarUrl: Object(i.h)(t4.base_info.avatar) };
                Object(i.w)(r4, n2.engineConfig), t4 = { type: o.F.Invite, state: o.E.Waiting, updateTime: t4.update_time, createTime: t4.create_time, wording: l || "", seq: f, groupInfo: g, applyUser: r4 };
                (n2.checkGroupApplyCreateTime(t4) ? p : d).push(t4), e2 || c2.push({ userID: r4.userID, reason: 6000544 });
              }), n2.syncGroupApplyMap(), n2.dbGroupMemberMap.get(n2.engineConfig.user.userID)), e2 && t3 && t3.memberRole < o.R.Member && (d.length && (t3 = o.D.Added, n2.eventBus.emit(o.u.GroupAppList, { action: t3, applicationList: d })), p.length && n2.eventBus.emit(o.u.GroupAppUpd, { applicationList: p })), h.sort(function(e3, t4) {
                return e3 - t4;
              }), 0); m < h.length && h[m] + 1 == h[m + 1]; m++)
                ;
              m && n2.updateGroupApplySeq(h[m], true);
            }
            return n2.logger.info(a, s2, u2), e2 ? { groupID: n2.groupID, errorUserList: c2 } : { groupID: n2.groupID, errorUserList: c2, userList: r3 };
          });
        }, c.prototype.kickMembers = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userIDs: e2 }, n2 = [], s2 = (e2 = e2.filter(function(e3) {
            return !!Object(i.n)(e3) || (n2.push({ userID: e3, reason: 6000001 }), false);
          }), e2 = Array.from(new Set(e2)), { group_id: this.groupID, user_ids: e2 });
          return this.connMgr.sendRequest(o.d.group_kickout, s2).then(function(s3) {
            var u2;
            if (s3.code)
              return u2 = Object(i.x)(o.t.GroupModuleKickoutGroupMemberError, s3.message, s3.code), r2.error = u2, t2.logger.warn(a, o.X.KickGroupMembers, r2), Promise.reject(u2);
            t2.dbGroup.totalMemberCount = s3.member_count;
            var c2 = [], l = [];
            return e2.forEach(function(e3) {
              var r3;
              s3.error_users.some(function(t3) {
                return t3.user_id === e3;
              }) || (r3 = t2.dbGroupMemberMap.get(e3)) && (r3.state = 1, l.push(Object(i.t)(r3, t2.engineConfig)), t2.dbGroupMemberMap.set(e3, r3), c2.push(r3));
            }), e2 = l.map(function(e3) {
              return e3.userID;
            }), s3.error_users.forEach(function(e3) {
              return n2.push(t2.createErrorUser(e3));
            }), t2.updateMemberSeq(s3.member_all_seq), t2.dbMgr.addGroupMemberList(t2.groupID, c2), t2.eventBus.emit(o.u.GroupMemberState, { groupID: t2.groupID, state: o.S.Quit, event: o.P.KickedOut, userList: l, operatedInfo: t2.createOwnerOperator() }), t2.logger.info(a, o.X.KickGroupMembers, r2), { groupID: t2.groupID, kickedUserIDs: e2, errorUserList: n2 };
          });
        }, c.prototype.transferGroupOwner = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userID: e2 }, n2 = { group_id: this.groupID, group_name: e2 };
          return this.connMgr.sendRequest(o.d.group_owner_transfer, n2).then(function(n3) {
            var s2;
            return n3.code ? (s2 = Object(i.x)(o.t.GroupModuleTransferOwnerError, n3.message, n3.code), r2.error = s2, t2.logger.warn(a, o.X.TransferGroupOwner, r2), Promise.reject(s2)) : (t2.transferGroupOwnerCallback([{ userID: e2, dataSeq: +n3.conv_msg_seq.toString() }, { userID: t2.engineConfig.user.userID, dataSeq: +n3.conv_list_seq.toString() }]), t2.logger.info(a, o.X.TransferGroupOwner, r2), { groupID: t2.groupID, toUserID: e2 });
          });
        }, c.prototype.updateGroupInfo = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), type: t2, value: e2 }, s2 = [o.d.group_modify_notice, o.d.group_modify_name, o.d.group_modify_avatar][t2], u2 = t2 == o.J.Avatar ? { user_id: this.groupID, user_name: Object(i.k)(e2) } : { group_id: this.groupID, group_name: e2 };
          return this.connMgr.sendRequest(s2, u2).then(function(s3) {
            var u3;
            if (s3.code)
              return u3 = Object(i.x)(o.t.GroupModuleUpdateGroupInfoError, s3.message, s3.code), n2.error = u3, r2.logger.warn(a, o.X.UpdateGroupInfo, n2), Promise.reject(u3);
            r2.mergeGroupData(+s3.conv_list_seq.toString(), t2, e2, r2.createOwnerOperator()), r2.logger.info(a, o.X.UpdateGroupInfo, n2);
          });
        }, c.prototype.muteGroup = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), config: e2 }, n2 = (e2.duration = 0 | e2.duration, e2.mode), s2 = (n2 == o.U.None || n2 == o.U.All ? e2.roles = [] : n2 == o.U.Normal && (e2.roles = [o.R.Member]), { group_id: this.groupID, duration: e2.duration, is_all_forbid: n2 == o.U.All, forbid_list: e2.roles });
          return this.connMgr.sendRequest(o.d.group_set_forbid, s2).then(function(s3) {
            if (s3.code)
              return u2 = Object(i.x)(o.t.GroupModuleUpdateGroupInfoError, s3.message, s3.code), r2.error = u2, t2.logger.warn(a, o.X.MuteGroup, r2), Promise.reject(u2);
            var u2 = { mode: n2, expiredTime: 0 < e2.duration ? +s3.conv_msg_seq.toString() : e2.duration, roles: e2.roles };
            return t2.mergeGroupData(+s3.conv_list_seq.toString(), o.J.Mute, u2, t2.createOwnerOperator()), t2.eventBus.exec(o.u.IMuteGroup, t2.groupID), t2.logger.info(a, o.X.MuteGroup, r2), { groupID: t2.groupID, isMute: n2 != o.U.None, mutedInfo: u2 };
          });
        }, c.prototype.queryGroupInfo = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID }, r2 = { group_id: this.groupID };
          return this.connMgr.sendRequest(o.d.group_data, r2).then(function(r3) {
            var n2, s2 = r3.code;
            return s2 && 6000104 != s2 ? (n2 = Object(i.x)(o.t.GroupModuleQueryGroupInfoError, r3.message, s2), t2.error = n2, e2.logger.warn(a, o.X.QueryGroupInfo, t2), Promise.reject(n2)) : (s2 || e2.queryGroupInfoCallback(r3), e2.logger.info(a, o.X.QueryGroupInfo, t2), { groupInfo: e2.createGroupFullInfo() });
          });
        }, c.prototype.updateGroupAttributes = function(e2) {
          var t2, r2 = this, n2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, params: e2 }, s2 = [], u2 = o.G.Set, c2 = Array.isArray(e2) ? (u2 = o.G.Delete, t2 = o.X.DeleteGroupAttributes, e2 = e2.filter(function(e3) {
            return !!Object(i.n)(e3) || (s2.push(e3), false);
          }), (e2 = Array.from(new Set(e2))).map(function(e3) {
            return { key: e3, value: "" };
          })) : (t2 = o.X.SetGroupAttributes, Object.keys(e2).map(function(t3) {
            return { key: t3, value: e2[t3] };
          }));
          c2 = { group_id: this.groupID, attributes: { action: u2, attributes: c2 } };
          return this.connMgr.sendRequest(o.d.group_modify_attr, c2).then(function(e3) {
            var c3;
            return e3.code ? (c3 = Object(i.x)(o.t.GroupModuleGroupAttributesOperationFailed, e3.message, e3.code), n2.error = c3, r2.logger.warn(a, t2, n2), Promise.reject(c3)) : (r2.mergeGroupAttributes(u2, e3.attributes, r2.createOwnerOperator()), e3.fail_keys.forEach(function(e4) {
              return s2.push(e4.key);
            }), r2.logger.info(a, t2, n2), { groupID: r2.groupID, errorKeys: s2 });
          });
        }, c.prototype.queryGroupAttributes = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, keys: e2 }, n2 = this.dbGroup.attributes || {}, s2 = (e2 || Object.keys(n2)).map(function(e3) {
            return { key: e3, seq: (null == (e3 = n2[e3]) ? void 0 : e3.seq) || 1 };
          });
          s2 = { group_id: this.groupID, attributes: { seq: this.dbGroup.attributeSeq || 0, attributes: s2 } };
          return this.connMgr.sendRequest(o.d.group_attr, s2).then(function(n3) {
            var s3, u2 = n3.code;
            return u2 && 6000104 != u2 ? (s3 = Object(i.x)(o.t.GroupModuleGroupAttributesQueryFailed, n3.message, u2), r2.error = s3, t2.logger.warn(a, o.X.QueryGroupAttributes, r2), Promise.reject(s3)) : (u2 || t2.mergeGroupAttributes(o.G.Query, n3.attributes), t2.logger.info(a, o.X.QueryGroupAttributes, r2), { groupID: t2.groupID, groupAttributes: t2.createGroupAttributes(e2) });
          });
        }, c.prototype.setMemberInfo = function(e2, t2, r2) {
          var n2 = this, s2 = { time: /* @__PURE__ */ new Date(), userID: e2, value: t2 }, u2 = r2 == o.Q.Nickname ? o.d.group_member_nickname_set : o.d.group_member_role_set, c2 = r2 == o.Q.Nickname ? o.X.SetGroupMemberNickname : o.X.SetGroupMemberRole, l = { group_id: this.groupID };
          return r2 == o.Q.Nickname ? (l.group_name = e2, l.group_notice = t2) : (l.user_id = e2, l.role = t2), this.connMgr.sendRequest(u2, l).then(function(u3) {
            var l2;
            return u3.code ? (l2 = Object(i.x)(o.t.GroupModuleUpdateGroupMemberInfoError, u3.message, u3.code), s2.error = l2, n2.logger.warn(a, c2, s2), Promise.reject(l2)) : (n2.mergeGroupMemberInfo(r2, +u3.conv_list_seq.toString(), t2, e2), n2.logger.info(a, c2, s2), r2 == o.Q.Nickname ? { groupID: n2.groupID, forUserID: e2, nickname: t2 } : { groupID: n2.groupID, forUserID: e2, role: t2 });
          });
        }, c.prototype.queryMemberInfo = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID, userID: e2 }, n2 = { group_id: this.groupID, user_id: e2 };
          return this.connMgr.sendRequest(o.d.group_member_data, n2).then(function(n3) {
            var s2 = n3.code;
            if (s2 && 6000104 != s2)
              return u2 = Object(i.x)(o.t.GroupModuleQueryGroupMemberInfoError, n3.message, s2), r2.error = u2, t2.logger.warn(a, o.X.QueryGroupMemberInfo, r2), Promise.reject(u2);
            var u2 = t2.dbGroupMemberMap.get(e2) || { userID: e2 };
            return s2 || (s2 = t2.settings.getRealClientTimestamp(), u2 = t2.createDBMember(n3.member, s2), t2.dbMgr.addGroupMemberList(t2.groupID, [u2])), t2.logger.info(a, o.X.QueryGroupMemberInfo, r2), { groupID: t2.groupID, userInfo: Object(i.t)(u2, t2.engineConfig) };
          });
        }, c.prototype.queryMemberList = function(e2) {
          var t2 = this;
          return new Promise(function(r2, n2) {
            var i2 = { time: /* @__PURE__ */ new Date(), groupID: t2.groupID, config: e2 };
            t2.isFullMembers && t2.dbGroup.totalMemberCount <= t2.dbGroupMemberMap.size ? t2.queryGroupMembersCallback(e2, false, null, i2, r2, n2) : t2.mergeServerMemberList(o.v.Biz, function(o2) {
              t2.queryGroupMembersCallback(e2, false, o2, i2, r2, n2);
            });
          });
        }, c.prototype.queryMemberCount = function() {
          var e2 = { groupID: this.groupID, count: this.dbGroup.totalMemberCount };
          return this.logger.info(a, o.X.QueryGroupMemberCount, e2), Promise.resolve(e2);
        }, c.prototype.muteMembers = function(e2, t2, r2) {
          var n2 = this, s2 = { time: /* @__PURE__ */ new Date(), groupID: this.groupID };
          if (e2 && (!r2 || r2 < -1))
            return Promise.reject({ code: 6000001, message: "The config instance of duration is invalid." });
          r2 = e2 ? 0 | r2 : 0;
          var u2 = [];
          t2 = t2.filter(function(e3) {
            return !!Object(i.n)(e3) || (u2.push({ userID: e3, reason: 6000001 }), false);
          }), t2 = Array.from(new Set(t2)), t2 = { call_id: this.groupID, user_ids: t2, timeout: r2 };
          return this.connMgr.sendRequest(o.d.group_member_forbid_set, t2).then(function(t3) {
            if (t3.code)
              return l = Object(i.x)(o.t.GroupModuleUpdateGroupMemberInfoError, t3.message, t3.code), s2.error = l, n2.logger.warn(a, o.X.MuteGroupMembers, s2), Promise.reject(l);
            t3.error_users.forEach(function(e3) {
              return u2.push(n2.createErrorUser(e3));
            });
            var c2 = n2.settings.getRealClientTimestamp(), l = t3.members.map(function(e3) {
              return n2.createDBMember(e3, c2);
            });
            return n2.dbMgr.addGroupMemberList(n2.groupID, l), n2.eventBus.exec(o.u.IMuteGroup, n2.groupID), n2.eventBus.emit(o.u.GroupMemberInfo, { groupID: n2.groupID, userList: l.map(function(e3) {
              return Object(i.t)(e3, n2.engineConfig);
            }), operatedInfo: n2.createOwnerOperator() }), n2.logger.info(a, o.X.MuteGroupMembers, s2), { groupID: n2.groupID, isMute: e2, duration: r2, mutedUserIDs: l.map(function(e3) {
              return e3.userID;
            }), errorUserList: u2 };
          });
        }, c.prototype.queryMemberMutedList = function(e2) {
          var t2 = this;
          return new Promise(function(r2, n2) {
            var i2 = { time: /* @__PURE__ */ new Date(), groupID: t2.groupID, config: e2 };
            t2.isFullMembers && t2.dbGroup.totalMemberCount <= t2.dbGroupMemberMap.size ? t2.queryGroupMembersCallback(e2, true, null, i2, r2, n2) : t2.mergeServerMemberList(o.v.Biz, function(o2) {
              t2.queryGroupMembersCallback(e2, true, o2, i2, r2, n2);
            });
          });
        }, c.prototype.queryReceiptMemberList = function(e2, t2, r2, n2) {
          var s2 = this;
          return new Promise(function(u2) {
            function c2() {
              for (var e3 = {}, t3 = (s2.dbGroupMemberMap.forEach(function(t4) {
                return e3[t4.seq] = t4;
              }), Object.keys(l).filter(function(t4) {
                return (n2 ? l[t4] : !l[t4]) && !e3[t4];
              })), c3 = [], d2 = 0; d2 < t3.length; d2 += 100) {
                var p2 = s2.connMgr.sendRequest(o.d.group_members_by_seq, { conv_id: s2.groupID, conv_msg_seq: t3.slice(d2, d2 + 100) }, o.j.SDK);
                c3.push(p2);
              }
              Promise.all(c3).then(function(t4) {
                var r3 = s2.settings.getRealClientTimestamp(), n3 = [];
                t4.forEach(function(t5) {
                  var i2 = t5.members;
                  t5 = t5.deleted_members;
                  i2 && i2.length && i2.forEach(function(t6) {
                    t6 = s2.createDBMember(t6, r3), e3[t6.seq] = t6, n3.push(t6);
                  }), t5 && t5.length && t5.forEach(function(t6) {
                    t6 = s2.createDBMember(t6, r3, true), e3[t6.seq] = t6, n3.push(t6);
                  });
                }), s2.dbMgr.addGroupMemberList(s2.groupID, n3);
              }).then(function() {
                var t4 = 0, c4 = [], d3 = (Object.keys(l).forEach(function(r3) {
                  var i2;
                  (n2 ? l[r3] : !l[r3]) && (t4++, (i2 = e3[r3]) ? c4.push(i2) : f.push(r3));
                }), c4.sort(function(e4, t5) {
                  return e4.seq - t5.seq;
                }), c4.length), p3 = (null == (p3 = c4[c4.length - 1]) ? void 0 : p3.seq) || 0, m2 = r2.nextFlag || 0, _2 = 0, b2 = (0 < m2 && m2 < p3 ? _2 = c4.findIndex(function(e4) {
                  return e4.seq == m2;
                }) + 1 : p3 <= m2 && p3 && (_2 = c4.length), _2 + Math.min(o.m.MAX_QUERY_PAGE_COUNT, r2.count)), v2 = (c4 = c4.slice(_2, b2)).length, y = (null == (y = c4[v2 - 1]) ? void 0 : y.seq) || 0, M = c4.map(function(e4) {
                  return Object(i.t)(e4, s2.engineConfig);
                }), k = v2 == d3 || p3 == y ? 0 : y;
                g.flag = f.join(), Object.assign(g, { start: _2, end: b2, next: y, max: p3, total: d3, totalSeq: t4, count: v2, nextFlag: k }), s2.logger.info(a, h, g), u2({ groupID: s2.groupID, nextFlag: k, userList: M });
              });
            }
            var l = t2.memberSeqs, d = t2.receiptMemberListSeq || 0, p = e2.conversationSeq, h = n2 ? o.X.QueryReceiptReadMemberList : o.X.QueryReceiptUnreadMemberList, f = [], g = { time: /* @__PURE__ */ new Date(), groupID: s2.groupID, msgSeq: p, dbSeq: d, config: r2, flag: "" };
            if (d && t2.receiptStatus != o.cb.Processing && Object.keys(l).filter(function(e3) {
              return l[e3];
            }).length >= t2.readMemberCount)
              return c2();
            var m = 1, _ = 0, b = 0, v = ++s2.mergeListSeqs.receiptDetail + s2.groupID;
            s2.fetchServerPageReceiptDetail(d, m, p).then(function e3(r3) {
              var n3 = r3.code && 6000104 != r3.code ? 0 : r3.next_list_seq;
              n3 && (t2.receiptMemberListSeq = n3), r3.read_members && (_ += r3.read_members.length, r3.read_members.forEach(function(e4) {
                return l[e4.toString()] = 1;
              })), r3.unread_members && (b += r3.unread_members.length, r3.unread_members.forEach(function(e4) {
                return l[e4.toString()] = 0;
              })), t2.readMemberCount = r3.read_count || 0, t2.unreadMemberCount = r3.unread_count || 0, !r3.fetch_end && n3 && s2.engineConfig.token ? s2.fetchServerPageReceiptDetail(n3, ++m, p).then(e3) : (r3.degree = m, r3.read_members_len = _, r3.unread_members_len = b, n3 = o.d.msg_read_receipt_detail.cmd, g.dataReport = s2.dataReport.endNetworkRequest(n3, v, r3), s2.dbMgr.addMessageExtraList([t2], "receiptinfo"), c2());
            });
          });
        }, c.prototype.updateGroupVerifyMode = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), type: t2, mode: e2 }, s2 = ["joinMode", "inviteMode", "beInviteMode"][t2];
          t2 = { group_id: this.groupID, set_flag: [1, 2, 4][t2], limit_info: ((t2 = {})[s2] = e2, t2) };
          return this.connMgr.sendRequest(o.d.group_limit, t2).then(function(t3) {
            if (t3.code)
              return c2 = Object(i.x)(o.t.GroupModuleUpdateGroupInfoError, t3.message, t3.code), n2.error = c2, r2.logger.warn(a, o.X.UpdateGroupInfo, n2), Promise.reject(c2);
            var u2 = r2.dbGroup.verifyInfo[s2] != e2, c2 = (r2.dbGroup.verifyInfo[s2] = e2, +t3.conv_list_seq.toString() || 0);
            return (r2.dbGroup.dataSeq || 0) + 1 != c2 ? r2.connMgr.sendRequest(o.d.group_data, { group_id: r2.groupID }).then(function(e3) {
              e3.code || r2.queryGroupInfoCallback(e3), u2 && (e3 = { groupID: r2.groupID, verifyInfo: r2.dbGroup.verifyInfo, operatedInfo: r2.createOwnerOperator() }, r2.eventBus.emit(o.u.GroupVerifyInfo, e3));
            }) : u2 && (t3 = { groupID: r2.groupID, verifyInfo: r2.dbGroup.verifyInfo, operatedInfo: r2.createOwnerOperator() }, r2.eventBus.emit(o.u.GroupVerifyInfo, t3)), r2.dbGroup.dataSeq = c2, r2.dbMgr.addGroupList([r2.dbGroup]), r2.logger.info(a, o.X.UpdateGroupVerifyMode, n2), { groupID: r2.groupID, mode: e2 };
          });
        }, c.prototype.acceptApply = function(e2, t2, r2) {
          var n2 = this, s2 = { time: /* @__PURE__ */ new Date() }, u2 = e2 ? o.X.AcceptGroupJoinApp : o.X.AcceptGroupInviteApp, c2 = e2 ? o.d.group_apply_accept : o.d.group_invite_accept;
          r2 = { group_id: this.groupID, user_id: t2, offline_info: Object(i.g)(null == r2 ? void 0 : r2.pushConfig) };
          return this.connMgr.sendRequest(c2, r2).then(function(r3) {
            if (r3.code)
              return c3 = Object(i.x)(o.t.GroupModuleServerError, r3.message, r3.code), s2.error = c3, n2.logger.warn(a, u2, s2), Promise.reject(c3);
            var c3 = n2.acceptApplyCallback(r3, t2, e2);
            return n2.logger.info(a, u2, s2), e2 ? { groupID: n2.groupID, userID: t2 } : { inviterUserID: t2, groupInfo: c3 };
          });
        }, c.prototype.onPushGroupCreate = function(e2) {
          this.dbGroup.totalMemberCount = e2.member_count, this.createGroupCallback(e2);
        }, c.prototype.onPushGroupJoin = function(e2, t2, r2) {
          this.dbGroup.totalMemberCount = e2.member_count, e2.members = [e2.member], e2.op_user || (e2.op_user = { user_id: this.engineConfig.user.userID, user_name: this.engineConfig.user.userName }), this.joinGroupCallback(e2, t2, r2);
        }, c.prototype.onPushGroupDataModify = function(e2) {
          var t2, r2 = this.dbGroup.dataSeq || 0, n2 = e2.group_data_seq;
          n2 && r2 <= n2 && (t2 = (r2 = e2.modify_type || 0) == o.J.Mute ? Object(i.f)(e2.value, this.settings.getRealClientTimestamp()) : e2.value, this.mergeGroupData(n2, r2, t2, this.createOperator(e2.op_user)));
        }, c.prototype.onPushGroupAttributesModify = function(e2) {
          var t2 = this.dbGroup.attributeSeq || 0, r2 = e2.attributes.seq;
          r2 && t2 <= r2 && this.mergeGroupAttributes(o.G.Push, e2.attributes, this.createOperator(e2.op_user));
        }, c.prototype.onPushGroupOwnerTransfer = function(e2) {
          this.transferGroupOwnerCallback([{ userID: e2.user_id }, { userID: e2.op_user.user_id }]), this.updateMemberSeq(e2.member_all_seq);
        }, c.prototype.onPushMemberChange = function(e2) {
          var t2 = this, r2 = (this.dbGroup.totalMemberCount = e2.member_count, this.dbGroup.memberSeq || 0), n2 = e2.member_all_seq;
          if (n2 && !(n2 < r2))
            switch (e2.change_type) {
              case o.O.Enter:
              case o.O.ApplyJoin:
              case o.O.Invited:
              case o.O.ApplyInvited:
                var s2 = e2.change_type == o.O.Enter || e2.change_type == o.O.ApplyJoin ? o.P.Joined : o.P.Invited;
                this.eventBus.emit(o.u.GroupMemberState, { groupID: this.groupID, state: o.S.Enter, event: s2, userList: this.checkSyncUsers(e2, "memberChange", true), operatedInfo: this.createOperator(e2.op_user) });
                break;
              case o.O.Quit:
              case o.O.Kickout:
              case o.O.OwnerQuit:
                s2 = this.createOperator(e2.op_user), this.eventBus.emit(o.u.GroupMemberState, { groupID: this.groupID, state: o.S.Quit, event: e2.change_type === o.O.Kickout ? o.P.KickedOut : o.P.Left, userList: this.kickGroupMemberCallback(e2), operatedInfo: s2 }), e2.change_type == o.O.OwnerQuit && this.groupOwnerQuitCallback(e2.new_owner_id, s2);
                break;
              case o.O.Modify:
              case o.O.Mute:
                var a2 = e2.change_type == o.O.Mute ? this.settings.getRealClientTimestamp() : 0;
                s2 = e2.members.map(function(e3) {
                  return t2.createDBMember(e3, a2);
                });
                this.dbMgr.addGroupMemberList(this.groupID, s2), this.eventBus.exec(o.u.IMuteGroup, this.groupID), this.eventBus.emit(o.u.GroupMemberInfo, { groupID: this.groupID, userList: s2.map(function(e3) {
                  return Object(i.t)(e3, t2.engineConfig);
                }), operatedInfo: this.createOperator(e2.op_user) });
            }
        }, c.prototype.onDisConnected = function() {
          this.isFullMembers = false;
        }, c.prototype.createGroupFullInfo = function() {
          return { baseInfo: { groupID: this.dbGroup.groupID, groupName: this.dbGroup.groupName || "", groupAvatarUrl: this.dbGroup.groupAvatarUrl || "" }, groupNotice: this.dbGroup.groupNotice || "", groupAttributes: this.createGroupAttributes(), notificationStatus: this.dbGroup.notificationStatus, createTime: this.dbGroup.createTime || 0, maxMemberCount: this.dbGroup.maxMemberCount || 0, mutedInfo: this.dbGroup.mutedInfo, verifyInfo: this.dbGroup.verifyInfo };
        }, c.prototype.createOwnerOperator = function() {
          var e2 = this.dbGroupMemberMap.get(this.engineConfig.user.userID);
          return { userID: this.engineConfig.user.userID, userName: this.engineConfig.user.userName, memberRole: (null == e2 ? void 0 : e2.memberRole) || 0, memberNickname: (null == e2 ? void 0 : e2.memberNickname) || "" };
        }, c.prototype.createOperator = function(e2) {
          var t2 = e2.user_id, r2 = e2.user_name, n2 = e2.group_nick_name, s2 = (e2 = e2.role, this.dbGroupMemberMap.get(t2));
          return { userID: t2, userName: (null == (t2 = this.engineConfig.dbUserMap.get(t2)) ? void 0 : t2.userName) || Object(i.h)(r2), memberRole: (s2 ? s2.memberRole : e2) || o.R.Member, memberNickname: (s2 ? s2.memberNickname : n2) || "" };
        }, c.prototype.createDBMember = function(e2, t2, r2, n2) {
          void 0 === r2 && (r2 = false), void 0 === n2 && (n2 = false);
          var o2 = e2.user_id, a2 = this.dbGroupMemberMap.get(o2) || { userID: o2 }, u2 = (h = e2.member_data).group_nick_name, c2 = h.role, l = h.member_data_seq, d = h.enter_type, p = h.enter_time, h = h.op_user;
          return !(n2 = (n2 ? a2.memberNickname = "" : u2 && (a2.memberNickname = u2), c2 && (a2.memberRole = c2), t2 && (a2.muteExpiredTime = e2.member_data.forbid_expire_time, -1 != a2.muteExpiredTime && a2.muteExpiredTime <= t2 && (a2.muteExpiredTime = 0)), d && (a2.enterType = d), p && (a2.enterTime = p), h && h.user_id && (a2.operatedUser = s(s({}, Object(i.u)(h.user_id, this.engineConfig)), { memberRole: h.role, memberNickname: h.group_nick_name })), l && (a2.dataSeq = l), e2.member_seq)) && a2.seq || (a2.seq = n2), a2.memberNickname || (a2.memberNickname = ""), a2.state = r2 ? 1 : 0, this.dbGroupMemberMap.set(o2, a2), a2;
        }, c.prototype.createErrorUser = function(e2) {
          return { userID: e2.user_id, reason: e2.sub_code };
        }, c.prototype.createGroupAttributes = function(e2) {
          var t2 = this;
          if (!this.dbGroup.attributes)
            return this.dbGroup.attributes = {}, {};
          var r2 = {};
          return (e2 = e2 || Object.keys(this.dbGroup.attributes)).forEach(function(e3) {
            var n2 = t2.dbGroup.attributes[e3];
            n2 && !n2.state && (r2[e3] = n2.value);
          }), r2;
        }, c.prototype.createDBGroupAttributes = function(e2) {
          return (e2 || []).reduce(function(e3, t2) {
            return e3[t2.key] = t2, e3;
          }, {});
        }, c.prototype.updateVerifyInfo = function(e2) {
          e2 && (this.dbGroup.maxMemberCount = e2.maxMemberCount, delete e2.maxMemberCount, this.dbGroup.verifyInfo || (this.dbGroup.verifyInfo = { joinMode: 0, inviteMode: 0, beInviteMode: 0 }), Object.assign(this.dbGroup.verifyInfo, e2));
        }, c.prototype.checkMemberInfoChange = function(e2, t2, r2) {
          if (!e2)
            return false;
          -1 != e2.muteExpiredTime && e2.muteExpiredTime <= r2 && (e2.muteExpiredTime = 0);
          r2 = e2.memberNickname || "";
          var n2 = t2.memberNickname || "", i2 = e2.memberRole || 0, o2 = t2.memberRole || 0;
          e2 = e2.muteExpiredTime || 0, t2 = t2.muteExpiredTime || 0;
          return r2 != n2 || i2 != o2 || e2 != t2;
        }, c.prototype.mergeMemberList = function(e2, t2, r2, n2) {
          var a2, u2 = this, c2 = (r2 && (a2 = this.engineConfig.user.userID, this.dbGroupMemberMap.forEach(function(e3) {
            e3.state = a2 == e3.userID ? 0 : 1;
          })), ""), l = this.settings.getRealClientTimestamp(), d = /* @__PURE__ */ new Map();
          if (t2.forEach(function(t3) {
            var r3 = t3.event_type, n3 = (t3 = t3.member, r3 = r3 == o.O.Quit || r3 == o.O.Kickout || r3 == o.O.OwnerQuit, (n3 = u2.dbGroupMemberMap.get(t3.user_id)) && s({}, n3));
            (t3 = u2.createDBMember(t3, l, r3)).memberRole != o.R.Owner || r3 || (c2 = t3.userID), e2 != o.v.SDKLogin && e2 != o.v.SDKHb || !u2.checkMemberInfoChange(n3, t3, l) || d.set(t3.userID, Object(i.t)(t3, u2.engineConfig));
          }), c2 && (this.dbGroupMemberMap.forEach(function(e3) {
            e3.memberRole == o.R.Owner && e3.userID != c2 && (e3.memberRole = o.R.Member);
          }), d.forEach(function(e3) {
            e3.memberRole == o.R.Owner && e3.userID != c2 && (e3.memberRole = o.R.Member);
          })), d.size && this.eventBus.emit(o.u.GroupMemberInfo, { groupID: this.groupID, userList: Array.from(d.values()), operatedInfo: {} }), this.dbGroup.totalMemberCount >= this.dbGroupMemberMap.size)
            return this.dbMgr.addGroupMemberList(this.groupID, Array.from(this.dbGroupMemberMap.values())), n2 && n2();
          for (var p = Array.from(this.dbGroupMemberMap.values()).filter(function(e3) {
            return e3.seq;
          }), h = [], f = 0; f < p.length; f += 100) {
            var g = this.connMgr.sendRequest(o.d.group_members_by_seq, { conv_id: this.groupID, conv_msg_seq: p.slice(f, f + 100).map(function(e3) {
              return e3.seq;
            }) }, o.j.SDK);
            h.push(g);
          }
          Promise.all(h).then(function(e3) {
            e3.forEach(function(e4) {
              e4.members && e4.members.length && e4.members.forEach(function(e5) {
                var t3 = u2.dbGroupMemberMap.get(e5.user_id);
                t3 && (t3.state = 0, t3.seq = e5.member_seq);
              }), e4.deleted_members && e4.deleted_members.length && e4.deleted_members.forEach(function(e5) {
                var t3 = u2.dbGroupMemberMap.get(e5.user_id);
                t3 && (t3.state = 1, t3.seq = e5.member_seq);
              });
            }), u2.dbMgr.addGroupMemberList(u2.groupID, Array.from(u2.dbGroupMemberMap.values())), n2 && n2();
          });
        }, c.prototype.syncGroupInfo = function(e2, t2) {
          "string" == typeof e2 && (this.dbGroup.groupName = e2), "string" == typeof t2 && (this.dbGroup.groupAvatarUrl = t2), this.eventBus.exec(o.u.ISyncGroupInfo, this.groupID, e2, t2);
        }, c.prototype.mergeGroupData = function(e2, t2, r2, n2) {
          var s2;
          t2 != o.J.Notice && t2 ? t2 == o.J.Name ? (this.syncGroupInfo(r2, void 0), this.eventBus.emit(o.u.GroupName, { groupID: this.groupID, groupName: r2, operatedInfo: n2 })) : t2 == o.J.Avatar ? (r2 = Object(i.h)(r2), this.syncGroupInfo(void 0, r2), this.eventBus.emit(o.u.GroupAvatar, { groupID: this.groupID, groupAvatarUrl: r2, operatedInfo: n2 })) : t2 == o.J.Mute ? (this.dbGroup.mutedInfo = r2, this.eventBus.exec(o.u.IMuteGroup, this.groupID), this.eventBus.emit(o.u.GroupMute, { groupID: this.groupID, mutedInfo: r2, operatedInfo: n2 })) : t2 == o.J.Limit ? (s2 = r2.maxMemberCount, delete r2.maxMemberCount, s2 && (this.dbGroup.maxMemberCount = s2), this.dbGroup.verifyInfo && this.dbGroup.verifyInfo.joinMode == r2.joinMode && this.dbGroup.verifyInfo.inviteMode == r2.inviteMode && this.dbGroup.verifyInfo.beInviteMode == r2.beInviteMode || (s2 = { groupID: this.groupID, verifyInfo: r2, operatedInfo: n2 }, this.eventBus.emit(o.u.GroupVerifyInfo, s2)), this.dbGroup.verifyInfo = r2) : t2 == o.J.SvrData && (s2 = r2.group_notice, this.dbGroup.groupNotice != s2 && (this.dbGroup.groupNotice = s2, this.eventBus.emit(o.u.GroupNotice, { groupID: this.groupID, groupNotice: s2, operatedInfo: n2 })), s2 = r2.group_name, this.dbGroup.groupName != s2 && (this.dbGroup.groupName = s2, this.eventBus.emit(o.u.GroupName, { groupID: this.groupID, groupName: s2, operatedInfo: n2 })), s2 = Object(i.h)(r2.group_avatar), this.dbGroup.groupAvatarUrl != s2 && (this.dbGroup.groupAvatarUrl = s2, this.eventBus.emit(o.u.GroupAvatar, { groupID: this.groupID, groupAvatarUrl: s2, operatedInfo: n2 })), this.eventBus.exec(o.u.ISyncGroupInfo, this.groupID, this.dbGroup.groupName, this.dbGroup.groupAvatarUrl)) : (this.dbGroup.groupNotice = r2, this.eventBus.emit(o.u.GroupNotice, { groupID: this.groupID, groupNotice: r2, operatedInfo: n2 })), e2 && (this.dbGroup.dataSeq = e2), this.dbMgr.addGroupList([this.dbGroup]);
        }, c.prototype.mergeGroupAttributes = function(e2, t2, r2) {
          var n2 = t2.seq, i2 = (t2 = t2.attributes, this.dbGroup.attributes || {}), u2 = {}, c2 = {}, l = [], d = { action: e2, seq: n2, attributes: t2, setAttrs: u2, delAtrrs: c2 };
          t2.forEach(function(t3) {
            var r3, n3 = t3.key, a2 = t3.value;
            t3 = t3.seq;
            e2 != o.G.Delete && t3 ? t3 && (r3 = (null == (r3 = i2[n3]) ? void 0 : r3.state) || 0, (!i2[n3] || t3 > i2[n3].seq) && (r3 = 0, u2[n3] = a2), i2[n3] = { key: n3, value: a2, seq: t3, state: r3 }) : (e2 != o.G.Query && (c2[n3] = a2), i2[n3] = s(s({}, i2[n3]), { key: n3, state: 1 }));
          }), Object.keys(u2).length && l.push({ action: o.H.Set, groupAttributes: u2 }), Object.keys(c2).length && l.push({ action: o.H.Delete, groupAttributes: c2 }), r2 && l.length && this.eventBus.emit(o.u.GroupAttr, { groupID: this.groupID, infoList: l, operatedInfo: r2 }), this.dbGroup.attributes = i2, n2 && (this.dbGroup.attributeSeq = n2), this.dbMgr.addGroupList([this.dbGroup]), d.dbSeq = this.dbGroup.attributeSeq, d.dbAttr = i2, this.logger.info(a, "mergeAttr", d);
        }, c.prototype.mergeGroupMemberInfo = function(e2, t2, r2, n2) {
          var a2 = s(s({}, this.dbGroupMemberMap.get(n2)), { userID: n2 });
          t2 && (a2.dataSeq = t2), e2 === o.Q.Nickname ? a2.memberNickname = r2 : e2 === o.Q.Role && (a2.memberRole = r2), this.dbGroupMemberMap.set(n2, a2), this.dbMgr.addGroupMemberList(this.groupID, [a2]), this.eventBus.emit(o.u.GroupMemberInfo, { groupID: this.groupID, userList: [Object(i.t)(a2, this.engineConfig)], operatedInfo: this.createOwnerOperator() });
        }, c.prototype.fetchServerPageMember = function(e2, t2, r2) {
          var n2 = o.d.group_member_list;
          e2 = { group_id: this.groupID, count: 100, cur_list_seq: e2, full_pull: 1, degree: t2, how: r2 }, r2 = r2 == o.v.Biz ? o.j.API : o.j.SDK;
          return 1 == t2 && (t2 = this.mergeListSeqs.member + this.groupID, this.dataReport.beginNetworkRequest(n2.cmd, t2, r2, e2)), this.connMgr.sendRequest(n2, e2, r2);
        }, c.prototype.fetchServerPageReceiptDetail = function(e2, t2, r2) {
          return r2 = { group_id: this.groupID, cur_list_seq: r2, count: e2, full_pull: 100, degree: t2 }, e2 = o.d.msg_read_receipt_detail, 1 == t2 && (t2 = this.mergeListSeqs.receiptDetail + this.groupID, this.dataReport.beginNetworkRequest(e2.cmd, t2, o.j.API, r2)), this.connMgr.sendRequest(e2, r2);
        }, c.prototype.mergeServerMemberList = function(e2, t2) {
          var r2 = this, n2 = this.dbGroup.memberSeq || 0, i2 = (this.dbGroup.totalMemberCount > this.dbGroupMemberMap.size && (n2 = Math.max(0, n2 - 2 * (this.dbGroup.totalMemberCount - this.dbGroupMemberMap.size))), { time: /* @__PURE__ */ new Date(), groupID: this.groupID, dbSeq: n2, how: e2, count: 0 }), s2 = 1, u2 = ++this.mergeListSeqs.member + this.groupID, c2 = [], l = function(e3) {
            r2.logger && (e3.degree = s2, e3.svrCount = c2.length, i2.count = c2.length, i2.dataReport = r2.dataReport.endNetworkRequest(o.d.group_member_list.cmd, u2, e3), r2.logger.info(a, "mergeSvrMembers", i2));
          }, d = function(i3) {
            if (i3.code || !r2.dbMgr)
              return l(i3), t2 && t2(i3);
            r2.dbGroup.totalMemberCount = i3.member_count;
            var o2 = i3.member_all_seq;
            if (o2 <= n2)
              return r2.isFullMembers = true, l(i3), t2 && t2();
            var a2 = i3.cur_list_seq;
            c2.push.apply(c2, function(e3, t3, r3) {
              if (r3 || 2 === arguments.length)
                for (var n3, i4 = 0, o3 = t3.length; i4 < o3; i4++)
                  !n3 && i4 in t3 || ((n3 = n3 || Array.prototype.slice.call(t3, 0, i4))[i4] = t3[i4]);
              return e3.concat(n3 || Array.prototype.slice.call(t3));
            }([], function(e3, t3) {
              var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
              if (!r3)
                return e3;
              var n3, i4, o3 = r3.call(e3), s3 = [];
              try {
                for (; (void 0 === t3 || 0 < t3--) && !(n3 = o3.next()).done; )
                  s3.push(n3.value);
              } catch (e4) {
                i4 = { error: e4 };
              } finally {
                try {
                  n3 && !n3.done && (r3 = o3.return) && r3.call(o3);
                } finally {
                  if (i4)
                    throw i4.error;
                }
              }
              return s3;
            }(i3.change_list), false)), a2 < o2 ? r2.fetchServerPageMember(a2, ++s2, e2).then(d) : (r2.isFullMembers = true, l(i3), r2.updateMemberSeq(o2, true), r2.mergeMemberList(e2, c2, i3.full_list, t2));
          };
          this.fetchServerPageMember(n2, s2, e2).then(d);
        }, c.prototype.fetchSvrUsers = function(e2, t2) {
          var r2 = this;
          if (e2.length) {
            for (var n2 = [], s2 = 0; s2 < e2.length; s2 += 100) {
              var a2 = this.connMgr.sendRequest(o.d.user_fetch, { _ev_: t2, user_ids: e2.slice(s2, s2 + 100) }, o.j.SDK);
              n2.push(a2);
            }
            Promise.all(n2).then(function(e3) {
              e3.forEach(function(e4) {
                (e4 = e4.result) && e4.length && e4.forEach(function(e5) {
                  var t3 = e5.user_id, n3 = Object(i.h)(e5.user_name);
                  e5 = Object(i.h)(e5.avatar);
                  (t3 = (Object(i.w)({ userID: t3, userName: n3, userAvatarUrl: e5 }, r2.engineConfig), r2.engineConfig.syncUserTask.delete(t3), r2.engineConfig.dbConvMap.get(r2.engineConfig.user.userID + "0" + t3))) && (t3.conversationName = n3, t3.conversationAvatarUrl = e5);
                });
              }), r2.dbMgr.addUserList(Array.from(r2.engineConfig.dbUserMap.values()));
            });
          }
        }, c.prototype.createGroupCallback = function(e2) {
          return Object.assign(this.dbGroup, { id: this.engineConfig.user.userID + e2.group_id, groupID: e2.group_id, groupNotice: e2.group_notice, notificationStatus: o.T.Notify, attributes: this.createDBGroupAttributes(e2.attributes.attributes), createTime: e2.group_create_time, maxMemberCount: e2.limit_info.maxMemberCount || 0, verifyInfo: { joinMode: e2.limit_info.joinMode || 0, inviteMode: e2.limit_info.inviteMode || 0, beInviteMode: e2.limit_info.beInviteMode || 0 } }), e2.group_list_seq && (this.dbGroup.groupSeq = e2.group_list_seq.toString()), e2.attributes.seq && (this.dbGroup.attributeSeq = e2.attributes.seq), e2.member_all_seq && (this.dbGroup.memberSeq = e2.member_all_seq), this.dbGroup.mutedInfo || (this.dbGroup.mutedInfo = { mode: 0, expiredTime: 0, roles: [] }), this.syncGroupInfo(e2.group_name, Object(i.h)(e2.group_avatar)), this.dbMgr.addGroupList([this.dbGroup]), this.eventBus.exec(o.u.IJoinedGroup, this.groupID, this.dbGroup.groupName, this.dbGroup.groupAvatarUrl, 0), this.engineConfig.dbGroupMap.set(this.groupID, this.dbGroup), this.handleCreateGroup(e2);
        }, c.prototype.handleCreateGroup = function(e2) {
          var t2, r2 = e2.op_user ? e2.op_user.user_id : this.engineConfig.user.userID, n2 = e2.op_user ? this.createOperator(e2.op_user) : { userID: this.engineConfig.user.userID, userName: this.engineConfig.user.userName, memberRole: o.R.Owner, memberNickname: "" };
          return (e2 = (t2 = ((t2 = this.dbGroupMemberMap.get(r2)) ? Object.assign(t2, n2) : this.dbGroupMemberMap.set(r2, n2), this.eventBus.emit(o.u.GroupState, { state: o.V.Enter, event: o.L.Created, groupInfo: this.createGroupFullInfo(), operatedInfo: n2 }), this.dbGroup.attributes && 0 < Object.keys(this.dbGroup.attributes).length && (t2 = { action: o.H.Set, groupAttributes: this.createGroupAttributes() }, this.eventBus.emit(o.u.GroupAttr, { groupID: this.groupID, infoList: [t2], operatedInfo: n2 })), this.eventBus.emit(o.u.GroupMemberState, { groupID: this.groupID, state: o.S.Enter, event: o.P.Joined, userList: [Object(i.t)(this.dbGroupMemberMap.get(r2), this.engineConfig)], operatedInfo: n2 }), this.checkSyncUsers(e2, "createGroup", true))).filter(function(e3) {
            return e3.userID != r2;
          })).length && this.eventBus.emit(o.u.GroupMemberState, { groupID: this.groupID, state: o.S.Enter, event: o.P.Invited, userList: e2, operatedInfo: n2 }), t2;
        }, c.prototype.joinGroupCallback = function(e2, t2, r2) {
          var n2 = e2.group_notice, s2 = e2.group_data_seq, a2 = e2.group_list_seq, u2 = e2.properties, c2 = e2.group_create_time, l = e2.forbid_info;
          n2 && (this.dbGroup.groupNotice = n2), c2 && (this.dbGroup.createTime = c2), l ? this.dbGroup.mutedInfo = Object(i.f)(l, this.settings.getRealClientTimestamp()) : this.dbGroup.mutedInfo || (this.dbGroup.mutedInfo = { mode: 0, expiredTime: 0, roles: [] }), a2 && (this.dbGroup.groupSeq = a2.toString()), this.updateVerifyInfo(e2.limit_info), this.syncGroupInfo(e2.group_name, Object(i.h)(e2.group_avatar)), this.dbGroup.notificationStatus = o.T.Notify, s2 && (this.dbGroup.dataSeq = s2), this.dbGroup.attributes = {}, u2 ? (this.dbGroup.attributes = this.createDBGroupAttributes(u2.attributes), u2.seq && (this.dbGroup.attributeSeq = u2.seq)) : this.innerQueryGroupAttr(), this.dbMgr.addGroupList([this.dbGroup]), this.eventBus.exec(o.u.IJoinedGroup, this.groupID, this.dbGroup.groupName, this.dbGroup.groupAvatarUrl, e2.conv_msg_seq), this.engineConfig.dbGroupMap.set(this.groupID, this.dbGroup), n2 = this.createGroupFullInfo(), c2 = this.createOperator(e2.op_user);
          return (a2 = (this.eventBus.emit(o.u.GroupState, { state: o.V.Enter, event: r2, groupInfo: n2, operatedInfo: c2 }), this.dbGroup.attributes && 0 < Object.keys(this.dbGroup.attributes).length && (l = { action: o.H.Set, groupAttributes: this.createGroupAttributes() }, this.eventBus.emit(o.u.GroupAttr, { groupID: this.groupID, infoList: [l], operatedInfo: c2 })), this.checkSyncUsers(e2, "joinGroup", false))).length && this.eventBus.emit(o.u.GroupMemberState, { groupID: this.groupID, state: o.S.Enter, event: t2, userList: a2, operatedInfo: c2 }), n2;
        }, c.prototype.acceptApplyCallback = function(e2, t2, r2) {
          var n2, a2 = { type: u2 = r2 ? o.F.Join : o.F.BeInvite, state: o.E.Accepted, updateTime: e2.apply_group_info.update_time, createTime: 0, wording: "", seq: this.dbGroup.dataSeq, groupInfo: { groupID: this.groupID, groupName: this.dbGroup.groupName, groupAvatarUrl: this.dbGroup.groupAvatarUrl }, applyUser: Object(i.u)(t2, this.engineConfig) }, u2 = this.getApplyID(u2, t2);
          (u2 = this.dbGroupApplyMap.get(u2)) && (a2.createTime = u2.createTime, a2.wording = u2.wording), r2 ? a2.operatedUser = s(s({}, this.createOwnerOperator()), { userAvatarUrl: this.engineConfig.user.userAvatarUrl }) : (Object.assign(e2, e2.group_info), this.dbGroup.totalMemberCount = e2.member_count, e2.member.member_data.user_avatar || (e2.member.member_data.user_avatar = this.engineConfig.user.userAvatarUrl), u2 = this.dbGroupMemberMap.get(t2), e2.op_user = { user_id: t2, user_name: null == (t2 = this.engineConfig.dbUserMap.get(t2)) ? void 0 : t2.userName, group_nick_name: null == u2 ? void 0 : u2.memberNickname, role: null == u2 ? void 0 : u2.memberRole }, e2.members = [e2.member], n2 = this.joinGroupCallback(e2, o.P.Invited, o.L.Invited), a2.groupInfo.groupName = this.dbGroup.groupName, a2.groupInfo.groupAvatarUrl = this.dbGroup.groupAvatarUrl, a2.seq = this.dbGroup.dataSeq), this.syncGroupApplyMap(a2), this.eventBus.emit(o.u.GroupAppUpd, { applicationList: [a2] }), t2 = e2.apply_group_info.apply_list_seq;
          return r2 ? this.updateGroupApplySeq(t2) : (u2 = this.engineConfig.user, !t2 || u2.groupAppSeq && u2.groupAppSeq + 1 != t2 || (u2.groupAppSeq = t2, this.dbMgr.setUser(u2))), n2;
        }, c.prototype.checkSyncUsers = function(e2, t2, r2) {
          var n2 = this, o2 = [], s2 = this.settings.getRealClientTimestamp(), a2 = e2.members.map(function(e3) {
            var t3 = n2.createDBMember(e3, s2, false, true), r3 = t3.userID, a3 = e3.member_data.user_name;
            e3 = Object(i.h)(e3.member_data.user_avatar);
            return Object(i.w)({ userID: r3, userName: a3, userAvatarUrl: e3 }, n2.engineConfig).userName || o2.push(r3), t3;
          });
          return this.dbMgr.addGroupMemberList(this.groupID, a2), r2 && this.updateMemberSeq(e2.member_all_seq), this.fetchSvrUsers(o2, t2), a2.map(function(e3) {
            return Object(i.t)(e3, n2.engineConfig);
          });
        }, c.prototype.kickGroupMemberCallback = function(e2) {
          var t2 = this;
          this.updateMemberSeq(e2.member_all_seq), e2 = e2.members.map(function(e3) {
            return t2.createDBMember(e3, 0, true);
          });
          return this.dbMgr.addGroupMemberList(this.groupID, e2), e2.map(function(e3) {
            return Object(i.t)(e3, t2.engineConfig);
          });
        }, c.prototype.transferGroupOwnerCallback = function(e2) {
          var t2 = this, r2 = this.dbGroupMemberMap.get(e2[0].userID), n2 = this.dbGroupMemberMap.get(e2[1].userID);
          (r2 && n2 ? Promise.resolve([r2, n2]) : this.dbMgr.getGroupMemberList(this.groupID)).then(function(s2) {
            r2 = s2.find(function(t3) {
              return t3.userID == e2[0].userID;
            }), n2 = s2.find(function(t3) {
              return t3.userID == e2[1].userID;
            }), r2 && n2 && (r2.memberRole = o.R.Owner, n2.memberRole = o.R.Member, e2[0].dataSeq && (r2.dataSeq = e2[0].dataSeq), e2[1].dataSeq && (n2.dataSeq = e2[1].dataSeq), t2.dbGroupMemberMap.set(r2.userID, r2), t2.dbGroupMemberMap.set(n2.userID, n2), t2.dbMgr.addGroupMemberList(t2.groupID, [r2, n2]), t2.eventBus.emit(o.u.GroupMemberInfo, { groupID: t2.groupID, userList: [Object(i.t)(r2, t2.engineConfig), Object(i.t)(n2, t2.engineConfig)], operatedInfo: t2.pickOperator(n2) }));
          });
        }, c.prototype.groupOwnerQuitCallback = function(e2, t2) {
          var r2 = s(s({}, this.dbGroupMemberMap.get(e2)), { userID: e2 });
          r2.memberRole = o.R.Owner, this.dbGroupMemberMap.set(e2, r2), this.dbMgr.addGroupMemberList(this.groupID, [r2]), this.eventBus.emit(o.u.GroupMemberInfo, { groupID: this.groupID, userList: [Object(i.t)(r2, this.engineConfig)], operatedInfo: t2 });
        }, c.prototype.queryGroupMembersCallback = function(e2, t2, r2, n2, s2, u2) {
          var c2 = this, l = (n2.total = this.dbGroup.totalMemberCount, n2.dbTotal = this.dbGroupMemberMap.size, t2 ? o.X.QueryGroupMemberMutedList : o.X.QueryGroupMemberList);
          if ((p = r2 && r2.code) && 6000104 != p)
            return p = Object(i.x)(o.t.GroupModuleQueryGroupMemberListError, r2.message, r2.code), n2.error = p, this.logger.info(a, l, n2), u2(p);
          n2.dbTotal = this.dbGroupMemberMap.size;
          var d = this.settings.getRealClientTimestamp(), p = ((r2 = Array.from(this.dbGroupMemberMap.values()).filter(function(e3) {
            return 1 != e3.state && (-1 == e3.muteExpiredTime || e3.muteExpiredTime > d || (e3.muteExpiredTime = 0, !t2));
          })).sort(function(e3, t3) {
            return e3.seq - t3.seq;
          }), (null == (u2 = r2[r2.length - 1]) ? void 0 : u2.seq) || 0), h = e2.nextFlag, f = (u2 = 0, e2 = (0 < h && h <= p ? u2 = r2.findIndex(function(e3) {
            return e3.seq == h;
          }) : p < h && p && (u2 = r2.length), u2 + Math.min(o.m.MAX_QUERY_PAGE_COUNT, e2.count)), (null == (f = r2[e2]) ? void 0 : f.seq) || 0);
          r2 = r2.slice(u2, e2), Object.assign(n2, { start: u2, end: e2, max: p, count: r2.length, nextFlag: f }), this.logger.info(a, l, n2), u2 = r2.map(function(e3) {
            return Object(i.t)(e3, c2.engineConfig);
          });
          s2({ groupID: this.groupID, nextFlag: f, userList: u2 });
        }, c.prototype.updateMemberSeq = function(e2, t2) {
          this.dbGroup && e2 && (t2 || !this.dbGroup.memberSeq || this.dbGroup.memberSeq + 1 == e2) && (this.dbGroup.memberSeq = e2, this.dbMgr.addGroupList([this.dbGroup]));
        }, c.prototype.updateGroupApplySeq = function(e2, t2) {
          this.dbGroup && e2 && (t2 || !this.dbGroup.groupAppSeq || this.dbGroup.groupAppSeq + 1 == e2) && (this.dbGroup.groupAppSeq = e2, this.dbMgr.addGroupList([this.dbGroup]));
        }, c.prototype.pickOperator = function(e2) {
          var t2 = this.engineConfig.dbUserMap.get(e2.userID);
          return { userID: e2.userID, userName: (null == t2 ? void 0 : t2.userName) || "", memberNickname: e2.memberNickname || "", memberRole: e2.memberRole || o.R.Member };
        }, c.prototype.getApplyID = function(e2, t2) {
          return e2 + "_" + this.groupID + "_" + t2;
        }, c.prototype.checkGroupApplyCreateTime = function(e2) {
          var t2 = this.getApplyID(e2.type, e2.applyUser.userID), r2 = this.dbGroupApplyMap.get(t2);
          return this.dbGroupApplyMap.set(t2, e2), !r2 || !r2.createTime || e2.createTime && r2.state != o.E.Accepted && r2.state != o.E.Rejected || (e2.createTime = r2.createTime), !!r2;
        }, c.prototype.syncGroupApplyMap = function(e2) {
          var t2 = this, r2 = (e2 = !!e2 && this.checkGroupApplyCreateTime(e2), Array.from(this.dbGroupApplyMap.values()).filter(function(e3) {
            return e3.groupInfo.groupID == t2.groupID;
          })), n2 = r2[0];
          return r2.forEach(function(e3) {
            e3.seq > n2.seq && (n2 = e3);
          }), r2.forEach(function(e3) {
            e3.seq = n2.seq, e3.groupInfo = n2.groupInfo;
          }), this.dbMgr.addGroupApplyList(r2), e2;
        }, c.prototype.queryGroupInfoCallback = function(e2) {
          this.syncGroupInfo(e2.group_name, Object(i.h)(e2.group_avatar)), this.dbGroup.groupNotice = e2.group_notice, this.dbGroup.createTime = e2.group_create_time, this.dbGroup.mutedInfo = Object(i.f)(e2, this.settings.getRealClientTimestamp()), this.updateVerifyInfo(e2.limit_info), e2.group_data_seq && (this.dbGroup.dataSeq = e2.group_data_seq), this.dbMgr.addGroupList([this.dbGroup]);
        }, c.prototype.innerQueryGroupAttr = function() {
          var e2 = this, t2 = { group_id: this.groupID, attributes: { seq: 0 } };
          return this.connMgr.sendRequest(o.d.group_attr, t2).then(function(t3) {
            var r2;
            t3.code || (r2 = {}, t3.attributes.attributes.forEach(function(e3) {
              var t4 = e3.key, n2 = e3.value;
              e3 = e3.seq;
              r2[t4] = { key: t4, value: n2, seq: e3, state: e3 ? 0 : 1 };
            }), e2.dbGroup.attributes = r2, e2.dbGroup.attributeSeq = t3.attributes.seq, e2.dbMgr.addGroupList([e2.dbGroup]));
          });
        }, c.prototype.queryUserInfo = function(e2) {
          return this.dbGroupMemberMap.get(e2);
        }, c);
        function c(e2, t2, r2, i2, s2) {
          this.type = o.r.Group, this.groupID = "", this.mergeListSeqs = { member: 0, receiptDetail: 0 }, this.dbGroup = {}, this.isFullMembers = false, this.dbGroupMemberMap = /* @__PURE__ */ new Map(), this.dbGroup.groupID = e2, this.groupID = e2, this.engineConfig = t2, this.logger = n.a.getInstance().logger, this.settings = n.a.getInstance().settings, this.dataReport = n.a.getInstance().dataReport, this.eventBus = r2, this.dbMgr = i2, this.connMgr = s2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        });
        function n(e2) {
          return "0123456789abcdefghijklmnopqrstuvwxyz".charAt(e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        }), r.d(t, "b", function() {
          return s;
        }), i.prototype.init = function(e2) {
          for (var t2, r2, n2 = 0; n2 < 256; ++n2)
            this.S[n2] = n2;
          for (n2 = t2 = 0; n2 < 256; ++n2)
            t2 = t2 + this.S[n2] + e2[n2 % e2.length] & 255, r2 = this.S[n2], this.S[n2] = this.S[t2], this.S[t2] = r2;
          this.i = 0, this.j = 0;
        }, i.prototype.next = function() {
          this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255;
          var e2 = this.S[this.i];
          return this.S[this.i] = this.S[this.j], this.S[this.j] = e2, this.S[e2 + this.S[this.i] & 255];
        };
        var n = i;
        function i() {
          this.i = 0, this.j = 0, this.S = [];
        }
        function o() {
          return new n();
        }
        var s = 256;
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "ZIM", function() {
          return a;
        });
        var n = r(2), i = r(1), o = r(0), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, a = (r = function(e2, t2, r2, n2) {
          var i2, o2 = arguments.length, s2 = o2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, r2) : n2;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
            s2 = Reflect.decorate(e2, t2, r2, n2);
          else
            for (var a2 = e2.length - 1; 0 <= a2; a2--)
              (i2 = e2[a2]) && (s2 = (o2 < 3 ? i2(s2) : 3 < o2 ? i2(t2, r2, s2) : i2(t2, r2)) || s2);
          return 3 < o2 && s2 && Object.defineProperty(t2, r2, s2), s2;
        }, u.setEventHandler = function(e2) {
          u._flutter_handler = e2;
        }, u.toJSON = function(e2) {
          return JSON.stringify(e2);
        }, u.prototype.createNotInitError = function() {
          return this.engine ? void 0 : Object(i.x)(o.t.CommonModuleNotInit);
        }, u.getVersion = function() {
          return n.a.getInstance().getVersion();
        }, u.getInstance = function() {
          return u._instance;
        }, u.setAdvancedConfig = function(e2, t2) {
          n.a.getInstance().setAdvancedConfig(e2, t2);
        }, u.setGeofencingConfig = function(e2, t2) {
          return n.a.getInstance().setGeofencingConfig(e2, t2);
        }, u.create = function(e2) {
          if (!(e2 = "object" == typeof e2 ? e2.appID : e2) || "number" != typeof e2)
            throw t2 = Object(i.x)(o.t.CommonModuleInvalidAppID), new Error(JSON.stringify(s({ appID: e2, version: u.getVersion() }, t2)));
          var t2 = n.a.getInstance().createEngine(e2);
          return t2 ? u._instance = new u(t2) : null;
        }, u.prototype.destroy = function() {
          this.engine && n.a.getInstance().destroyEngine(this.engine), this.engine = null;
        }, u.prototype.setLogConfig = function(e2) {
          this.engine && n.a.getInstance().setLogConfig(e2);
        }, u.prototype.uploadLog = function() {
          return this.engine.uploadLog();
        }, u.prototype.on = function(e2, t2) {
          this.engine && this.engine.on(e2, t2);
        }, u.prototype.off = function(e2) {
          this.engine && this.engine.off(e2);
        }, u.prototype.login = function(e2, t2) {
          return this.engine.login("object" == typeof e2 ? e2.userID : e2, "object" == typeof t2 ? t2 : { userName: "object" == typeof e2 ? e2.userName : "", token: t2, isOfflineLogin: false });
        }, u.prototype.logout = function() {
          this.engine && this.engine.logout();
        }, u.prototype.renewToken = function(e2) {
          return this.engine.renewToken(e2);
        }, u.prototype.queryUsersInfo = function(e2, t2) {
          return this.engine.queryUsersInfo(e2, t2);
        }, u.prototype.updateUserName = function(e2) {
          return this.engine.updateUserName(e2);
        }, u.prototype.updateUserAvatarUrl = function(e2) {
          return this.engine.updateUserAvatarUrl(e2);
        }, u.prototype.updateUserExtendedData = function(e2) {
          return this.engine.updateUserExtendedData(e2);
        }, u.prototype.updateUserOfflinePushRule = function(e2) {
          return this.engine.updateUserOfflinePushRule(e2);
        }, u.prototype.querySelfUserInfo = function() {
          return this.engine.querySelfUserInfo();
        }, u.prototype.queryConversation = function(e2, t2) {
          return this.engine.queryConversation(e2, t2);
        }, u.prototype.queryConversationList = function(e2) {
          return this.engine.queryConversationList(e2);
        }, u.prototype.queryConversationPinnedList = function(e2) {
          return this.engine.queryConversationPinnedList(e2);
        }, u.prototype.deleteConversation = function(e2, t2, r2) {
          return this.engine.deleteConversation(e2, t2, r2);
        }, u.prototype.deleteAllConversations = function(e2) {
          return this.engine.deleteAllConversations(e2);
        }, u.prototype.clearConversationUnreadMessageCount = function(e2, t2) {
          return this.engine.clearConversationUnreadMessageCount(e2, t2);
        }, u.prototype.clearConversationTotalUnreadMessageCount = function() {
          return this.engine.clearConversationTotalUnreadMessageCount();
        }, u.prototype.deleteAllConversationMessages = function(e2) {
          return this.engine.deleteAllConversationMessages(e2);
        }, u.prototype.setConversationNotificationStatus = function(e2, t2, r2) {
          return this.engine.setConversationNotificationStatus(e2, t2, r2);
        }, u.prototype.updateConversationPinnedState = function(e2, t2, r2) {
          return this.engine.updateConversationPinnedState(e2, t2, r2);
        }, u.prototype.setConversationDraft = function(e2, t2, r2) {
          return this.engine.setConversationDraft(e2, t2, r2);
        }, u.prototype.sendMessage = function(e2, t2, r2, n2, i2) {
          return this.engine.sendMessage(e2, t2, r2, n2, i2);
        }, u.prototype.sendMediaMessage = function(e2, t2, r2, n2, i2) {
          return this.engine.sendMediaMessage(e2, t2, r2, n2, i2);
        }, u.prototype.deleteMessages = function(e2, t2, r2, n2) {
          return this.engine.deleteMessages(e2, t2, r2, n2);
        }, u.prototype.deleteAllMessage = function(e2, t2, r2) {
          return this.engine.deleteAllMessage(e2, t2, r2);
        }, u.prototype.queryHistoryMessage = function(e2, t2, r2) {
          return this.engine.queryHistoryMessage(e2, t2, r2);
        }, u.prototype.insertMessageToLocalDB = function(e2, t2, r2, n2) {
          return this.engine.insertMessageToLocalDB(e2, t2, r2, n2);
        }, u.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          return this.engine.updateMessageLocalExtendedData(e2, t2);
        }, u.prototype.revokeMessage = function(e2, t2) {
          return this.engine.revokeMessage(e2, t2);
        }, u.prototype.queryCombineMessageDetail = function(e2) {
          return this.engine.queryCombineMessageDetail(e2);
        }, u.prototype.sendConversationMessageReceiptRead = function(e2, t2) {
          return this.engine.sendReceiptRead(e2, t2);
        }, u.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          return this.engine.sendMessageReceiptsRead(e2, t2, r2);
        }, u.prototype.queryMessageReceiptsInfo = function(e2, t2, r2) {
          return this.engine.queryMessageReceiptsInfo(e2, t2, r2);
        }, u.prototype.queryGroupMessageReceiptReadMemberList = function(e2, t2, r2) {
          return this.engine.queryReceiptMemberList(e2, t2, r2, true);
        }, u.prototype.queryGroupMessageReceiptUnreadMemberList = function(e2, t2, r2) {
          return this.engine.queryReceiptMemberList(e2, t2, r2, false);
        }, u.prototype.addMessageReaction = function(e2, t2) {
          return this.engine.addMessageReaction(e2, t2);
        }, u.prototype.deleteMessageReaction = function(e2, t2) {
          return this.engine.deleteMessageReaction(e2, t2);
        }, u.prototype.queryMessageReactionUserList = function(e2, t2) {
          return this.engine.queryMessageReactionUserList(e2, t2);
        }, u.prototype.createRoom = function(e2, t2) {
          return this.engine.createRoom(e2, t2);
        }, u.prototype.enterRoom = function(e2, t2) {
          return this.engine.enterRoom(e2, t2);
        }, u.prototype.joinRoom = function(e2) {
          return this.engine.joinRoom(e2);
        }, u.prototype.leaveRoom = function(e2) {
          return this.engine.leaveRoom(e2);
        }, u.prototype.leaveAllRoom = function() {
          return this.engine.leaveAllRoom();
        }, u.prototype.queryRoomMemberList = function(e2, t2) {
          return this.engine.queryRoomMemberList(e2, t2);
        }, u.prototype.queryRoomMembers = function(e2, t2) {
          return this.engine.queryRoomMembers(e2, t2);
        }, u.prototype.queryRoomOnlineMemberCount = function(e2) {
          return this.engine.queryRoomOnlineMemberCount(e2);
        }, u.prototype.queryRoomAllAttributes = function(e2) {
          return this.engine.queryRoomAllAttributes(e2);
        }, u.prototype.setRoomAttributes = function(e2, t2, r2) {
          return this.engine.setRoomAttributes(e2, t2, r2);
        }, u.prototype.deleteRoomAttributes = function(e2, t2, r2) {
          return this.engine.deleteRoomAttributes(e2, t2, r2);
        }, u.prototype.beginRoomAttributesBatchOperation = function(e2, t2) {
          this.engine && this.engine.beginRoomAttributesBatchOperation(e2, t2);
        }, u.prototype.endRoomAttributesBatchOperation = function(e2) {
          return this.engine.endRoomAttributesBatchOperation(e2);
        }, u.prototype.setRoomMembersAttributes = function(e2, t2, r2, n2) {
          return this.engine.setRoomMembersAttributes(e2, t2, r2, n2);
        }, u.prototype.queryRoomMembersAttributes = function(e2, t2) {
          return this.engine.queryRoomMembersAttributes(e2, t2);
        }, u.prototype.queryRoomMemberAttributesList = function(e2, t2) {
          return this.engine.queryRoomMemberAttributesList(e2, t2);
        }, u.prototype.createGroup = function(e2, t2, r2) {
          return this.engine.createGroup(e2, t2, r2);
        }, u.prototype.joinGroup = function(e2) {
          return this.engine.joinGroup(true, e2);
        }, u.prototype.leaveGroup = function(e2) {
          return this.engine.leaveGroup(e2);
        }, u.prototype.dismissGroup = function(e2) {
          return this.engine.dismissGroup(e2);
        }, u.prototype.queryGroupList = function() {
          return this.engine.queryGroupList();
        }, u.prototype.updateGroupNotice = function(e2, t2) {
          return this.engine.updateGroupInfo(e2, t2, o.J.Notice).then(function() {
            return { groupID: t2, groupNotice: e2 };
          });
        }, u.prototype.updateGroupName = function(e2, t2) {
          return this.engine.updateGroupInfo(e2, t2, o.J.Name).then(function() {
            return { groupID: t2, groupName: e2 };
          });
        }, u.prototype.updateGroupAvatarUrl = function(e2, t2) {
          return this.engine.updateGroupInfo(e2, t2, o.J.Avatar).then(function() {
            return { groupID: t2, groupAvatarUrl: e2 };
          });
        }, u.prototype.muteGroup = function(e2, t2, r2) {
          return this.engine.muteGroup(e2, t2, r2);
        }, u.prototype.queryGroupInfo = function(e2) {
          return this.engine.queryGroupInfo(e2);
        }, u.prototype.setGroupAttributes = function(e2, t2) {
          return this.engine.setGroupAttributes(e2, t2);
        }, u.prototype.deleteGroupAttributes = function(e2, t2) {
          return this.engine.deleteGroupAttributes(e2, t2);
        }, u.prototype.queryGroupAttributes = function(e2, t2) {
          return this.engine.queryGroupAttributes(t2, e2);
        }, u.prototype.queryGroupAllAttributes = function(e2) {
          return this.engine.queryGroupAttributes(e2);
        }, u.prototype.transferGroupOwner = function(e2, t2) {
          return this.engine.transferGroupOwner(e2, t2);
        }, u.prototype.inviteUsersIntoGroup = function(e2, t2) {
          return this.engine.inviteUsersIntoGroup(false, e2, t2);
        }, u.prototype.kickGroupMembers = function(e2, t2) {
          return this.engine.kickGroupMembers(e2, t2);
        }, u.prototype.queryGroupMemberList = function(e2, t2) {
          return this.engine.queryGroupMemberList(e2, t2);
        }, u.prototype.queryGroupMemberCount = function(e2) {
          return this.engine.queryGroupMemberCount(e2);
        }, u.prototype.muteGroupMembers = function(e2, t2, r2, n2) {
          return this.engine.muteGroupMembers(e2, t2, r2, n2);
        }, u.prototype.queryGroupMemberMutedList = function(e2, t2) {
          return this.engine.queryGroupMemberMutedList(e2, t2);
        }, u.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          return this.engine.setGroupMemberNickname(e2, t2, r2);
        }, u.prototype.setGroupMemberRole = function(e2, t2, r2) {
          return this.engine.setGroupMemberRole(e2, t2, r2);
        }, u.prototype.queryGroupMemberInfo = function(e2, t2) {
          return this.engine.queryGroupMemberInfo(e2, t2);
        }, u.prototype.updateGroupJoinMode = function(e2, t2) {
          return this.engine.updateGroupVerifyMode(e2, t2, o.W.Join);
        }, u.prototype.updateGroupInviteMode = function(e2, t2) {
          return this.engine.updateGroupVerifyMode(e2, t2, o.W.Invite);
        }, u.prototype.updateGroupBeInviteMode = function(e2, t2) {
          return this.engine.updateGroupVerifyMode(e2, t2, o.W.BeInvite);
        }, u.prototype.sendGroupJoinApplication = function(e2, t2) {
          return this.engine.joinGroup(false, e2, t2);
        }, u.prototype.acceptGroupJoinApplication = function(e2, t2, r2) {
          return this.engine.acceptGroupApply(true, e2, t2, r2);
        }, u.prototype.rejectGroupJoinApplication = function(e2, t2, r2) {
          return this.engine.rejectGroupApply(true, e2, t2, r2);
        }, u.prototype.sendGroupInviteApplications = function(e2, t2, r2) {
          return this.engine.inviteUsersIntoGroup(true, e2, t2, r2);
        }, u.prototype.acceptGroupInviteApplication = function(e2, t2, r2) {
          return this.engine.acceptGroupApply(false, e2, t2, r2);
        }, u.prototype.rejectGroupInviteApplication = function(e2, t2, r2) {
          return this.engine.rejectGroupApply(false, e2, t2, r2);
        }, u.prototype.queryGroupApplicationList = function(e2) {
          return this.engine.queryGroupApplyList(e2);
        }, u.prototype.callInvite = function(e2, t2) {
          return this.engine.callInvite(e2, t2);
        }, u.prototype.callCancel = function(e2, t2, r2) {
          return this.engine.callCancel(e2, t2, r2);
        }, u.prototype.callAccept = function(e2, t2) {
          return this.engine.callAccept(e2, t2);
        }, u.prototype.callReject = function(e2, t2) {
          return this.engine.callReject(e2, t2);
        }, u.prototype.callQuit = function(e2, t2) {
          return this.engine.callQuit(e2, t2);
        }, u.prototype.callEnd = function(e2, t2) {
          return this.engine.callEnd(e2, t2);
        }, u.prototype.callJoin = function(e2, t2) {
          return this.engine.callJoin(e2, t2);
        }, u.prototype.callingInvite = function(e2, t2, r2) {
          return this.engine.callingInvite(e2, t2, r2);
        }, u.prototype.queryCallInvitationList = function(e2) {
          return this.engine.queryCallInvitationList(e2);
        }, u.prototype.searchLocalConversations = function(e2) {
          return this.engine.searchConversations(e2);
        }, u.prototype.searchGlobalLocalMessages = function(e2) {
          return this.engine.searchGlobalMessages(e2);
        }, u.prototype.searchLocalMessages = function(e2, t2, r2) {
          return this.engine.searchMessages(e2, t2, r2);
        }, u.prototype.searchLocalGroups = function(e2) {
          return this.engine.searchGroups(e2);
        }, u.prototype.searchLocalGroupMembers = function(e2, t2) {
          return this.engine.searchGroupMembers(e2, t2);
        }, u.prototype.searchLocalFriends = function(e2) {
          return this.engine.searchFriends(e2);
        }, u.prototype.addFriend = function(e2, t2) {
          return this.engine.addFriend(e2, t2);
        }, u.prototype.sendFriendApplication = function(e2, t2) {
          return this.engine.sendFriendApplication(e2, t2);
        }, u.prototype.deleteFriends = function(e2, t2) {
          return this.engine.deleteFriends(e2, t2);
        }, u.prototype.checkFriendsRelation = function(e2, t2) {
          return this.engine.checkFriendsRelation(e2, t2);
        }, u.prototype.updateFriendAlias = function(e2, t2) {
          return this.engine.updateFriendAlias(e2, t2);
        }, u.prototype.updateFriendAttributes = function(e2, t2) {
          return this.engine.updateFriendAttributes(e2, t2);
        }, u.prototype.acceptFriendApplication = function(e2, t2) {
          return this.engine.acceptFriendApplication(e2, t2);
        }, u.prototype.rejectFriendApplication = function(e2, t2) {
          return this.engine.rejectFriendApplication(e2, t2);
        }, u.prototype.queryFriendsInfo = function(e2) {
          return this.engine.queryFriendsInfo(e2);
        }, u.prototype.queryFriendList = function(e2) {
          return this.engine.queryFriendList(e2);
        }, u.prototype.queryFriendApplicationList = function(e2) {
          return this.engine.queryFriendApplicationList(e2);
        }, u.prototype.addUsersToBlacklist = function(e2) {
          return this.engine.addUsersToBlacklist(e2);
        }, u.prototype.removeUsersFromBlacklist = function(e2) {
          return this.engine.removeUsersFromBlacklist(e2);
        }, u.prototype.checkUserIsInBlacklist = function(e2) {
          return this.engine.checkUserIsInBlacklist(e2);
        }, u.prototype.queryBlacklist = function(e2) {
          return this.engine.queryBlacklist(e2);
        }, u.TAG = "2024/3/29 17:36:07", u._instance = null, r([Object(i.q)()], u.prototype, "uploadLog", null), r([Object(i.q)()], u.prototype, "login", null), r([Object(i.q)()], u.prototype, "renewToken", null), r([Object(i.q)()], u.prototype, "queryUsersInfo", null), r([Object(i.q)()], u.prototype, "updateUserName", null), r([Object(i.q)()], u.prototype, "updateUserAvatarUrl", null), r([Object(i.q)()], u.prototype, "updateUserExtendedData", null), r([Object(i.q)()], u.prototype, "updateUserOfflinePushRule", null), r([Object(i.q)()], u.prototype, "querySelfUserInfo", null), r([Object(i.q)()], u.prototype, "queryConversation", null), r([Object(i.q)()], u.prototype, "queryConversationList", null), r([Object(i.q)()], u.prototype, "queryConversationPinnedList", null), r([Object(i.q)()], u.prototype, "deleteConversation", null), r([Object(i.q)()], u.prototype, "deleteAllConversations", null), r([Object(i.q)()], u.prototype, "clearConversationUnreadMessageCount", null), r([Object(i.q)()], u.prototype, "clearConversationTotalUnreadMessageCount", null), r([Object(i.q)()], u.prototype, "deleteAllConversationMessages", null), r([Object(i.q)()], u.prototype, "setConversationNotificationStatus", null), r([Object(i.q)()], u.prototype, "updateConversationPinnedState", null), r([Object(i.q)()], u.prototype, "setConversationDraft", null), r([Object(i.q)()], u.prototype, "sendMessage", null), r([Object(i.q)()], u.prototype, "sendMediaMessage", null), r([Object(i.q)()], u.prototype, "deleteMessages", null), r([Object(i.q)()], u.prototype, "deleteAllMessage", null), r([Object(i.q)()], u.prototype, "queryHistoryMessage", null), r([Object(i.q)()], u.prototype, "insertMessageToLocalDB", null), r([Object(i.q)()], u.prototype, "updateMessageLocalExtendedData", null), r([Object(i.q)()], u.prototype, "revokeMessage", null), r([Object(i.q)()], u.prototype, "queryCombineMessageDetail", null), r([Object(i.q)()], u.prototype, "sendConversationMessageReceiptRead", null), r([Object(i.q)()], u.prototype, "sendMessageReceiptsRead", null), r([Object(i.q)()], u.prototype, "queryMessageReceiptsInfo", null), r([Object(i.q)()], u.prototype, "queryGroupMessageReceiptReadMemberList", null), r([Object(i.q)()], u.prototype, "queryGroupMessageReceiptUnreadMemberList", null), r([Object(i.q)()], u.prototype, "addMessageReaction", null), r([Object(i.q)()], u.prototype, "deleteMessageReaction", null), r([Object(i.q)()], u.prototype, "queryMessageReactionUserList", null), r([Object(i.q)()], u.prototype, "createRoom", null), r([Object(i.q)()], u.prototype, "enterRoom", null), r([Object(i.q)()], u.prototype, "joinRoom", null), r([Object(i.q)()], u.prototype, "leaveRoom", null), r([Object(i.q)()], u.prototype, "queryRoomMemberList", null), r([Object(i.q)()], u.prototype, "queryRoomMembers", null), r([Object(i.q)()], u.prototype, "queryRoomOnlineMemberCount", null), r([Object(i.q)()], u.prototype, "queryRoomAllAttributes", null), r([Object(i.q)()], u.prototype, "setRoomAttributes", null), r([Object(i.q)()], u.prototype, "deleteRoomAttributes", null), r([Object(i.q)()], u.prototype, "endRoomAttributesBatchOperation", null), r([Object(i.q)()], u.prototype, "setRoomMembersAttributes", null), r([Object(i.q)()], u.prototype, "queryRoomMembersAttributes", null), r([Object(i.q)()], u.prototype, "queryRoomMemberAttributesList", null), r([Object(i.q)()], u.prototype, "createGroup", null), r([Object(i.q)()], u.prototype, "joinGroup", null), r([Object(i.q)()], u.prototype, "leaveGroup", null), r([Object(i.q)()], u.prototype, "dismissGroup", null), r([Object(i.q)()], u.prototype, "queryGroupList", null), r([Object(i.q)()], u.prototype, "updateGroupNotice", null), r([Object(i.q)()], u.prototype, "updateGroupName", null), r([Object(i.q)()], u.prototype, "updateGroupAvatarUrl", null), r([Object(i.q)()], u.prototype, "muteGroup", null), r([Object(i.q)()], u.prototype, "queryGroupInfo", null), r([Object(i.q)()], u.prototype, "setGroupAttributes", null), r([Object(i.q)()], u.prototype, "deleteGroupAttributes", null), r([Object(i.q)()], u.prototype, "queryGroupAttributes", null), r([Object(i.q)()], u.prototype, "queryGroupAllAttributes", null), r([Object(i.q)()], u.prototype, "transferGroupOwner", null), r([Object(i.q)()], u.prototype, "inviteUsersIntoGroup", null), r([Object(i.q)()], u.prototype, "kickGroupMembers", null), r([Object(i.q)()], u.prototype, "queryGroupMemberList", null), r([Object(i.q)()], u.prototype, "queryGroupMemberCount", null), r([Object(i.q)()], u.prototype, "muteGroupMembers", null), r([Object(i.q)()], u.prototype, "queryGroupMemberMutedList", null), r([Object(i.q)()], u.prototype, "setGroupMemberNickname", null), r([Object(i.q)()], u.prototype, "setGroupMemberRole", null), r([Object(i.q)()], u.prototype, "queryGroupMemberInfo", null), r([Object(i.q)()], u.prototype, "updateGroupJoinMode", null), r([Object(i.q)()], u.prototype, "updateGroupInviteMode", null), r([Object(i.q)()], u.prototype, "updateGroupBeInviteMode", null), r([Object(i.q)()], u.prototype, "sendGroupJoinApplication", null), r([Object(i.q)()], u.prototype, "acceptGroupJoinApplication", null), r([Object(i.q)()], u.prototype, "rejectGroupJoinApplication", null), r([Object(i.q)()], u.prototype, "sendGroupInviteApplications", null), r([Object(i.q)()], u.prototype, "acceptGroupInviteApplication", null), r([Object(i.q)()], u.prototype, "rejectGroupInviteApplication", null), r([Object(i.q)()], u.prototype, "queryGroupApplicationList", null), r([Object(i.q)()], u.prototype, "callInvite", null), r([Object(i.q)()], u.prototype, "callCancel", null), r([Object(i.q)()], u.prototype, "callAccept", null), r([Object(i.q)()], u.prototype, "callReject", null), r([Object(i.q)()], u.prototype, "callQuit", null), r([Object(i.q)()], u.prototype, "callEnd", null), r([Object(i.q)()], u.prototype, "callJoin", null), r([Object(i.q)()], u.prototype, "callingInvite", null), r([Object(i.q)()], u.prototype, "queryCallInvitationList", null), r([Object(i.q)()], u.prototype, "searchLocalConversations", null), r([Object(i.q)()], u.prototype, "searchGlobalLocalMessages", null), r([Object(i.q)()], u.prototype, "searchLocalMessages", null), r([Object(i.q)()], u.prototype, "searchLocalGroups", null), r([Object(i.q)()], u.prototype, "searchLocalGroupMembers", null), r([Object(i.q)()], u.prototype, "searchLocalFriends", null), r([Object(i.q)()], u.prototype, "addFriend", null), r([Object(i.q)()], u.prototype, "sendFriendApplication", null), r([Object(i.q)()], u.prototype, "deleteFriends", null), r([Object(i.q)()], u.prototype, "checkFriendsRelation", null), r([Object(i.q)()], u.prototype, "updateFriendAlias", null), r([Object(i.q)()], u.prototype, "updateFriendAttributes", null), r([Object(i.q)()], u.prototype, "acceptFriendApplication", null), r([Object(i.q)()], u.prototype, "rejectFriendApplication", null), r([Object(i.q)()], u.prototype, "queryFriendsInfo", null), r([Object(i.q)()], u.prototype, "queryFriendList", null), r([Object(i.q)()], u.prototype, "queryFriendApplicationList", null), r([Object(i.q)()], u.prototype, "addUsersToBlacklist", null), r([Object(i.q)()], u.prototype, "removeUsersFromBlacklist", null), r([Object(i.q)()], u.prototype, "checkUserIsInBlacklist", null), r([Object(i.q)()], u.prototype, "queryBlacklist", null), u);
        function u(e2) {
          if (!e2 || !e2.setContext)
            throw new Error("Can not use new.");
          (this.engine = e2).setContext(this);
        }
        t.default = a;
      }, function(e, t, r) {
        var n, i, o, s, a;
        e.exports = (e = r(5), r(97), r(98), n = (o = (r = e).lib).Base, i = o.WordArray, s = (o = r.algo).MD5, a = o.EvpKDF = n.extend({ cfg: n.extend({ keySize: 4, hasher: s, iterations: 1 }), init: function(e2) {
          this.cfg = this.cfg.extend(e2);
        }, compute: function(e2, t2) {
          for (var r2, n2 = this.cfg, o2 = n2.hasher.create(), s2 = i.create(), a2 = s2.words, u = n2.keySize, c = n2.iterations; a2.length < u; ) {
            r2 && o2.update(r2), r2 = o2.update(e2).finalize(t2), o2.reset();
            for (var l = 1; l < c; l++)
              r2 = o2.finalize(r2), o2.reset();
            s2.concat(r2);
          }
          return s2.sigBytes = 4 * u, s2;
        } }), r.EvpKDF = function(e2, t2, r2) {
          return a.create(r2).compute(e2, t2);
        }, e.EvpKDF);
      }, function(e, t, r) {
        "use strict";
        r.d(t, "b", function() {
          return n;
        }), r.d(t, "c", function() {
          return i;
        }), r.d(t, "a", function() {
          return o;
        });
        var n = function() {
          return function(e2, t2, r2) {
            return { value: function() {
              for (var t3 = [], n2 = 0; n2 < arguments.length; n2++)
                t3[n2] = arguments[n2];
              var i2 = e2.createNotInitError.call(this);
              return i2 ? Promise.reject(i2) : r2.value.apply(this, t3);
            } };
          };
        }, i = function(e2, t2) {
          return function(r2, n2, i2) {
            return { value: function() {
              for (var n3 = [], o2 = 0; o2 < arguments.length; o2++)
                n3[o2] = arguments[o2];
              var s = r2.createNotLoggedError.call(this, e2, t2);
              return s ? Promise.reject(s) : i2.value.apply(this, n3);
            } };
          };
        }, o = function(e2, t2, r2) {
          var n2, i2 = 0;
          return function(o2, s, a) {
            return { value: function() {
              for (var s2 = [], u = 0; u < arguments.length; u++)
                s2[u] = arguments[u];
              var c = Date.now();
              if (i2++, c - (n2 = n2 || c) < t2) {
                if (e2 < i2)
                  return Promise.reject(o2.createFrequencyLimitError.call(this, r2));
              } else
                n2 = c, i2 = 0;
              return a.value.apply(this, s2);
            } };
          };
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "o", function() {
          return a;
        }), r.d(t, "i", function() {
          return u;
        }), r.d(t, "j", function() {
          return c;
        }), r.d(t, "l", function() {
          return l;
        }), r.d(t, "k", function() {
          return d;
        }), r.d(t, "h", function() {
          return p;
        }), r.d(t, "c", function() {
          return h;
        }), r.d(t, "b", function() {
          return f;
        }), r.d(t, "n", function() {
          return g;
        }), r.d(t, "m", function() {
          return m;
        }), r.d(t, "p", function() {
          return _;
        }), r.d(t, "r", function() {
          return b;
        }), r.d(t, "t", function() {
          return v;
        }), r.d(t, "q", function() {
          return y;
        }), r.d(t, "s", function() {
          return k;
        }), r.d(t, "g", function() {
          return C;
        }), r.d(t, "f", function() {
          return I;
        }), r.d(t, "e", function() {
          return S;
        }), r.d(t, "a", function() {
          return q;
        }), r.d(t, "d", function() {
          return w;
        });
        var n = r(6), i = (t = r(3), r.n(t)), o = r(0), s = -1 != "web".indexOf("wx"), a = s ? "undefined" != typeof tt ? (tt._zim_platform = "douyin", tt._zim_env = tt.env.VERSION, tt) : "undefined" != typeof swan ? (swan._zim_platform = "baidu", swan._zim_env = "", swan) : "undefined" != typeof my ? (my._zim_platform = "alipay", my._zim_isAlipay = true, my._zim_env = my.getAccountInfoSync().miniProgram.envVersion, my) : "undefined" != typeof wx ? (wx._zim_platform = "weixin", wx._zim_env = wx.getAccountInfoSync().miniProgram.envVersion, wx) : null : null, u = function() {
          var e2, t2, r2 = "z_deviceID", n2 = (e2 = (/* @__PURE__ */ new Date()).getTime(), "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t3) {
            var r3 = (e2 + 16 * Math.random()) % 16 | 0;
            return e2 = Math.floor(e2 / 16), ("x" == t3 ? r3 : 3 & r3 | 8).toString(36);
          })), i2 = "";
          try {
            s ? (t2 = a.getStorageSync(a._zim_isAlipay ? { key: r2 } : r2) || "") && t2.data ? i2 = "object" == typeof t2 ? t2.data : t2 : (i2 = n2, a._zim_isAlipay ? a.setStorageSync({ key: r2, data: i2 }) : a.setStorageSync(r2, i2)) : (i2 = localStorage.getItem(r2) || "") || (i2 = n2, localStorage.setItem(r2, i2));
          } catch (t3) {
            i2 = n2;
          }
          return i2;
        }(), c = function() {
          if (!s)
            return navigator.userAgent;
          var e2 = (u2 = a.getSystemInfoSync()).brand, t2 = u2.model, r2 = u2.version, n2 = u2.system, i2 = u2.platform, o2 = u2.SDKVersion, u2 = u2.benchmarkLevel;
          return JSON.stringify({ env: a._zim_env, brand: e2, model: t2, version: r2, system: n2, platform: a._zim_platform + "," + i2, SDKVersion: o2, benchmarkLevel: u2 });
        }(), l = function() {
          return (/* @__PURE__ */ new Date()).getTime() + Math.random().toString().substring(2, 7);
        }, d = function(e2) {
          return "string" == typeof e2 ? new Uint8Array(Array.from(unescape(encodeURIComponent(e2 || ""))).map(function(e3) {
            return e3.charCodeAt(0);
          })) : e2;
        }, p = function(e2) {
          if ("string" == typeof e2)
            return e2;
          if (!e2 || !e2.length)
            return "";
          e2 = String.fromCharCode.apply(String, function(e3, t2, r2) {
            if (r2 || 2 === arguments.length)
              for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
                !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
            return e3.concat(n2 || Array.prototype.slice.call(t2));
          }([], function(e3, t2) {
            var r2 = "function" == typeof Symbol && e3[Symbol.iterator];
            if (!r2)
              return e3;
            var n2, i2, o2 = r2.call(e3), s2 = [];
            try {
              for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
                s2.push(n2.value);
            } catch (e4) {
              i2 = { error: e4 };
            } finally {
              try {
                n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
              } finally {
                if (i2)
                  throw i2.error;
              }
            }
            return s2;
          }(Array.from(e2)), false));
          try {
            return decodeURIComponent(escape(e2));
          } catch (t2) {
            return decodeURIComponent(e2);
          }
        }, h = function(e2) {
          return n.a.fromUint8Array(e2);
        }, f = function(e2) {
          return n.a.toUint8Array(e2);
        }, g = function(e2, t2) {
          return !!e2 && "string" == typeof e2 && e2.length <= o.m.MAX_ID_SIZE && (!t2 || "#" != e2[0]);
        }, m = function(e2, t2) {
          if (!e2 || "string" != typeof e2 || e2.length < 31)
            return [6000103];
          if ("04" !== e2.substring(0, 2))
            return [6000107];
          try {
            var r2 = Date.now() / 1e3, o2 = Array.from(n.a.toUint8Array(e2.substring(2, 14))), s2 = i.a.fromBytes(o2.slice(0, 8)).toInt();
            return [s2 < t2 || s2 < r2 ? 6000106 : s2 < 30 + r2 ? 6000108 : 2073600 + r2 < s2 ? 6000109 : 0, s2];
          } catch (e3) {
            return (0, console.warn)("Parse token fail for invalid Base64.", e3), [6000103];
          }
        }, _ = function(e2, t2) {
          var r2 = {};
          return e2.forEach(function(e3) {
            return r2[e3] = t2[e3];
          }), r2;
        }, b = function(e2, t2) {
          var r2 = t2.dbUserMap.get(e2) || { userID: e2 };
          return e2 && !r2.userName && t2.syncUserTask.add(e2), { userID: r2.userID, userName: r2.userName || "", userAvatarUrl: r2.userAvatarUrl || "" };
        }, v = function(e2, t2) {
          var r2 = t2.dbUserMap.get(e2.userID);
          return r2 ? (e2.userName && (r2.userName = e2.userName), e2.userAvatarUrl && (r2.userAvatarUrl = e2.userAvatarUrl), r2) : (t2.dbUserMap.set(e2.userID, e2), e2);
        }, y = function(e2, t2) {
          if (!e2)
            return {};
          var r2 = t2.dbUserMap.get(e2.userID), n2 = e2.operatedUser;
          return n2 && Object.assign(n2, b(n2.userID, t2)), { userID: e2.userID, userName: (null == r2 ? void 0 : r2.userName) || "", userAvatarUrl: (null == r2 ? void 0 : r2.userAvatarUrl) || "", memberNickname: e2.memberNickname || "", memberRole: e2.memberRole || o.R.Member, muteExpiredTime: e2.muteExpiredTime || 0, groupEnterInfo: { enterTime: e2.enterTime || 0, enterType: e2.enterType || o.K.Unknown, operatedUser: n2 } };
        }, M = ((t = {})[o.gb.RevokeSelf] = o.db.SelfRevoke, t[o.gb.RevokeSystem] = o.db.SystemRevoke, t[o.gb.RevokeService] = o.db.ServiceAPIRevoke, t[o.gb.RevokeGroupAdmin] = o.db.GroupAdminRevoke, t[o.gb.RevokeGroupOwner] = o.db.GroupOwnerRevoke, t[o.gb.ReceiptDoing] = o.cb.Processing, t[o.gb.ReceiptDone] = o.cb.Done, t[o.gb.ReceiptExpired] = o.cb.Expired, t[o.gb.ReceiptFailed] = o.cb.Failed, t), k = function(e2) {
          for (var t2, r2 = 0, n2 = { revoke: 0, receipt: 0 }; e2; )
            1 & e2 && ((t2 = 1 << r2) >= o.gb.RevokeSelf && t2 <= o.gb.RevokeGroupOwner ? n2.revoke += t2 : t2 >= o.gb.ReceiptDone && t2 <= o.gb.ReceiptDoing && (n2.receipt += t2)), r2++, e2 >>= 1;
          return n2.revoke = n2.revoke >= o.gb.RevokeSelf && n2.revoke <= o.gb.RevokeGroupOwner ? M[n2.revoke] : o.db.Unknown, n2.receipt = n2.receipt >= o.gb.ReceiptDone && n2.receipt <= o.gb.ReceiptDoing ? M[n2.receipt] : o.cb.None, n2;
        }, C = function(e2, t2) {
          if (e2 && e2.title && e2.content)
            return { enable_push: 1, title: String(e2.title), content: String(e2.content), payload: String(e2.payload || ""), pushStrategyId: String(e2.resourcesID || ""), enable_force_push: t2, custom_map: e2.enableBadge || e2.voIPConfig ? { badge_increment: e2.enableBadge ? String(e2.badgeIncrement || 0) : void 0, sdk_params: e2.voIPConfig ? JSON.stringify({ voip_handle_type: e2.voIPConfig.iOSVoIPHandleType, voip_handle_value: String(e2.voIPConfig.iOSVoIPHandleValue || ""), voip_has_video: !!e2.voIPConfig.iOSVoIPHasVideo }) : void 0 } : void 0 };
        }, I = function(e2, t2) {
          var r2 = e2.is_all_forbid, n2 = e2.forbid_list;
          return -1 != (e2 = e2.forbid_expire_time) && e2 < t2 ? { mode: o.U.None, expiredTime: 0, roles: [] } : (t2 = o.U.None, 0 != e2 && r2 ? t2 = o.U.All : 1 == n2.length && n2[0] == o.R.Member ? t2 = o.U.Normal : 0 != e2 && n2.length && (t2 = o.U.Custom), { mode: t2, expiredTime: e2, roles: n2 });
        }, S = function(e2, t2) {
          return !!e2.isPinned != !!t2.isPinned ? t2.isPinned ? 1 : -1 : t2.orderKey - e2.orderKey;
        }, D = function(e2, t2) {
          if (!e2 || !t2)
            return false;
          if (Object.keys(e2).length !== Object.keys(t2).length)
            return false;
          var r2, n2 = true;
          for (r2 in e2)
            void 0 === t2[r2] && (n2 = false), "object" == ("object" == typeof e2[r2] && typeof t2[r2]) ? n2 = D(e2[r2], t2[r2]) : e2[r2] !== t2[r2] && (n2 = false);
          return n2;
        }, q = function(e2, t2) {
          if (!e2 || !t2)
            return false;
          if (e2.length !== t2.length)
            return false;
          var r2 = true;
          return e2.forEach(function(e3, n2) {
            D(e3, t2[n2]) || (r2 = false);
          }), r2;
        }, w = function(e2, t2) {
          return !!e2 && -1 != e2.toLocaleLowerCase().indexOf(t2);
        };
      }, function(e, t, r) {
        "use strict";
        var n = r(26), i = (r.d(t, "b", function() {
          return n.a;
        }), r.d(t, "c", function() {
          return n.b;
        }), r.d(t, "d", function() {
          return n.c;
        }), r(27)), o = (r.d(t, "g", function() {
          return i.a;
        }), r.d(t, "h", function() {
          return i.b;
        }), r.d(t, "i", function() {
          return i.c;
        }), r.d(t, "E", function() {
          return i.d;
        }), r.d(t, "F", function() {
          return i.e;
        }), r.d(t, "H", function() {
          return i.f;
        }), r.d(t, "I", function() {
          return i.g;
        }), r.d(t, "J", function() {
          return i.h;
        }), r.d(t, "K", function() {
          return i.i;
        }), r.d(t, "M", function() {
          return i.j;
        }), r.d(t, "Q", function() {
          return i.k;
        }), r.d(t, "R", function() {
          return i.l;
        }), r(28)), s = (r.d(t, "e", function() {
          return o.a;
        }), r.d(t, "f", function() {
          return o.b;
        }), r.d(t, "p", function() {
          return o.c;
        }), r.d(t, "G", function() {
          return o.d;
        }), r.d(t, "L", function() {
          return o.e;
        }), r(29)), a = (r.d(t, "j", function() {
          return s.a;
        }), r(30), r(31)), u = (r.d(t, "a", function() {
          return a.a;
        }), r.d(t, "k", function() {
          return a.b;
        }), r.d(t, "l", function() {
          return a.c;
        }), r.d(t, "m", function() {
          return a.d;
        }), r.d(t, "n", function() {
          return a.e;
        }), r.d(t, "o", function() {
          return a.f;
        }), r.d(t, "S", function() {
          return a.g;
        }), r(32)), c = (r.d(t, "q", function() {
          return u.a;
        }), r.d(t, "r", function() {
          return u.b;
        }), r.d(t, "s", function() {
          return u.c;
        }), r.d(t, "t", function() {
          return u.d;
        }), r.d(t, "u", function() {
          return u.e;
        }), r.d(t, "v", function() {
          return u.f;
        }), r.d(t, "w", function() {
          return u.g;
        }), r.d(t, "x", function() {
          return u.h;
        }), r.d(t, "y", function() {
          return u.i;
        }), r.d(t, "z", function() {
          return u.j;
        }), r.d(t, "A", function() {
          return u.k;
        }), r.d(t, "B", function() {
          return u.l;
        }), r.d(t, "C", function() {
          return u.m;
        }), r.d(t, "D", function() {
          return u.n;
        }), r(33));
        r.d(t, "N", function() {
          return c.a;
        }), r.d(t, "O", function() {
          return c.b;
        }), r.d(t, "P", function() {
          return c.c;
        });
      }, function(e, t, r) {
        "use strict";
        var n, i, o;
        r.d(t, "a", function() {
          return n;
        }), r.d(t, "b", function() {
          return i;
        }), r.d(t, "c", function() {
          return o;
        }), (r = n = n || {})[r.Unknown = -1] = "Unknown", r[r.General = 0] = "General", r[r.Advanced = 1] = "Advanced", (t = i = i || {})[t.Unknown = -1] = "Unknown", t[t.Started = 1] = "Started", t[t.Ended = 2] = "Ended", (r = o = o || {})[r.Unknown = -1] = "Unknown", r[r.Inviting = 0] = "Inviting", r[r.Accepted = 1] = "Accepted", r[r.Rejected = 2] = "Rejected", r[r.Cancelled = 3] = "Cancelled", r[r.Received = 5] = "Received", r[r.Timeout = 6] = "Timeout", r[r.Quit = 7] = "Quit", r[r.Ended = 8] = "Ended", r[r.NotYetReceived = 9] = "NotYetReceived";
      }, function(e, t, r) {
        "use strict";
        var n, i, o, s, a, u, c, l, d, p, h, f;
        r.d(t, "c", function() {
          return n;
        }), r.d(t, "a", function() {
          return i;
        }), r.d(t, "b", function() {
          return o;
        }), r.d(t, "i", function() {
          return s;
        }), r.d(t, "h", function() {
          return a;
        }), r.d(t, "e", function() {
          return u;
        }), r.d(t, "f", function() {
          return c;
        }), r.d(t, "g", function() {
          return l;
        }), r.d(t, "j", function() {
          return d;
        }), r.d(t, "d", function() {
          return p;
        }), r.d(t, "l", function() {
          return h;
        }), r.d(t, "k", function() {
          return f;
        }), (r = n = n || {})[r.Unknown = -1] = "Unknown", r[r.Peer = 0] = "Peer", r[r.Room = 1] = "Room", r[r.Group = 2] = "Group", (t = i = i || {})[t.Added = 0] = "Added", t[t.Updated = 1] = "Updated", t[t.Disabled = 2] = "Disabled", t[t.Deleted = 3] = "Deleted", (r = o = o || {})[r.Notify = 1] = "Notify", r[r.DoNotDisturb = 2] = "DoNotDisturb", (t = s = s || {})[t.Unknown = 0] = "Unknown", t[t.Text = 1] = "Text", t[t.Command = 2] = "Command", t[t.Image = 11] = "Image", t[t.File = 12] = "File", t[t.Audio = 13] = "Audio", t[t.Video = 14] = "Video", t[t.Barrage = 20] = "Barrage", t[t.System = 30] = "System", t[t.Revoke = 31] = "Revoke", t[t.Tips = 32] = "Tips", t[t.Combine = 100] = "Combine", t[t.Custom = 200] = "Custom", (r = a = a || {})[r.Sending = 0] = "Sending", r[r.Success = 1] = "Success", r[r.Failed = 2] = "Failed", (t = u = u || {})[t.Send = 0] = "Send", t[t.Receive = 1] = "Receive", (r = c = c || {})[r.None = 0] = "None", r[r.Processing = 1] = "Processing", r[r.Done = 2] = "Done", r[r.Expired = 3] = "Expired", r[r.Failed = 4] = "Failed", (t = l = l || {})[t.Unknown = -1] = "Unknown", t[t.SelfRevoke = 0] = "SelfRevoke", t[t.SystemRevoke = 1] = "SystemRevoke", t[t.ServiceAPIRevoke = 2] = "ServiceAPIRevoke", t[t.GroupAdminRevoke = 3] = "GroupAdminRevoke", t[t.GroupOwnerRevoke = 4] = "GroupOwnerRevoke", (r = d = d || {})[r.TwoWay = 0] = "TwoWay", r[r.OneWay = 1] = "OneWay", (t = p = p || {})[t.MessageListDeleted = 0] = "MessageListDeleted", t[t.ConversationAllMessagesDeleted = 1] = "ConversationAllMessagesDeleted", t[t.AllConversationMessagesDeleted = 2] = "AllConversationMessagesDeleted", (r = h = h || {})[r.Unknown = 0] = "Unknown", r[r.GroupCreated = 1] = "GroupCreated", r[r.GroupDismissed = 2] = "GroupDismissed", r[r.GroupJoined = 3] = "GroupJoined", r[r.GroupInvited = 4] = "GroupInvited", r[r.GroupLeft = 5] = "GroupLeft", r[r.GroupKickedOut = 6] = "GroupKickedOut", r[r.GroupInfoChanged = 7] = "GroupInfoChanged", r[r.GroupMemberInfoChanged = 8] = "GroupMemberInfoChanged", (t = f = f || {})[t.GroupDataChanged = 1] = "GroupDataChanged", t[t.GroupNoticeChanged = 2] = "GroupNoticeChanged", t[t.GroupNameChanged = 3] = "GroupNameChanged", t[t.GroupAvatarUrlChanged = 4] = "GroupAvatarUrlChanged", t[t.GroupMuteChanged = 5] = "GroupMuteChanged", t[t.GroupOwnerTransferred = 10] = "GroupOwnerTransferred", t[t.GroupMemberRoleChanged = 11] = "GroupMemberRoleChanged", t[t.GroupMemberMuteChanged = 12] = "GroupMemberMuteChanged";
      }, function(e, t, r) {
        "use strict";
        var n, i, o, s, a;
        r.d(t, "b", function() {
          return n;
        }), r.d(t, "a", function() {
          return i;
        }), r.d(t, "d", function() {
          return o;
        }), r.d(t, "c", function() {
          return s;
        }), r.d(t, "e", function() {
          return a;
        }), (r = n = n || {})[r.Disconnected = 0] = "Disconnected", r[r.Connecting = 1] = "Connecting", r[r.Connected = 2] = "Connected", r[r.Reconnecting = 3] = "Reconnecting", (t = i = i || {})[t.Success = 0] = "Success", t[t.ActiveLogin = 1] = "ActiveLogin", t[t.LoginTimeout = 2] = "LoginTimeout", t[t.LoginInterrupted = 3] = "LoginInterrupted", t[t.KickedOut = 4] = "KickedOut", t[t.Unregistered = 6] = "Unregistered", (r = o = o || {})[r.Low = 1] = "Low", r[r.Medium = 2] = "Medium", r[r.High = 3] = "High", (t = s = s || {})[t.None = 0] = "None", t[t.Include = 1] = "Include", t[t.Exclude = 2] = "Exclude", (r = a = a || {})[r.ZIMPlatformTypeWin = 1] = "ZIMPlatformTypeWin", r[r.ZIMPlatformTypeIPhoneOS = 2] = "ZIMPlatformTypeIPhoneOS", r[r.ZIMPlatformTypeAndroid = 3] = "ZIMPlatformTypeAndroid", r[r.ZIMPlatformTypeMacOS = 4] = "ZIMPlatformTypeMacOS", r[r.ZIMPlatformTypeLinux = 5] = "ZIMPlatformTypeLinux", r[r.ZIMPlatformTypeWeb = 6] = "ZIMPlatformTypeWeb", r[r.ZIMPlatformTypeMiniIProgram = 7] = "ZIMPlatformTypeMiniIProgram", r[r.ZIMPlatformTypeIPadOS = 9] = "ZIMPlatformTypeIPadOS", r[r.ZIMPlatformTypeUnknown = 32] = "ZIMPlatformTypeUnknown";
      }, function(e, t, r) {
        "use strict";
        var n;
        r.d(t, "a", function() {
          return n;
        }), (r = n = n || {})[r.Success = 0] = "Success", r[r.Failed = 1] = "Failed", r[r.CommonModuleParamInvalid = 6000001] = "CommonModuleParamInvalid", r[r.CommonModuleNotInit = 6000002] = "CommonModuleNotInit", r[r.CommonModuleInvalidAppID = 6000003] = "CommonModuleInvalidAppID", r[r.CommonModuleTriggerSDKFrequencyLimit = 6000004] = "CommonModuleTriggerSDKFrequencyLimit", r[r.CommonModuleTriggerServerFrequencyLimit = 6000005] = "CommonModuleTriggerServerFrequencyLimit", r[r.CommonModuleSwitchServerError = 6000006] = "CommonModuleSwitchServerError", r[r.CommonModuleIMServerError = 6000007] = "CommonModuleIMServerError", r[r.CommonModuleUploadLogError = 6000010] = "CommonModuleUploadLogError", r[r.CommonModuleUserIsNotExist = 6000011] = "CommonModuleUserIsNotExist", r[r.CommonModuleUserInfoQueriedLimit = 6000012] = "CommonModuleUserInfoQueriedLimit", r[r.CommonModuleUnsupportedRequest = 6000013] = "CommonModuleUnsupportedRequest", r[r.CommonModuleUnactivatedIMServer = 6000014] = "CommonModuleUnactivatedIMServer", r[r.CommonModuleExceedDAULimit = 6000015] = "CommonModuleExceedDAULimit", r[r.CommonModuleExceedMAULimit = 6000016] = "CommonModuleExceedMAULimit", r[r.NetworkModuleCommonError = 6000101] = "NetworkModuleCommonError", r[r.NetworkModuleServerError = 6000102] = "NetworkModuleServerError", r[r.NetworkModuleTokenInvalid = 6000103] = "NetworkModuleTokenInvalid", r[r.NetworkModuleNetworkError = 6000104] = "NetworkModuleNetworkError", r[r.NetworkModuleTokenExpired = 6000106] = "NetworkModuleTokenExpired", r[r.NetworkModuleTokenVersionError = 6000107] = "NetworkModuleTokenVersionError", r[r.NetworkModuleTokenTimeIsTooShort = 6000108] = "NetworkModuleTokenTimeIsTooShort", r[r.NetworkModuleTokenTimeIsTooLong = 6000109] = "NetworkModuleTokenTimeIsTooLong", r[r.NetworkModuleUserHasAlreadyLogged = 6000111] = "NetworkModuleUserHasAlreadyLogged", r[r.NetworkModuleUserIsNotLogged = 6000121] = "NetworkModuleUserIsNotLogged", r[r.ConversationModuleCommonError = 6000601] = "ConversationModuleCommonError", r[r.ConversationModuleServerError = 6000602] = "ConversationModuleServerError", r[r.ConversationModuleConversationDoesNotExist = 6000603] = "ConversationModuleConversationDoesNotExist", r[r.ConversationModulePinnedListReachedLimit = 6000604] = "ConversationModulePinnedListReachedLimit", r[r.MessageModuleCommonError = 6000201] = "MessageModuleCommonError", r[r.MessageModuleServerError = 6000202] = "MessageModuleServerError", r[r.MessageModuleSendMessageFailed = 6000203] = "MessageModuleSendMessageFailed", r[r.MessageModuleTargetDoesNotExist = 6000204] = "MessageModuleTargetDoesNotExist", r[r.MessageModuleFileNotExist = 6000211] = "MessageModuleFileNotExist", r[r.MessageModuleFileServerError = 6000212] = "MessageModuleFileServerError", r[r.MessageModuleFileTypeUnsupported = 6000213] = "MessageModuleFileTypeUnsupported", r[r.MessageModuleFileSizeInvalid = 6000214] = "MessageModuleFileSizeInvalid", r[r.MessageModuleFileDurationInvalid = 6000215] = "MessageModuleFileDurationInvalid", r[r.MessageModuleAuditRejected = 6000221] = "MessageModuleAuditRejected", r[r.MessageModuleAuditFailed = 6000222] = "MessageModuleAuditFailed", r[r.MessageModuleAuditCustomSentRejected = 6000230] = "MessageModuleAuditCustomSentRejected", r[r.MessageModuleMutedInGroup = 6000231] = "MessageModuleMutedInGroup", r[r.MessageModuleReceiptReadError = 6000277] = "MessageModuleReceiptReadError", r[r.MessageModuleMessageExceedsRevokeTime = 6000278] = "MessageModuleMessageExceedsRevokeTime", r[r.MessageModuleMessageHasBeenRevoked = 6000279] = "MessageModuleMessageHasBeenRevoked", r[r.MessageModuleMessageReactionTypeExisted = 6000280] = "MessageModuleMessageReactionTypeExisted", r[r.MessageModuleMessageReceiptLimit = 6000282] = "MessageModuleMessageReceiptLimit", r[r.MessageModuleSenderInBlacklist = 6000284] = "MessageModuleSenderInBlacklist", r[r.RoomModuleCommonError = 6000301] = "RoomModuleCommonError", r[r.RoomModuleServerError = 6000302] = "RoomModuleServerError", r[r.RoomModuleCreateRoomError = 6000303] = "RoomModuleCreateRoomError", r[r.RoomModuleJoinRoomError = 6000304] = "RoomModuleJoinRoomError", r[r.RoomModuleLeaveRoomError = 6000306] = "RoomModuleLeaveRoomError", r[r.RoomModuleTheRoomMemberQueryFailed = 6000310] = "RoomModuleTheRoomMemberQueryFailed", r[r.RoomModuleTheRoomMembersQueryFailedCompletely = 6000311] = "RoomModuleTheRoomMembersQueryFailedCompletely", r[r.RoomModuleUserIsNotInTheRoom = 6000321] = "RoomModuleUserIsNotInTheRoom", r[r.RoomModuleTheRoomDoesNotExist = 6000322] = "RoomModuleTheRoomDoesNotExist", r[r.RoomModuleTheRoomAlreadyExists = 6000323] = "RoomModuleTheRoomAlreadyExists", r[r.RoomModuleTheNumberOfExistingRoomsHasReachedLimit = 6000324] = "RoomModuleTheNumberOfExistingRoomsHasReachedLimit", r[r.RoomModuleTheNumberOfJoinedRoomsHasReachedLimit = 6000325] = "RoomModuleTheNumberOfJoinedRoomsHasReachedLimit", r[r.RoomModuleRoomAttributesCommonError = 6000330] = "RoomModuleRoomAttributesCommonError", r[r.RoomModuleRoomAttributesOperationFailedCompletely = 6000331] = "RoomModuleRoomAttributesOperationFailedCompletely", r[r.RoomModuleRoomAttributesQueryFailed = 6000333] = "RoomModuleRoomAttributesQueryFailed", r[r.RoomModuleTheNumberOfRoomAttributesExceedsLimit = 6000334] = "RoomModuleTheNumberOfRoomAttributesExceedsLimit", r[r.RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit = 6000335] = "RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit", r[r.RoomModuleTheLengthOfRoomAttributeValueExceedsLimit = 6000336] = "RoomModuleTheLengthOfRoomAttributeValueExceedsLimit", r[r.RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit = 6000337] = "RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit", r[r.RoomModuleRoomMemberAttributesCommonError = 6000350] = "RoomModuleRoomMemberAttributesCommonError", r[r.RoomModuleTheTotalLengthOfRoomMemberAttributesExceedsLimit = 6000351] = "RoomModuleTheTotalLengthOfRoomMemberAttributesExceedsLimit", r[r.RoomModuleTheLengthOfRoomMemberAttributesKeyExceedsLimit = 6000352] = "RoomModuleTheLengthOfRoomMemberAttributesKeyExceedsLimit", r[r.RoomModuleTheLengthOfRoomMemberAttributesValueExceedsLimit = 6000353] = "RoomModuleTheLengthOfRoomMemberAttributesValueExceedsLimit", r[r.RoomModuleTheMemberNumberOfRoomMemberAttributesExceedsLimit = 6000357] = "RoomModuleTheMemberNumberOfRoomMemberAttributesExceedsLimit", r[r.GroupModuleCommonError = 6000501] = "GroupModuleCommonError", r[r.GroupModuleServerError = 6000502] = "GroupModuleServerError", r[r.GroupModuleCreateGroupError = 6000503] = "GroupModuleCreateGroupError", r[r.GroupModuleDismissGroupError = 6000504] = "GroupModuleDismissGroupError", r[r.GroupModuleJoinGroupError = 6000505] = "GroupModuleJoinGroupError", r[r.GroupModuleLeaveGroupError = 6000506] = "GroupModuleLeaveGroupError", r[r.GroupModuleKickoutGroupMemberError = 6000507] = "GroupModuleKickoutGroupMemberError", r[r.GroupModuleInviteUserIntoGroupError = 6000508] = "GroupModuleInviteUserIntoGroupError", r[r.GroupModuleTransferOwnerError = 6000509] = "GroupModuleTransferOwnerError", r[r.GroupModuleUpdateGroupInfoError = 6000510] = "GroupModuleUpdateGroupInfoError", r[r.GroupModuleQueryGroupInfoError = 6000511] = "GroupModuleQueryGroupInfoError", r[r.GroupModuleGroupAttributesOperationFailed = 6000512] = "GroupModuleGroupAttributesOperationFailed", r[r.GroupModuleGroupAttributesQueryFailed = 6000513] = "GroupModuleGroupAttributesQueryFailed", r[r.GroupModuleUpdateGroupMemberInfoError = 6000514] = "GroupModuleUpdateGroupMemberInfoError", r[r.GroupModuleQueryGroupMemberInfoError = 6000515] = "GroupModuleQueryGroupMemberInfoError", r[r.GroupModuleQueryGroupListError = 6000516] = "GroupModuleQueryGroupListError", r[r.GroupModuleQueryGroupMemberListError = 6000517] = "GroupModuleQueryGroupMemberListError", r[r.GroupModuleUserIsNotInTheGroup = 6000521] = "GroupModuleUserIsNotInTheGroup", r[r.GroupModuleMemberIsAlreadyInTheGroup = 6000522] = "GroupModuleMemberIsAlreadyInTheGroup", r[r.GroupModuleGroupDoesNotExist = 6000523] = "GroupModuleGroupDoesNotExist", r[r.GroupModuleGroupAlreadyExists = 6000524] = "GroupModuleGroupAlreadyExists", r[r.GroupModuleGroupMemberHasReachedLimit = 6000525] = "GroupModuleGroupMemberHasReachedLimit", r[r.GroupModuleGroupAttributeDoesNotExist = 6000526] = "GroupModuleGroupAttributeDoesNotExist", r[r.GroupModuleCreateGroupWithDismissed = 6000527] = "GroupModuleCreateGroupWithDismissed", r[r.GroupModuleTheNumberOfGroupAttributesExceedsLimit = 6000531] = "GroupModuleTheNumberOfGroupAttributesExceedsLimit", r[r.GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit = 6000532] = "GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit", r[r.GroupModuleTheLengthOfGroupAttributeValueExceedsLimit = 6000533] = "GroupModuleTheLengthOfGroupAttributeValueExceedsLimit", r[r.GroupModuleTheTotalLengthOfGroupAttributesValueExceedsLimit = 6000534] = "GroupModuleTheTotalLengthOfGroupAttributesValueExceedsLimit", r[r.GroupModuleNoCorrespondingOperationAuthority = 6000541] = "GroupModuleNoCorrespondingOperationAuthority", r[r.GroupModuleForbidJoinGroupError = 6000542] = "GroupModuleForbidJoinGroupError", r[r.GroupModuleNeedApplyJoinGroupError = 6000543] = "GroupModuleNeedApplyJoinGroupError", r[r.GroupModuleNeedApplyInviteGroupError = 6000544] = "GroupModuleNeedApplyInviteGroupError", r[r.CallModuleCommonError = 6000270] = "CallModuleCommonError", r[r.CallModuleCancelError = 6000271] = "CallModuleCancelError", r[r.CallModuleServerError = 6000272] = "CallModuleServerError", r[r.CallModuleIsNotInvitor = 6000273] = "CallModuleIsNotInvitor", r[r.CallModuleIsNotInvitee = 6000274] = "CallModuleIsNotInvitee", r[r.CallModuleAlreadyExists = 6000275] = "CallModuleAlreadyExists", r[r.CallModuleDoesNotExist = 6000276] = "CallModuleDoesNotExist", r[r.CallModuleInviteUserDoesNotExist = 6000281] = "CallModuleInviteUserDoesNotExist", r[r.CallModuleUserAlreadyInTheCall = 6000283] = "CallModuleUserAlreadyInTheCall", r[r.FriendModuleCommonError = 6000284] = "FriendModuleCommonError", r[r.FriendModuleServerError = 6000285] = "FriendModuleServerError", r[r.FriendModuleFriendNumLimit = 6000801] = "FriendModuleFriendNumLimit", r[r.FriendModuleFriendApplicationStatusError = 6000802] = "FriendModuleFriendApplicationStatusError", r[r.FriendModuleFriendIsAlreadyYourFriend = 6000803] = "FriendModuleFriendIsAlreadyYourFriend", r[r.FriendModuleFriendAlreadyAddToBlacklist = 6000804] = "FriendModuleFriendAlreadyAddToBlacklist", r[r.FriendModuleFriendCannotBlacklistSelf = 6000805] = "FriendModuleFriendCannotBlacklistSelf", r[r.FriendModuleFriendAlreadyDeleteFromBlacklist = 6000806] = "FriendModuleFriendAlreadyDeleteFromBlacklist", r[r.FriendModuleFriendUserNotInBlacklist = 6000807] = "FriendModuleFriendUserNotInBlacklist", r[r.FriendModuleBlacklistListQuantityLimit = 6000808] = "FriendModuleBlacklistListQuantityLimit", r[r.FriendModuleFriendListQuantityLimit = 6000809] = "FriendModuleFriendListQuantityLimit", r[r.FriendModuleCannotFriendListSelf = 6000810] = "FriendModuleCannotFriendListSelf", r[r.FriendModuleFriendAreUnregistered = 6000811] = "FriendModuleFriendAreUnregistered", r[r.FriendModuleIsNotYourFriend = 6000812] = "FriendModuleIsNotYourFriend", r[r.FriendModuleCannotDeleteSelf = 6000813] = "FriendModuleCannotDeleteSelf", r[r.FriendModuleFriendApplicationExpired = 6000814] = "FriendModuleFriendApplicationExpired", r[r.FriendModuleAddBlacklistFail = 6000815] = "FriendModuleAddBlacklistFail", r[r.FriendModuleDelBlacklistFail = 6000816] = "FriendModuleDelBlacklistFail", r[r.UserModuleCommonError = 6000817] = "UserModuleCommonError";
      }, function(e, t, r) {
      }, function(e, t, r) {
        "use strict";
        var n, i, o, s, a, u, c;
        r.d(t, "a", function() {
          return n;
        }), r.d(t, "g", function() {
          return i;
        }), r.d(t, "f", function() {
          return o;
        }), r.d(t, "e", function() {
          return s;
        }), r.d(t, "d", function() {
          return a;
        }), r.d(t, "c", function() {
          return u;
        }), r.d(t, "b", function() {
          return c;
        }), (r = n = n || {})[r.Added = 0] = "Added", r[r.Removed = 1] = "Removed", (t = i = i || {})[t.SingleNo = 1] = "SingleNo", t[t.SingleHave = 2] = "SingleHave", t[t.BothAllNo = 3] = "BothAllNo", t[t.BothSelfHave = 4] = "BothSelfHave", t[t.BothOtherHave = 5] = "BothOtherHave", t[t.BothAllHave = 6] = "BothAllHave", (r = o = o || {})[r.Both = 0] = "Both", r[r.Single = 1] = "Single", (t = s = s || {})[t.Added = 0] = "Added", t[t.Deleted = 1] = "Deleted", (r = a = a || {})[r.None = 0] = "None", r[r.Received = 1] = "Received", r[r.Sent = 2] = "Sent", r[r.Both = 3] = "Both", (t = u = u || {})[t.Waiting = 1] = "Waiting", t[t.Accepted = 2] = "Accepted", t[t.Rejected = 3] = "Rejected", t[t.Expired = 4] = "Expired", t[t.Disabled = 5] = "Disabled", (c = c || {})[c.Added = 0] = "Added";
      }, function(e, t, r) {
        "use strict";
        var n, i, o, s, a, u, c, l, d, p, h, f, g, m;
        r.d(t, "l", function() {
          return n;
        }), r.d(t, "n", function() {
          return i;
        }), r.d(t, "g", function() {
          return o;
        }), r.d(t, "k", function() {
          return s;
        }), r.d(t, "j", function() {
          return a;
        }), r.d(t, "d", function() {
          return u;
        }), r.d(t, "m", function() {
          return c;
        }), r.d(t, "i", function() {
          return l;
        }), r.d(t, "h", function() {
          return d;
        }), r.d(t, "e", function() {
          return p;
        }), r.d(t, "f", function() {
          return h;
        }), r.d(t, "c", function() {
          return f;
        }), r.d(t, "b", function() {
          return g;
        }), r.d(t, "a", function() {
          return m;
        }), (r = n = n || {})[r.Notify = 1] = "Notify", r[r.Disturb = 2] = "Disturb", (t = i = i || {})[t.Quit = 0] = "Quit", t[t.Enter = 1] = "Enter", (r = o = o || {})[r.Created = 1] = "Created", r[r.Dismissed = 2] = "Dismissed", r[r.Joined = 3] = "Joined", r[r.Invited = 4] = "Invited", r[r.Left = 5] = "Left", r[r.KickedOut = 6] = "KickedOut", (t = s = s || {})[t.Quit = 0] = "Quit", t[t.Enter = 1] = "Enter", (r = a = a || {})[r.Joined = 1] = "Joined", r[r.Left = 2] = "Left", r[r.KickedOut = 4] = "KickedOut", r[r.Invited = 5] = "Invited", (t = u = u || {})[t.Set = 0] = "Set", t[t.Delete = 1] = "Delete", (r = c = c || {})[r.None = 0] = "None", r[r.Normal = 1] = "Normal", r[r.All = 2] = "All", r[r.Custom = 3] = "Custom", (t = l = l || {})[t.Any = 0] = "Any", t[t.Auth = 1] = "Auth", t[t.Forbid = 2] = "Forbid", (r = d = d || {})[r.Any = 0] = "Any", r[r.Admin = 1] = "Admin", (t = p = p || {})[t.None = 0] = "None", t[t.Auth = 1] = "Auth", (r = h = h || {})[r.Unknown = 0] = "Unknown", r[r.Created = 1] = "Created", r[r.JoinApply = 2] = "JoinApply", r[r.Joined = 3] = "Joined", r[r.Invited = 4] = "Invited", r[r.InviteApply = 5] = "InviteApply", (t = f = f || {})[t.None = 0] = "None", t[t.Join = 1] = "Join", t[t.Invite = 2] = "Invite", t[t.BeInvite = 3] = "BeInvite", (r = g = g || {})[r.Waiting = 1] = "Waiting", r[r.Accepted = 2] = "Accepted", r[r.Rejected = 3] = "Rejected", r[r.Expired = 4] = "Expired", r[r.Disabled = 5] = "Disabled", (m = m || {})[m.Added = 0] = "Added";
      }, function(e, t, r) {
        "use strict";
        var n, i, o;
        r.d(t, "c", function() {
          return n;
        }), r.d(t, "b", function() {
          return i;
        }), r.d(t, "a", function() {
          return o;
        }), (r = n = n || {})[r.Disconnected = 0] = "Disconnected", r[r.Connecting = 1] = "Connecting", r[r.Connected = 2] = "Connected", (t = i = i || {})[t.Success = 0] = "Success", t[t.NetworkInterrupted = 1] = "NetworkInterrupted", t[t.NetworkDisconnected = 2] = "NetworkDisconnected", t[t.RoomNotExist = 3] = "RoomNotExist", t[t.ActiveCreate = 4] = "ActiveCreate", t[t.CreateFailed = 5] = "CreateFailed", t[t.ActiveEnter = 6] = "ActiveEnter", t[t.EnterFailed = 7] = "EnterFailed", t[t.KickedOut = 8] = "KickedOut", t[t.ConnectTimeout = 9] = "ConnectTimeout", t[t.KickedOutByOtherDevice = 10] = "KickedOutByOtherDevice", (r = o = o || {})[r.Set = 0] = "Set", r[r.Delete = 1] = "Delete";
      }, function(e, t, r) {
        "use strict";
        var n, i, o, s, a, u, c, l, d, p, h, f, g, m;
        r.d(t, "c", function() {
          return n;
        }), r.d(t, "e", function() {
          return i;
        }), r.d(t, "h", function() {
          return o;
        }), r.d(t, "l", function() {
          return s;
        }), r.d(t, "k", function() {
          return a;
        }), r.d(t, "g", function() {
          return u;
        }), r.d(t, "i", function() {
          return c;
        }), r.d(t, "j", function() {
          return l;
        }), r.d(t, "f", function() {
          return d;
        }), r.d(t, "m", function() {
          return p;
        }), r.d(t, "n", function() {
          return h;
        }), r.d(t, "d", function() {
          return f;
        }), r.d(t, "b", function() {
          return g;
        }), r.d(t, "a", function() {
          return m;
        }), (r = n = n || {})[r.Cancel = 0] = "Cancel", r[r.Timeout = 1] = "Timeout", (t = i = i || {})[t.Normal = 0] = "Normal", t[t.Disable = 1] = "Disable", t[t.Delete = 2] = "Delete", (r = o = o || {})[r.Notice = 0] = "Notice", r[r.Name = 1] = "Name", r[r.Avatar = 2] = "Avatar", r[r.Mute = 3] = "Mute", r[r.Limit = 4] = "Limit", r[r.SvrData = 5] = "SvrData", (t = s = s || {})[t.Join = 0] = "Join", t[t.Invite = 1] = "Invite", t[t.BeInvite = 2] = "BeInvite", (r = a = a || {})[r.Owner = 1] = "Owner", r[r.Admin = 2] = "Admin", r[r.Member = 3] = "Member", (t = u = u || {})[t.Set = 0] = "Set", t[t.Delete = 1] = "Delete", t[t.Push = 2] = "Push", t[t.Query = 3] = "Query", (r = c = c || {})[r.None = 0] = "None", r[r.Enter = 1] = "Enter", r[r.Quit = 2] = "Quit", r[r.Modify = 3] = "Modify", r[r.Kickout = 4] = "Kickout", r[r.Invited = 5] = "Invited", r[r.OwnerQuit = 6] = "OwnerQuit", r[r.Mute = 7] = "Mute", r[r.ApplyJoin = 8] = "ApplyJoin", r[r.ApplyInvited = 9] = "ApplyInvited", (t = l = l || {})[t.Nickname = 0] = "Nickname", t[t.Role = 1] = "Role", (r = d = d || {})[r.Other = 0] = "Other", r[r.SDKLogin = 1] = "SDKLogin", r[r.SDKPush = 2] = "SDKPush", r[r.SDKHb = 3] = "SDKHb", r[r.Biz = 4] = "Biz", (t = p = p || {}).Insert = "Insert", t.Sending = "Sending", t.Sended = "Sended", t.Fetch = "Fetch", t.Push = "Push", t.Tips = "Tips", (r = h = h || {})[r.None = 0] = "None", r[r.RevokeSelf = 4] = "RevokeSelf", r[r.RevokeSystem = 8] = "RevokeSystem", r[r.RevokeService = 12] = "RevokeService", r[r.RevokeGroupAdmin = 16] = "RevokeGroupAdmin", r[r.RevokeGroupOwner = 20] = "RevokeGroupOwner", r[r.ReceiptDone = 64] = "ReceiptDone", r[r.ReceiptExpired = 128] = "ReceiptExpired", r[r.ReceiptFailed = 192] = "ReceiptFailed", r[r.ReceiptDoing = 256] = "ReceiptDoing", r[r.VoteDoing = 1024] = "VoteDoing", r[r.VoteDone = 2048] = "VoteDone", (t = f = f || {})[t.DontDisturb = -1] = "DontDisturb", t[t.RecoverDisturb = 0] = "RecoverDisturb", t[t.HandleMessage = 1] = "HandleMessage", (r = g = g || {})[r.Insert = 0] = "Insert", r[r.Remove = 1] = "Remove", (t = m = m || {})[t.FetchAll = 0] = "FetchAll", t[t.FetchMessageList = 1] = "FetchMessageList", t[t.FetchMessageStatusList = 2] = "FetchMessageStatusList";
      }, function(e, t, r) {
        "use strict";
        r.d(t, "d", function() {
          return s;
        }), r.d(t, "c", function() {
          return n;
        }), r.d(t, "b", function() {
          return i;
        }), r.d(t, "a", function() {
          return g;
        });
        var n, i, o = function() {
          return (o = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, s = 100021, a = (r = ((r = n = n || {})[r.SDK = 0] = "SDK", r[r.API = 1] = "API", (t = i = i || {})[t.Low = 0] = "Low", t[t.Medium = 1] = "Medium", t[t.High = 2] = "High", t[t.Highest = 3] = "Highest", { req: "QueryRoomMsgReq", rsp: "QueryRoomMsgRsp", w: i.High }), t = { req: "GetStatemsgListReq", rsp: "GetStatemsgListRsp", w: i.Medium }, { req: "C2CReadReceiptReq", rsp: "C2CReadReceiptRsp", w: i.Medium }), u = { req: "RevokeMsgReq", rsp: "RevokeMsgRsp", w: i.Medium }, c = { req: "SetReactionReq", rsp: "SetReactionRsp", w: i.Medium }, l = { req: "DelReactionReq", rsp: "SetReactionRsp", w: i.Medium }, d = { req: "ReactionInfoReq", rsp: "ReactionInfoRsp", w: i.Medium }, p = { req: "ReactionListReq", rsp: "ReactionListRsp", w: i.Medium }, h = { req: "BatchFetchConvMsgReq", rsp: "BatchFetchConvMsgRsp", w: i.Medium }, f = { req: "DelReactionReq", rsp: "FetchReplyListRsp", w: i.Medium }, g = { Accesshub: { cmd: "Accesshub" }, sw_handshake: { cmd: "/sw/handshake_req", req: "HandshakeReq" }, sw_login: { cmd: "/sw/login", req: "LoginReq", rsp: "LoginRsp", w: i.Highest }, sw_logout: { cmd: "/sw/logout", req: "StCommandMsgInfo", rsp: "CommonCodeMessage", w: i.Highest }, sw_renew_token: { cmd: "/sw/renew_token", req: "ModifyUserInfoReq", rsp: "CommonCodeMessage", w: i.Highest }, sw_hb: { cmd: "/sw/hb", req: "ModifyUserInfoReq", rsp: "HbRsp", w: i.Highest }, swp_kickout: { cmd: "/sw/push_kickout", rsp: "ErrList" }, swp_redirect: { cmd: "/sw/push_redirect", rsp: "FriendDeletedReq" }, swp_list: { cmd: "/sw/push_list", rsp: "PushListRequest" }, swp_list_rsp: { cmd: "/sw/push_list_rsp", req: "PushListRsp" }, p_detaillog_report: { cmd: "/im/push_detaillog_report", rsp: "CommonCodeMessage" }, mp_user_modify: { cmd: "/im/push_modify_userinfo", rsp: "ModifyUserInfoReq" }, mp_msg_delete: { cmd: "/im/push_conv_msg_delete", rsp: "PushDelConvMsg" }, mp_conv_delete: { cmd: "/im/push_conv_delete", rsp: "ConvInfo" }, mp_conv_readseq: { cmd: "/im/push_update_readseq", rsp: "ConvInfo" }, mp_conv_mute: { cmd: "/im/push_group_mute", rsp: "ConvInfo" }, mp_conv_pinned: { cmd: "/im/push_conv_pinned", rsp: "PushPinnedConvChange" }, mp_group_enter: { cmd: "/im/push_enter_group", rsp: "PushEnterGroup" }, mp_group_quit: { cmd: "/im/push_quit_group", rsp: "PushGroupOwnerTransfer" }, mp_del_all_conv: { cmd: "/im/push_del_all_conv", rsp: "StMsgClientInfo" }, mp_clean_unread: { cmd: "/im/push_clean_unread", rsp: "StMsgClientInfo" }, mp_blacklist_add: { cmd: "/im/push_blacklist_add", rsp: "PushBlacklistAdd" }, mp_blacklist_delete: { cmd: "/im/push_blacklist_del", rsp: "PushBlacklistDelete" }, mp_friend_add: { cmd: "/im/push_friend_add_to_self", rsp: "PushFriendAdd2Self" }, mp_friend_apply: { cmd: "/im/push_friend_apply_to_self", rsp: "PushFriendApply2Self" }, mp_friend_accept: { cmd: "/im/push_friend_accept_to_self", rsp: "PushFriendAccept" }, mp_friend_refuse: { cmd: "/im/push_friend_refuse_to_self", rsp: "PushFriendRefuse" }, mp_friend_delete: { cmd: "/im/push_friend_delete_to_self", rsp: "PushFriendAdd2Self" }, mp_friend_attr_modify: { cmd: "/im/push_modify_friend_attribute", rsp: "PushModifyFriendAttribute" }, mp_friend_remark_modify: { cmd: "/im/usermail/push_modify_friend_remark", rsp: "StGroupAttribute" }, mp_clean_all_msg: { cmd: "/im/push_clean_all_msg", rsp: "StMsgClientInfo" }, mp_c2c_mute: { cmd: "/im/push_c2c_mute", rsp: "PushC2cMute" }, user_modify: { cmd: "/sw/modify_info", req: "ModifyUserInfoReq", rsp: "ConvDelRsp", w: i.Medium }, user_fetch: { cmd: "/im/account/fetch_user_info", req: "FriendDeletedReq", rsp: "UserInfoRsp", w: i.Low }, user_zpns_report: { cmd: "/im/userstate/zpns_report", req: "StGroupAttribute", rsp: "CommonCodeMessage", w: i.Medium }, user_custom_push: { cmd: "/im/account/modify_custom_push", req: "ModifyUserCustomPush", rsp: "ConvDelRsp", w: i.Medium }, user_fetch_rule: { cmd: "/im/account/fetch_self_user_rule", req: "", rsp: "SelfUserInfoRsp", w: i.Low }, conv_hb: { cmd: "/im/usermail/hb", req: "StMsgClientInfo", rsp: "UserMailHbRsp", w: i.Highest }, conv_list: { cmd: "/im/usermail/convlist", req: "FriendListReq", rsp: "GetConvListRsp", w: i.Highest }, conv_del: { cmd: "/im/usermail/del_conv", req: "UpdateReadSeqReq", rsp: "ConvDelRsp", w: i.Medium }, conv_del_all: { cmd: "/im/usermail/del_all_conv", req: "StMsgClientInfo", rsp: "CommonCodeMessage", w: i.Medium }, conv_read_seq: { cmd: "/im/usermail/update_read_seq", req: "UpdateReadSeqReq", rsp: "CommonCodeMessage", w: i.Medium }, conv_clean_all_unread: { cmd: "/im/usermail/clean_all_unread", req: "StMsgClientInfo", rsp: "CommonCodeMessage", w: i.Medium }, conv_pinned: { cmd: "/im/usermail/conv_pinned", req: "StCheckFriendFail", rsp: "ConvDelRsp", w: i.High }, conv_pinned_list: { cmd: "/im/usermail/convpinnedlist", req: "FriendListReq", rsp: "GetConvListRsp", w: i.High }, conv_clean_all_msg: { cmd: "/im/usermail/clean_all_msg", req: "", rsp: "ConvDelRsp", w: i.Medium }, conv_c2c_mute: { cmd: "/im/usermail/mute", req: "C2CMuteReq", rsp: "C2CMuteRsp", w: i.Medium }, conv_group_mute: { cmd: "/im/group/mute", req: "GroupMuteReq", rsp: "ConvDelRsp", w: i.Medium }, conv_mute_list: { cmd: "/im/usermail/mute_list", req: "", rsp: "GetMuteInfoListRsp", w: i.Medium }, c2c_msg: { cmd: "/im/c2c/msg", req: "C2CMsgReq", rsp: "C2CMsgRsp", w: i.High }, group_msg: { cmd: "/im/group/msg", req: "C2CMsgReq", rsp: "GroupMsgRsp", w: i.High }, room_msg: { cmd: "/im/room/msg", req: "RoomMsgReq", rsp: "RoomMsgRsp", w: i.High }, c2c_command: { cmd: "/im/c2c/command", req: "C2CCommandReq", rsp: "C2CCommandReqRsp", w: i.High }, group_command: { cmd: "/im/group/command", req: "C2CCommandReq", rsp: "C2CCommandReqRsp", w: i.High }, room_command: { cmd: "/im/msg/room_msg", req: "RoomCommandMsgReq", rsp: "RoomMsgRsp", w: i.High }, c2c_msglist: { cmd: "/im/usermail/msglist", req: "FetchConvMsgReq", rsp: "FetchConvMsgRsp", w: i.High }, group_msglist: { cmd: "/im/group/msglist", req: "FetchGroupMsgList", rsp: "FetchGroupMsgListRsp", w: i.High }, room_msglist: { cmd: "/im/room/room_msglist", req: "RoomMsglistReq", rsp: "RoomMsglistRsp", w: i.High }, c2c_query_msg: o({ cmd: "/im/usermail/query_msg" }, r), group_query_msg: o({ cmd: "/im/group/query_msg" }, r), room_query_msg: o({ cmd: "/im/room/query_msg" }, r), c2c_del_msg: { cmd: "/im/usermail/del_msg_by_msgid", req: "ConvDelMsgByMsgIdReq", rsp: "CommonCodeMessage", w: i.Medium }, group_del_msg: { cmd: "/im/group/del_msg", req: "C2CReadReceiptReq", rsp: "CommonCodeMessage", w: i.Medium }, c2c_del_all_msg: { cmd: "/im/usermail/del_all_msg", req: "UpdateReadSeqReq", rsp: "CommonCodeMessage", w: i.Medium }, group_del_all_msg: { cmd: "/im/group/del_all_msg", req: "C2CReadReceiptReq", rsp: "CommonCodeMessage", w: i.Medium }, c2c_fetch_msg: { cmd: "/im/usermail/fetch_c2c_msg", req: "FriendListReq", rsp: "FetchC2CMsgRsp", w: i.Low }, p_c2c_msg: { cmd: "/im/push_c2c_msg", rsp: "PushGroupMsg" }, p_c2c_command: { cmd: "/im/push_c2c_command", rsp: "PushC2CCommand" }, p_group_msg: { cmd: "/im/push_group_msg", rsp: "PushGroupMsg" }, p_group_command: { cmd: "/im/push_group_command_msg", rsp: "PushGroupCommand" }, p_room_msg: { cmd: "/im/push_roommsg", rsp: "PushRoomMsg" }, p_room_command: { cmd: "/im/push_room_msg", rsp: "PushRoomCommand" }, p_msg_to_all_users: { cmd: "/im/push_msg_to_all_users", rsp: "PushGroupMsg" }, file_upload: { cmd: "/im/file/upload", req: "FileUploadReq", rsp: "FileUploadRsp", w: i.High }, file_process: { cmd: "/im/file/process", req: "FileUploadReq", rsp: "FileProcessRsp", w: i.High }, file_del: { cmd: "/im/file/delete", req: "FileUploadReq", rsp: "CommonCodeMessage", w: i.Low }, c2c_msg_state_list: o({ cmd: "/im/usermail/statemsg_list" }, t), group_msg_state_list: o({ cmd: "/im/group/statemsg_list" }, t), extra_msglist: { cmd: "/im/usermail/extra_msglist", req: "FriendListReq", rsp: "GetExtraMsgListRsp", w: i.Medium }, c2c_conv_read_receipt: { cmd: "/im/usermail/conv_read", req: "GroupGetMembersReq", rsp: "ConvDelRsp", w: i.Medium }, c2c_msg_read_receipt: o({ cmd: "/im/usermail/read_receipt" }, a), group_msg_read_receipt: o({ cmd: "/im/group/read_receipt" }, a), msg_read_receipt_detail: { cmd: "/im/usermail/receipt_detail", req: "GroupGetMembersReq", rsp: "GetGroupReadReceiptDetailRsp", w: i.Medium }, c2c_msg_revoke: o({ cmd: "/im/usermail/msg_revoke" }, u), group_msg_revoke: o({ cmd: "/im/group/msg_revoke" }, u), c2c_add_reaction: o({ cmd: "/im/usermail/add_reaction" }, c), group_add_reaction: o({ cmd: "/im/group/add_reaction" }, c), c2c_del_reaction: o({ cmd: "/im/usermail/del_reaction" }, l), group_del_reaction: o({ cmd: "/im/group/del_reaction" }, l), c2c_get_reaction: o({ cmd: "/im/usermail/get_reaction_info" }, d), group_get_reaction: o({ cmd: "/im/group/get_reaction_info" }, d), c2c_reaction_list: o({ cmd: "/im/usermail/reaction_list" }, p), group_reaction_list: o({ cmd: "/im/group/reaction_list" }, p), c2c_batch_fetch_msg: o({ cmd: "/im/usermail/batch_fetch_conv_msg" }, h), group_batch_fetch_msg: o({ cmd: "/im/group/batch_fetch_conv_msg" }, h), c2c_fetch_msg_reply: o({ cmd: "/im/usermail/fetch_reply_list" }, f), group_fetch_msg_reply: o({ cmd: "/im/group/fetch_reply_list" }, f), p_read_receipt: { cmd: "/im/push_read_receipt", rsp: "PushReadReceipt" }, p_msg_revoke: { cmd: "/im/push_msg_revoke", rsp: "PushMsgRevoke" }, p_reaction: { cmd: "/im/push_reaction", rsp: "PushMsgReaction" }, room_create: { cmd: "/im/room/create", req: "RoomCreateReq", rsp: "RoomCreateRsp", w: i.High }, room_enter: { cmd: "/im/room/enter", req: "RoomEnterReq", rsp: "RoomEnterRsp", w: i.High }, room_quit: { cmd: "/im/room/quit", req: "QueryRoomUserInfosReq", rsp: "CommonCodeMessage", w: i.High }, room_quit_all: { cmd: "/im/userstate/quit_all_room", req: "", rsp: "QuitAllRoomRsp", w: i.High }, room_info: { cmd: "/im/room/info", req: "QueryRoomUserInfosReq", rsp: "RoomInfoRsp", w: i.Highest }, room_userlist: { cmd: "/im/room/userlist", req: "RoomUserlistReq", rsp: "RoomUserlistRsp", w: i.Medium }, room_userinfos: { cmd: "/im/room/user_infos", req: "QueryRoomUserInfosReq", rsp: "UserInfoRsp", w: i.Medium }, room_attr: { cmd: "/im/room/get_attributes", req: "GetRoomAttributesReq", rsp: "ModifyRoomAttributesRsp", w: i.Low }, room_attr_modify: { cmd: "/im/room/modify_attributes", req: "ModifyRoomAttributesReq", rsp: "ModifyRoomAttributesRsp", w: i.Medium }, room_user_attr_modify: { cmd: "/im/room/modify_user_attributes", req: "ModifyRoomUserAttributesReq", rsp: "ModifyRoomUserAttributesRsp", w: i.Medium }, room_user_attr_get: { cmd: "/im/room/get_user_attributes", req: "GetRoomUserAttributesReq", rsp: "ModifyRoomUserAttributesRsp", w: i.Medium }, room_user_attr_list_get: { cmd: "/im/room/get_user_attribute_list", req: "GetRoomUserAttributeListReq", rsp: "GetRoomUserAttributeListRsp", w: i.Medium }, p_room_enter: { cmd: "/im/push_room_enter", rsp: "PushRoomEnter" }, p_room_quit: { cmd: "/im/push_room_quit", rsp: "PushRoomEnter" }, p_room_kickout: { cmd: "/im/push_room_kickout", rsp: "PushRoomKickout" }, p_room_attrs: { cmd: "/im/push_room_attrs_modify", rsp: "PushRoomAttributesModify" }, p_room_user_attrs: { cmd: "/im/push_room_user_attrs_modify", rsp: "PushRoomUserAttributesModify" }, group_create: { cmd: "/im/group/create", req: "GroupCreateReq", rsp: "GroupCreateRsp", w: i.Medium }, group_enter: { cmd: "/im/group/enter", req: "GroupApplyAccept", rsp: "GroupEnterRsp", w: i.Medium }, group_invite: { cmd: "/im/group/invite", req: "GroupInviteReq", rsp: "GroupInviteRsp", w: i.Medium }, group_kickout: { cmd: "/im/group/kickout", req: "GroupInviteReq", rsp: "GroupKickOutRsp", w: i.Medium }, group_quit: { cmd: "/im/group/quit", req: "GroupApplyAccept", rsp: "ConvDelRsp", w: i.Medium }, group_destroy: { cmd: "/im/group/destroy", req: "GroupApplyAccept", rsp: "ConvDelRsp", w: i.Medium }, group_list: { cmd: "/im/usermail/grouplist", req: "FriendListReq", rsp: "GroupListRsp", w: i.High }, group_infos: { cmd: "/im/group/infos", req: "FriendDeletedReq", rsp: "GroupInfosRsp", w: i.Low }, group_owner_transfer: { cmd: "/im/group/owner_transfer", req: "GroupCreateReq", rsp: "ConvDelRsp", w: i.Medium }, group_data: { cmd: "/im/group/data", req: "GroupApplyAccept", rsp: "GroupDataRsp", w: i.Medium }, group_attr: { cmd: "/im/group/get_attributes", req: "GroupGetAttributesReq", rsp: "GroupModifyAttributeRsp", w: i.Low }, group_modify_name: { cmd: "/im/group/modify_group_name", req: "GroupCreateReq", rsp: "ConvDelRsp", w: i.Medium }, group_modify_avatar: { cmd: "/im/group/modify_group_avatar", req: "StUserInfo", rsp: "ConvDelRsp", w: i.Medium }, group_modify_notice: { cmd: "/im/group/modify_group_notice", req: "GroupCreateReq", rsp: "ConvDelRsp", w: i.Medium }, group_modify_attr: { cmd: "/im/group/modify_attribute", req: "GroupModifyAttributeReq", rsp: "GroupModifyAttributeRsp", w: i.Medium }, group_set_forbid: { cmd: "/im/group/set_forbid", req: "GroupSetForbidReq", rsp: "ConvDelRsp", w: i.Medium }, group_member_list: { cmd: "/im/group/members", req: "GroupGetMembersReq", rsp: "GroupGetMembersRsp", w: i.Medium }, group_members_by_seq: { cmd: "/im/group/members_by_seq", req: "C2CReadReceiptReq", rsp: "GetGroupMembersByMemberSeqRsp", w: i.Medium }, group_member_data: { cmd: "/im/group/member_data", req: "GroupMemberDataReq", rsp: "GroupMemberDataRsp", w: i.Low }, group_member_nickname_set: { cmd: "/im/group/set_nickname", req: "GroupCreateReq", rsp: "ConvDelRsp", w: i.Medium }, group_member_role_set: { cmd: "/im/group/set_member_role", req: "GroupSetMemberRoleReq", rsp: "ConvDelRsp", w: i.Medium }, group_member_forbid_set: { cmd: "/im/group/set_member_forbid", req: "CallReq", rsp: "GroupInviteRsp", w: i.Medium }, group_limit: { cmd: "/im/group/modify_limit", req: "ModifyGroupLimitReq", rsp: "ConvDelRsp", w: i.Medium }, group_apply: { cmd: "/im/group/apply", req: "GroupApplyAccept", rsp: "GroupApplyRsp", w: i.Medium, ext: { isGroup: true } }, group_invite_accept: { cmd: "/im/group/invite_accept", req: "GroupApplyAccept", rsp: "GroupApplyRsp", w: i.Medium, ext: { isGroup: true } }, group_invite_reject: { cmd: "/im/group/invite_reject", req: "GroupApplyAccept", rsp: "GroupApplyRsp", w: i.Medium, ext: { isGroup: true } }, group_apply_accept: { cmd: "/im/group/apply_accept", req: "GroupApplyAccept", rsp: "GroupApplyRsp", w: i.Medium }, group_apply_reject: { cmd: "/im/group/apply_reject", req: "GroupApplyAccept", rsp: "GroupApplyRsp", w: i.Medium }, group_apply_list: { cmd: "/im/group/user_apply_list", req: "GroupGetMembersReq", rsp: "UserApplyListRsp", w: i.Medium }, group_self_apply_list: { cmd: "/im/usermail/group_apply_list", req: "FriendListReq", rsp: "UserApplyListRsp", w: i.Medium, ext: { isGroup: true } }, p_group_create: { cmd: "/im/push_create_group", rsp: "PushCreateGroup" }, p_group_invite: { cmd: "/im/push_group_invite", rsp: "PushGroupInvite" }, p_group_destroy: { cmd: "/im/push_group_destroy", rsp: "PushModifyGroupData" }, p_group_owner_transfer: { cmd: "/im/push_group_owner_transfer", rsp: "PushGroupOwnerTransfer" }, p_group_modify_attr: { cmd: "/im/push_modify_group_attribute", rsp: "PushModifyGroupAttribute" }, p_group_modify_data: { cmd: "/im/push_modify_group_data", rsp: "PushModifyGroupData" }, p_group_member_change: { cmd: "/im/push_group_member_change", rsp: "PushGroupMemberChange" }, p_group_member_kickout: { cmd: "/im/push_group_member_kickout", rsp: "PushGroupOwnerTransfer" }, p_group_apply: { cmd: "/im/push_apply_group_state_change", rsp: "PushApplyGroupStateChange" }, p_group_enter_apply: { cmd: "/im/push_apply_user_state_change", rsp: "PushApplyUserStateChange" }, call_create: { cmd: "/im/call/create", req: "CallReq", rsp: "CallRsp", w: i.High }, call_cancel: { cmd: "/im/call/cancel", req: "CallReq", rsp: "CallCancelRsp", w: i.High }, call_accept: { cmd: "/im/call/accept", req: "StUserInfo", rsp: "CallQuitRsp", w: i.High }, call_refuse: { cmd: "/im/call/refuse", req: "CallQuitReq", rsp: "CallQuitRsp", w: i.High }, call_ack: { cmd: "/im/call/ack", req: "CallQuitReq", rsp: "CommonCodeMessage", w: i.High }, call_info: { cmd: "/im/call/call_info", req: "CallQuitReq", rsp: "CallInfoRsp", w: i.Medium }, call_invite: { cmd: "/im/call/invite", req: "CallInviteReq", rsp: "CallInviteRsp", w: i.High }, call_quit: { cmd: "/im/call/quit", req: "CallQuitReq", rsp: "CallQuitRsp", w: i.High }, call_enter: { cmd: "/im/call/enter", req: "StUserInfo", rsp: "CallEnterRsp", w: i.High }, call_destroy: { cmd: "/im/call/destroy", req: "CallQuitReq", rsp: "CallQuitRsp", w: i.High }, call_list: { cmd: "/im/usermail/call_list", req: "FriendListReq", rsp: "CallListRsp", w: i.Medium }, p_call_invite: { cmd: "/im/push_call_invite", rsp: "PushCallInvited" }, p_call_cancel: { cmd: "/im/push_call_cancel", rsp: "PushCallCancel" }, p_call_accept: { cmd: "/im/push_call_accept", rsp: "PushCallAccept" }, p_call_refuse: { cmd: "/im/push_call_refuse", rsp: "PushCallRefuse" }, p_call_quit: { cmd: "/im/push_call_quit", rsp: "PushCallQuit" }, p_call_destroy: { cmd: "/im/push_call_destroy", rsp: "PushCallDestroy" }, p_call_inviting: { cmd: "/im/push_on_call_invite", rsp: "PushOnCallInvited" }, p_call_ack: { cmd: "/im/push_call_ack", rsp: "PushCallAck" }, p_call_enter: { cmd: "/im/push_call_enter", rsp: "PushCallEnter" }, p_call_ack_timeout: { cmd: "/im/push_call_ack_timeout", rsp: "PushCallAckTimeout" }, friend_add: { cmd: "/im/usermail/friend_add", req: "FriendAddReq", rsp: "FriendAddRsp", w: i.High }, friend_apply: { cmd: "/im/usermail/friend_apply", req: "FriendAddReq", rsp: "FriendApplyRsp", w: i.High }, friend_delete: { cmd: "/im/usermail/friend_delete", req: "FriendDeletedReq", rsp: "FriendAddRsp", w: i.High }, friend_check: { cmd: "/im/usermail/friend_check", req: "FriendDeletedReq", rsp: "FriendCheckedRsp", w: i.High }, friend_modify_remark: { cmd: "/im/usermail/modify_friend_remark", req: "StGroupAttribute", rsp: "ConvDelRsp", w: i.High }, friend_modify_attr: { cmd: "/im/usermail/modify_friend_attribute", req: "ModifyFriendAttributeReq", rsp: "ModifyFriendAttributeRsp", w: i.High }, friend_accept: { cmd: "/im/usermail/friend_accept", req: "FriendAcceptReq", rsp: "FriendAcceptRsp", w: i.High }, friend_refuse: { cmd: "/im/usermail/friend_refuse", req: "CallQuitReq", rsp: "ConvDelRsp", w: i.High }, friend_list: { cmd: "/im/usermail/friend_list", req: "FriendListReq", rsp: "FriendListRsp", w: i.Medium }, friend_apply_list: { cmd: "/im/usermail/friend_apply_list", req: "FriendListReq", rsp: "FriendApplyListRsp", w: i.Medium }, p_friend_add: { cmd: "/im/push_friend_add", rsp: "PushFriendAdd" }, p_friend_delete: { cmd: "/im/push_friend_delete", rsp: "PushFriendRefuse" }, p_friend_delete_all: { cmd: "/im/push_friend_delete_all", rsp: "ConvDelRsp" }, p_friend_apply: { cmd: "/im/push_friend_apply", rsp: "PushFriendApply" }, p_friend_accept: { cmd: "/im/push_friend_accept", rsp: "PushFriendAccept" }, p_friend_refuse: { cmd: "/im/push_friend_refuse", rsp: "PushFriendRefuse" }, blacklist_add: { cmd: "/im/usermail/blacklist_add", req: "FriendDeletedReq", rsp: "BlacklistAddRsp", w: i.Medium }, blacklist_del: { cmd: "/im/usermail/blacklist_delete", req: "FriendDeletedReq", rsp: "BlacklistDeleteRsp", w: i.Medium }, blacklist_fetch: { cmd: "/im/usermail/blacklist", req: "FriendListReq", rsp: "BlacklistRsp", w: i.Medium } };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        }), r.d(t, "b", function() {
          return n;
        });
        var n, i = { MAX_ID_SIZE: 1024, MAX_NAME_SIZE: 2048, MAX_MESSAGE_SIZE: 49152, MAX_QUERY_PAGE_COUNT: 100, MAX_SEARCH_PAGE_COUNT: 30, MESSAGE_SEQ_MULTIPLIER: 100, get_user_attribute_qps: 5, get_user_attribute_interval: 3e4, hbTimeoutMaxCount: 3, needReloginCodeList: [50107, 103015, 103021], convKeys: ["conversationID", "conversationName", "conversationAlias", "conversationAvatarUrl", "type", "unreadMessageCount", "notificationStatus", "orderKey", "isPinned", "draft", "mentionedInfoList", "lastMessage", "mutedExpiredTime", "isDisabled"] };
        (r = n = n || {}).ILogined = "logined", r.ILogout = "logout", r.IJoinedGroup = "joinedGroup", r.ILeftGroup = "leftGroup", r.ISyncGroups = "syncGroups", r.ISyncGroupInfo = "syncGroupInfo", r.IUnreadMsgCount = "unreadMsgCount", r.IConnectedRoom = "connectedRoom", r.IConnected = "connected", r.IDisConnected = "disConnected", r.INetworkChange = "networkChange", r.IIdleFetchConvMsg = "idleFetchConvMsg", r.ITriggerHB = "triggerHB", r.IQPSSend = "QPSSend", r.IMuteGroup = "muteGroup", r.Error = "error", r.ConnState = "connectionStateChanged", r.TokenExpire = "tokenWillExpire", r.UserInfoUpdated = "userInfoUpdated", r.UseRuleUpdated = "userRuleUpdated", r.ConvChanged = "conversationChanged", r.ConvUnreadMsgCount = "conversationTotalUnreadMessageCountUpdated", r.ConvMsgReceipt = "conversationMessageReceiptChanged", r.ConvAllDeleted = "conversationsAllDeleted", r.MsgReceipt = "messageReceiptChanged", r.MsgRevoke = "messageRevokeReceived", r.MsgReactions = "messageReactionsChanged", r.MsgDeleted = "messageDeleted", r.MsgSentStatus = "messageSentStatusChanged", r.RecvPeerMsg = "receivePeerMessage", r.RecvGroupMsg = "receiveGroupMessage", r.RecvRoomMsg = "receiveRoomMessage", r.BroadcastMsg = "broadcastMessageReceived", r.RoomState = "roomStateChanged", r.RoomMemberJoined = "roomMemberJoined", r.RoomMemberLeft = "roomMemberLeft", r.RoomAttr = "roomAttributesUpdated", r.RoomAttrBatch = "roomAttributesBatchUpdated", r.RoomMemberAttr = "roomMemberAttributesUpdated", r.GroupState = "groupStateChanged", r.GroupName = "groupNameUpdated", r.GroupNotice = "groupNoticeUpdated", r.GroupAvatar = "groupAvatarUrlUpdated", r.GroupAttr = "groupAttributesUpdated", r.GroupMute = "groupMutedInfoUpdated", r.GroupMemberState = "groupMemberStateChanged", r.GroupMemberInfo = "groupMemberInfoUpdated", r.GroupVerifyInfo = "groupVerifyInfoUpdated", r.GroupAppList = "groupApplicationListChanged", r.GroupAppUpd = "groupApplicationUpdated", r.CallCreate = "callInvitationCreated", r.CallRecv = "callInvitationReceived", r.CallCancel = "callInvitationCancelled", r.CallTimeout = "callInvitationTimeout", r.CallEnd = "callInvitationEnded", r.CallUserState = "callUserStateChanged", r.BlacklistUpd = "blacklistChanged", r.FriendList = "friendListChanged", r.FriendInfo = "friendInfoUpdated", r.FriendAppList = "friendApplicationListChanged", r.FriendAppUpd = "friendApplicationUpdated";
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        });
        var n = { Log: "Log", DataReport: "DataReport", User: "User", Call: "Call", Conv: "Conversation", Group: "Group", MessageExtra: "MessageExtra", Member: "GroupMember", Message: "Message", Friend: "Friend", FriendApp: "FriendApp", Blacklist: "Blacklist", GroupApp: "GroupApp" };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n = { domain: r = ".cool" + ["b", "g", "h"][3 * Math.random() | 0] + "cloud.com", accesshub: "wss://accesshub-global" + r + "/accesshub", logreport: "wss://weblogger-wss" + r + "/zglog/web", detaillog: "https://detaillog-global" + r, fileproxy: "https://access-zfpxy-global" + r };
        function i(e2) {
          return { accesshub: "wss://accesshub" + (e2 = "-geo-" + e2 + n.domain) + "/accesshub", logreport: "wss://weblogger-wss" + e2 + "/zglog/web", detaillog: "https://detaillog" + e2, fileproxy: "https://access-zfpxy" + e2 };
        }
        var o = { 2: { relatives: [], host: i(2) }, 3: { relatives: [7], host: i(3) }, 4: { relatives: [7], host: i(4) }, 5: { relatives: [7], host: i(5) }, 6: { relatives: [7], host: i(6) }, 7: { relatives: [3, 4, 5, 6, 1], host: i(7) }, 1: { relatives: [7], host: n } };
      }, function(e, t, r) {
        "use strict";
        var n, i;
        r.d(t, "b", function() {
          return n;
        }), r.d(t, "a", function() {
          return i;
        }), (r = n = n || {}).Manager = "MGR", r.Connection = "Conn", r.Database = "DB", r.Strategy = "ST", r.User = "User", r.Conversation = "Conv", r.Room = "Room", r.Group = "Group", r.Call = "Call", r.Friend = "Friend", (t = i = i || {}).SCMD = "SCMD", t.PCMD = "PCMD", t.Create = "API.create", t.Destroy = "API.destroy", t.SetLogConfig = "API.setLogConfig", t.SetGeoFence = "API.setGeofencingConfig", t.UploadLog = "API.uploadLog", t.Login = "API.login", t.Logout = "API.logout", t.RenewToken = "API.renewToken", t.QueryUsersInfo = "API.queryUsersInfo", t.UpdateUserName = "API.updateUserName", t.UpdateUserAvatarUrl = "API.updateUserAvatarUrl", t.UpdateUserExtendedData = "API.updateUserExtendedData", t.UpdateUserOfflinePushRule = "API.updateUserOfflinePushRule", t.QuerySelfUserRule = "API.querySelfUserRule", t.QueryConv = "API.queryConversation", t.QueryConvList = "API.queryConversationList", t.QueryPinnedList = "API.queryConversationPinnedList", t.DeleteConv = "API.deleteConversation", t.DeleteAllConv = "API.deleteAllConversations", t.ClearUnreadCount = "API.clearConversationUnreadMessageCount", t.ClearAllUnreadCount = "API.clearConversationTotalUnreadMessageCount", t.DelAllConvMessages = "API.deleteAllConversationMessages", t.SetNotificationStatus = "API.setConversationNotificationStatus", t.UpdatePinnedState = "API.updateConversationPinnedState", t.SetConvDraft = "API.setConversationDraft", t.SendMessage = "API.sendMessage", t.SendMediaMessage = "API.sendMediaMessage", t.DeleteMessages = "API.deleteMessages", t.DeleteAllMessage = "API.deleteAllMessage", t.QueryHistoryMessage = "API.queryHistoryMessage", t.InsertMessageToLocalDB = "API.insertMessageToLocalDB", t.UpdateMessageLocalExtendedData = "API.updateMessageLocalExtendedData", t.RevokeMessage = "API.revokeMessage", t.QueryCombineMessage = "API.queryCombineMessageDetail", t.SendReceiptRead = "API.sendConversationMessageReceiptRead", t.SendMessageReceiptsRead = "API.sendMessageReceiptsRead", t.QueryReceiptsInfo = "API.queryMessageReceiptsInfo", t.QueryReceiptReadMemberList = "API.queryGroupMessageReceiptReadMemberList", t.QueryReceiptUnreadMemberList = "API.queryGroupMessageReceiptUnreadMemberList", t.AddReaction = "API.addMessageReaction", t.DeleteReaction = "API.deleteMessageReaction", t.QueryReaction = "API.queryMessageReactionUserList", t.CreateRoom = "API.createRoom", t.EnterRoom = "API.enterRoom", t.JoinRoom = "API.joinRoom", t.LeaveRoom = "API.leaveRoom", t.LeaveAllRoom = "API.leaveAllRoom", t.QueryRoomMemberList = "API.queryRoomMemberList", t.QueryRoomMembers = "API.queryRoomMembers", t.QueryRoomOnlineMemberCount = "API.queryRoomOnlineMemberCount", t.SetRoomAttributes = "API.setRoomAttributes", t.DeleteRoomAttributes = "API.deleteRoomAttributes", t.QueryRoomAllAttributes = "API.queryRoomAllAttributes", t.BeginRoomAttributesBatchOperation = "API.beginRoomAttributesBatchOperation", t.EndRoomAttributesBatchOperation = "API.endRoomAttributesBatchOperation", t.SetRoomMembersAttributes = "API.setRoomMembersAttributes", t.QueryRoomMembersAttributes = "API.queryRoomMembersAttributes", t.QueryRoomMemberAttributesList = "API.queryRoomMemberAttributesList", t.CreateGroup = "API.createGroup", t.JoinGroup = "API.joinGroup", t.LeaveGroup = "API.leaveGroup", t.DismissGroup = "API.dismissGroup", t.QueryGroupList = "API.queryGroupList", t.UpdateGroupInfo = "API.updateGroupInfo", t.MuteGroup = "API.muteGroup", t.QueryGroupInfo = "API.queryGroupInfo", t.SetGroupAttributes = "API.setGroupAttributes", t.DeleteGroupAttributes = "API.deleteGroupAttributes", t.QueryGroupAttributes = "API.queryGroupAttributes", t.TransferGroupOwner = "API.transferGroupOwner", t.InviteUsersIntoGroup = "API.inviteUsersIntoGroup", t.KickGroupMembers = "API.kickGroupMembers", t.QueryGroupMemberList = "API.queryGroupMemberList", t.QueryGroupMemberCount = "API.queryGroupMemberCount", t.MuteGroupMembers = "API.muteGroupMembers", t.QueryGroupMemberMutedList = "API.queryGroupMemberMutedList", t.SetGroupMemberNickname = "API.setGroupMemberNickname", t.SetGroupMemberRole = "API.setGroupMemberRole", t.QueryGroupMemberInfo = "API.queryGroupMemberInfo", t.UpdateGroupVerifyMode = "API.updateGroupVerifyMode", t.SendGroupJoinApp = "API.sendGroupJoinApplication", t.AcceptGroupJoinApp = "API.acceptGroupJoinApplication", t.RejectGroupJoinApp = "API.rejectGroupJoinApplication", t.SendGroupInviteApp = "API.sendGroupInviteApplications", t.AcceptGroupInviteApp = "API.acceptGroupInviteApplication", t.RejectGroupInviteApp = "API.rejectGroupInviteApplication", t.QueryGroupApp = "API.queryGroupApplicationList", t.CallInvite = "API.callInvite", t.CallCancel = "API.callCancel", t.CallAccept = "API.callAccept", t.CallReject = "API.callReject", t.CallQuit = "API.callQuit", t.CallJoin = "API.callJoin", t.CallEnd = "API.callEnd", t.CallingInvite = "API.callingInvite", t.QueryCallList = "API.queryCallInvitationList", t.AddFriend = "API.addFriend", t.SendFriendApp = "API.sendFriendApplication", t.DeleteFriends = "API.deleteFriends", t.CheckFriends = "API.checkFriendsRelation", t.UpdateFriendAlias = "API.updateFriendAlias", t.UpdateFriendAttr = "API.updateFriendAttributes", t.AcceptFriendApp = "API.acceptFriendApplication", t.RejectFriendApp = "API.rejectFriendApplication", t.QueryFriendsInfo = "API.queryFriendsInfo", t.QueryFriendList = "API.queryFriendList", t.QueryFriendAppList = "API.queryFriendApplicationList", t.AddUserToBlacklist = "API.addUsersToBlacklist", t.RemoveUsersFromBlacklist = "API.removeUsersFromBlacklist", t.CheckUserIsInBlacklist = "API.checkUserIsInBlacklist", t.QueryBlacklist = "API.queryBlacklist", t.SearchConvs = "API.searchLocalConversations", t.SearchGlobalMessages = "API.searchGlobalLocalMessages", t.SearchMessages = "API.searchLocalMessages", t.SearchGroups = "API.searchLocalGroups", t.SearchGroupMembers = "API.searchLocalGroupMembers", t.SearchFriends = "API.searchLocalFriends";
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (6:29)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| import { ZIMLogTag } from '../zentity';\n| \n> export class ZIMFileStoreBase<T extends Record<string, any>> {\n|     private logger = ZIMManager.getInstance().logger;\n|     private logTags: string;");
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (38:26)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| import { ZIMFileStoreBase } from './ZIMFileStoreBase';\n| \n> export class ZIMStoreImpl implements ZIMStoreBase {\n|     private dir = '';\n|     private userID = '';");
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "ZIMStoreImpl", function() {
          return p;
        });
        t = r(79);
        var n = r.n(t), i = r(2), o = r(1), s = r(14), a = r(0), u = function() {
          return (u = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, c = function(e2, t2, r2, n2) {
          return new (r2 = r2 || Promise)(function(i2, o2) {
            function s2(e3) {
              try {
                u2(n2.next(e3));
              } catch (e4) {
                o2(e4);
              }
            }
            function a2(e3) {
              try {
                u2(n2.throw(e3));
              } catch (e4) {
                o2(e4);
              }
            }
            function u2(e3) {
              var t3;
              e3.done ? i2(e3.value) : ((t3 = e3.value) instanceof r2 ? t3 : new r2(function(e4) {
                e4(t3);
              })).then(s2, a2);
            }
            u2((n2 = n2.apply(e2, t2 || [])).next());
          });
        }, l = function(e2, t2) {
          var r2, n2, i2, o2 = { label: 0, sent: function() {
            if (1 & i2[0])
              throw i2[1];
            return i2[1];
          }, trys: [], ops: [] }, s2 = { next: a2(0), throw: a2(1), return: a2(2) };
          return "function" == typeof Symbol && (s2[Symbol.iterator] = function() {
            return this;
          }), s2;
          function a2(s3) {
            return function(a3) {
              var u2 = [s3, a3];
              if (r2)
                throw new TypeError("Generator is already executing.");
              for (; o2; )
                try {
                  if (r2 = 1, n2 && (i2 = 2 & u2[0] ? n2.return : u2[0] ? n2.throw || ((i2 = n2.return) && i2.call(n2), 0) : n2.next) && !(i2 = i2.call(n2, u2[1])).done)
                    return i2;
                  switch (n2 = 0, (u2 = i2 ? [2 & u2[0], i2.value] : u2)[0]) {
                    case 0:
                    case 1:
                      i2 = u2;
                      break;
                    case 4:
                      return o2.label++, { value: u2[1], done: false };
                    case 5:
                      o2.label++, n2 = u2[1], u2 = [0];
                      continue;
                    case 7:
                      u2 = o2.ops.pop(), o2.trys.pop();
                      continue;
                    default:
                      if (!(i2 = 0 < (i2 = o2.trys).length && i2[i2.length - 1]) && (6 === u2[0] || 2 === u2[0])) {
                        o2 = 0;
                        continue;
                      }
                      if (3 === u2[0] && (!i2 || u2[1] > i2[0] && u2[1] < i2[3])) {
                        o2.label = u2[1];
                        break;
                      }
                      if (6 === u2[0] && o2.label < i2[1]) {
                        o2.label = i2[1], i2 = u2;
                        break;
                      }
                      if (i2 && o2.label < i2[2]) {
                        o2.label = i2[2], o2.ops.push(u2);
                        break;
                      }
                      i2[2] && o2.ops.pop(), o2.trys.pop();
                      continue;
                  }
                  u2 = t2.call(e2, o2);
                } catch (a4) {
                  u2 = [6, a4], n2 = 0;
                } finally {
                  r2 = i2 = 0;
                }
              if (5 & u2[0])
                throw u2[1];
              return { value: u2[0] ? u2[1] : void 0, done: true };
            };
          }
        }, d = a.Y.Database, p = (h.prototype.destroy = function() {
          this.storeMap.forEach(function(e2) {
            return e2.close();
          }), this.storeMap.clear(), this.unloadDB();
        }, h.prototype.clearDB = function(e2) {
          var t2 = this;
          this.unloadDB(), i.a.getInstance().dataReport.clearDB(), this.createStaticDB().then(function(r2) {
            r2.transaction([a.s.Log], "readwrite").objectStore(a.s.Log).clear(), r2.transaction([a.s.DataReport], "readwrite").objectStore(a.s.DataReport).clear(), r2.transaction([a.s.User], "readwrite").objectStore(a.s.User).put(e2), t2.innerDeleteAllByOwnerID(r2, a.s.Call, t2.userID), t2.innerDeleteAllByOwnerID(r2, a.s.Conv, t2.userID), t2.innerDeleteAllByOwnerID(r2, a.s.Group, t2.userID), t2.innerDeleteAllByOwnerID(r2, a.s.MessageExtra, t2.userID);
          }), this.createGlobalDB().then(function(e3) {
            e3.transaction([a.s.Member], "readwrite").objectStore(a.s.Member).clear(), e3.transaction([a.s.Message], "readwrite").objectStore(a.s.Message).clear(), e3.transaction([a.s.Friend], "readwrite").objectStore(a.s.Friend).clear(), e3.transaction([a.s.FriendApp], "readwrite").objectStore(a.s.FriendApp).clear(), e3.transaction([a.s.Blacklist], "readwrite").objectStore(a.s.Blacklist).clear(), e3.transaction([a.s.GroupApp], "readwrite").objectStore(a.s.GroupApp).clear();
          });
        }, h.prototype.loadDB = function(e2) {
          var t2 = this, r2 = Date.now();
          this.createGlobalDB().then(function(e3) {
            return t2.innerGetAll(e3, a.s.Member, "loadGDB");
          }).then(function(n2) {
            n2.forEach(function(e3) {
              t2.globalMemberMap.set(e3.id, e3), t2.syncMemberToUser(e3);
            }), t2.reportLog.memberTime = Date.now() - r2, t2.handleMemberCallbackList(), setTimeout(function() {
              return t2.copyOldDB2GlobalDB();
            }, 1e3), e2();
          });
        }, h.prototype.unloadDB = function() {
          this.isGlobalMsg = false, this.isGlobalMember = false, this.globalMsgMap.clear(), this.globalMemberMap.clear(), this.globalCbMsgMap.clear(), this.searchMsgByConvCallbackList.length = 0, this.searchMsgCallbackList.length = 0, this.searchGroupsCallbackList.length = 0, this.searchMembersCallbackList.length = 0, this.getMembersCallbackList.length = 0;
        }, h.prototype.searchConversations = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            var n2 = /* @__PURE__ */ new Date();
            t2.innerSearchMessagesByConv(true, e2, function(i2) {
              var o2 = i2.length, s2 = Math.min(10, e2.conversationMessageCount), u2 = (i2.forEach(function(e3) {
                e3.messageList.sort(function(e4, t3) {
                  return t3.timestamp - e4.timestamp;
                }), e3.totalMessageCount > s2 && (e3.messageList = e3.messageList.slice(0, s2));
              }), i2.sort(function(e3, t3) {
                return t3.messageList[0].timestamp - e3.messageList[0].timestamp;
              }), e2.nextFlag), c2 = u2 ? i2.findIndex(function(e3) {
                return e3.messageList[0].timestamp <= u2;
              }) + 1 : 0, l2 = c2 + Math.min(20, e2.totalConversationCount), p2 = i2[l2] ? i2[l2 - 1].messageList[0].timestamp : void 0, h2 = (i2 = i2.slice(c2, l2), t2.globalMsgMap.size);
              h2 = { time: n2, dbCount: h2, start: c2, end: l2, total: o2, count: i2.length, config: e2 };
              t2.logger.info(d, a.X.SearchConvs, h2), r2({ conversationSearchInfoList: i2, nextFlag: p2 });
            });
          });
        }, h.prototype.searchGlobalMessages = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            t2.innerSearchMessages(true, "", 0, e2, function(e3, n2) {
              t2.logger.info(d, a.X.SearchGlobalMessages, n2), r2(e3);
            });
          });
        }, h.prototype.searchMessages = function(e2, t2, r2) {
          var n2 = this;
          return new Promise(function(i2) {
            n2.innerSearchMessages(true, e2, t2, r2, function(r3, o2) {
              n2.logger.info(d, a.X.SearchMessages, o2), i2({ conversationID: e2, conversationType: t2, messageList: r3.messageList, nextMessage: r3.nextMessage });
            });
          });
        }, h.prototype.searchGroups = function(e2, t2, r2, n2, i2) {
          var o2, s2 = this;
          if (!t2 && !r2)
            return n2([], 0);
          i2 || this.isGlobalMember ? (o2 = [], this.globalMemberMap.forEach(function(n3) {
            var i3 = (null == (i3 = s2.engineConfig.dbUserMap.get(n3.userID)) ? void 0 : i3.userName) || "";
            (t2 && !r2 && s2.isSomeKeys(i3, e2) || r2 && !t2 && s2.isSomeKeys(n3.memberNickname, e2) || s2.isSomeKeys(i3, e2) && s2.isSomeKeys(n3.memberNickname, e2)) && o2.push(n3);
          }), n2(o2, this.globalMemberMap.size)) : this.searchGroupsCallbackList.push({ keywords: e2, isName: t2, isNick: r2, resolve: n2 });
        }, h.prototype.searchGroupMembers = function(e2, t2) {
          var r2 = this;
          return new Promise(function(n2) {
            var i2 = r2.filterKeys(t2.keywords);
            if (!i2 || !i2.length)
              return n2({ groupID: e2, nextFlag: 0, userList: [] });
            var s2 = /* @__PURE__ */ new Date(), u2 = t2.isAlsoMatchGroupMemberNickname;
            r2.innerSearchGroupMembers(true, e2, i2, u2, function(i3) {
              i3.sort(function(e3, t3) {
                return e3.seq - t3.seq;
              });
              var u3 = i3.length, c2 = t2.nextFlag, l2 = (null == (l2 = i3[i3.length - 1]) ? void 0 : l2.seq) || 0, p2 = 0, h2 = (l2 = (0 < c2 && c2 < l2 ? p2 = i3.findIndex(function(e3) {
                return e3.seq == c2;
              }) : l2 <= c2 && l2 && (p2 = i3.length - 1), p2 + Math.min(a.m.MAX_SEARCH_PAGE_COUNT, t2.count)), (null == (h2 = i3[l2]) ? void 0 : h2.seq) || 0), f = (i3 = i3.slice(p2, l2).map(function(e3) {
                return Object(o.t)(e3, r2.engineConfig);
              }), r2.globalMemberMap.size);
              f = { time: s2, dbCount: f, start: p2, end: l2, total: u3, count: i3.length, nextFlag: h2, groupID: e2, config: t2 };
              r2.logger.info(d, a.X.SearchGroupMembers, f), n2({ groupID: e2, nextFlag: h2, userList: i3 });
            });
          });
        }, h.prototype.getFileInfo = function(e2) {
          return new Promise(function(t2, r2) {
            try {
              var i2 = e2.size, o2 = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice, u2 = 1048576, c2 = Math.ceil(i2 / u2), l2 = new n.a.ArrayBuffer(), d2 = new FileReader(), p2 = 0, h2 = (d2.onload = function() {
                var n2 = d2.result || d2.content;
                n2 ? (l2.append(n2), ++p2 < c2 ? h2() : t2({ md5: l2.end(), name: e2.name, size: i2 })) : r2(Object(s.a)(a.t.MessageModuleFileSizeInvalid));
              }, d2.onerror = function() {
                r2(Object(s.a)(a.t.MessageModuleFileNotExist));
              }, function() {
                var t3 = p2 * u2, r3 = Math.min(t3 + u2, i2);
                t3 = o2.call(e2, t3, r3);
                d2.readAsArrayBuffer(t3);
              });
              h2();
            } catch (e3) {
              r2(e3);
            }
          });
        }, h.prototype.uploadFile = function(e2, t2, r2) {
          return new Promise(function(n2, i2) {
            var o2 = new XMLHttpRequest(), s2 = (o2.onreadystatechange = function() {
              if (4 == o2.readyState) {
                if (200 != o2.status)
                  return i2({ code: 6000212, message: o2.responseText });
                n2();
              }
            }, o2.upload.addEventListener("progress", r2), o2.onerror = function() {
              return i2({ code: 6000212, message: "upload file onerror." });
            }, o2.ontimeout = function() {
              return i2({ code: 6000104, message: "upload file ontimeout." });
            }, o2.open(e2.method, e2.url, true), o2.timeout = 6e5, e2.headers);
            s2 && (delete s2["User-Agent"], delete s2["user-agent"], Object.keys(s2).forEach(function(e3) {
              return o2.setRequestHeader(e3, s2[e3]);
            })), o2.send(t2);
          });
        }, h.prototype.downloadFile = function(e2, t2) {
          return new Promise(function(r2, n2) {
            var i2 = new XMLHttpRequest();
            i2.responseType = "arraybuffer", i2.open("GET", e2, true), i2.onerror = function() {
              return n2({ code: 6000212, message: t2 });
            }, i2.onload = function() {
              i2.response && 200 == i2.status ? r2(new Uint8Array(i2.response)) : n2({ code: 6000212, message: t2 });
            }, i2.send();
          });
        }, h.prototype.setUserID = function(e2) {
          this.userID = e2;
        }, h.prototype.setUser = function(e2) {
          var t2 = this;
          this.createStaticDB().then(function(r2) {
            return t2.batchAdd(r2, a.s.User, [e2]);
          });
        }, h.prototype.getUserList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetAll(t2, a.s.User);
          });
        }, h.prototype.addUserList = function(e2) {
          var t2 = this;
          this.createStaticDB().then(function(r2) {
            return t2.batchAdd(r2, a.s.User, e2);
          });
        }, h.prototype.addConversationList = function(e2, t2) {
          var r2 = this, n2 = this.userID, i2 = { _action_: t2 };
          e2.forEach(function(t3) {
            t3.id || (t3.id = r2.appendID(t3.type + t3.conversationID)), t3.ownerID || (t3.ownerID = n2), t3.state = t3.state || a.q.Normal, e2.length < 11 && (i2[t3.conversationID] = [t3.state + "," + t3.unreadMessageCount + "," + t3.maxSeq + "," + t3.maxOrderKey, t3.msgSeq + "," + t3.readMsgSeq + "," + t3.sendMsgCount + "," + t3.deletedMsgCount].join(";"));
          }), this.createStaticDB().then(function(t3) {
            return r2.batchAdd(t3, a.s.Conv, e2, i2);
          });
        }, h.prototype.getConversationList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, a.s.Conv);
          });
        }, h.prototype.addGroupList = function(e2) {
          var t2 = this, r2 = this.userID, n2 = {};
          e2.forEach(function(i2) {
            i2.id || (i2.id = t2.appendID(i2.groupID)), i2.ownerID || (i2.ownerID = r2), e2.length < 11 && (n2[i2.groupID] = [i2.dataSeq, i2.attributeSeq, i2.memberSeq].join());
          }), this.createStaticDB().then(function(r3) {
            return t2.batchAdd(r3, a.s.Group, e2, n2);
          });
        }, h.prototype.deleteGroupList = function(e2) {
          var t2 = this, r2 = (this.isGlobalMember && this.globalMemberMap.forEach(function(r3) {
            -1 != e2.indexOf(r3.ownerID) && t2.globalMemberMap.delete(r3.id);
          }), e2.map(function(e3) {
            return t2.createGlobalDB().then(function(r3) {
              return t2.innerDeleteAllByOwnerID(r3, a.s.Member, e3);
            }), t2.appendID(e3);
          }));
          this.createStaticDB().then(function(e3) {
            return t2.batchDelete(e3, a.s.Group, r2);
          });
        }, h.prototype.getGroupList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, a.s.Group);
          });
        }, h.prototype.addGroupApplyList = function(e2) {
          var t2 = this, r2 = e2.map(function(e3) {
            return u(u({}, e3), { id: e3.type + "_" + e3.groupInfo.groupID + "_" + e3.applyUser.userID, applyUser: e3.applyUser.userID });
          });
          this.createGlobalDB().then(function(e3) {
            return t2.batchAdd(e3, a.s.GroupApp, r2);
          });
        }, h.prototype.getGroupApplyList = function() {
          var e2 = this;
          return this.createGlobalDB().then(function(t2) {
            return e2.innerGetAll(t2, a.s.GroupApp);
          });
        }, h.prototype.addGroupMemberList = function(e2, t2) {
          var r2 = this, n2 = { _groupID_: e2 };
          t2 = t2.filter(function(i2) {
            var o2 = r2.globalMemberMap.get(i2.id);
            return !(r2.isGlobalMember && o2 && i2.seq < o2.seq || (i2.id || (i2.id = e2 + "_" + i2.userID), i2.ownerID || (i2.ownerID = e2), t2.length < 11 && (n2[i2.userID] = i2.seq), r2.isGlobalMember && (r2.globalMemberMap.set(i2.id, i2), r2.syncMemberToUser(i2)), 0));
          }), this.createGlobalDB().then(function(e3) {
            return r2.batchAdd(e3, a.s.Member, t2, n2);
          });
        }, h.prototype.getGroupMemberList = function(e2) {
          var t2, r2 = this;
          return this.isGlobalMember ? (t2 = [], this.globalMemberMap.forEach(function(r3) {
            r3.ownerID == e2 && t2.push(r3);
          }), Promise.resolve(t2)) : new Promise(function(t3) {
            return r2.getMembersCallbackList.push({ groupID: e2, resolve: t3 });
          });
        }, h.prototype.addMessageList = function(e2, t2, r2, n2, i2) {
          var o2 = this, s2 = t2 == a.r.Room, u2 = !s2 && this.isGlobalMsg, c2 = [], l2 = (r2.forEach(function(e3) {
            e3.id = t2 + "_" + e3.localMessageID + "_" + e3.messageID, u2 && !o2.globalMsgMap.has(e3.id) && c2.push(e3), u2 && o2.globalMsgMap.set(e3.id, e3), e3.type == a.hb.Combine && o2.globalCbMsgMap.set(e3.combineID, e3);
          }), i2 && i2(c2), n2 ? r2.filter(function(e3) {
            return !e3.isUserInserted && e3.direction == a.ab.Send && e3.sentStatus == a.fb.Success;
          }).map(function(e3) {
            return e3 = t2 + "_" + e3.localMessageID + "_" + e3.localMessageID, u2 && o2.globalMsgMap.delete(e3), e3;
          }) : null);
          return (s2 ? this.createDynamicDB(e2, t2, 2) : this.createGlobalDB()).then(function(i3) {
            return new Promise(function(s3) {
              n2 ? o2.batchDelete(i3, a.s.Message, l2, function() {
                o2.batchAdd(i3, a.s.Message, r2, { convID: e2, type: t2 }, s3);
              }) : o2.batchAdd(i3, a.s.Message, r2, { convID: e2, type: t2 }, s3);
            });
          });
        }, h.prototype.deleteAllMessage = function(e2, t2) {
          var r2 = this;
          this.isGlobalMsg && (this.globalMsgMap.forEach(function(n2) {
            n2.conversationID == e2 && n2.conversationType == t2 && r2.globalMsgMap.delete(n2.id);
          }), this.globalCbMsgMap.forEach(function(n2) {
            n2.conversationID == e2 && n2.conversationType == t2 && r2.globalCbMsgMap.delete(n2.combineID);
          })), this.createGlobalDB().then(function(n2) {
            return r2.innerDeleteAllByOwnerID(n2, a.s.Message, [t2, e2]);
          });
        }, h.prototype.deleteMessageList = function(e2, t2, r2, n2) {
          var i2 = this, o2 = r2.map(function(e3) {
            var r3 = n2 ? t2 + "_" + e3.localMessageID + "_" + e3.messageID : t2 + "_" + e3.localMessageID + "_" + e3.localMessageID;
            return i2.isGlobalMsg && (i2.globalMsgMap.delete(r3), e3.type == a.hb.Combine && i2.globalCbMsgMap.delete(e3.combineID)), r3;
          });
          return (t2 == a.r.Room ? this.createDynamicDB(e2, t2, 2) : this.createGlobalDB()).then(function(r3) {
            return new Promise(function(s2) {
              i2.batchDelete(r3, a.s.Message, o2, function() {
                if (!n2)
                  return s2(void 0);
                var o3;
                if (i2.isGlobalMsg)
                  return o3 = { orderKey: 0 }, i2.globalMsgMap.forEach(function(r4) {
                    r4.conversationID == e2 && r4.conversationType == t2 && r4.orderKey > o3.orderKey && (o3 = r4);
                  }), s2(o3.messageID ? o3 : void 0);
                var u2 = i2.seq++, c2 = /* @__PURE__ */ new Date(), l2 = r3.transaction([a.s.Message], "readonly").objectStore(a.s.Message).index("ownerID").getAll([t2, e2]);
                l2.onsuccess = function() {
                  var r4 = l2.result || [];
                  r4.sort(function(e3, t3) {
                    return t3.orderKey - e3.orderKey;
                  }), i2.logger.info(d, "getLastMsg", { seq: u2, time: c2, convID: e2, type: t2, msg: r4[0] }), s2(r4[0]);
                }, l2.onerror = function(r4) {
                  r4 = r4.target && r4.target.error && r4.target.error.message, i2.logger.info(d, "getLastMsg", { seq: u2, time: c2, convID: e2, type: t2, onerror: r4 }), s2(void 0);
                };
              });
            });
          });
        }, h.prototype.getDeleteMessageCount = function(e2, t2, r2, n2) {
          var i2;
          this.isGlobalMsg ? (i2 = 0, this.globalMsgMap.forEach(function(n3) {
            n3.conversationID == e2 && n3.conversationType == t2 && n3.direction == a.ab.Receive && -1 != r2.indexOf(n3.conversationSeq) && i2++;
          }), n2(i2)) : this.getDelMsgCountCallbackList.push({ convID: e2, type: t2, delSeqs: r2, resolve: n2 });
        }, h.prototype.deleteAllMessageFromRemote = function(e2, t2, r2, n2, i2) {
          var o2, s2, u2 = this;
          this.isGlobalMsg ? (o2 = 0, s2 = [], this.globalMsgMap.forEach(function(i3) {
            if (i3.conversationID == e2 && i3.conversationType == t2) {
              if (i3.sentStatus == a.fb.Success && !i3.isUserInserted && (i3.direction == a.ab.Receive && -1 != n2.indexOf(i3.conversationSeq) && o2++, i3.conversationSeq <= r2))
                return u2.globalMsgMap.delete(i3.id), void u2.globalCbMsgMap.delete(i3.combineID);
              s2.push(i3);
            }
          }), i2 && i2(o2), this.createGlobalDB().then(function(r3) {
            return u2.innerDeleteAllByOwnerID(r3, a.s.Message, [t2, e2], function() {
              return u2.batchAdd(r3, a.s.Message, s2);
            });
          })) : this.delAllMsgCallbackList.push({ convID: e2, type: t2, maxSeq: r2, delSeqs: n2, resolve: i2 });
        }, h.prototype.deleteMessageListFromRemote = function(e2, t2, r2, n2, i2) {
          var o2, s2, u2, c2, l2 = this;
          this.isGlobalMsg ? (s2 = { orderKey: o2 = 0 }, u2 = [], c2 = [], this.globalMsgMap.forEach(function(i3) {
            i3.conversationID == e2 && i3.conversationType == t2 && (i3.sentStatus != a.fb.Success || i3.isUserInserted || -1 == r2.indexOf(i3.conversationSeq) ? i3.orderKey > s2.orderKey && (s2 = i3) : (l2.globalMsgMap.delete(i3.id), i3.type == a.hb.Combine && l2.globalCbMsgMap.delete(i3.combineID), u2.push(i3.id), c2.push(i3), i3.direction == a.ab.Receive && i3.conversationSeq > n2 && o2++));
          }), i2(c2, o2, s2.messageID ? s2 : void 0), this.createGlobalDB().then(function(e3) {
            return l2.batchDelete(e3, a.s.Message, u2);
          })) : this.delMsgsCallbackList.push({ convID: e2, type: t2, seqs: r2, readSeq: n2, resolve: i2 });
        }, h.prototype.clearMessage = function(e2) {
          var t2, r2 = this;
          0 != e2 && (t2 = [], this.isGlobalMsg && this.globalMsgMap.forEach(function(n2) {
            e2 && n2.timestamp > e2 ? t2.push(n2) : r2.globalMsgMap.delete(n2.id);
          }), this.createGlobalDB().then(function(e3) {
            var n2 = e3.transaction([a.s.Message], "readwrite").objectStore(a.s.Message);
            n2.clear(), t2.forEach(function(e4) {
              return n2.put(e4);
            }), r2.logger.info(d, "clearMessage", "" + t2.length);
          }));
        }, h.prototype.clearRoomMessage = function(e2, t2) {
          var r2, n2 = this;
          e2.length && (t2 ? e2.forEach(function(e3) {
            n2.createDynamicDB(e3, a.r.Room, 2).then(function(e4) {
              e4.transaction([a.s.Message], "readwrite").objectStore(a.s.Message).clear();
            });
          }) : (r2 = e2.map(function(e3) {
            e3 = n2.appendID(a.r.Room + e3);
            var t3 = n2.dbNameMap.dynamic + e3, r3 = (indexedDB.deleteDatabase(t3), n2.storeMap.get(t3));
            return r3 && (r3.close(), n2.storeMap.delete(t3)), e3;
          }), this.createStaticDB().then(function(e3) {
            return n2.batchDelete(e3, a.s.Conv, r2);
          })), this.logger.info(d, this.action.delete, { clear: t2, roomIDs: e2 }));
        }, h.prototype.getMessageList = function(e2, t2) {
          var r2, n2 = this, i2 = t2.count, o2 = t2.reverse, s2 = t2.nextMessage, u2 = e2.conversationID, c2 = e2.type, l2 = c2 == a.r.Room;
          return !l2 && this.isGlobalMsg ? (r2 = [], this.globalMsgMap.forEach(function(e3) {
            e3.conversationID == u2 && e3.conversationType == c2 && r2.push(e3);
          }), t2 = { convID: u2, type: c2, reverse: o2, queryCount: i2, count: r2.length }, this.logger.info(d, "getMsgs", t2), Promise.resolve(r2)) : (l2 ? this.createDynamicDB(u2, c2, 2) : this.createGlobalDB()).then(function(t3) {
            return new Promise(function(r3) {
              var p2 = n2.seq++, h2 = /* @__PURE__ */ new Date(), f = s2 ? s2.orderKey : 0, g = 0, m = 0, _ = (o2 ? m = f ? f - 1 : e2.maxOrderKey || 0 : g = f + 1, { seq: p2, time: h2, convID: u2, type: c2, reverse: o2, queryCount: i2, count: 0, orderKey: f, min: g, max: m }), b = t3.transaction([a.s.Message], "readonly").objectStore(a.s.Message).index(l2 ? "orderKey" : "ownerID").getAll(l2 ? void 0 : [c2, u2]);
              b.onsuccess = function() {
                var e3 = b.result || [];
                _.count = e3.length, n2.logger.info(d, "getMsgs", _), r3(e3);
              }, b.onerror = function(e3) {
                _.onerror = e3.target && e3.target.error && e3.target.error.message, n2.logger.info(d, "getMsgs", _), r3([]);
              };
            });
          });
        }, h.prototype.getMessageListBySeqs = function(e2, t2, r2) {
          var n2 = this, i2 = /* @__PURE__ */ new Map();
          return this.isGlobalMsg ? (this.globalMsgMap.forEach(function(n3) {
            n3.conversationID != e2 || n3.conversationType != t2 || n3.sentStatus != a.fb.Success || n3.isUserInserted || -1 == r2.indexOf(n3.conversationSeq) || i2.set(n3.conversationSeq, n3);
          }), Promise.resolve(i2)) : this.createGlobalDB().then(function(o2) {
            return new Promise(function(s2) {
              var u2 = n2.seq++, c2 = /* @__PURE__ */ new Date(), l2 = o2.transaction([a.s.Message], "readonly").objectStore(a.s.Message).index("ownerID").getAll([t2, e2]);
              l2.onsuccess = function() {
                (l2.result || []).forEach(function(e3) {
                  e3.sentStatus != a.fb.Success || e3.isUserInserted || -1 == r2.indexOf(e3.conversationSeq) || i2.set(e3.conversationSeq, e3);
                });
                var o3 = { seq: u2, time: c2, convID: e2, type: t2, count: i2.size, seqs: r2 };
                n2.logger.info(d, "getMsgSeqs", o3), s2(i2);
              }, l2.onerror = function(i3) {
                i3 = i3.target && i3.target.error && i3.target.error.message, n2.logger.info(d, "getMsgSeqs", { seq: u2, time: c2, convID: e2, type: t2, seqs: r2, onerror: i3 }), s2(/* @__PURE__ */ new Map());
              };
            });
          });
        }, h.prototype.getMessageByCombineID = function(e2, t2, r2) {
          var n2 = this;
          return this.globalCbMsgMap.has(r2) ? Promise.resolve(this.globalCbMsgMap.get(r2)) : (t2 == a.r.Room ? this.createDynamicDB(e2, t2, 2) : this.createGlobalDB()).then(function(e3) {
            return new Promise(function(t3) {
              var i2 = n2.seq++, o2 = /* @__PURE__ */ new Date(), s2 = e3.transaction([a.s.Message], "readonly").objectStore(a.s.Message).index("combineID").get(r2);
              s2.onsuccess = function() {
                n2.logger.info(d, "getMsgCb", { seq: i2, time: o2, combineID: r2 });
                var e4 = s2.result;
                if (e4 && e4.sentStatus == a.fb.Success && !e4.isUserInserted && e4.combineID)
                  return n2.globalCbMsgMap.set(e4.combineID, e4), t3(e4);
                t3();
              }, s2.onerror = function(e4) {
                e4 = e4.target && e4.target.error && e4.target.error.message, n2.logger.info(d, "getMsgCb", { seq: i2, time: o2, combineID: r2, onerror: e4 }), t3();
              };
            });
          });
        }, h.prototype.checkMessageStatus = function(e2) {
          var t2;
          !e2.receiptStatus || e2.conversationType == a.r.Room || (t2 = this.globalMsgMap.get(e2.conversationType + "_" + e2.localMessageID + "_" + e2.messageID)) && e2.receiptStatus < t2.receiptStatus && (e2.receiptStatus = t2.receiptStatus);
        }, h.prototype.addMessageExtraList = function(e2, t2) {
          var r2 = this;
          this.createStaticDB().then(function(n2) {
            return r2.batchAdd(n2, a.s.MessageExtra, e2, { _action_: t2 });
          });
        }, h.prototype.getMessageExtraList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, a.s.MessageExtra);
          });
        }, h.prototype.deleteMessageExtraList = function(e2) {
          var t2 = this;
          this.createStaticDB().then(function(r2) {
            return t2.batchDelete(r2, a.s.MessageExtra, e2);
          });
        }, h.prototype.addCallList = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            e3.id || (e3.id = t2.appendID(e3.callID)), e3.ownerID || (e3.ownerID = t2.userID);
          }), this.createStaticDB().then(function(r2) {
            return t2.batchAdd(r2, a.s.Call, e2);
          });
        }, h.prototype.getCallList = function() {
          var e2 = this;
          return this.createStaticDB().then(function(t2) {
            return e2.innerGetListByOwnerID(t2, a.s.Call);
          });
        }, h.prototype.addFriendList = function(e2) {
          var t2 = this;
          this.createGlobalDB().then(function(r2) {
            return t2.batchAdd(r2, a.s.Friend, e2);
          });
        }, h.prototype.deleteFriendList = function(e2, t2) {
          var r2 = this;
          void 0 === t2 && (t2 = false), this.createGlobalDB().then(function(n2) {
            return t2 ? n2.transaction([a.s.Friend], "readwrite").objectStore(a.s.Friend).clear() : r2.batchDelete(n2, a.s.Friend, e2);
          });
        }, h.prototype.getFriendList = function() {
          var e2 = this;
          return this.createGlobalDB().then(function(t2) {
            return e2.innerGetAll(t2, a.s.Friend);
          });
        }, h.prototype.addFriendApplicationList = function(e2) {
          var t2 = this;
          this.createGlobalDB().then(function(r2) {
            return t2.batchAdd(r2, a.s.FriendApp, e2);
          });
        }, h.prototype.getFriendApplicationList = function() {
          var e2 = this;
          return this.createGlobalDB().then(function(t2) {
            return e2.innerGetAll(t2, a.s.FriendApp);
          });
        }, h.prototype.addBlacklist = function(e2) {
          var t2 = this;
          this.createGlobalDB().then(function(r2) {
            return t2.batchAdd(r2, a.s.Blacklist, e2);
          });
        }, h.prototype.deleteBlacklist = function(e2) {
          var t2 = this;
          this.createGlobalDB().then(function(r2) {
            return t2.batchDelete(r2, a.s.Blacklist, e2);
          });
        }, h.prototype.getBlacklist = function() {
          var e2 = this;
          return this.createGlobalDB().then(function(t2) {
            return e2.innerGetAll(t2, a.s.Blacklist);
          });
        }, h.prototype.createStaticDB = function() {
          var e2 = this, t2 = this.dbNameMap.static, r2 = this.storeMap.get(t2);
          return r2 ? Promise.resolve(r2) : new Promise(function(r3) {
            return e2.openStaticDB(t2, r3, /* @__PURE__ */ new Date());
          });
        }, h.prototype.createDynamicDB = function(e2, t2, r2) {
          var n2 = this, i2 = this.dbNameMap.dynamic + this.appendID(t2 + e2), o2 = this.storeMap.get(i2);
          return o2 ? Promise.resolve(o2) : new Promise(function(o3) {
            return n2.openDynamicDB(i2, o3, /* @__PURE__ */ new Date(), e2, t2, r2);
          });
        }, h.prototype.createGlobalDB = function() {
          var e2 = this, t2 = this.dbNameMap.global + this.userID, r2 = this.storeMap.get(t2);
          return r2 ? Promise.resolve(r2) : new Promise(function(r3) {
            return e2.openGlobalDB(t2, r3, /* @__PURE__ */ new Date());
          });
        }, h.prototype.openStaticDB = function(e2, t2, r2) {
          var n2 = this, i2 = indexedDB.open(e2, 4);
          i2.onsuccess = function() {
            i2.onsuccess = null, n2.initStaticStore(i2.result, i2.transaction, e2, t2, { time: r2, event: "onsuccess" });
          }, i2.onupgradeneeded = function(o2) {
            var s2;
            i2.onupgradeneeded = null, o2.newVersion && o2.newVersion > o2.oldVersion && (s2 = { time: r2, event: "onupgradeneeded", ver: [o2.oldVersion, o2.newVersion] }, o2 = o2.target.result, n2.initStaticStore(o2, i2.transaction, e2, t2, s2));
          }, i2.onerror = function(o2) {
            o2 = "Static open onerror: " + (o2.target && o2.target.error && o2.target.error.message), n2.logger.info(d, n2.action.create, { time: r2, onerror: o2 }), n2.storeMap.delete(e2), indexedDB.deleteDatabase(e2), i2.onsuccess = null, i2.onupgradeneeded = null, i2.onerror = null, n2.openStaticDB(e2, t2, r2);
          }, i2.onblocked = function() {
            n2.logger.info(d, n2.action.create, { time: r2, onerror: "Static open onblocked" });
          };
        }, h.prototype.openDynamicDB = function(e2, t2, r2, n2, i2, o2) {
          var s2 = this, a2 = indexedDB.open(e2, o2);
          a2.onsuccess = function() {
            a2.onsuccess = null, s2.initDynamicStore(a2.result, a2.transaction, e2, t2, { time: r2, convID: n2, type: i2, event: "onsuccess" });
          }, a2.onupgradeneeded = function(o3) {
            var u2;
            a2.onupgradeneeded = null, o3.newVersion && o3.newVersion > o3.oldVersion && (u2 = { time: r2, convID: n2, type: i2, event: "onupgradeneeded", ver: [o3.oldVersion, o3.newVersion] }, o3 = o3.target.result, s2.initDynamicStore(o3, a2.transaction, e2, t2, u2));
          }, a2.onerror = function(u2) {
            u2 = "Dynamic open onerror: " + (u2.target && u2.target.error && u2.target.error.message), s2.logger.info(d, s2.action.create, { time: r2, convID: n2, type: i2, onerror: u2 }), s2.storeMap.delete(e2), indexedDB.deleteDatabase(e2), a2.onsuccess = null, a2.onupgradeneeded = null, a2.onerror = null, s2.openDynamicDB(e2, t2, r2, n2, i2, o2);
          }, a2.onblocked = function() {
            s2.logger.info(d, s2.action.create, { time: r2, convID: n2, type: i2, onerror: "Dynamic open onblocked" });
          };
        }, h.prototype.openGlobalDB = function(e2, t2, r2) {
          var n2 = this, i2 = indexedDB.open(e2, 3);
          i2.onsuccess = function() {
            i2.onsuccess = null, n2.initGlobalStore(i2.result, i2.transaction, e2, t2, { time: r2, event: "onsuccess" });
          }, i2.onupgradeneeded = function(o2) {
            var s2;
            i2.onupgradeneeded = null, o2.newVersion && o2.newVersion > o2.oldVersion && (s2 = { time: r2, event: "onupgradeneeded", ver: [o2.oldVersion, o2.newVersion] }, o2 = o2.target.result, n2.initGlobalStore(o2, i2.transaction, e2, t2, s2));
          }, i2.onerror = function(o2) {
            o2 = "Global open onerror: " + (o2.target && o2.target.error && o2.target.error.message), n2.logger.info(d, n2.action.create, { time: r2, onerror: o2 }), n2.storeMap.delete(e2), indexedDB.deleteDatabase(e2), i2.onsuccess = null, i2.onupgradeneeded = null, i2.onerror = null, n2.openGlobalDB(e2, t2, r2);
          }, i2.onblocked = function() {
            n2.logger.info(d, n2.action.create, { time: r2, onerror: "Global open onblocked" });
          };
        }, h.prototype.initStaticStore = function(e2, t2, r2, n2, o2) {
          var s2 = this, u2 = !(e2.onclose = function() {
            return s2.storeMap.delete(r2);
          });
          if (u2 = (e2.objectStoreNames.contains(a.s.Log) || (u2 = true, e2.createObjectStore(a.s.Log)), e2.objectStoreNames.contains(a.s.DataReport) || (u2 = true, e2.createObjectStore(a.s.DataReport)), e2.objectStoreNames.contains(a.s.User) || (u2 = true, e2.createObjectStore(a.s.User, { keyPath: "userID" })), e2.objectStoreNames.contains(a.s.Conv) || (u2 = true, e2.createObjectStore(a.s.Conv, { keyPath: "id" }).createIndex("ownerID", "ownerID")), e2.objectStoreNames.contains(a.s.Group) || (u2 = true, e2.createObjectStore(a.s.Group, { keyPath: "id" }).createIndex("ownerID", "ownerID")), e2.objectStoreNames.contains(a.s.MessageExtra) || (u2 = true, e2.createObjectStore(a.s.MessageExtra, { keyPath: "id" }).createIndex("ownerID", "ownerID")), e2.objectStoreNames.contains(a.s.Call) || (u2 = true, e2.createObjectStore(a.s.Call, { keyPath: "id" }).createIndex("ownerID", "ownerID")), o2.isCreate = u2, this.storeMap.get(r2)))
            return o2.db = "Static is opened", this.logger.info(d, this.action.create, o2), n2(u2);
          t2 ? t2.oncomplete = function() {
            s2.storeMap.set(r2, e2), s2.logger.setDB(e2), i.a.getInstance().dataReport.setDB(e2), n2(e2), o2.db = "Static oncomplete", s2.logger.info(d, s2.action.create, o2);
          } : (this.storeMap.set(r2, e2), this.logger.setDB(e2), i.a.getInstance().dataReport.setDB(e2), n2(e2), o2.db = "Static", this.logger.info(d, this.action.create, o2));
        }, h.prototype.initDynamicStore = function(e2, t2, r2, n2, i2) {
          var o2, s2 = this, u2 = !(e2.onclose = function() {
            return s2.storeMap.delete(r2);
          });
          if (e2.objectStoreNames.contains(a.s.Message) || (u2 = true, (o2 = e2.createObjectStore(a.s.Message, { keyPath: "id" })).createIndex("orderKey", "orderKey"), o2.createIndex("combineID", "combineID")), t2) {
            try {
              (o2 = t2.objectStore(a.s.Message)).createIndex("combineID", "combineID");
            } catch (e3) {
            }
            t2.oncomplete = function() {
              s2.storeMap.set(r2, e2), n2(e2), u2 && (i2.db = "Dynamic oncomplete", s2.logger.info(d, s2.action.create, i2));
            };
          } else
            this.storeMap.set(r2, e2), n2(e2), u2 && (i2.db = "Dynamic", this.logger.info(d, this.action.create, i2));
        }, h.prototype.initGlobalStore = function(e2, t2, r2, n2, i2) {
          var o2, s2 = this, u2 = !(e2.onclose = function() {
            return s2.storeMap.delete(r2);
          });
          if (e2.objectStoreNames.contains(a.s.Message) || (u2 = true, (o2 = e2.createObjectStore(a.s.Message, { keyPath: "id" })).createIndex("ownerID", ["conversationType", "conversationID"]), o2.createIndex("combineID", "combineID")), e2.objectStoreNames.contains(a.s.Member) || (u2 = true, (o2 = e2.createObjectStore(a.s.Member, { keyPath: "id" })).createIndex("ownerID", "ownerID")), e2.objectStoreNames.contains(a.s.Friend) || (u2 = true, e2.createObjectStore(a.s.Friend, { keyPath: "userID" })), e2.objectStoreNames.contains(a.s.FriendApp) || (u2 = true, e2.createObjectStore(a.s.FriendApp, { keyPath: "applyUser.userID" })), e2.objectStoreNames.contains(a.s.Blacklist) || (u2 = true, e2.createObjectStore(a.s.Blacklist, { keyPath: "userID" })), e2.objectStoreNames.contains(a.s.GroupApp) || (u2 = true, e2.createObjectStore(a.s.GroupApp, { keyPath: "id" })), t2) {
            try {
              (o2 = t2.objectStore(a.s.Message)).createIndex("combineID", "combineID");
            } catch (e3) {
            }
            t2.oncomplete = function() {
              s2.storeMap.set(r2, e2), n2(e2), u2 && (i2.db = "Global oncomplete", s2.logger.info(d, s2.action.create, i2));
            };
          } else
            this.storeMap.set(r2, e2), n2(e2), u2 && (i2.db = "Global", this.logger.info(d, this.action.create, i2));
        }, h.prototype.batchAdd = function(e2, t2, r2, n2, i2) {
          var o2 = this;
          if (!r2.length)
            return i2 && i2();
          var s2 = this.seq++, a2 = /* @__PURE__ */ new Date(), u2 = e2.transaction([t2], "readwrite").objectStore(t2);
          t2 = "ba" + t2, u2.transaction.oncomplete = function() {
            o2.logger.info(d, t2, { seq: s2, time: a2, total: r2.length, flag: n2 }), i2 && i2();
          }, u2.transaction.onerror = function(e3) {
            e3 = e3.target && e3.target.error && e3.target.error.message, o2.logger.info(d, t2, { seq: s2, time: a2, onerror: "onerror: " + e3, flag: n2 }), i2 && i2();
          }, u2.transaction.onabort = function() {
            o2.logger.info(d, t2, { seq: s2, time: a2, onerror: "onabort", flag: n2 }), i2 && i2();
          }, r2.forEach(function(e3) {
            return u2.put(e3);
          });
        }, h.prototype.batchDelete = function(e2, t2, r2, n2) {
          var i2 = this;
          if (!e2.objectStoreNames.contains(t2) || !r2.length)
            return n2 && n2();
          var o2 = this.seq++, s2 = /* @__PURE__ */ new Date(), a2 = e2.transaction([t2], "readwrite").objectStore(t2);
          t2 = "bd" + t2, a2.transaction.oncomplete = function() {
            i2.logger.info(d, t2, { seq: o2, time: s2, total: r2.length }), n2 && n2();
          }, a2.transaction.onerror = function(e3) {
            e3 = e3.target && e3.target.error && e3.target.error.message, e3 = { seq: o2, time: s2, total: r2.length, onerror: "onerror: " + e3 }, i2.logger.info(d, t2, e3);
          }, a2.transaction.onabort = function() {
            var e3 = { seq: o2, time: s2, total: r2.length, onerror: "onabort" };
            i2.logger.info(d, t2, e3);
          }, r2.forEach(function(e3) {
            return a2.delete(e3);
          });
        }, h.prototype.innerDeleteAllByOwnerID = function(e2, t2, r2, n2) {
          var i2, o2, s2, a2, u2 = this;
          e2.objectStoreNames.contains(t2) && (i2 = this.seq++, o2 = /* @__PURE__ */ new Date(), s2 = e2.transaction([t2], "readwrite").objectStore(t2), a2 = s2.index("ownerID").getAllKeys(r2), t2 = "da" + t2, a2.onsuccess = function() {
            var e3 = a2.result || [];
            s2.transaction.oncomplete = function() {
              u2.logger.info(d, t2, { seq: i2, time: o2, total: e3.length, ownerID: r2 }), n2 && n2();
            }, e3.forEach(function(e4) {
              return s2.delete(e4);
            });
          }, a2.onerror = function(e3) {
            e3 = e3.target && e3.target.error && e3.target.error.message, u2.logger.info(d, t2, { seq: i2, time: o2, ownerID: r2, onerror: e3 });
          });
        }, h.prototype.innerGetListByOwnerID = function(e2, t2) {
          var r2 = this;
          return e2.objectStoreNames.contains(t2) ? new Promise(function(n2) {
            var i2 = r2.seq++, o2 = /* @__PURE__ */ new Date(), s2 = e2.transaction([t2], "readonly").objectStore(t2).index("ownerID").getAll(r2.userID);
            t2 = "ga" + t2 + "s", s2.onsuccess = function() {
              var e3 = s2.result || [];
              r2.logger.info(d, t2, { seq: i2, time: o2, total: e3.length }), n2(e3);
            }, s2.onerror = function(e3) {
              e3 = e3.target && e3.target.error && e3.target.error.message, r2.logger.info(d, t2, { seq: i2, time: o2, onerror: e3 }), n2([]);
            };
          }) : Promise.resolve([]);
        }, h.prototype.innerGetAll = function(e2, t2, r2) {
          var n2 = this;
          return e2.objectStoreNames.contains(t2) ? new Promise(function(i2) {
            var o2 = n2.seq++, s2 = /* @__PURE__ */ new Date(), a2 = e2.transaction([t2], "readonly").objectStore(t2).getAll();
            t2 = "ga" + t2, a2.onsuccess = function() {
              var e3 = a2.result || [];
              n2.logger.info(d, t2, { seq: o2, time: s2, total: e3.length, pid: r2 }), i2(e3);
            }, a2.onerror = function(e3) {
              e3 = e3.target && e3.target.error && e3.target.error.message, n2.logger.info(d, t2, { seq: o2, time: s2, onerror: e3, pid: r2 }), i2([]);
            };
          }) : Promise.resolve([]);
        }, h.prototype.appendID = function(e2) {
          return this.userID + e2;
        }, h.prototype.filterKeys = function(e2) {
          return e2 && e2.length && (e2 = e2.filter(function(e3) {
            return "string" == typeof e3 && e3 && e3.trim().length;
          }).map(function(e3) {
            return e3.toLocaleLowerCase();
          })).length ? e2 : null;
        }, h.prototype.isMsgKeywords = function(e2, t2) {
          if (t2) {
            if (e2.type == a.hb.Combine)
              return t2.every(function(t3) {
                return Object(o.d)(e2.title, t3) || Object(o.d)(e2.summary, t3);
              });
            var r2 = e2.type == a.hb.Custom ? e2.searchedContent : e2.message || e2.fileName || e2.fileDownloadUrl;
            return !!r2 && t2.every(function(e3) {
              return Object(o.d)(r2, e3);
            });
          }
          return true;
        }, h.prototype.isMsgType = function(e2, t2, r2, n2) {
          var i2 = !n2 || !n2.length, o2 = !r2 || !r2.length;
          return i2 && o2 || (i2 && !o2 ? -1 != r2.indexOf(e2) : e2 == a.hb.Custom && -1 != n2.indexOf(t2));
        }, h.prototype.isMsgTimeRange = function(e2, t2, r2) {
          return !t2 && !r2 || (!r2 && t2 ? t2 < e2 : (!t2 && r2 || t2 < e2) && e2 < r2);
        }, h.prototype.isSomeKeys = function(e2, t2) {
          return !t2 || !!e2 && t2.some(function(t3) {
            return Object(o.d)(e2, t3);
          });
        }, h.prototype.isEveryKeys = function(e2, t2) {
          return !t2 || !!e2 && t2.every(function(t3) {
            return Object(o.d)(e2, t3);
          });
        }, h.prototype.handleMsgCallbackList = function() {
          var e2 = this;
          this.isGlobalMsg = true, this.isGlobalMember && (this.reportLog.messageCount = this.globalMsgMap.size, this.dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(this.reportLog) })), this.searchMsgCallbackList.forEach(function(t2) {
            e2.innerSearchMessages(false, t2.convID, t2.type, t2.config, t2.resolve);
          }), this.searchMsgByConvCallbackList.forEach(function(t2) {
            e2.innerSearchMessagesByConv(false, t2.config, t2.resolve);
          }), this.searchMsgCallbackList.length = 0, this.searchMsgByConvCallbackList.length = 0, this.getDelMsgCountCallbackList.forEach(function(t2) {
            e2.getDeleteMessageCount(t2.convID, t2.type, t2.delSeqs, t2.resolve);
          }), this.delMsgsCallbackList.forEach(function(t2) {
            e2.deleteMessageListFromRemote(t2.convID, t2.type, t2.seqs, t2.readSeq, t2.resolve);
          }), this.delAllMsgCallbackList.forEach(function(t2) {
            e2.deleteAllMessageFromRemote(t2.convID, t2.type, t2.maxSeq, t2.delSeqs, t2.resolve);
          }), this.getDelMsgCountCallbackList.length = 0, this.delMsgsCallbackList.length = 0, this.delAllMsgCallbackList.length = 0;
        }, h.prototype.handleMemberCallbackList = function() {
          var e2 = this;
          this.isGlobalMember = true, this.isGlobalMsg && (this.reportLog.memberCount = this.globalMemberMap.size, this.dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(this.reportLog) })), this.searchGroupsCallbackList.forEach(function(t2) {
            e2.searchGroups(t2.keywords, t2.isName, t2.isNick, t2.resolve, true);
          }), this.searchMembersCallbackList.forEach(function(t2) {
            e2.innerSearchGroupMembers(false, t2.groupID, t2.keywords, t2.isNick, t2.resolve);
          }), this.searchGroupsCallbackList.length = 0, this.searchMembersCallbackList.length = 0, this.getMembersCallbackList.forEach(function(t2) {
            var r2 = t2.groupID, n2 = (t2 = t2.resolve, []);
            e2.globalMemberMap.forEach(function(e3) {
              e3.ownerID == r2 && n2.push(e3);
            }), t2(n2);
          }), this.getMembersCallbackList.length = 0;
        }, h.prototype.innerSearchMessagesByConv = function(e2, t2, r2) {
          var n2, i2 = this;
          if (t2.keywords = this.filterKeys(t2.keywords), t2.senderUserIDs = this.filterKeys(t2.senderUserIDs), !(t2.keywords && t2.keywords.length || t2.messageTypes && t2.messageTypes.length || t2.subMessageTypes && t2.subMessageTypes.length || t2.senderUserIDs && t2.senderUserIDs.length || t2.startTime && !(t2.startTime < 0) || t2.endTime && !(t2.endTime < 0)))
            return r2([]);
          e2 && !this.isGlobalMsg ? this.searchMsgByConvCallbackList.push({ config: t2, resolve: r2 }) : (n2 = /* @__PURE__ */ new Map(), this.globalMsgMap.forEach(function(e3) {
            var r3, o2;
            e3.type != a.hb.Revoke && i2.isMsgKeywords(e3, t2.keywords) && i2.isMsgTimeRange(e3.timestamp, t2.startTime, t2.endTime) && i2.isMsgType(e3.type, e3.subType, t2.messageTypes, t2.subMessageTypes) && i2.isSomeKeys(e3.senderUserID, t2.senderUserIDs) && (r3 = e3.conversationType + e3.conversationID, (o2 = n2.get(r3) || { conversationID: e3.conversationID, conversationType: e3.conversationType, totalMessageCount: 0, messageList: [] }).totalMessageCount += 1, o2.messageList.push(e3), n2.set(r3, o2));
          }), r2(Array.from(n2.values())));
        }, h.prototype.innerSearchMessages = function(e2, t2, r2, n2, i2) {
          var o2, s2, u2, c2, l2, d2, p2 = this;
          if (n2.keywords = this.filterKeys(n2.keywords), n2.senderUserIDs = this.filterKeys(n2.senderUserIDs), !(n2.keywords && n2.keywords.length || n2.messageTypes && n2.messageTypes.length || n2.subMessageTypes && n2.subMessageTypes.length || n2.senderUserIDs && n2.senderUserIDs.length || n2.startTime && !(n2.startTime < 0) || n2.endTime && !(n2.endTime < 0)))
            return i2({ messageList: [] }, { convID: t2, config: n2 });
          e2 && !this.isGlobalMsg ? this.searchMsgCallbackList.push({ convID: t2, type: r2, config: n2, resolve: i2 }) : (l2 = [], this.globalMsgMap.forEach(function(e3) {
            (!t2 || e3.conversationID == t2 && e3.conversationType == r2) && e3.type != a.hb.Revoke && p2.isMsgKeywords(e3, n2.keywords) && p2.isMsgTimeRange(e3.timestamp, n2.startTime, n2.endTime) && p2.isMsgType(e3.type, e3.subType, n2.messageTypes, n2.subMessageTypes) && p2.isSomeKeys(e3.senderUserID, n2.senderUserIDs) && l2.push(e3), e3.type == a.hb.Combine && e3.messageList && (!t2 || e3.conversationID == t2 && e3.conversationType == r2) && e3.messageList.forEach(function(t3) {
              t3.type != a.hb.Revoke && p2.isMsgKeywords(t3, n2.keywords) && p2.isMsgTimeRange(t3.timestamp, n2.startTime, n2.endTime) && p2.isMsgType(t3.type, t3.subType, n2.messageTypes, n2.subMessageTypes) && p2.isSomeKeys(t3.senderUserID, n2.senderUserIDs) && -1 == l2.indexOf(e3) && l2.push(e3);
            });
          }), e2 = l2.length, n2.order ? l2.sort(function(e3, t3) {
            return e3.timestamp - t3.timestamp;
          }) : l2.sort(function(e3, t3) {
            return t3.timestamp - e3.timestamp;
          }), u2 = (s2 = (o2 = n2.nextMessage ? n2.nextMessage.id : "") ? l2.findIndex(function(e3) {
            return o2 === e3.id;
          }) + 1 : 0) + Math.min(a.m.MAX_SEARCH_PAGE_COUNT, n2.count), c2 = l2[u2] ? l2[u2 - 1] : void 0, l2 = l2.slice(s2, u2), n2.nextMessage = o2, d2 = this.globalMsgMap.size, d2 = { time: /* @__PURE__ */ new Date(), dbCount: d2, start: s2, end: u2, total: e2, count: l2.length, convID: t2, config: n2 }, i2({ messageList: l2, nextMessage: c2 }, d2));
        }, h.prototype.innerSearchGroupMembers = function(e2, t2, r2, n2, i2) {
          var o2, s2 = this;
          e2 && !this.isGlobalMember ? this.searchMembersCallbackList.push({ groupID: t2, keywords: r2, isNick: n2, resolve: i2 }) : (o2 = [], this.globalMemberMap.forEach(function(e3) {
            var i3 = (null == (i3 = s2.engineConfig.dbUserMap.get(e3.userID)) ? void 0 : i3.userName) || "";
            e3.ownerID == t2 && (s2.isEveryKeys(i3, r2) || n2 && s2.isEveryKeys(e3.memberNickname, r2)) && o2.push(e3);
          }), i2(o2));
        }, h.prototype.loadGlobaDB = function(e2, t2, r2, n2) {
          var i2 = this, o2 = (r2.forEach(function(e3) {
            i2.globalMemberMap.set(e3.id, e3), i2.syncMemberToUser(e3);
          }), this.isGlobalMember = true, Date.now());
          this.innerGetAll(e2, a.s.Message, "loadGDB").then(function(e3) {
            i2.globalMsgMap.clear(), t2.forEach(function(e4) {
              i2.globalMsgMap.set(e4.id, e4), e4.type == a.hb.Combine && i2.globalCbMsgMap.set(e4.combineID, e4);
            }), e3.forEach(function(e4) {
              i2.globalMsgMap.set(e4.id, e4), e4.type == a.hb.Combine && i2.globalCbMsgMap.set(e4.combineID, e4);
            }), i2.reportLog.messageTime = Date.now() - o2, i2.handleMsgCallbackList();
          }).then(function() {
            return c(i2, void 0, void 0, function() {
              var i3, o3, s2, u2, c2, p2, h2 = this;
              return l(this, function(f) {
                switch (f.label) {
                  case 0:
                    i3 = { time: /* @__PURE__ */ new Date(), msgs: [], users: [] }, o3 = function(r3) {
                      return l(this, function(n3) {
                        switch (n3.label) {
                          case 0:
                            return [4, new Promise(function(n4) {
                              var o4 = Date.now(), s3 = e2.transaction([a.s.Message], "readwrite").objectStore(a.s.Message);
                              s3.transaction.oncomplete = function() {
                                i3.msgs.push(Date.now() - o4), n4(0);
                              }, t2.slice(r3, r3 + 1e4).forEach(function(e3) {
                                return s3.put(e3);
                              }), r3 += 1e4;
                            })];
                          case 1:
                            return n3.sent(), s2 = r3, [2];
                        }
                      });
                    }, p2 = 0, f.label = 1;
                  case 1:
                    return p2 < t2.length ? [5, o3(p2)] : [3, 4];
                  case 2:
                    f.sent(), p2 = s2, f.label = 3;
                  case 3:
                    return [3, 1];
                  case 4:
                    u2 = function(t3) {
                      return l(this, function(n3) {
                        switch (n3.label) {
                          case 0:
                            return [4, new Promise(function(n4) {
                              var o4 = Date.now(), s3 = e2.transaction([a.s.Member], "readwrite").objectStore(a.s.Member);
                              s3.transaction.oncomplete = function() {
                                i3.users.push(Date.now() - o4), n4(0);
                              }, r2.slice(t3, t3 + 1e4).forEach(function(e3) {
                                return s3.put(e3);
                              }), t3 += 1e4;
                            })];
                          case 1:
                            return n3.sent(), c2 = t3, [2];
                        }
                      });
                    }, p2 = 0, f.label = 5;
                  case 5:
                    return p2 < r2.length ? [5, u2(p2)] : [3, 8];
                  case 6:
                    f.sent(), p2 = c2, f.label = 7;
                  case 7:
                    return [3, 5];
                  case 8:
                    return n2 && n2.forEach(function(e3) {
                      indexedDB.deleteDatabase(e3), h2.storeMap.delete(e3);
                    }), (t2.length || r2.length) && this.logger.info(d, "loadGDB", i3), [2];
                }
              });
            });
          });
        }, h.prototype.copyOldDB2GlobalDB = function() {
          var e2, t2 = this;
          indexedDB.databases && "function" == typeof indexedDB.databases ? (e2 = /* @__PURE__ */ new Date(), indexedDB.databases().then(function(e3) {
            var r2 = [];
            return e3.forEach(function(e4) {
              var n2 = (e4.name || "-1").replace(t2.dbNameMap.dynamic + t2.userID, ""), i2 = Number(n2.charAt(0));
              i2 != a.r.Peer && i2 != a.r.Group || r2.push({ type: i2, convID: n2.substring(1), ver: e4.version || 1 });
            }), r2;
          }).then(function(r2) {
            t2.createGlobalDB().then(function(n2) {
              return c(t2, void 0, void 0, function() {
                var t3, i2, o2, s2, u2, c2, p2, h2, f = this;
                return l(this, function(g) {
                  switch (g.label) {
                    case 0:
                      if (t3 = r2.length, i2 = [], o2 = [], s2 = [], 0 == t3)
                        return this.loadGlobaDB(n2, i2, o2), [2];
                      u2 = function(e3) {
                        var t4, n3, u3;
                        return l(this, function(l2) {
                          switch (l2.label) {
                            case 0:
                              return u3 = r2[e3], t4 = u3.convID, n3 = u3.type, u3 = u3.ver, [4, c2.createDynamicDB(t4, n3, u3).then(function(e4) {
                                var r3 = [f.innerGetAll(e4, a.s.Message, t4)];
                                return n3 == a.r.Group && r3.push(f.innerGetAll(e4, a.s.Member, t4)), Promise.all(r3).then(function(r4) {
                                  var a2 = (r4 = function(e5, t5) {
                                    var r5 = "function" == typeof Symbol && e5[Symbol.iterator];
                                    if (!r5)
                                      return e5;
                                    var n4, i3, o3 = r5.call(e5), s3 = [];
                                    try {
                                      for (; (void 0 === t5 || 0 < t5--) && !(n4 = o3.next()).done; )
                                        s3.push(n4.value);
                                    } catch (e6) {
                                      i3 = { error: e6 };
                                    } finally {
                                      try {
                                        n4 && !n4.done && (r5 = o3.return) && r5.call(o3);
                                      } finally {
                                        if (i3)
                                          throw i3.error;
                                      }
                                    }
                                    return s3;
                                  }(r4, 2))[0];
                                  r4 = r4[1];
                                  a2.length && a2.forEach(function(e5) {
                                    e5.id = e5.type + "_" + e5.localMessageID + "_" + e5.messageID, i2.push(e5);
                                  }), r4 && r4.length && r4.forEach(function(e5) {
                                    e5.id || (e5.id = t4 + "_" + e5.userID), e5.ownerID || (e5.ownerID = t4), o2.push(e5);
                                  }), e4.close(), s2.push(f.dbNameMap.dynamic + f.appendID(n3 + t4));
                                });
                              })];
                            case 1:
                              return l2.sent(), [2];
                          }
                        });
                      }, c2 = this, p2 = 0, g.label = 1;
                    case 1:
                      return p2 < t3 ? [5, u2(p2)] : [3, 4];
                    case 2:
                      g.sent(), g.label = 3;
                    case 3:
                      return p2++, [3, 1];
                    case 4:
                      return this.loadGlobaDB(n2, i2, o2, s2), h2 = { time: e2, dbs: t3, msgs: i2.length, users: o2.length }, this.logger.info(d, this.action.delete, h2), [2];
                  }
                });
              });
            });
          })) : this.createGlobalDB().then(function(e3) {
            return t2.loadGlobaDB(e3, [], []);
          });
        }, h.prototype.syncMemberToUser = function(e2) {
          var t2 = e2.userName, r2 = e2.memberAvatarUrl, n2 = this.engineConfig.dbUserMap.get(e2.userID);
          n2 ? (t2 && !n2.userName && (n2.userName = t2), r2 && !n2.userAvatarUrl && (n2.userAvatarUrl = r2)) : (n2 = { userID: e2.userID, userName: t2, userAvatarUrl: r2 }, this.engineConfig.dbUserMap.set(e2.userID, n2));
        }, h);
        function h(e2) {
          this.engineConfig = e2, this.logger = i.a.getInstance().logger, this.dataReport = i.a.getInstance().dataReport, this.dbNameMap = { static: "", dynamic: "", global: "" }, this.storeMap = /* @__PURE__ */ new Map(), this.seq = 1, this.userID = "", this.action = { delete: "delete", create: "create" }, this.isGlobalMsg = false, this.isGlobalMember = false, this.reportLog = { messageTime: 0, memberTime: 0, messageCount: 0, memberCount: 0 }, this.globalMsgMap = /* @__PURE__ */ new Map(), this.globalMemberMap = /* @__PURE__ */ new Map(), this.globalCbMsgMap = /* @__PURE__ */ new Map(), this.searchMsgByConvCallbackList = [], this.searchMsgCallbackList = [], this.searchGroupsCallbackList = [], this.searchMembersCallbackList = [], this.getMembersCallbackList = [], this.getDelMsgCountCallbackList = [], this.delMsgsCallbackList = [], this.delAllMsgCallbackList = [], this.dbNameMap.static = "ZIMSDKSTATIC" + e2.appID, this.dbNameMap.dynamic = "ZIMSDKDYNAMIC" + e2.appID, this.dbNameMap.global = "ZIMSDKGLOBAL" + e2.appID, this.createStaticDB();
        }
      }, function(e, t, r) {
        "use strict";
        e.exports = d;
        var n, i = r(10), o = i.LongBits, s = i.base64, a = i.utf8;
        function u(e2, t2, r2) {
          this.fn = e2, this.len = t2, this.next = void 0, this.val = r2;
        }
        function c() {
        }
        function l(e2) {
          this.head = e2.head, this.tail = e2.tail, this.len = e2.len, this.next = e2.states;
        }
        function d() {
          this.len = 0, this.head = new u(c, 0, 0), this.tail = this.head, this.states = null;
        }
        function p() {
          return i.Buffer ? function() {
            return (d.create = function() {
              return new n();
            })();
          } : function() {
            return new d();
          };
        }
        function h(e2, t2, r2) {
          t2[r2] = 255 & e2;
        }
        function f(e2, t2) {
          this.len = e2, this.next = void 0, this.val = t2;
        }
        function g(e2, t2, r2) {
          for (; e2.hi; )
            t2[r2++] = 127 & e2.lo | 128, e2.lo = (e2.lo >>> 7 | e2.hi << 25) >>> 0, e2.hi >>>= 7;
          for (; 127 < e2.lo; )
            t2[r2++] = 127 & e2.lo | 128, e2.lo = e2.lo >>> 7;
          t2[r2++] = e2.lo;
        }
        function m(e2, t2, r2) {
          t2[r2] = 255 & e2, t2[r2 + 1] = e2 >>> 8 & 255, t2[r2 + 2] = e2 >>> 16 & 255, t2[r2 + 3] = e2 >>> 24;
        }
        d.create = p(), d.alloc = function(e2) {
          return new i.Array(e2);
        }, i.Array !== Array && (d.alloc = i.pool(d.alloc, i.Array.prototype.subarray)), d.prototype._push = function(e2, t2, r2) {
          return this.tail = this.tail.next = new u(e2, t2, r2), this.len += t2, this;
        }, (f.prototype = Object.create(u.prototype)).fn = function(e2, t2, r2) {
          for (; 127 < e2; )
            t2[r2++] = 127 & e2 | 128, e2 >>>= 7;
          t2[r2] = e2;
        }, d.prototype.uint32 = function(e2) {
          return this.len += (this.tail = this.tail.next = new f((e2 >>>= 0) < 128 ? 1 : e2 < 16384 ? 2 : e2 < 2097152 ? 3 : e2 < 268435456 ? 4 : 5, e2)).len, this;
        }, d.prototype.int32 = function(e2) {
          return e2 < 0 ? this._push(g, 10, o.fromNumber(e2)) : this.uint32(e2);
        }, d.prototype.sint32 = function(e2) {
          return this.uint32((e2 << 1 ^ e2 >> 31) >>> 0);
        }, d.prototype.int64 = d.prototype.uint64 = function(e2) {
          return e2 = o.from(e2), this._push(g, e2.length(), e2);
        }, d.prototype.sint64 = function(e2) {
          return e2 = o.from(e2).zzEncode(), this._push(g, e2.length(), e2);
        }, d.prototype.bool = function(e2) {
          return this._push(h, 1, e2 ? 1 : 0);
        }, d.prototype.sfixed32 = d.prototype.fixed32 = function(e2) {
          return this._push(m, 4, e2 >>> 0);
        }, d.prototype.sfixed64 = d.prototype.fixed64 = function(e2) {
          return e2 = o.from(e2), this._push(m, 4, e2.lo)._push(m, 4, e2.hi);
        }, d.prototype.float = function(e2) {
          return this._push(i.float.writeFloatLE, 4, e2);
        }, d.prototype.double = function(e2) {
          return this._push(i.float.writeDoubleLE, 8, e2);
        };
        var _ = i.Array.prototype.set ? function(e2, t2, r2) {
          t2.set(e2, r2);
        } : function(e2, t2, r2) {
          for (var n2 = 0; n2 < e2.length; ++n2)
            t2[r2 + n2] = e2[n2];
        };
        d.prototype.bytes = function(e2) {
          var t2, r2 = e2.length >>> 0;
          return r2 ? (i.isString(e2) && (t2 = d.alloc(r2 = s.length(e2)), s.decode(e2, t2, 0), e2 = t2), this.uint32(r2)._push(_, r2, e2)) : this._push(h, 1, 0);
        }, d.prototype.string = function(e2) {
          var t2 = a.length(e2);
          return t2 ? this.uint32(t2)._push(a.write, t2, e2) : this._push(h, 1, 0);
        }, d.prototype.fork = function() {
          return this.states = new l(this), this.head = this.tail = new u(c, 0, 0), this.len = 0, this;
        }, d.prototype.reset = function() {
          return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new u(c, 0, 0), this.len = 0), this;
        }, d.prototype.ldelim = function() {
          var e2 = this.head, t2 = this.tail, r2 = this.len;
          return this.reset().uint32(r2), r2 && (this.tail.next = e2.next, this.tail = t2, this.len += r2), this;
        }, d.prototype.finish = function() {
          for (var e2 = this.head.next, t2 = this.constructor.alloc(this.len), r2 = 0; e2; )
            e2.fn(e2.val, t2, r2), r2 += e2.len, e2 = e2.next;
          return t2;
        }, d._configure = function(e2) {
          n = e2, d.create = p(), n._configure();
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = u;
        var n, i = r(10), o = i.LongBits, s = i.utf8;
        function a(e2, t2) {
          return RangeError("index out of range: " + e2.pos + " + " + (t2 || 1) + " > " + e2.len);
        }
        function u(e2) {
          this.buf = e2, this.pos = 0, this.len = e2.length;
        }
        function c() {
          return i.Buffer ? function(e2) {
            return (u.create = function(e3) {
              return i.Buffer.isBuffer(e3) ? new n(e3) : d(e3);
            })(e2);
          } : d;
        }
        var l, d = "undefined" != typeof Uint8Array ? function(e2) {
          if (e2 instanceof Uint8Array || Array.isArray(e2))
            return new u(e2);
          throw Error("illegal buffer");
        } : function(e2) {
          if (Array.isArray(e2))
            return new u(e2);
          throw Error("illegal buffer");
        };
        function p() {
          var e2 = new o(0, 0), t2 = 0;
          if (!(4 < this.len - this.pos)) {
            for (; t2 < 3; ++t2) {
              if (this.pos >= this.len)
                throw a(this);
              if (e2.lo = (e2.lo | (127 & this.buf[this.pos]) << 7 * t2) >>> 0, this.buf[this.pos++] < 128)
                return e2;
            }
            return e2.lo = (e2.lo | (127 & this.buf[this.pos++]) << 7 * t2) >>> 0, e2;
          }
          for (; t2 < 4; ++t2)
            if (e2.lo = (e2.lo | (127 & this.buf[this.pos]) << 7 * t2) >>> 0, this.buf[this.pos++] < 128)
              return e2;
          if (e2.lo = (e2.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e2.hi = (e2.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128)
            return e2;
          if (t2 = 0, 4 < this.len - this.pos) {
            for (; t2 < 5; ++t2)
              if (e2.hi = (e2.hi | (127 & this.buf[this.pos]) << 7 * t2 + 3) >>> 0, this.buf[this.pos++] < 128)
                return e2;
          } else
            for (; t2 < 5; ++t2) {
              if (this.pos >= this.len)
                throw a(this);
              if (e2.hi = (e2.hi | (127 & this.buf[this.pos]) << 7 * t2 + 3) >>> 0, this.buf[this.pos++] < 128)
                return e2;
            }
          throw Error("invalid varint encoding");
        }
        function h(e2, t2) {
          return (e2[t2 - 4] | e2[t2 - 3] << 8 | e2[t2 - 2] << 16 | e2[t2 - 1] << 24) >>> 0;
        }
        function f() {
          if (this.pos + 8 > this.len)
            throw a(this, 8);
          return new o(h(this.buf, this.pos += 4), h(this.buf, this.pos += 4));
        }
        u.create = c(), u.prototype._slice = i.Array.prototype.subarray || i.Array.prototype.slice, u.prototype.uint32 = (l = 4294967295, function() {
          if (l = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if (l = (l | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128)
            return l;
          if ((this.pos += 5) > this.len)
            throw this.pos = this.len, a(this, 10);
          return l;
        }), u.prototype.int32 = function() {
          return 0 | this.uint32();
        }, u.prototype.sint32 = function() {
          var e2 = this.uint32();
          return e2 >>> 1 ^ -(1 & e2) | 0;
        }, u.prototype.bool = function() {
          return 0 !== this.uint32();
        }, u.prototype.fixed32 = function() {
          if (this.pos + 4 > this.len)
            throw a(this, 4);
          return h(this.buf, this.pos += 4);
        }, u.prototype.sfixed32 = function() {
          if (this.pos + 4 > this.len)
            throw a(this, 4);
          return 0 | h(this.buf, this.pos += 4);
        }, u.prototype.float = function() {
          if (this.pos + 4 > this.len)
            throw a(this, 4);
          var e2 = i.float.readFloatLE(this.buf, this.pos);
          return this.pos += 4, e2;
        }, u.prototype.double = function() {
          if (this.pos + 8 > this.len)
            throw a(this, 4);
          var e2 = i.float.readDoubleLE(this.buf, this.pos);
          return this.pos += 8, e2;
        }, u.prototype.bytes = function() {
          var e2 = this.uint32(), t2 = this.pos, r2 = this.pos + e2;
          if (r2 > this.len)
            throw a(this, e2);
          return this.pos += e2, Array.isArray(this.buf) ? this.buf.slice(t2, r2) : t2 === r2 ? new this.buf.constructor(0) : this._slice.call(this.buf, t2, r2);
        }, u.prototype.string = function() {
          var e2 = this.bytes();
          return s.read(e2, 0, e2.length);
        }, u.prototype.skip = function(e2) {
          if ("number" == typeof e2) {
            if (this.pos + e2 > this.len)
              throw a(this, e2);
            this.pos += e2;
          } else
            do {
              if (this.pos >= this.len)
                throw a(this);
            } while (128 & this.buf[this.pos++]);
          return this;
        }, u.prototype.skipType = function(e2) {
          switch (e2) {
            case 0:
              this.skip();
              break;
            case 1:
              this.skip(8);
              break;
            case 2:
              this.skip(this.uint32());
              break;
            case 3:
              for (; 4 != (e2 = 7 & this.uint32()); )
                this.skipType(e2);
              break;
            case 5:
              this.skip(4);
              break;
            default:
              throw Error("invalid wire type " + e2 + " at offset " + this.pos);
          }
          return this;
        }, u._configure = function(e2) {
          n = e2, u.create = c(), n._configure();
          var t2 = i.Long ? "toLong" : "toNumber";
          i.merge(u.prototype, { int64: function() {
            return p.call(this)[t2](false);
          }, uint64: function() {
            return p.call(this)[t2](true);
          }, sint64: function() {
            return p.call(this).zzDecode()[t2](false);
          }, fixed64: function() {
            return f.call(this)[t2](true);
          }, sfixed64: function() {
            return f.call(this)[t2](false);
          } });
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        });
        var n = r(84), i = r(89), o = r(4), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, a = (u.prototype.setDB = function(e2) {
          var t2 = this;
          this.store ? this.store.setDB(e2).then(function(e3) {
            t2.config.isProd && e3.forEach(function(e4) {
              return t2.pendingQueue.enqueue(e4);
            });
          }) : this.db = e2;
        }, u.prototype.clearDB = function() {
          this.pendingQueue.clear(), this.store && this.store.clear();
        }, u.prototype.init = function(e2) {
          return function(e3, t2, r2, n2) {
            return new (r2 = r2 || Promise)(function(i2, o2) {
              function s2(e4) {
                try {
                  u2(n2.next(e4));
                } catch (e5) {
                  o2(e5);
                }
              }
              function a2(e4) {
                try {
                  u2(n2.throw(e4));
                } catch (e5) {
                  o2(e5);
                }
              }
              function u2(e4) {
                var t3;
                e4.done ? i2(e4.value) : ((t3 = e4.value) instanceof r2 ? t3 : new r2(function(e5) {
                  e5(t3);
                })).then(s2, a2);
              }
              u2((n2 = n2.apply(e3, t2 || [])).next());
            });
          }(this, void 0, void 0, function() {
            var t2, i2 = this;
            return function(e3, t3) {
              var r2, n2, i3, o2 = { label: 0, sent: function() {
                if (1 & i3[0])
                  throw i3[1];
                return i3[1];
              }, trys: [], ops: [] }, s2 = { next: a2(0), throw: a2(1), return: a2(2) };
              return "function" == typeof Symbol && (s2[Symbol.iterator] = function() {
                return this;
              }), s2;
              function a2(s3) {
                return function(a3) {
                  var u2 = [s3, a3];
                  if (r2)
                    throw new TypeError("Generator is already executing.");
                  for (; o2; )
                    try {
                      if (r2 = 1, n2 && (i3 = 2 & u2[0] ? n2.return : u2[0] ? n2.throw || ((i3 = n2.return) && i3.call(n2), 0) : n2.next) && !(i3 = i3.call(n2, u2[1])).done)
                        return i3;
                      switch (n2 = 0, (u2 = i3 ? [2 & u2[0], i3.value] : u2)[0]) {
                        case 0:
                        case 1:
                          i3 = u2;
                          break;
                        case 4:
                          return o2.label++, { value: u2[1], done: false };
                        case 5:
                          o2.label++, n2 = u2[1], u2 = [0];
                          continue;
                        case 7:
                          u2 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(i3 = 0 < (i3 = o2.trys).length && i3[i3.length - 1]) && (6 === u2[0] || 2 === u2[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u2[0] && (!i3 || u2[1] > i3[0] && u2[1] < i3[3])) {
                            o2.label = u2[1];
                            break;
                          }
                          if (6 === u2[0] && o2.label < i3[1]) {
                            o2.label = i3[1], i3 = u2;
                            break;
                          }
                          if (i3 && o2.label < i3[2]) {
                            o2.label = i3[2], o2.ops.push(u2);
                            break;
                          }
                          i3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u2 = t3.call(e3, o2);
                    } catch (a4) {
                      u2 = [6, a4], n2 = 0;
                    } finally {
                      r2 = i3 = 0;
                    }
                  if (5 & u2[0])
                    throw u2[1];
                  return { value: u2[0] ? u2[1] : void 0, done: true };
                };
              }
            }(this, function(a2) {
              return this.config = s(s({}, o.b), e2), this.logger = new n.a(this.miniProgram), this.logger.setLogUrlParams({ product: this.product, signature: this.config.token || "", appid: this.config.appID, id_name: this.config.userID || "", deviceid: this.config.deviceID || "" }), this.logger.setLogServer(this.config.serverUrl || ""), this.logger.setPostSucCallback(this.postSucHandler.bind(this)), this.logger.setPostFailCallback(function(e3) {
                e3.push.apply(e3, function(e4, t3, r2) {
                  if (r2 || 2 === arguments.length)
                    for (var n2, i3 = 0, o2 = t3.length; i3 < o2; i3++)
                      !n2 && i3 in t3 || ((n2 = n2 || Array.prototype.slice.call(t3, 0, i3))[i3] = t3[i3]);
                  return e4.concat(n2 || Array.prototype.slice.call(t3));
                }([], function(e4, t3) {
                  var r2 = "function" == typeof Symbol && e4[Symbol.iterator];
                  if (!r2)
                    return e4;
                  var n2, i3, o2 = r2.call(e4), s2 = [];
                  try {
                    for (; (void 0 === t3 || 0 < t3--) && !(n2 = o2.next()).done; )
                      s2.push(n2.value);
                  } catch (e5) {
                    i3 = { error: e5 };
                  } finally {
                    try {
                      n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
                    } finally {
                      if (i3)
                        throw i3.error;
                    }
                  }
                  return s2;
                }(i2.pendingQueue.readStoreData(1)), false)), i2.store.setItems(e3);
              }), this.initPendingQueue(), t2 = r(46)("./" + (this.miniProgram ? "zego.impl.wx" : "zego.impl.web")).createZegoStore, this.store = t2(this.config.appID, this.miniProgram), (this.db || this.miniProgram) && this.store.setDB(this.db).then(function(e3) {
                i2.config.isProd && e3.forEach(function(e4) {
                  return i2.pendingQueue.enqueue(e4);
                });
              }), [2];
            });
          });
        }, u.prototype.pause = function() {
          this.isPaused = true;
        }, u.prototype.startReport = function(e2) {
          var t2 = e2.get("userID"), r2 = e2.get("token");
          return !(!t2 || "string" != typeof t2) && (!(!r2 || "string" != typeof r2) && (this.startCommonField = e2, this.config.userID = t2, this.config.token = r2, this.logger.setLogUrlParams({ product: this.product, signature: this.config.token, appid: this.config.appID, id_name: this.config.userID || "", deviceid: this.config.deviceID || "" }), (t2 = e2.get("serverUrl")) && (this.config.serverUrl = t2, this.logger.setLogServer(this.config.serverUrl)), this.config.userID && this.config.token && this.config.serverUrl && (e2 = (r2 = this.pendingQueue.getPendingDataInfo()).pendingDataSize, t2 = r2.size, this.checkPendingQueue(e2, t2)), true));
        }, u.prototype.resume = function() {
          this.isPaused = false;
          var e2 = (t2 = this.pendingQueue.getPendingDataInfo()).pendingDataSize, t2 = t2.size;
          this.checkPendingQueue(e2, t2);
        }, u.prototype.report = function(e2, t2) {
          void 0 === t2 && (t2 = false);
          var r2 = Object(o.g)();
          r2 = { key: (/* @__PURE__ */ new Date()).getTime() + "_" + r2, value: e2 };
          return this.config.isProd && this.pendingQueue.enqueue(r2), !this.config.isProd && t2 || this.store.setItems([r2]), true;
        }, u.prototype.postSucHandler = function(e2) {
          this.store.removeItems(e2);
          var t2 = (e2 = this.pendingQueue.getPendingDataInfo()).pendingDataSize;
          e2 = e2.size;
          this.checkPendingQueue(t2, e2);
        }, u.prototype.checkPendingQueue = function(e2, t2) {
          if (e2 > this.config.reportSize || t2 > this.config.reportNum) {
            if ((this.isPaused || !this.config.userID || !this.config.token || !this.config.serverUrl) && (e2 >= this.cacheMaxSize || o.a.totalAvailCache <= 0))
              return this.store.setItems(this.pendingQueue.readStoreData(this.cacheDelPer));
            if (!this.logger.reportAllowed() && (e2 >= this.cacheMaxSize || o.a.totalAvailCache <= 0))
              return this.store.setItems(this.pendingQueue.readStoreData(this.cacheDelPer));
            e2 = (t2 = this.pendingQueue.readReportData(this.config.reportSize)).totalLen, t2 = t2.reportDataArr, this.logger.report(t2), this.pendingQueue.refresh(e2);
          }
        }, u.prototype.initPendingQueue = function() {
          var e2 = this;
          this.pendingQueue = new i.a(), this.pendingQueue.setListener({ enCallback: function(t2, r2, n2) {
            e2.checkPendingQueue(n2, r2);
          } });
        }, u);
        function u(e2, t2) {
          this.product = e2, this.miniProgram = t2, this.QUEUE_MAX = 100, this.cacheMaxSize = o.a.cacheMaxSize, this.cacheDelPer = o.a.cacheDelPer, this.forceDataTotalLen = 0, this.isPaused = false;
        }
      }, function(e, t, r) {
        var n = { "./zego.impl.web": 47, "./zego.impl.web.ts": 47, "./zego.impl.wx": 48, "./zego.impl.wx.ts": 48 };
        function i(e2) {
          return e2 = o(e2), r(e2);
        }
        function o(e2) {
          if (r.o(n, e2))
            return n[e2];
          throw (e2 = new Error("Cannot find module '" + e2 + "'")).code = "MODULE_NOT_FOUND", e2;
        }
        i.keys = function() {
          return Object.keys(n);
        }, i.resolve = o, (e.exports = i).id = 46;
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "createZegoStore", function() {
          return o;
        }), r.d(t, "createZegoWebSocket", function() {
          return s;
        });
        var n = (i.prototype.setDB = function(e2) {
          return this.store = e2, this.getAll();
        }, i.prototype.clear = function() {
          this.buffer.length = 0;
        }, i.prototype.setItems = function(e2) {
          var t2;
          if (this.store)
            try {
              var r2 = this.store.transaction([this.tname], "readwrite").objectStore(this.tname);
              e2.forEach(function(e3) {
                return r2.put(e3.value, e3.key);
              });
            } catch (e3) {
            }
          else
            (t2 = this.buffer).push.apply(t2, function(e3, t3, r3) {
              if (r3 || 2 === arguments.length)
                for (var n2, i2 = 0, o2 = t3.length; i2 < o2; i2++)
                  !n2 && i2 in t3 || ((n2 = n2 || Array.prototype.slice.call(t3, 0, i2))[i2] = t3[i2]);
              return e3.concat(n2 || Array.prototype.slice.call(t3));
            }([], function(e3, t3) {
              var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
              if (!r3)
                return e3;
              var n2, i2, o2 = r3.call(e3), s2 = [];
              try {
                for (; (void 0 === t3 || 0 < t3--) && !(n2 = o2.next()).done; )
                  s2.push(n2.value);
              } catch (e4) {
                i2 = { error: e4 };
              } finally {
                try {
                  n2 && !n2.done && (r3 = o2.return) && r3.call(o2);
                } finally {
                  if (i2)
                    throw i2.error;
                }
              }
              return s2;
            }(e2), false));
        }, i.prototype.removeItems = function(e2) {
          var t2;
          this.store && (t2 = this.store.transaction([this.tname], "readwrite").objectStore(this.tname), e2.forEach(function(e3) {
            return t2.delete(e3.key);
          }));
        }, i.prototype.getAll = function() {
          var e2 = this;
          return new Promise(function(t2) {
            var r2 = e2.store.transaction([e2.tname], "readonly").objectStore(e2.tname);
            r2.getAllKeys().onsuccess = function(e3) {
              var n2 = e3.target.result;
              r2.getAll().onsuccess = function(e4) {
                e4 = e4.target.result.map(function(e5, t3) {
                  return { key: n2[t3], value: e5 };
                }), t2(e4);
              };
            };
          });
        }, i);
        function i() {
          this.buffer = [], this.tname = "DataReport";
        }
        function o() {
          return new n();
        }
        function s(e2, t2) {
          var r2 = [];
          return (e2 = (Object.keys(t2).forEach(function(e3) {
            r2.push("".concat(e3, "=").concat(t2[e3]));
          }), new WebSocket(e2 + "?" + r2.join("&")))).binaryType = "arraybuffer", e2;
        }
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (4:20)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| import { ReportDataItem, ZegoStore, ZegoWebSocket } from '../../common/zego.entity';\n| \n> class ZegoStoreImpl implements ZegoStore {\n|     isAlipay = false;\n|     isReadAll = false;");
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        });
        var n = r(92), i = r(7), o = function() {
          return (o = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, s = (a.prototype.init = function(e2) {
          return function(e3, t2, r2, n2) {
            return new (r2 = r2 || Promise)(function(i2, o2) {
              function s2(e4) {
                try {
                  u(n2.next(e4));
                } catch (e5) {
                  o2(e5);
                }
              }
              function a2(e4) {
                try {
                  u(n2.throw(e4));
                } catch (e5) {
                  o2(e5);
                }
              }
              function u(e4) {
                var t3;
                e4.done ? i2(e4.value) : ((t3 = e4.value) instanceof r2 ? t3 : new r2(function(e5) {
                  e5(t3);
                })).then(s2, a2);
              }
              u((n2 = n2.apply(e3, t2 || [])).next());
            });
          }(this, void 0, void 0, function() {
            var t2;
            return function(e3, t3) {
              var r2, n2, i2, o2 = { label: 0, sent: function() {
                if (1 & i2[0])
                  throw i2[1];
                return i2[1];
              }, trys: [], ops: [] }, s2 = { next: a2(0), throw: a2(1), return: a2(2) };
              return "function" == typeof Symbol && (s2[Symbol.iterator] = function() {
                return this;
              }), s2;
              function a2(s3) {
                return function(a3) {
                  var u = [s3, a3];
                  if (r2)
                    throw new TypeError("Generator is already executing.");
                  for (; o2; )
                    try {
                      if (r2 = 1, n2 && (i2 = 2 & u[0] ? n2.return : u[0] ? n2.throw || ((i2 = n2.return) && i2.call(n2), 0) : n2.next) && !(i2 = i2.call(n2, u[1])).done)
                        return i2;
                      switch (n2 = 0, (u = i2 ? [2 & u[0], i2.value] : u)[0]) {
                        case 0:
                        case 1:
                          i2 = u;
                          break;
                        case 4:
                          return o2.label++, { value: u[1], done: false };
                        case 5:
                          o2.label++, n2 = u[1], u = [0];
                          continue;
                        case 7:
                          u = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(i2 = 0 < (i2 = o2.trys).length && i2[i2.length - 1]) && (6 === u[0] || 2 === u[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u[0] && (!i2 || u[1] > i2[0] && u[1] < i2[3])) {
                            o2.label = u[1];
                            break;
                          }
                          if (6 === u[0] && o2.label < i2[1]) {
                            o2.label = i2[1], i2 = u;
                            break;
                          }
                          if (i2 && o2.label < i2[2]) {
                            o2.label = i2[2], o2.ops.push(u);
                            break;
                          }
                          i2[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u = t3.call(e3, o2);
                    } catch (a4) {
                      u = [6, a4], n2 = 0;
                    } finally {
                      r2 = i2 = 0;
                    }
                  if (5 & u[0])
                    throw u[1];
                  return { value: u[0] ? u[1] : void 0, done: true };
                };
              }
            }(this, function(n2) {
              return t2 = this.miniProgram ? "zego.fileHandler" : "zego.storeHandler", this.fileConfig = o({ maxSize: 5e6, maxFiles: 3, dropPer: 1 }, e2), t2 = r(115)("./" + t2).ZegoStoreImpl, this.storeHandler = new t2(this.product, this.fileConfig, this.miniProgram), [2];
            });
          });
        }, a.prototype.setDB = function(e2) {
          this.storeHandler.setDB(e2);
        }, a.prototype.setLogLevel = function(e2) {
          return void 0 !== (e2 = i.a[e2]) && (this.logLevel = e2, true);
        }, a.prototype.setHeaderInfo = function(e2) {
          this.storeHandler.storeData(e2);
        }, a.prototype.setCommonField = function(e2) {
          return "[object Map]" === Object.prototype.toString.call(e2) && null != e2.get("userID") && "string" == typeof e2.get("userID") && "" !== e2.get("userID") && (this.commonField = e2, this.isUserIDExist = true);
        }, a.prototype.write = function(e2, t2, r2, n2) {
          var o2 = i.a[t2];
          return void 0 !== o2 && (e2 = this.logParams(e2, r2, n2), this.logLevel !== i.a.DISABLE && this.logLevel <= o2 && ("debug" == t2 || "report" == t2 || "info" == t2 ? console.info : console.warn)(e2), this.logRemoteLevel !== i.a.DISABLE && this.logRemoteLevel <= o2 && this.storeHandler.storeData(e2), true);
        }, a.prototype.upload = function(e2, t2, r2) {
          return this.storeHandler.upload(e2, t2, r2);
        }, a.prototype.logParams = function(e2, t2, r2) {
          return "[".concat(this.getCurrentTime(), "][").concat(e2, "][").concat(t2, "]:").concat(r2);
        }, a.prototype.getCurrentTime = function() {
          var e2 = /* @__PURE__ */ new Date();
          return "".concat(this.D[e2.getMonth() + 1] || e2.getMonth() + 1).concat(this.D[e2.getDate()] || e2.getDate(), " ").concat(e2.toLocaleTimeString("zh-CN"), ".").concat(e2.getMilliseconds());
        }, a);
        function a(e2, t2, r2) {
          this.product = e2, this.miniProgram = t2, this.logLevel = i.a.INFO, this.logRemoteLevel = 0, this.isUserIDExist = false, this.D = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"], this.stateCenter = n.a.getInstance(), this.init(r2);
        }
      }, function(e, t) {
        throw new Error('Module parse failed: Unexpected token (1:31)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n> function formDataArray(boundary: string, name: string, value: string): number[] {\n|     return toUtf8Bytes(`${boundary}\\r\\nContent-Disposition: form-data; name="${name}"\\r\\n\\r\\n${value}\\r\\n`);\n| }');
      }, function(e, t) {
        throw new Error("Module parse failed: Unexpected token (5:27)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| import { ZegoStore, FileConfig, UploadRequestParam } from '../zego.entity';\n| \n> export class ZegoStoreImpl implements ZegoStore {\n|     basePath = '';\n|     fileManager: any;");
      }, function(e, t, r) {
        "use strict";
        r.r(t), r.d(t, "ZegoStoreImpl", function() {
          return o;
        });
        t = r(93);
        var n = r.n(t), i = r(7), o = (s.prototype.setDB = function(e2) {
          var t2 = this;
          this.store = e2, this.storeData(this.buffer, function() {
            return t2.buffer.length = 0;
          });
        }, s.prototype.storeData = function(e2, t2) {
          var r2 = this;
          if (e2 && e2.length)
            if (this.store) {
              var n2 = Object(i.b)(), o2 = (/* @__PURE__ */ new Date()).getTime() + "_";
              try {
                var s2 = this.store.transaction([this.tname], "readwrite").objectStore(this.tname);
                "string" == typeof e2 ? s2.put(e2, o2 + n2) : e2.forEach(function(e3, t3) {
                  return s2.put(e3, o2 + n2 + "_" + r2.padStart(t3 / 100));
                });
              } catch (e3) {
              }
              t2 && t2();
            } else
              "string" == typeof e2 ? this.buffer.push(e2) : (t2 = this.buffer).push.apply(t2, function(e3, t3, r3) {
                if (r3 || 2 === arguments.length)
                  for (var n3, i2 = 0, o3 = t3.length; i2 < o3; i2++)
                    !n3 && i2 in t3 || ((n3 = n3 || Array.prototype.slice.call(t3, 0, i2))[i2] = t3[i2]);
                return e3.concat(n3 || Array.prototype.slice.call(t3));
              }([], function(e3, t3) {
                var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
                if (!r3)
                  return e3;
                var n3, i2, o3 = r3.call(e3), s3 = [];
                try {
                  for (; (void 0 === t3 || 0 < t3--) && !(n3 = o3.next()).done; )
                    s3.push(n3.value);
                } catch (e4) {
                  i2 = { error: e4 };
                } finally {
                  try {
                    n3 && !n3.done && (r3 = o3.return) && r3.call(o3);
                  } finally {
                    if (i2)
                      throw i2.error;
                  }
                }
                return s3;
              }(e2), false));
        }, s.prototype.upload = function(e2, t2, r2) {
          var n2 = this, i2 = { time: Date.now(), readTime: 0, appID: e2.appID, userID: e2.userID, version: e2.version, action: t2, apicall: r2, total: 0, files: "", key: "" };
          return this.readData(i2, r2).then(function(t3) {
            var r3, o2;
            if (t3)
              return r3 = (/* @__PURE__ */ new Date()).getTime(), (o2 = new FormData()).append("logs", t3), o2.append("id_name", e2.userID), o2.append("appid", e2.appID), o2.append("timestamp", r3 + ""), o2.append("token", e2.token), o2.append("deviceid", e2.deviceID || ""), o2.append("product", e2.product), o2.append("req_sdk", "1"), new Promise(function(t4, r4) {
                n2.postFile(e2.uploadURL, o2, i2, t4, r4);
              });
          });
        }, s.prototype.postFile = function(e2, t2, r2, n2, i2) {
          var o2 = this, s2 = new XMLHttpRequest();
          s2.open("post", e2), s2.onreadystatechange = function() {
            var a;
            4 == s2.readyState && (200 <= s2.status && s2.status < 300 || 304 == s2.status ? 0 === (a = JSON.parse(s2.responseText)).code ? (r2.time = Date.now() - r2.time, (0, console.log)("ZegoLoggerSDK:upload", JSON.stringify(r2)), o2.postFailCount = 0, o2.clearUploaded(), n2()) : 4 == a.code && (o2.postFailCount++, o2.postFailCount < 3 ? o2.postFile(e2, t2, r2, n2, i2) : (o2.postFailCount = 0, i2(a))) : (o2.postFailCount = 0, i2({ code: 1001, message: "upload fail" })));
          }, s2.send(t2);
        }, s.prototype.readData = function(e2, t2) {
          return function(e3, t3, r2, n2) {
            return new (r2 = r2 || Promise)(function(i2, o2) {
              function s2(e4) {
                try {
                  u(n2.next(e4));
                } catch (e5) {
                  o2(e5);
                }
              }
              function a(e4) {
                try {
                  u(n2.throw(e4));
                } catch (e5) {
                  o2(e5);
                }
              }
              function u(e4) {
                var t4;
                e4.done ? i2(e4.value) : ((t4 = e4.value) instanceof r2 ? t4 : new r2(function(e5) {
                  e5(t4);
                })).then(s2, a);
              }
              u((n2 = n2.apply(e3, t3 || [])).next());
            });
          }(this, void 0, void 0, function() {
            var r2 = this;
            return function(e3, t3) {
              var r3, n2, i2, o2 = { label: 0, sent: function() {
                if (1 & i2[0])
                  throw i2[1];
                return i2[1];
              }, trys: [], ops: [] }, s2 = { next: a(0), throw: a(1), return: a(2) };
              return "function" == typeof Symbol && (s2[Symbol.iterator] = function() {
                return this;
              }), s2;
              function a(s3) {
                return function(a2) {
                  var u = [s3, a2];
                  if (r3)
                    throw new TypeError("Generator is already executing.");
                  for (; o2; )
                    try {
                      if (r3 = 1, n2 && (i2 = 2 & u[0] ? n2.return : u[0] ? n2.throw || ((i2 = n2.return) && i2.call(n2), 0) : n2.next) && !(i2 = i2.call(n2, u[1])).done)
                        return i2;
                      switch (n2 = 0, (u = i2 ? [2 & u[0], i2.value] : u)[0]) {
                        case 0:
                        case 1:
                          i2 = u;
                          break;
                        case 4:
                          return o2.label++, { value: u[1], done: false };
                        case 5:
                          o2.label++, n2 = u[1], u = [0];
                          continue;
                        case 7:
                          u = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(i2 = 0 < (i2 = o2.trys).length && i2[i2.length - 1]) && (6 === u[0] || 2 === u[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u[0] && (!i2 || u[1] > i2[0] && u[1] < i2[3])) {
                            o2.label = u[1];
                            break;
                          }
                          if (6 === u[0] && o2.label < i2[1]) {
                            o2.label = i2[1], i2 = u;
                            break;
                          }
                          if (i2 && o2.label < i2[2]) {
                            o2.label = i2[2], o2.ops.push(u);
                            break;
                          }
                          i2[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u = t3.call(e3, o2);
                    } catch (a3) {
                      u = [6, a3], n2 = 0;
                    } finally {
                      r3 = i2 = 0;
                    }
                  if (5 & u[0])
                    throw u[1];
                  return { value: u[0] ? u[1] : void 0, done: true };
                };
              }
            }(this, function(i2) {
              return [2, new Promise(function(i3) {
                var o2 = 0, s2 = [{ datas: [], size: 0 }], a = r2.store.transaction([r2.tname], "readonly").objectStore(r2.tname);
                a.getAll().onsuccess = function(u) {
                  if (u.target.result.forEach(function(e3) {
                    s2[o2].size > r2.fileConfig.maxSize && (s2[++o2] = { datas: [], size: 0 }), s2[o2].datas.push(e3), s2[o2].size += e3.length + 1;
                  }), 0 == o2 && !t2)
                    return i3(null);
                  a.getAllKeys().onsuccess = function(t3) {
                    r2.lastUploadKey = t3.target.result.pop();
                    var o3 = (t3 = new n.a()).folder("log");
                    o3 && 1 < s2[0].size ? (e2.readTime = Date.now() - e2.time, e2.files = s2.map(function(e3) {
                      return e3.size;
                    }), e2.key = r2.lastUploadKey, s2[s2.length - 1].datas.push(JSON.stringify(e2)), s2.forEach(function(e3, t4) {
                      return o3.file("".concat(r2.product).concat(t4, ".txt"), e3.datas.join("\n"));
                    }), t3.generateAsync({ type: "blob", compression: "DEFLATE", compressionOptions: { level: 9 } }).then(function(t4) {
                      e2.total = t4.size, i3(t4);
                    })) : i3(null);
                  };
                };
              })];
            });
          });
        }, s.prototype.clearUploaded = function() {
          var e2, t2, r2 = this;
          this.lastUploadKey ? (e2 = IDBKeyRange.lowerBound(this.lastUploadKey, true), this.lastUploadKey = "", t2 = [], this.store.transaction([this.tname], "readonly").objectStore(this.tname).openCursor(e2).onsuccess = function(e3) {
            var n2, o2, s2;
            if (!(e3 = e3.target.result))
              return (n2 = r2.store.transaction([r2.tname], "readwrite").objectStore(r2.tname)).clear(), o2 = Object(i.b)(), s2 = (/* @__PURE__ */ new Date()).getTime() + "_", void t2.forEach(function(e4, t3) {
                return n2.put(e4, s2 + o2 + "_" + r2.padStart(t3 / 100));
              });
            t2.push(e3.value), e3.continue();
          }) : this.store.transaction([this.tname], "readwrite").objectStore(this.tname).clear();
        }, s.prototype.padStart = function(e2) {
          return String(e2).replace(".", "");
        }, s);
        function s(e2, t2) {
          this.product = e2, this.fileConfig = t2, this.buffer = [], this.tname = "Log", this.postFailCount = 0, this.lastUploadKey = "";
        }
      }, function(e, t) {
        var r, n;
        e = e.exports = {};
        function i() {
          throw new Error("setTimeout has not been defined");
        }
        function o() {
          throw new Error("clearTimeout has not been defined");
        }
        try {
          r = "function" == typeof setTimeout ? setTimeout : i;
        } catch (e2) {
          r = i;
        }
        try {
          n = "function" == typeof clearTimeout ? clearTimeout : o;
        } catch (e2) {
          n = o;
        }
        function s(e2) {
          if (r === setTimeout)
            return setTimeout(e2, 0);
          if ((r === i || !r) && setTimeout)
            return (r = setTimeout)(e2, 0);
          try {
            return r(e2, 0);
          } catch (t2) {
            try {
              return r.call(null, e2, 0);
            } catch (t3) {
              return r.call(this, e2, 0);
            }
          }
        }
        var a, u = [], c = false, l = -1;
        function d() {
          c && a && (c = false, a.length ? u = a.concat(u) : l = -1, u.length && p());
        }
        function p() {
          if (!c) {
            for (var e2 = s(d), t2 = (c = true, u.length); t2; ) {
              for (a = u, u = []; ++l < t2; )
                a && a[l].run();
              l = -1, t2 = u.length;
            }
            a = null, c = false, function(e3) {
              if (n === clearTimeout)
                return clearTimeout(e3);
              if ((n === o || !n) && clearTimeout)
                return (n = clearTimeout)(e3);
              try {
                n(e3);
              } catch (t3) {
                try {
                  return n.call(null, e3);
                } catch (t4) {
                  return n.call(this, e3);
                }
              }
            }(e2);
          }
        }
        function h(e2, t2) {
          this.fun = e2, this.array = t2;
        }
        function f() {
        }
        e.nextTick = function(e2) {
          var t2 = new Array(arguments.length - 1);
          if (1 < arguments.length)
            for (var r2 = 1; r2 < arguments.length; r2++)
              t2[r2 - 1] = arguments[r2];
          u.push(new h(e2, t2)), 1 !== u.length || c || s(p);
        }, h.prototype.run = function() {
          this.fun.apply(null, this.array);
        }, e.title = "browser", e.browser = true, e.env = {}, e.argv = [], e.version = "", e.versions = {}, e.on = f, e.addListener = f, e.once = f, e.off = f, e.removeListener = f, e.removeAllListeners = f, e.emit = f, e.prependListener = f, e.prependOnceListener = f, e.listeners = function(e2) {
          return [];
        }, e.binding = function(e2) {
          throw new Error("process.binding is not supported");
        }, e.cwd = function() {
          return "/";
        }, e.chdir = function(e2) {
          throw new Error("process.chdir is not supported");
        }, e.umask = function() {
          return 0;
        };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        t = r(13);
        var n = r.n(t), i = (t = r(15), r.n(t)), o = (t = r(16), r.n(t)), s = (t = r(55), r.n(t)), a = (t = r(8), r.n(t)), u = r(6), c = r(56), l = (Object.defineProperty(d.prototype, "publicKey", { get: function() {
          return "-----BEGIN RSA Public Key-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvJiiECE5EzRdVNpj0EYo\nZuPxuALJHft7vrbFJ2Z5W3oq8NWWkS4+L88vkMGOcHh2ORPCI6afuEzYUrtfbMeQ\nKY15UlCKv0pLy/K8ryY340LrXZ7ODywrZn9XArQO6BrBDjshf280oRfOGthNLQbg\nzjbXR52ohdVdMMbFO/cA+8zXLDCAP7Aec7eCFGfaXlgKaqS/hEkGTU13jnaq/Xjq\nzI2TwkZTiG4TE3xxjeoTxrRm13gS0/J0uM4A0xDTAgfDfs+veQO+0Lnivl3UmywQ\nekZgQNHyDQzgsVtsIP9QTNEanQI37LjiBkcHI99YwPspzJjSzVG6tsFZBcbr/lqO\nOQIDAQAB\n-----END RSA Public Key-----";
        }, enumerable: false, configurable: true }), d.prototype.encrypt = function(e2, t2, r2) {
          return e2 = n.a.encrypt(this.uint8Array2WordArray(e2), t2, r2).toString(), u.a.toUint8Array(e2);
        }, d.prototype.decrypt = function(e2, t2, r2) {
          return this.wordArray2Uint8Array(n.a.decrypt(u.a.fromUint8Array(e2), t2, r2));
        }, d.prototype.encryptString = function(e2, t2) {
          return n.a.encrypt(e2, t2.cryptoConfig.appIDKey, t2.cryptoConfig.appIDIV).toString();
        }, d.prototype.decryptString = function(e2, t2) {
          return n.a.decrypt(e2, t2.cryptoConfig.appIDKey, t2.cryptoConfig.appIDIV).toString(o.a);
        }, d.prototype.generateK1Sign = function(e2) {
          var t2 = this.generateNonce();
          e2.cryptoConfig.key1 = o.a.parse(t2), e2.cryptoConfig.iv1 = { iv: i.a.parse(a()(t2).toString().toLowerCase()) }, e2 = new c.a(this.publicKey).encrypt(t2);
          return this.wordArray2Uint8Array(i.a.parse(e2));
        }, d.prototype.decryptK2Sign = function(e2, t2) {
          try {
            t2.cryptoConfig.key2 = n.a.decrypt(u.a.fromUint8Array(e2), t2.cryptoConfig.key1, t2.cryptoConfig.iv1), t2.cryptoConfig.iv2 = { iv: a()(t2.cryptoConfig.key2) };
          } catch (e3) {
          }
        }, d.prototype.generateNonce = function() {
          var e2 = Math.random().toString().substring(2, 18);
          return e2.length < 16 && (e2 += e2.substring(0, 16 - e2.length)), e2;
        }, d.prototype.generateKeyIV = function(e2) {
          return [o.a.parse(e2), { iv: i.a.parse(a()(e2).toString().toLowerCase()) }];
        }, d.prototype.generateAppIDKey = function(e2) {
          var t2 = a()(String(e2.appID)).toString().toLowerCase();
          e2.cryptoConfig.appIDKey = o.a.parse(t2), e2.cryptoConfig.appIDIV = { iv: i.a.parse(t2) };
        }, d.prototype.md5 = function(e2) {
          return this.wordArray2Uint8Array(a()(e2));
        }, d.prototype.md5Bytes = function(e2) {
          return this.wordArray2Uint8Array(a()(this.uint8Array2WordArray(e2)));
        }, d.prototype.wordArray2Uint8Array = function(e2) {
          for (var t2 = e2.words, r2 = e2.sigBytes, n2 = new Uint8Array(r2), i2 = 0; i2 < r2; i2++) {
            var o2 = t2[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255;
            n2[i2] = o2;
          }
          return n2;
        }, d.prototype.uint8Array2WordArray = function(e2) {
          for (var t2 = e2.length, r2 = [], n2 = 0; n2 < t2; n2++)
            r2[n2 >>> 2] |= (255 & e2[n2]) << 24 - n2 % 4 * 8;
          return s.a.create(r2, t2);
        }, d);
        function d() {
        }
      }, function(e, t, r) {
        var n;
        e.exports = (n = r(5), function() {
          var e2, t2;
          "function" == typeof ArrayBuffer && (e2 = n.lib.WordArray, t2 = e2.init, (e2.init = function(e3) {
            if ((e3 = (e3 = e3 instanceof ArrayBuffer ? new Uint8Array(e3) : e3) instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && e3 instanceof Uint8ClampedArray || e3 instanceof Int16Array || e3 instanceof Uint16Array || e3 instanceof Int32Array || e3 instanceof Uint32Array || e3 instanceof Float32Array || e3 instanceof Float64Array ? new Uint8Array(e3.buffer, e3.byteOffset, e3.byteLength) : e3) instanceof Uint8Array) {
              for (var r2 = e3.byteLength, n2 = [], i = 0; i < r2; i++)
                n2[i >>> 2] |= e3[i] << 24 - i % 4 * 8;
              t2.call(this, n2, r2);
            } else
              t2.apply(this, arguments);
          }).prototype = e2);
        }(), n.lib.WordArray);
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(17), i = r(57), o = r(58), s = r(59), a = r(60), u = (c.prototype.parseKey = function(e2) {
          try {
            var t2 = 0, r2 = 0, i2 = /^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e2) ? o.a.decode(e2) : s.a.unarmor(e2), u2 = a.a.decode(i2);
            if (9 === (u2 = 3 === u2.sub.length ? u2.sub[2].sub[0] : u2).sub.length)
              t2 = u2.sub[1].getHexStringValue(), this.n = Object(n.b)(t2, 16), r2 = u2.sub[2].getHexStringValue(), this.e = parseInt(r2, 16);
            else {
              if (2 !== u2.sub.length)
                return false;
              var c2 = u2.sub[1].sub[0];
              t2 = c2.sub[0].getHexStringValue();
              this.n = Object(n.b)(t2, 16), r2 = c2.sub[1].getHexStringValue(), this.e = parseInt(r2, 16);
            }
            return true;
          } catch (e3) {
            return false;
          }
        }, c.prototype.pkcs1pad2 = function(e2, t2) {
          for (var r2 = [], o2 = e2.length - 1; 0 <= o2 && 0 < t2; ) {
            var s2 = e2.charCodeAt(o2--);
            s2 < 128 ? r2[--t2] = s2 : 127 < s2 && s2 < 2048 ? (r2[--t2] = 63 & s2 | 128, r2[--t2] = s2 >> 6 | 192) : (r2[--t2] = 63 & s2 | 128, r2[--t2] = s2 >> 6 & 63 | 128, r2[--t2] = s2 >> 12 | 224);
          }
          r2[--t2] = 0;
          for (var a2 = new i.a(), u2 = []; 2 < t2; ) {
            for (u2[0] = 0; 0 == u2[0]; )
              a2.nextBytes(u2);
            r2[--t2] = u2[0];
          }
          return r2[--t2] = 2, r2[--t2] = 0, new n.a(r2);
        }, c.prototype.encrypt = function(e2) {
          for (var t2 = this.n.bitLength() + 7 >> 3, r2 = this.pkcs1pad2(e2, t2).modPowInt(this.e, this.n).toString(16), n2 = r2.length, i2 = 0; i2 < 2 * t2 - n2; i2++)
            r2 = "0" + r2;
          return r2;
        }, c);
        function c(e2) {
          this.e = 0, this.parseKey(e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return c;
        });
        var n, i = r(20), o = [], s = 0, a = void 0;
        if ("undefined" != typeof window && window.crypto && window.crypto.getRandomValues) {
          var u = new Uint32Array(256);
          for (window.crypto.getRandomValues(u), a = 0; a < u.length; ++a)
            o[s++] = 255 & u[a];
        }
        l.prototype.nextBytes = function(e2) {
          for (var t2 = 0; t2 < e2.length; ++t2)
            e2[t2] = function() {
              if (null == n) {
                for (n = Object(i.a)(); s < i.b; ) {
                  var e3 = Math.floor(65536 * Math.random());
                  o[s++] = 255 & e3;
                }
                for (n.init(o), s = 0; s < o.length; ++s)
                  o[s] = 0;
                s = 0;
              }
              return n.next();
            }();
        };
        var c = l;
        function l() {
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        var n, i = { decode: function(e2) {
          if (void 0 === n) {
            var t2 = "0123456789ABCDEF", r2 = " \f\n\r	\u2028\u2029";
            for (n = {}, a = 0; a < 16; ++a)
              n[t2.charAt(a)] = a;
            for (t2 = t2.toLowerCase(), a = 10; a < 16; ++a)
              n[t2.charAt(a)] = a;
            for (a = 0; a < r2.length; ++a)
              n[r2.charAt(a)] = -1;
          }
          for (var i2 = [], o = 0, s = 0, a = 0; a < e2.length; ++a) {
            var u = e2.charAt(a);
            if ("=" == u)
              break;
            if (-1 != (u = n[u])) {
              if (void 0 === u)
                throw new Error("Illegal character at offset " + a);
              o |= u, 2 <= ++s ? (i2[i2.length] = o, s = o = 0) : o <<= 4;
            }
          }
          if (s)
            throw new Error("Hex encoding incomplete: 4 bits missing");
          return i2;
        } };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        var n, i = { decode: function(e2) {
          if (void 0 === n) {
            var t2 = "= \f\n\r	\u2028\u2029";
            for (n = /* @__PURE__ */ Object.create(null), s = 0; s < 64; ++s)
              n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s)] = s;
            for (n["-"] = 62, n._ = 63, s = 0; s < t2.length; ++s)
              n[t2.charAt(s)] = -1;
          }
          for (var r2 = [], i2 = 0, o = 0, s = 0; s < e2.length; ++s) {
            var a = e2.charAt(s);
            if ("=" == a)
              break;
            if (-1 != (a = n[a])) {
              if (void 0 === a)
                throw new Error("Illegal character at offset " + s);
              i2 |= a, 4 <= ++o ? (r2[r2.length] = i2 >> 16, r2[r2.length] = i2 >> 8 & 255, r2[r2.length] = 255 & i2, o = i2 = 0) : i2 <<= 6;
            }
          }
          switch (o) {
            case 1:
              throw new Error("Base64 encoding incomplete: at least 2 bits missing");
            case 2:
              r2[r2.length] = i2 >> 10;
              break;
            case 3:
              r2[r2.length] = i2 >> 16, r2[r2.length] = i2 >> 8 & 255;
          }
          return r2;
        }, re: /-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/, unarmor: function(e2) {
          var t2 = i.re.exec(e2);
          if (t2)
            if (t2[1])
              e2 = t2[1];
            else {
              if (!t2[2])
                throw new Error("RegExp out of sync");
              e2 = t2[2];
            }
          return i.decode(e2);
        } };
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        });
        var n = r(61), i = (o.prototype.get = function(e2) {
          if ((e2 = void 0 === e2 ? this.pos++ : e2) >= this.enc.length)
            throw new Error("Requesting byte offset " + e2 + " on a stream of length " + this.enc.length);
          return "string" == typeof this.enc ? this.enc.charCodeAt(e2) : this.enc[e2];
        }, o.prototype.hexByte = function(e2) {
          return this.hexDigits.charAt(e2 >> 4 & 15) + this.hexDigits.charAt(15 & e2);
        }, o.prototype.hexDump = function(e2, t2, r2) {
          for (var n2 = "", i2 = e2; i2 < t2; ++i2)
            if (n2 += this.hexByte(this.get(i2)), true !== r2)
              switch (15 & i2) {
                case 7:
                  n2 += "  ";
                  break;
                case 15:
                  n2 += "\n";
                  break;
                default:
                  n2 += " ";
              }
          return n2;
        }, o);
        function o(e2, t2) {
          this.hexDigits = "0123456789ABCDEF", e2 instanceof o ? (this.enc = e2.enc, this.pos = e2.pos) : (this.enc = e2, this.pos = t2);
        }
        a.prototype.posStart = function() {
          return this.stream.pos;
        }, a.prototype.posEnd = function() {
          return this.stream.pos + this.header + Math.abs(this.length);
        }, a.prototype.toHexString = function() {
          return this.stream.hexDump(this.posStart(), this.posEnd(), true);
        }, a.decodeLength = function(e2) {
          var t2 = 127 & (r2 = e2.get());
          if (t2 == r2)
            return t2;
          if (6 < t2)
            throw new Error("Length over 48 bits not supported at position " + (e2.pos - 1));
          if (0 == t2)
            return null;
          for (var r2 = 0, n2 = 0; n2 < t2; ++n2)
            r2 = 256 * r2 + e2.get();
          return r2;
        }, a.prototype.getHexStringValue = function() {
          var e2 = this.toHexString(), t2 = 2 * this.header, r2 = 2 * this.length;
          return e2.substr(t2, r2);
        }, a.decode = function(e2) {
          function t2() {
            var e3 = [];
            if (null !== o2) {
              for (var t3 = s2 + o2; r2.pos < t3; )
                e3[e3.length] = a.decode(r2);
              if (r2.pos != t3)
                throw new Error("Content size is not correct for container starting at offset " + s2);
            } else
              try {
                for (; ; ) {
                  var n3 = a.decode(r2);
                  if (n3.tag.isEOC())
                    break;
                  e3[e3.length] = n3;
                }
                o2 = s2 - r2.pos;
              } catch (e4) {
                throw new Error("Exception while decoding undefined length content: " + e4);
              }
            return e3;
          }
          var r2 = e2 instanceof i ? e2 : new i(e2, 0), n2 = (e2 = new i(r2), new u(r2)), o2 = a.decodeLength(r2), s2 = r2.pos, c2 = s2 - e2.pos, l = null;
          if (n2.tagConstructed)
            l = t2();
          else if (n2.isUniversal() && (3 == n2.tagNumber || 4 == n2.tagNumber))
            try {
              if (3 == n2.tagNumber && 0 != r2.get())
                throw new Error("BIT STRINGs with unused bits cannot encapsulate.");
              l = t2();
              for (var d = 0; d < l.length; ++d)
                if (l[d].tag.isEOC())
                  throw new Error("EOC is not supposed to be actual content.");
            } catch (e3) {
              l = null;
            }
          if (null === l) {
            if (null === o2)
              throw new Error("We can't skip over an invalid tag with undefined length at offset " + s2);
            r2.pos = s2 + Math.abs(o2);
          }
          return new a(e2, c2, o2, n2, l);
        };
        var s = a;
        function a(e2, t2, r2, n2, i2) {
          if (!(n2 instanceof u))
            throw new Error("Invalid tag value.");
          this.stream = e2, this.header = t2, this.length = r2, this.tag = n2, this.sub = i2;
        }
        c.prototype.isUniversal = function() {
          return 0 === this.tagClass;
        }, c.prototype.isEOC = function() {
          return 0 === this.tagClass && 0 === this.tagNumber;
        };
        var u = c;
        function c(e2) {
          var t2 = e2.get();
          if (this.tagClass = t2 >> 6, this.tagConstructed = 0 != (32 & t2), this.tagNumber = 31 & t2, 31 == this.tagNumber) {
            for (var r2 = new n.a(); t2 = e2.get(), r2.mulAdd(128, 127 & t2), 128 & t2; )
              ;
            this.tagNumber = r2.simplify();
          }
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        }), i.prototype.mulAdd = function(e2, t2) {
          for (var r2, n2 = this.buf, i2 = n2.length, o = 0; o < i2; ++o)
            (r2 = n2[o] * e2 + t2) < 1e13 ? t2 = 0 : r2 -= 1e13 * (t2 = 0 | r2 / 1e13), n2[o] = r2;
          0 < t2 && (n2[o] = t2);
        }, i.prototype.sub = function(e2) {
          for (var t2, r2 = this.buf, n2 = r2.length, i2 = 0; i2 < n2; ++i2)
            e2 = (t2 = r2[i2] - e2) < 0 ? (t2 += 1e13, 1) : 0, r2[i2] = t2;
          for (; 0 === r2[r2.length - 1]; )
            r2.pop();
        }, i.prototype.simplify = function() {
          var e2 = this.buf;
          return 1 == e2.length ? e2[0] : this;
        };
        var n = i;
        function i(e2) {
          this.buf = [+e2 || 0];
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return k;
        });
        var n = r(6), i = r(2), o = r(63), s = r(64), a = r(65), u = r(68), c = r(74), l = r(75), d = r(76), p = r(78), h = r(1), f = r(0), g = (t = function(e2, t2, r2, n2) {
          var i2, o2 = arguments.length, s2 = o2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, r2) : n2;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
            s2 = Reflect.decorate(e2, t2, r2, n2);
          else
            for (var a2 = e2.length - 1; 0 <= a2; a2--)
              (i2 = e2[a2]) && (s2 = (o2 < 3 ? i2(s2) : 3 < o2 ? i2(t2, r2, s2) : i2(t2, r2)) || s2);
          return 3 < o2 && s2 && Object.defineProperty(t2, r2, s2), s2;
        }, f.Y.User), m = f.Y.Conversation, _ = f.Y.Room, b = f.Y.Group, v = f.Y.Call, y = f.Y.Friend, M = f.Y.Database, k = (C.prototype.handleBizPushEvent = function(e2, t2, r2) {
          var n2 = "";
          switch (e2) {
            case f.d.p_c2c_msg.cmd:
            case f.d.p_room_msg.cmd:
            case f.d.p_group_msg.cmd:
              return n2 = this.convMgr.onPushMessage(t2, e2), this.addMsgPushEvent(e2, r2, n2, t2);
            case f.d.p_c2c_command.cmd:
            case f.d.p_room_command.cmd:
            case f.d.p_group_command.cmd:
              return n2 = this.convMgr.onPushCommand(t2, e2), this.addMsgPushEvent(e2, r2, n2, t2);
            case f.d.p_msg_to_all_users.cmd:
              return this.convMgr.onPushBroadcastMessage(t2), this.addMsgPushEvent(e2, r2, "", t2);
            case f.d.p_read_receipt.cmd:
              return this.convMgr.onPushReadReceipt(t2);
            case f.d.p_msg_revoke.cmd:
              return this.convMgr.onPushMsgRevoke(t2);
            case f.d.p_reaction.cmd:
              return this.convMgr.onPushReaction(t2);
            case f.d.p_room_enter.cmd:
              return this.groupMgr.onPushRoomEnter(t2);
            case f.d.p_room_quit.cmd:
              return this.groupMgr.onPushRoomQuit(t2);
            case f.d.p_room_kickout.cmd:
              return this.groupMgr.onPushRoomKickout(t2);
            case f.d.p_room_attrs.cmd:
              return this.groupMgr.onPushRoomAttributesModify(t2);
            case f.d.p_room_user_attrs.cmd:
              return this.groupMgr.onPushRoomUserAttributesModify(t2);
            case f.d.p_group_create.cmd:
              return this.groupMgr.onPushGroupCreate(t2);
            case f.d.p_group_invite.cmd:
              return this.groupMgr.onPushGroupJoin(t2, false);
            case f.d.p_group_member_kickout.cmd:
              return this.groupMgr.onPushGroupDestroy(t2, f.L.KickedOut);
            case f.d.p_group_destroy.cmd:
              return this.groupMgr.onPushGroupDestroy(t2, f.L.Dismissed);
            case f.d.p_group_modify_data.cmd:
              return this.groupMgr.onPushGroupDataModify(t2);
            case f.d.p_group_modify_attr.cmd:
              return this.groupMgr.onPushGroupAttributesModify(t2);
            case f.d.p_group_owner_transfer.cmd:
              return this.groupMgr.onPushGroupOwnerTransfer(t2);
            case f.d.p_group_member_change.cmd:
              return this.groupMgr.onPushGroupMemberChange(t2);
            case f.d.p_group_apply.cmd:
              return this.groupMgr.onPushGroupApply(t2);
            case f.d.p_group_enter_apply.cmd:
              return this.groupMgr.onPushGroupEnterApply(t2);
            case f.d.p_call_invite.cmd:
              return this.callMgr.onPushCallInvited(t2);
            case f.d.p_call_cancel.cmd:
              return this.callMgr.onPushCallCancel(t2);
            case f.d.p_call_accept.cmd:
              return this.callMgr.onPushCallAccept(t2);
            case f.d.p_call_refuse.cmd:
              return this.callMgr.onPushCallReject(t2);
            case f.d.p_call_inviting.cmd:
              return this.callMgr.onPushCallingInvite(t2);
            case f.d.p_call_quit.cmd:
              return this.callMgr.onPushCallQuit(t2);
            case f.d.p_call_destroy.cmd:
              return this.callMgr.onPushCallEnd(t2);
            case f.d.p_call_ack.cmd:
              return this.callMgr.onPushCallAck(t2);
            case f.d.p_call_enter.cmd:
              return this.callMgr.onPushCallEnter(t2);
            case f.d.p_call_ack_timeout.cmd:
              return this.callMgr.onPushCallAckTimeout(t2);
            case f.d.p_friend_add.cmd:
              return this.friendMgr.onPushFriendAdded(t2);
            case f.d.p_friend_delete.cmd:
              return this.friendMgr.onPushFriendDeleted(t2);
            case f.d.p_friend_delete_all.cmd:
              return this.friendMgr.onPushFriendAllDeleted(t2);
            case f.d.p_friend_apply.cmd:
              return this.friendMgr.onPushFriendApply(t2);
            case f.d.p_friend_accept.cmd:
              return this.friendMgr.onPushFriendAccept(t2);
            case f.d.p_friend_refuse.cmd:
              return this.friendMgr.onPushFriendReject(t2);
            case f.d.p_detaillog_report.cmd:
              return this.logger.upload("push", true);
            case f.d.mp_user_modify.cmd:
              return this.userMgr.onPushUpdateUserInfo(t2);
            case f.d.mp_msg_delete.cmd:
              return this.convMgr.onPushMsgDelete(t2);
            case f.d.mp_conv_delete.cmd:
              return this.convMgr.onPushConvDelete(t2);
            case f.d.mp_conv_readseq.cmd:
              return this.convMgr.onPushConvRead(t2);
            case f.d.mp_conv_pinned.cmd:
              return this.convMgr.onPushConvPinned(t2);
            case f.d.mp_conv_mute.cmd:
              return this.convMgr.onPushConvMute(t2);
            case f.d.mp_group_enter.cmd:
              return this.groupMgr.onPushGroupJoin(t2, true);
            case f.d.mp_group_quit.cmd:
              return this.groupMgr.onPushGroupDestroy(t2, f.L.Left);
            case f.d.mp_del_all_conv.cmd:
              return this.convMgr.onPushConvAllDelete(t2);
            case f.d.mp_clean_unread.cmd:
              return this.convMgr.onPushCleanAllUnread(t2);
            case f.d.mp_blacklist_add.cmd:
              return this.friendMgr.onPushBlacklistAdded(t2);
            case f.d.mp_clean_all_msg.cmd:
              return this.convMgr.onPushCleanAllMsgs(t2);
            case f.d.mp_blacklist_delete.cmd:
              return this.friendMgr.onPushBlacklistDeleted(t2);
            case f.d.mp_friend_add.cmd:
              return this.friendMgr.onPushFriendAdded(t2, true);
            case f.d.mp_friend_delete.cmd:
              return this.friendMgr.onPushFriendDeleted(t2, true);
            case f.d.mp_friend_apply.cmd:
              return this.friendMgr.onPushFriendApply(t2, true);
            case f.d.mp_friend_accept.cmd:
              return this.friendMgr.onPushFriendAccept(t2);
            case f.d.mp_friend_refuse.cmd:
              return this.friendMgr.onPushFriendReject(t2);
            case f.d.mp_friend_attr_modify.cmd:
              return this.friendMgr.onPushFriendAttributesUpdated(t2);
            case f.d.mp_friend_remark_modify.cmd:
              return this.friendMgr.onPushFriendRemarkUpdated(t2);
            case f.d.mp_c2c_mute.cmd:
              return this.convMgr.onPushC2CMute(t2);
          }
        }, C.prototype.addMsgPushEvent = function(e2, t2, r2, n2) {
          (t2 < -200 || 200 < t2) && this.dataReport.reportPushEvent(e2, t2, r2, n2), 0 < t2 && this.msgPushMap[e2].times.push(t2);
        }, C.prototype.addMessagePushDelay = function(e2, t2, r2) {
          var n2, i2, o2, s2 = t2.length;
          s2 < 1 || (i2 = t2[n2 = 0], o2 = 0, t2.forEach(function(e3) {
            n2 += e3, e3 < i2 && (i2 = e3), o2 < e3 && (o2 = e3);
          }), t2.length = 0, r2.flag = true, r2[e2 + "_count"] = s2, r2[e2 + "_ave_time_consumed"] = Math.floor(n2 / s2), r2[e2 + "_max_time_consumed"] = o2, r2[e2 + "_min_time_consumed"] = i2);
        }, C.prototype.createNotLoggedError = function(e2, t2) {
          var r2;
          if (!this.engineConfig.user.userID || !this.engineConfig.token)
            return r2 = Object(h.x)(f.t.NetworkModuleUserIsNotLogged), this.logger.warn(e2, t2, r2), r2;
        }, C.prototype.setZPNsContext = function(e2) {
          var t2 = e2.pushSDKVersion.length, r2 = e2.pushID.length, i2 = new Uint8Array(9 + t2 + r2);
          i2[0] = 175, i2[1] = 0, i2[2] = 1, i2[3] = 1, i2[4] = 7, i2[5] = 0, i2[6] = t2, i2[7] = r2 >> 8, i2[8] = r2 - (i2[7] << 8), i2.set(Object(h.k)(e2.pushSDKVersion), 9), i2.set(Object(h.k)(e2.pushID), 9 + t2), r2 = n.a.fromUint8Array(i2);
          this.engineConfig.ZPNsPushID = r2, this.userMgr && this.userMgr.reportZPNs(), e2.base64 = r2, this.logger.info(f.Y.Manager, "reportZPNs", e2);
        }, C.prototype.setContext = function(e2) {
          this.eventBus.setContext(e2);
        }, C.prototype.destroy = function() {
          this.eventBus && this.eventBus.off(), this.eventBus = null, this.groupMgr.destroy(), this.groupMgr = null, this.convMgr.destroy(), this.convMgr = null, this.userMgr.destroy(), this.userMgr = null, this.callMgr.destroy(), this.callMgr = null, this.friendMgr.destroy(), this.friendMgr = null, this.connMgr.destroy(), this.connMgr = null, this.dbMgr.destroy(), this.dbMgr = null, this.logger = null, this.engineConfig = null;
        }, C.prototype.uploadLog = function() {
          return this.logger.upload("apicall", true);
        }, C.prototype.on = function(e2, t2) {
          "function" == typeof t2 && (this.eventBus.on(e2, t2), this.logger.info(f.Y.Manager, "API.on", e2));
        }, C.prototype.off = function(e2) {
          this.eventBus.off(e2), this.logger.info(f.Y.Manager, "API.off", e2);
        }, C.prototype.login = function(e2, t2) {
          var r2 = this.paramValid.validID("userID", e2, g, f.X.Login);
          return r2 ? Promise.reject(r2) : this.userMgr.login(e2, t2);
        }, C.prototype.logout = function() {
          this.userMgr.logout();
        }, C.prototype.renewToken = function(e2) {
          return this.userMgr.renewToken(e2);
        }, C.prototype.queryUsersInfo = function(e2, t2) {
          var r2 = this.paramValid.validArray("userIDs", e2, g, f.X.QueryUsersInfo);
          return r2 ? Promise.reject(r2) : this.convMgr.queryUsersInfo(e2, t2);
        }, C.prototype.updateUserName = function(e2) {
          var t2 = this.paramValid.validName("userName", e2, g, f.X.UpdateUserName);
          return t2 ? Promise.reject(t2) : this.userMgr.updateUserName(e2);
        }, C.prototype.updateUserAvatarUrl = function(e2) {
          var t2 = this.paramValid.validName("userAvatarUrl", e2, g, f.X.UpdateUserAvatarUrl);
          return t2 ? Promise.reject(t2) : this.userMgr.updateUserAvatarUrl(e2);
        }, C.prototype.updateUserExtendedData = function(e2) {
          var t2 = this.paramValid.validName("extendedData", e2, g, f.X.UpdateUserExtendedData);
          return t2 ? Promise.reject(t2) : this.userMgr.updateUserExtendedData(e2);
        }, C.prototype.updateUserOfflinePushRule = function(e2) {
          var t2 = this.paramValid.updateUserOfflinePushRule(e2);
          return t2 ? Promise.reject(t2) : this.userMgr.updateUserOfflinePushRule(e2);
        }, C.prototype.querySelfUserInfo = function() {
          return this.userMgr.querySelfUserInfo();
        }, C.prototype.queryConversation = function(e2, t2) {
          var r2 = this.paramValid.validConvIDAndType(e2, t2, f.X.QueryConv);
          return r2 ? Promise.reject(r2) : this.convMgr.query(e2, t2);
        }, C.prototype.queryConversationList = function(e2) {
          var t2 = this.paramValid.validCount(e2, m, f.X.QueryConvList);
          return t2 ? Promise.reject(t2) : this.convMgr.queryList(e2);
        }, C.prototype.queryConversationPinnedList = function(e2) {
          var t2 = this.paramValid.validCount(e2, m, f.X.QueryPinnedList);
          return t2 ? Promise.reject(t2) : this.convMgr.queryPinnedList(e2);
        }, C.prototype.deleteConversation = function(e2, t2, r2) {
          var n2 = this.paramValid.validConvIDAndType(e2, t2, f.X.DeleteConv);
          return n2 ? Promise.reject(n2) : this.convMgr.delete(e2, t2, r2);
        }, C.prototype.deleteAllConversations = function(e2) {
          return this.convMgr.deleteAll(e2);
        }, C.prototype.clearConversationUnreadMessageCount = function(e2, t2) {
          var r2 = this.paramValid.validConvIDAndType(e2, t2, f.X.ClearUnreadCount);
          return r2 ? Promise.reject(r2) : this.convMgr.clearUnreadCount(e2, t2);
        }, C.prototype.clearConversationTotalUnreadMessageCount = function() {
          return this.convMgr.clearAllUnreadCount();
        }, C.prototype.deleteAllConversationMessages = function(e2) {
          return this.convMgr.delAllConMsgs(e2);
        }, C.prototype.setConversationNotificationStatus = function(e2, t2, r2) {
          var n2 = this.paramValid.setNotificationStatus(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.convMgr.setNotificationStatus(e2, t2, r2);
        }, C.prototype.updateConversationPinnedState = function(e2, t2, r2) {
          var n2 = this.paramValid.validConvIDAndType(t2, r2, f.X.UpdatePinnedState);
          return n2 ? Promise.reject(n2) : this.convMgr.updatePinnedState(!!e2, t2, r2);
        }, C.prototype.setConversationDraft = function(e2, t2, r2) {
          var n2 = this.paramValid.setConversationDraft(t2, r2, e2);
          return n2 ? Promise.reject(n2) : this.convMgr.setConvDraft(e2, t2, r2);
        }, C.prototype.sendMessage = function(e2, t2, r2, n2, i2) {
          var o2, s2 = this.paramValid.sendMessage(e2, t2, r2, n2) || this.paramValid.sendCombineMessage(e2, this.engineConfig.cloudSetting.scale.cb_msg_title_len, this.engineConfig.cloudSetting.scale.cb_msg_summary_len);
          return s2 ? (o2 = { status: f.fb.Failed, message: e2 }, this.eventBus.emit(f.u.MsgSentStatus, { infos: [o2] }), Promise.reject(s2)) : this.convMgr.sendMessage(e2, t2, r2, n2, i2);
        }, C.prototype.sendMediaMessage = function(e2, t2, r2, n2, i2) {
          var o2, s2 = e2;
          return (e2 = this.paramValid.sendMediaMessage(e2, t2, r2, n2)) ? (o2 = { status: f.fb.Failed, message: s2 }, this.eventBus.emit(f.u.MsgSentStatus, { infos: [o2] }), Promise.reject(e2)) : this.convMgr.sendMediaMessage(s2, t2, r2, n2, i2);
        }, C.prototype.deleteMessages = function(e2, t2, r2, n2) {
          n2 = Object.assign({ isAlsoDeleteServerMessage: true }, n2);
          var i2 = this.paramValid.deleteMessages(e2, t2, r2, n2);
          return i2 ? Promise.reject(i2) : e2.length || n2.isAlsoDeleteServerMessage ? this.convMgr.deleteMessages(e2, t2, r2, n2) : Promise.resolve({ conversationID: t2, conversationType: r2 });
        }, C.prototype.deleteAllMessage = function(e2, t2, r2) {
          var n2 = this.paramValid.validConvIDAndType(e2, t2, f.X.DeleteAllMessage);
          return n2 ? Promise.reject(n2) : this.convMgr.deleteAllMessage(e2, t2, r2);
        }, C.prototype.queryHistoryMessage = function(e2, t2, r2) {
          var n2 = this.paramValid.queryHistoryMessage(e2, t2, r2);
          return n2 ? Promise.reject(n2) : r2.count < 1 ? Promise.resolve({ conversationID: e2, conversationType: t2, messageList: [] }) : this.convMgr.queryHistoryMessage(e2, t2, r2);
        }, C.prototype.insertMessageToLocalDB = function(e2, t2, r2, n2) {
          var i2 = this.paramValid.insertMessageToLocalDB(e2, t2, r2, n2);
          return i2 ? Promise.reject(i2) : this.convMgr.insertMessageToLocalDB(e2, t2, r2, n2);
        }, C.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          var r2 = this.paramValid.updateMessageLocalExtendedData(e2, t2);
          return r2 ? Promise.reject(r2) : this.convMgr.updateMessageLocalExtendedData(e2, t2);
        }, C.prototype.revokeMessage = function(e2, t2) {
          var r2 = this.paramValid.validSDKMessage(e2, f.X.RevokeMessage);
          return r2 ? Promise.reject(r2) : this.convMgr.revokeMessage(e2, t2);
        }, C.prototype.queryCombineMessageDetail = function(e2) {
          var t2 = this.paramValid.queryCombineMessageDetail(e2);
          return t2 ? Promise.reject(t2) : this.convMgr.queryCombineMessageDetail(e2);
        }, C.prototype.sendReceiptRead = function(e2, t2) {
          var r2 = this.paramValid.sendReceiptRead(e2, t2);
          return r2 ? Promise.reject(r2) : this.convMgr.sendReceiptRead(e2, t2);
        }, C.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          var n2 = this.paramValid.sendMessageReceiptsRead(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.convMgr.sendMessageReceiptsRead(e2, t2, r2);
        }, C.prototype.queryMessageReceiptsInfo = function(e2, t2, r2) {
          var n2 = this.paramValid.queryReceiptsInfo(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.convMgr.queryReceiptsInfo(e2, t2, r2);
        }, C.prototype.queryReceiptMemberList = function(e2, t2, r2, n2) {
          var i2 = this.engineConfig.user.userID;
          return (i2 = this.paramValid.queryReceiptMemberList(e2, t2, r2, n2, i2)) ? Promise.reject(i2) : r2.count < 1 || e2.direction == f.ab.Receive ? Promise.resolve({ groupID: t2, nextFlag: 0, userList: [] }) : this.groupMgr.queryReceiptMemberList(e2, t2, r2, n2);
        }, C.prototype.addMessageReaction = function(e2, t2) {
          var r2 = this.paramValid.messageReaction(e2, t2, true);
          return r2 ? Promise.reject(r2) : this.convMgr.addMessageReaction(e2, t2);
        }, C.prototype.deleteMessageReaction = function(e2, t2) {
          var r2 = this.paramValid.messageReaction(e2, t2);
          return r2 ? Promise.reject(r2) : this.convMgr.deleteMessageReaction(e2, t2);
        }, C.prototype.queryMessageReactionUserList = function(e2, t2) {
          var r2 = this.paramValid.queryMessageBase(e2, t2, f.X.QueryReaction);
          return r2 ? Promise.reject(r2) : t2.count < 1 ? (r2 = { totalCount: 0, nextFlag: 0, reactionType: t2.reactionType, userList: [], message: e2 }, Promise.resolve(r2)) : this.convMgr.queryMessageReactionUserList(e2, t2);
        }, C.prototype.createRoom = function(e2, t2) {
          var r2 = this.paramValid.createRoom(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.createRoom(e2, t2);
        }, C.prototype.enterRoom = function(e2, t2) {
          var r2 = this.paramValid.createRoom(e2, t2, true);
          return r2 ? Promise.reject(r2) : this.groupMgr.createRoom(e2, t2, true);
        }, C.prototype.joinRoom = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, _, f.X.JoinRoom);
          return t2 ? Promise.reject(t2) : this.groupMgr.joinRoom(e2);
        }, C.prototype.leaveRoom = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, _, f.X.LeaveRoom);
          return t2 ? Promise.reject(t2) : this.groupMgr.leaveRoom(e2);
        }, C.prototype.leaveAllRoom = function() {
          return this.groupMgr.leaveAllRoom();
        }, C.prototype.queryRoomMemberList = function(e2, t2) {
          var r2 = this.paramValid.validCount(t2, _, f.X.QueryRoomMemberList, "roomID", e2);
          return r2 ? Promise.reject(r2) : t2.count < 1 ? Promise.resolve({ roomID: e2, memberList: [], nextFlag: t2.nextFlag || "" }) : this.groupMgr.queryRoomMemberList(e2, t2);
        }, C.prototype.queryRoomMembers = function(e2, t2) {
          var r2 = this.paramValid.validIDAndArray("roomID", t2, "userIDs", e2, _, f.X.QueryRoomMemberList);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryRoomMembers(e2, t2);
        }, C.prototype.queryRoomOnlineMemberCount = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, _, f.X.QueryRoomOnlineMemberCount);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryRoomOnlineMemberCount(e2);
        }, C.prototype.queryRoomAllAttributes = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, _, f.X.QueryRoomAllAttributes);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryRoomAllAttributes(e2);
        }, C.prototype.setRoomAttributes = function(e2, t2, r2) {
          var n2 = this.paramValid.setRoomAttributes(e2, t2);
          return n2 ? Promise.reject(n2) : this.groupMgr.setRoomAttributes(e2, t2, r2);
        }, C.prototype.deleteRoomAttributes = function(e2, t2, r2) {
          var n2 = this.paramValid.validIDAndArray("roomID", t2, "keys", e2, _, f.X.DeleteRoomAttributes);
          return n2 ? Promise.reject(n2) : this.groupMgr.deleteRoomAttributes(e2, t2, r2);
        }, C.prototype.beginRoomAttributesBatchOperation = function(e2, t2) {
          this.groupMgr.beginRoomAttributesBatchOperation(e2, t2);
        }, C.prototype.endRoomAttributesBatchOperation = function(e2) {
          var t2 = this.paramValid.validID("roomID", e2, _, f.X.EndRoomAttributesBatchOperation);
          return t2 ? Promise.reject(t2) : this.groupMgr.endRoomAttributesBatchOperation(e2);
        }, C.prototype.setRoomMembersAttributes = function(e2, t2, r2, n2) {
          var i2 = this.paramValid.setRoomMembersAttributes(e2, t2, r2);
          return i2 ? Promise.reject(i2) : this.groupMgr.setRoomMembersAttributes(e2, t2, r2, n2);
        }, C.prototype.queryRoomMembersAttributes = function(e2, t2) {
          var r2 = this.paramValid.validIDAndArray("roomID", t2, "userIDs", e2, _, f.X.QueryRoomMembersAttributes);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryRoomMembersAttributes(e2, t2);
        }, C.prototype.queryRoomMemberAttributesList = function(e2, t2) {
          var r2 = this.paramValid.validID("roomID", e2, _, f.X.QueryRoomMemberAttributesList);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryRoomMemberAttributesList(e2, t2);
        }, C.prototype.createGroup = function(e2, t2, r2) {
          e2 = Object.assign({}, e2), r2 = Object.assign({ groupAttributes: {}, groupNotice: "" }, r2);
          var n2 = this.paramValid.createGroup(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.groupMgr.createGroup(e2, t2, r2);
        }, C.prototype.joinGroup = function(e2, t2, r2) {
          var n2 = e2 ? f.X.JoinGroup : f.X.SendGroupJoinApp;
          return (n2 = this.paramValid.validID("groupID", t2, b, n2)) ? Promise.reject(n2) : this.groupMgr.joinGroup(e2, t2, r2);
        }, C.prototype.leaveGroup = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, b, f.X.LeaveGroup);
          return t2 ? Promise.reject(t2) : this.groupMgr.leaveGroup(e2);
        }, C.prototype.dismissGroup = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, b, f.X.DismissGroup);
          return t2 ? Promise.reject(t2) : this.groupMgr.dismissGroup(e2);
        }, C.prototype.queryGroupList = function() {
          return this.groupMgr.queryGroupList();
        }, C.prototype.updateGroupInfo = function(e2, t2, r2) {
          var n2 = this.paramValid.validIDAndName("groupID", t2, ["groupNotice", "groupName", "groupAvatarUrl"][r2], e2, b, f.X.UpdateGroupInfo);
          return n2 ? Promise.reject(n2) : this.groupMgr.updateGroupInfo(e2, t2, r2);
        }, C.prototype.muteGroup = function(e2, t2, r2) {
          return r2 = Object.assign({ mode: f.U.All, duration: -1, roles: [] }, r2), e2 || (r2.mode = f.U.None, r2.duration = 0, r2.roles = []), (e2 = this.paramValid.muteGroup(t2, r2, e2)) ? Promise.reject(e2) : this.groupMgr.muteGroup(t2, r2);
        }, C.prototype.queryGroupInfo = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, b, f.X.QueryGroupInfo);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryGroupInfo(e2);
        }, C.prototype.setGroupAttributes = function(e2, t2) {
          var r2 = this.paramValid.setGroupAttributes(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.setGroupAttributes(e2, t2);
        }, C.prototype.deleteGroupAttributes = function(e2, t2) {
          var r2 = this.paramValid.validIDAndArray("groupID", t2, "keys", e2, b, f.X.DeleteGroupAttributes);
          return r2 ? Promise.reject(r2) : this.groupMgr.deleteGroupAttributes(e2, t2);
        }, C.prototype.queryGroupAttributes = function(e2, t2) {
          var r2 = this.paramValid.queryGroupAttributes(e2, t2);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryGroupAttributes(e2, t2);
        }, C.prototype.transferGroupOwner = function(e2, t2) {
          var r2 = this.paramValid.validTwoID("toUserID", e2, "groupID", t2, b, f.X.TransferGroupOwner);
          return r2 ? Promise.reject(r2) : this.groupMgr.transferGroupOwner(e2, t2);
        }, C.prototype.inviteUsersIntoGroup = function(e2, t2, r2, n2) {
          var i2 = this.paramValid.validIDAndArray("groupID", r2, "userIDs", t2, b, e2 ? f.X.SendGroupInviteApp : f.X.InviteUsersIntoGroup);
          return i2 ? Promise.reject(i2) : this.groupMgr.inviteUsersIntoGroup(e2, t2, r2, n2);
        }, C.prototype.kickGroupMembers = function(e2, t2) {
          var r2 = this.paramValid.validIDAndArray("groupID", t2, "userIDs", e2, b, f.X.KickGroupMembers);
          return r2 ? Promise.reject(r2) : this.groupMgr.kickGroupMembers(e2, t2);
        }, C.prototype.queryGroupMemberList = function(e2, t2) {
          t2 = Object.assign({ count: 100, nextFlag: 0 }, t2);
          var r2 = this.paramValid.validCount(t2, b, f.X.QueryGroupMemberList, "groupID", e2);
          return r2 ? Promise.reject(r2) : t2.count < 1 ? Promise.resolve({ groupID: e2, userList: [], nextFlag: t2.nextFlag }) : this.groupMgr.queryGroupMemberList(e2, t2);
        }, C.prototype.queryGroupMemberCount = function(e2) {
          var t2 = this.paramValid.validID("groupID", e2, b, f.X.QueryGroupMemberCount);
          return t2 ? Promise.reject(t2) : this.groupMgr.queryGroupMemberCount(e2);
        }, C.prototype.muteGroupMembers = function(e2, t2, r2, n2) {
          var i2 = this.paramValid.validIDAndArray("groupID", r2, "userIDs", t2, b, f.X.MuteGroupMembers);
          return i2 ? Promise.reject(i2) : this.groupMgr.muteGroupMembers(e2, t2, r2, n2);
        }, C.prototype.queryGroupMemberMutedList = function(e2, t2) {
          t2 = Object.assign({ count: 100, nextFlag: 0 }, t2);
          var r2 = this.paramValid.validCount(t2, b, f.X.QueryGroupMemberMutedList, "groupID", e2);
          return r2 ? Promise.reject(r2) : t2.count < 1 ? Promise.resolve({ groupID: e2, userList: [], nextFlag: t2.nextFlag }) : this.groupMgr.queryGroupMemberMutedList(e2, t2);
        }, C.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          var n2 = this.paramValid.setGroupMemberNickname(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.groupMgr.setGroupMemberNickname(e2, t2, r2);
        }, C.prototype.setGroupMemberRole = function(e2, t2, r2) {
          var n2 = this.paramValid.setGroupMemberRole(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.groupMgr.setGroupMemberRole(e2, t2, r2);
        }, C.prototype.queryGroupMemberInfo = function(e2, t2) {
          var r2 = this.paramValid.validTwoID("userID", e2, "groupID", t2, b, f.X.QueryGroupMemberInfo);
          return r2 ? Promise.reject(r2) : this.groupMgr.queryGroupMemberInfo(e2, t2);
        }, C.prototype.updateGroupVerifyMode = function(e2, t2, r2) {
          var n2 = this.paramValid.updateGroupVerifyMode(e2, t2, r2);
          return n2 ? Promise.reject(n2) : this.groupMgr.updateGroupVerifyMode(e2, t2, r2);
        }, C.prototype.acceptGroupApply = function(e2, t2, r2, n2) {
          var i2 = this.paramValid.validTwoID("userID", t2, "groupID", r2, b, "API.acceptGroupApplication");
          return i2 ? Promise.reject(i2) : this.groupMgr.acceptGroupApply(e2, t2, r2, n2);
        }, C.prototype.rejectGroupApply = function(e2, t2, r2, n2) {
          var i2 = this.paramValid.validTwoID("userID", t2, "groupID", r2, b, "API.rejectGroupApplication");
          return i2 ? Promise.reject(i2) : this.groupMgr.rejectGroupApply(e2, t2, r2, n2);
        }, C.prototype.queryGroupApplyList = function(e2) {
          e2 = Object.assign({ count: 100, nextFlag: 0 }, e2);
          var t2 = this.paramValid.validCount(e2, b, f.X.QueryGroupApp);
          return t2 ? Promise.reject(t2) : e2.count < 1 ? Promise.resolve({ applicationList: [], nextFlag: e2.nextFlag }) : this.groupMgr.queryGroupApplyList(e2);
        }, C.prototype.callInvite = function(e2, t2) {
          var r2 = this.paramValid.callInvite(e2, t2);
          return r2 ? Promise.reject(r2) : this.callMgr.callInvite(e2, t2);
        }, C.prototype.callCancel = function(e2, t2, r2) {
          var n2 = this.paramValid.validCallID(t2, f.X.CallCancel);
          return n2 ? Promise.reject(n2) : this.callMgr.callCancel(e2, t2, r2);
        }, C.prototype.callAccept = function(e2, t2) {
          var r2 = this.paramValid.validCallID(e2, f.X.CallAccept);
          return r2 ? Promise.reject(r2) : this.callMgr.callAccept(e2, t2);
        }, C.prototype.callReject = function(e2, t2) {
          var r2 = this.paramValid.validCallID(e2, f.X.CallReject);
          return r2 ? Promise.reject(r2) : this.callMgr.callReject(e2, t2);
        }, C.prototype.callQuit = function(e2, t2) {
          var r2 = this.paramValid.validCallID(e2, f.X.CallQuit);
          return r2 ? Promise.reject(r2) : this.callMgr.callQuit(e2, t2);
        }, C.prototype.callJoin = function(e2, t2) {
          var r2 = this.paramValid.validCallID(e2, f.X.CallJoin);
          return r2 ? Promise.reject(r2) : this.callMgr.callJoin(e2, t2);
        }, C.prototype.callEnd = function(e2, t2) {
          var r2 = this.paramValid.validCallID(e2, f.X.CallEnd);
          return r2 ? Promise.reject(r2) : this.callMgr.callEnd(e2, t2);
        }, C.prototype.callingInvite = function(e2, t2, r2) {
          var n2 = this.paramValid.validIDAndArray("callID", t2, "invitees", e2, v, f.X.CallingInvite);
          return n2 ? Promise.reject(n2) : this.callMgr.callingInvite(e2, t2, r2);
        }, C.prototype.queryCallInvitationList = function(e2) {
          return this.callMgr.queryList(e2);
        }, C.prototype.searchConversations = function(e2) {
          var t2 = this;
          if (h.p)
            return Promise.resolve({ conversationSearchInfoList: [] });
          var r2 = this.paramValid.searchConversations(e2);
          return r2 ? Promise.reject(r2) : this.dbMgr.searchConversations(e2).then(function(e3) {
            return e3.conversationSearchInfoList.forEach(function(e4) {
              e4.messageList = e4.messageList.map(function(e5) {
                return t2.convMgr.transformDBMessage(e5);
              });
            }), e3;
          });
        }, C.prototype.searchGlobalMessages = function(e2) {
          var t2 = this;
          if (h.p)
            return Promise.resolve({ messageList: [] });
          var r2 = this.paramValid.searchMessages(e2, f.X.SearchGlobalMessages);
          return r2 ? Promise.reject(r2) : this.dbMgr.searchGlobalMessages(e2).then(function(e3) {
            return e3.messageList = e3.messageList.map(function(e4) {
              return t2.convMgr.transformDBMessage(e4);
            }), e3;
          });
        }, C.prototype.searchMessages = function(e2, t2, r2) {
          var n2 = this;
          if (h.p)
            return Promise.resolve({ conversationID: e2, conversationType: t2, messageList: [] });
          var i2 = this.paramValid.validConvIDAndType(e2, t2, f.X.SearchMessages) || this.paramValid.searchMessages(r2, f.X.SearchMessages);
          return i2 ? Promise.reject(i2) : this.dbMgr.searchMessages(e2, t2, r2).then(function(e3) {
            return e3.messageList = e3.messageList.map(function(e4) {
              return n2.convMgr.transformDBMessage(e4);
            }), e3;
          });
        }, C.prototype.searchGroups = function(e2) {
          if (h.p)
            return Promise.resolve({ nextFlag: 0, groupSearchInfoList: [] });
          var t2 = this.paramValid.searchBase(e2, f.X.SearchGroups);
          return t2 ? Promise.reject(t2) : this.groupMgr.searchGroups(e2);
        }, C.prototype.searchGroupMembers = function(e2, t2) {
          if (h.p)
            return Promise.resolve({ nextFlag: 0, groupID: e2, userList: [] });
          var r2 = this.paramValid.validID("groupID", e2, M, f.X.SearchGroupMembers) || this.paramValid.searchBase(t2, f.X.SearchGroupMembers);
          return r2 ? Promise.reject(r2) : this.dbMgr.searchGroupMembers(e2, t2);
        }, C.prototype.searchFriends = function(e2) {
          if (h.p)
            return Promise.resolve({ nextFlag: 0, friendInfoList: [] });
          var t2 = this.paramValid.searchBase(e2, f.X.SearchFriends);
          return t2 ? Promise.reject(t2) : this.friendMgr.searchFriends(e2);
        }, C.prototype.addFriend = function(e2, t2) {
          var r2 = this.paramValid.addFriend(e2, t2);
          return r2 ? Promise.reject(r2) : this.friendMgr.addFriend(e2, t2);
        }, C.prototype.sendFriendApplication = function(e2, t2) {
          var r2 = this.paramValid.addFriend(e2, t2);
          return r2 ? Promise.reject(r2) : this.friendMgr.sendFriendApplication(e2, t2);
        }, C.prototype.deleteFriends = function(e2, t2) {
          var r2 = this.paramValid.validArray("userIDs", e2, y, f.X.DeleteFriends);
          return r2 ? Promise.reject(r2) : this.friendMgr.deleteFriends(e2, t2);
        }, C.prototype.checkFriendsRelation = function(e2, t2) {
          var r2 = this.paramValid.validArray("userIDs", e2, y, f.X.CheckFriends);
          return r2 ? Promise.reject(r2) : this.friendMgr.checkFriendsRelation(e2, t2);
        }, C.prototype.updateFriendAlias = function(e2, t2) {
          var r2 = this.paramValid.updateFriendAlias(e2, t2);
          return r2 ? Promise.reject(r2) : this.friendMgr.updateFriendAlias(e2, t2);
        }, C.prototype.updateFriendAttributes = function(e2, t2) {
          var r2 = this.paramValid.updateFriendAttributes(e2, t2);
          return r2 ? Promise.reject(r2) : this.friendMgr.updateFriendAttributes(e2, t2);
        }, C.prototype.acceptFriendApplication = function(e2, t2) {
          var r2 = this.paramValid.acceptFriendApplication(e2, t2);
          return r2 ? Promise.reject(r2) : this.friendMgr.acceptFriendApplication(e2, t2);
        }, C.prototype.rejectFriendApplication = function(e2, t2) {
          return this.friendMgr.rejectFriendApplication(e2, t2);
        }, C.prototype.queryFriendsInfo = function(e2) {
          var t2 = this.paramValid.validArray("userIDs", e2, y, f.X.QueryFriendsInfo, 20);
          return t2 ? Promise.reject(t2) : this.friendMgr.queryFriendsInfo(e2);
        }, C.prototype.queryFriendList = function(e2) {
          var t2 = this.paramValid.validCount(e2, y, f.X.QueryFriendList);
          return t2 ? Promise.reject(t2) : this.friendMgr.queryFriendList(e2);
        }, C.prototype.queryFriendApplicationList = function(e2) {
          var t2 = this.paramValid.validCount(e2, y, f.X.QueryFriendAppList);
          return t2 ? Promise.reject(t2) : this.friendMgr.queryFriendApplicationList(e2);
        }, C.prototype.addUsersToBlacklist = function(e2) {
          var t2 = this.paramValid.validArray("userIDs", e2, y, f.X.AddUserToBlacklist);
          return t2 ? Promise.reject(t2) : this.friendMgr.addUsersToBlacklist(e2);
        }, C.prototype.removeUsersFromBlacklist = function(e2) {
          var t2 = this.paramValid.validArray("userIDs", e2, y, f.X.RemoveUsersFromBlacklist);
          return t2 ? Promise.reject(t2) : this.friendMgr.removeUsersFromBlacklist(e2);
        }, C.prototype.checkUserIsInBlacklist = function(e2) {
          var t2 = this.paramValid.validID("userID", e2, y, f.X.CheckUserIsInBlacklist);
          return t2 ? Promise.reject(t2) : this.friendMgr.checkUserIsInBlacklist(e2);
        }, C.prototype.queryBlacklist = function(e2) {
          var t2 = this.paramValid.validCount(e2, y, f.X.QueryBlacklist);
          return t2 ? Promise.reject(t2) : this.friendMgr.queryBlacklist(e2);
        }, t([Object(h.r)(g, f.X.RenewToken)], C.prototype, "renewToken", null), t([Object(h.r)(g, f.X.QueryUsersInfo)], C.prototype, "queryUsersInfo", null), t([Object(h.r)(g, f.X.UpdateUserName)], C.prototype, "updateUserName", null), t([Object(h.r)(g, f.X.UpdateUserAvatarUrl)], C.prototype, "updateUserAvatarUrl", null), t([Object(h.r)(g, f.X.UpdateUserExtendedData)], C.prototype, "updateUserExtendedData", null), t([Object(h.r)(g, f.X.UpdateUserOfflinePushRule)], C.prototype, "updateUserOfflinePushRule", null), t([Object(h.r)(g, f.X.QuerySelfUserRule)], C.prototype, "querySelfUserInfo", null), t([Object(h.r)(m, f.X.QueryConv)], C.prototype, "queryConversation", null), t([Object(h.r)(m, f.X.QueryConvList)], C.prototype, "queryConversationList", null), t([Object(h.r)(m, f.X.QueryPinnedList)], C.prototype, "queryConversationPinnedList", null), t([Object(h.r)(m, f.X.DeleteConv)], C.prototype, "deleteConversation", null), t([Object(h.r)(m, f.X.DeleteAllConv)], C.prototype, "deleteAllConversations", null), t([Object(h.r)(m, f.X.ClearUnreadCount)], C.prototype, "clearConversationUnreadMessageCount", null), t([Object(h.r)(m, f.X.ClearAllUnreadCount)], C.prototype, "clearConversationTotalUnreadMessageCount", null), t([Object(h.r)(m, f.X.DelAllConvMessages)], C.prototype, "deleteAllConversationMessages", null), t([Object(h.r)(m, f.X.SetNotificationStatus)], C.prototype, "setConversationNotificationStatus", null), t([Object(h.r)(m, f.X.UpdatePinnedState)], C.prototype, "updateConversationPinnedState", null), t([Object(h.r)(m, f.X.SetConvDraft)], C.prototype, "setConversationDraft", null), t([Object(h.r)(m, f.X.SendMessage)], C.prototype, "sendMessage", null), t([Object(h.r)(m, f.X.SendMediaMessage)], C.prototype, "sendMediaMessage", null), t([Object(h.r)(m, f.X.DeleteMessages)], C.prototype, "deleteMessages", null), t([Object(h.r)(m, f.X.DeleteAllMessage)], C.prototype, "deleteAllMessage", null), t([Object(h.r)(m, f.X.QueryHistoryMessage)], C.prototype, "queryHistoryMessage", null), t([Object(h.r)(m, f.X.InsertMessageToLocalDB)], C.prototype, "insertMessageToLocalDB", null), t([Object(h.r)(m, f.X.InsertMessageToLocalDB)], C.prototype, "updateMessageLocalExtendedData", null), t([Object(h.r)(m, f.X.RevokeMessage)], C.prototype, "revokeMessage", null), t([Object(h.r)(m, f.X.QueryCombineMessage)], C.prototype, "queryCombineMessageDetail", null), t([Object(h.r)(m, f.X.SendReceiptRead)], C.prototype, "sendReceiptRead", null), t([Object(h.r)(m, f.X.SendMessageReceiptsRead)], C.prototype, "sendMessageReceiptsRead", null), t([Object(h.r)(m, f.X.QueryReceiptsInfo)], C.prototype, "queryMessageReceiptsInfo", null), t([Object(h.r)(m, "API.queryReceiptMemberList")], C.prototype, "queryReceiptMemberList", null), t([Object(h.r)(m, f.X.AddReaction)], C.prototype, "addMessageReaction", null), t([Object(h.r)(m, f.X.DeleteReaction)], C.prototype, "deleteMessageReaction", null), t([Object(h.r)(m, f.X.QueryReaction)], C.prototype, "queryMessageReactionUserList", null), t([Object(h.r)(_, f.X.CreateRoom)], C.prototype, "createRoom", null), t([Object(h.r)(_, f.X.EnterRoom)], C.prototype, "enterRoom", null), t([Object(h.r)(_, f.X.JoinRoom)], C.prototype, "joinRoom", null), t([Object(h.r)(_, f.X.LeaveRoom)], C.prototype, "leaveRoom", null), t([Object(h.r)(_, f.X.LeaveRoom)], C.prototype, "leaveAllRoom", null), t([Object(h.r)(_, f.X.QueryRoomMemberList)], C.prototype, "queryRoomMemberList", null), t([Object(h.r)(_, f.X.QueryRoomMemberList)], C.prototype, "queryRoomMembers", null), t([Object(h.r)(_, f.X.QueryRoomOnlineMemberCount)], C.prototype, "queryRoomOnlineMemberCount", null), t([Object(h.r)(_, f.X.QueryRoomAllAttributes)], C.prototype, "queryRoomAllAttributes", null), t([Object(h.r)(_, f.X.SetRoomAttributes)], C.prototype, "setRoomAttributes", null), t([Object(h.r)(_, f.X.DeleteRoomAttributes)], C.prototype, "deleteRoomAttributes", null), t([Object(h.r)(_, f.X.EndRoomAttributesBatchOperation)], C.prototype, "endRoomAttributesBatchOperation", null), t([Object(h.r)(_, f.X.SetRoomMembersAttributes)], C.prototype, "setRoomMembersAttributes", null), t([Object(h.r)(_, f.X.QueryRoomMembersAttributes)], C.prototype, "queryRoomMembersAttributes", null), t([Object(h.r)(_, f.X.QueryRoomMemberAttributesList)], C.prototype, "queryRoomMemberAttributesList", null), t([Object(h.r)(b, f.X.CreateGroup)], C.prototype, "createGroup", null), t([Object(h.r)(b, f.X.JoinGroup)], C.prototype, "joinGroup", null), t([Object(h.r)(b, f.X.LeaveGroup)], C.prototype, "leaveGroup", null), t([Object(h.r)(b, f.X.DismissGroup)], C.prototype, "dismissGroup", null), t([Object(h.r)(b, f.X.QueryGroupList)], C.prototype, "queryGroupList", null), t([Object(h.r)(b, f.X.UpdateGroupInfo)], C.prototype, "updateGroupInfo", null), t([Object(h.r)(b, f.X.MuteGroup)], C.prototype, "muteGroup", null), t([Object(h.r)(b, f.X.QueryGroupInfo)], C.prototype, "queryGroupInfo", null), t([Object(h.r)(b, f.X.SetGroupAttributes)], C.prototype, "setGroupAttributes", null), t([Object(h.r)(b, f.X.DeleteGroupAttributes)], C.prototype, "deleteGroupAttributes", null), t([Object(h.r)(b, f.X.QueryGroupAttributes)], C.prototype, "queryGroupAttributes", null), t([Object(h.r)(b, f.X.TransferGroupOwner)], C.prototype, "transferGroupOwner", null), t([Object(h.r)(b, f.X.InviteUsersIntoGroup)], C.prototype, "inviteUsersIntoGroup", null), t([Object(h.r)(b, f.X.KickGroupMembers)], C.prototype, "kickGroupMembers", null), t([Object(h.r)(b, f.X.QueryGroupMemberList)], C.prototype, "queryGroupMemberList", null), t([Object(h.r)(b, f.X.QueryGroupMemberCount)], C.prototype, "queryGroupMemberCount", null), t([Object(h.r)(b, f.X.MuteGroupMembers)], C.prototype, "muteGroupMembers", null), t([Object(h.r)(b, f.X.QueryGroupMemberMutedList)], C.prototype, "queryGroupMemberMutedList", null), t([Object(h.r)(b, f.X.SetGroupMemberNickname)], C.prototype, "setGroupMemberNickname", null), t([Object(h.r)(b, f.X.SetGroupMemberRole)], C.prototype, "setGroupMemberRole", null), t([Object(h.r)(b, f.X.QueryGroupMemberInfo)], C.prototype, "queryGroupMemberInfo", null), t([Object(h.r)(b, f.X.UpdateGroupVerifyMode)], C.prototype, "updateGroupVerifyMode", null), t([Object(h.r)(b, "API.acceptGroupApplication")], C.prototype, "acceptGroupApply", null), t([Object(h.r)(b, "API.rejectGroupApplication")], C.prototype, "rejectGroupApply", null), t([Object(h.r)(b, f.X.QueryGroupApp)], C.prototype, "queryGroupApplyList", null), t([Object(h.r)(v, f.X.CallInvite)], C.prototype, "callInvite", null), t([Object(h.r)(v, f.X.CallCancel)], C.prototype, "callCancel", null), t([Object(h.r)(v, f.X.CallAccept)], C.prototype, "callAccept", null), t([Object(h.r)(v, f.X.CallReject)], C.prototype, "callReject", null), t([Object(h.r)(v, f.X.CallQuit)], C.prototype, "callQuit", null), t([Object(h.r)(v, f.X.CallJoin)], C.prototype, "callJoin", null), t([Object(h.r)(v, f.X.CallEnd)], C.prototype, "callEnd", null), t([Object(h.r)(v, f.X.CallingInvite)], C.prototype, "callingInvite", null), t([Object(h.r)(v, f.X.QueryCallList)], C.prototype, "queryCallInvitationList", null), t([Object(h.r)(M, f.X.SearchConvs)], C.prototype, "searchConversations", null), t([Object(h.r)(M, f.X.SearchGlobalMessages)], C.prototype, "searchGlobalMessages", null), t([Object(h.r)(M, f.X.SearchMessages)], C.prototype, "searchMessages", null), t([Object(h.r)(M, f.X.SearchGroups)], C.prototype, "searchGroups", null), t([Object(h.r)(M, f.X.SearchGroupMembers)], C.prototype, "searchGroupMembers", null), t([Object(h.r)(M, f.X.SearchFriends)], C.prototype, "searchFriends", null), t([Object(h.r)(y, f.X.AddFriend)], C.prototype, "addFriend", null), t([Object(h.r)(y, f.X.SendFriendApp)], C.prototype, "sendFriendApplication", null), t([Object(h.r)(y, f.X.DeleteFriends)], C.prototype, "deleteFriends", null), t([Object(h.r)(y, f.X.DeleteFriends)], C.prototype, "checkFriendsRelation", null), t([Object(h.r)(y, f.X.UpdateFriendAlias)], C.prototype, "updateFriendAlias", null), t([Object(h.r)(y, f.X.UpdateFriendAttr)], C.prototype, "updateFriendAttributes", null), t([Object(h.r)(y, f.X.AcceptFriendApp)], C.prototype, "acceptFriendApplication", null), t([Object(h.r)(y, f.X.RejectFriendApp)], C.prototype, "rejectFriendApplication", null), t([Object(h.r)(y, f.X.QueryFriendsInfo)], C.prototype, "queryFriendsInfo", null), t([Object(h.r)(y, f.X.QueryFriendList)], C.prototype, "queryFriendList", null), t([Object(h.r)(y, f.X.QueryFriendAppList)], C.prototype, "queryFriendApplicationList", null), t([Object(h.r)(y, f.X.AddUserToBlacklist)], C.prototype, "addUsersToBlacklist", null), t([Object(h.r)(y, f.X.RemoveUsersFromBlacklist)], C.prototype, "removeUsersFromBlacklist", null), t([Object(h.r)(y, f.X.CheckUserIsInBlacklist)], C.prototype, "checkUserIsInBlacklist", null), t([Object(h.r)(y, f.X.QueryBlacklist)], C.prototype, "queryBlacklist", null), C);
        function C(e2, t2) {
          var n2 = this, g2 = (this.repeatedPushMap = {}, this.pushTimer = 0, this.msgPushMap = ((g2 = {})[f.d.p_c2c_msg.cmd] = { name: "peer_msg", times: [] }, g2[f.d.p_room_msg.cmd] = { name: "room_msg", times: [] }, g2[f.d.p_group_msg.cmd] = { name: "group_msg", times: [] }, g2[f.d.p_c2c_command.cmd] = { name: "peer_cmd", times: [] }, g2[f.d.p_room_command.cmd] = { name: "room_cmd", times: [] }, g2[f.d.p_group_command.cmd] = { name: "group_cmd", times: [] }, g2[f.d.p_msg_to_all_users.cmd] = { name: "broadcast", times: [] }, g2), this.onConnectedEvent = function(e3) {
            n2.userMgr.onConnected(e3);
          }, this.onDisConnectedEvent = function(e3) {
            n2.userMgr.onDisConnected(e3);
          }, this.onPushEvent = function(e3, t3, r2) {
            var i2;
            e3 === f.d.swp_list.cmd ? (1 == t3.qos_flag && (i2 = { code: 0, message: "", server_send_time: t3.send_time, push_responses: t3.push_requests.map(function(e4) {
              return { key: e4.sub_cmd, value: e4.msg_id };
            }) }, n2.connMgr.sendRequestWithNoRsp(f.d.swp_list_rsp.cmd, i2)), t3.push_requests.forEach(function(e4) {
              n2.handleBizPushEvent(e4.sub_cmd, e4.msg_body, r2);
              var t4 = n2.repeatedPushMap[e4.sub_cmd + e4.msg_id] || 0;
              n2.repeatedPushMap[e4.sub_cmd + e4.msg_id] = t4 + 1;
            })) : e3 === f.d.Accesshub.cmd ? n2.userMgr.onPushAccesshub(t3) : (n2.dataReport.reportNetworkRequest(e3, t3), e3 === f.d.swp_kickout.cmd ? n2.userMgr.onPushKickout(t3) : e3 === f.d.swp_redirect.cmd && n2.userMgr.onPushRedirect(t3.user_ids));
          }, this.onLogined = function() {
            n2.pushTimer || (n2.pushTimer = setInterval(n2.reportPushEvent, 6e4));
          }, this.onLogout = function() {
            n2.pushTimer && clearInterval(n2.pushTimer), n2.pushTimer = 0;
          }, this.reportPushEvent = function() {
            var e3;
            n2.dataReport && (e3 = { flag: false }, Object.values(n2.msgPushMap).forEach(function(t3) {
              var r2 = t3.name;
              t3 = t3.times;
              return n2.addMessagePushDelay(r2, t3, e3);
            }), e3.flag && (delete e3.flag, n2.dataReport.reportSDKEvent("/sdk/msg/push_delay", e3)), e3 = { flag: false }, Object.keys(n2.repeatedPushMap).forEach(function(t3) {
              1 < n2.repeatedPushMap[t3] && (e3.flag = true, e3[t3] = n2.repeatedPushMap[t3]);
            }), (n2.repeatedPushMap = e3).flag && n2.dataReport.reportPushEvent("repeated", 0, "", e3));
          }, this.eventBus = new c.a(), this.engineConfig = i.a.getInstance().settings.initEngine(e2, t2, this.eventBus), this.logger = i.a.getInstance().logger, this.dataReport = i.a.getInstance().dataReport, this.paramValid = new o.a(this.logger), this.eventBus.add(f.u.ILogined, this.onLogined), this.eventBus.add(f.u.ILogout, this.onLogout), r(100)("./" + (h.p ? "ZIMFileStoreImpl" : "ZIMIDBImpl")).ZIMStoreImpl);
          this.dbMgr = new g2(this.engineConfig), this.connMgr = new a.a(this.engineConfig, this.eventBus), this.connMgr.initEvent(this.onConnectedEvent, this.onDisConnectedEvent, this.onPushEvent), this.groupMgr = new d.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr), this.userMgr = new p.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr), this.callMgr = new s.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr), this.convMgr = new u.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr, this.groupMgr), this.friendMgr = new l.a(this.engineConfig, this.eventBus, this.connMgr, this.dbMgr);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        var n = r(1), i = r(0), o = 6000001, s = i.Y.Conversation, a = i.Y.Room, u = i.Y.Group, c = i.Y.Friend, l = i.Y.Database, d = (p.prototype.validID = function(e2, t2, r2, i2) {
          var s2;
          if (!Object(n.n)(e2))
            return s2 = Object(n.x)(o, e2 + " is invalid."), this.logger.warn(r2, i2, ((r2 = { error: s2 })[e2] = t2, r2)), s2;
        }, p.prototype.validCallID = function(e2, t2) {
          var r2;
          if (!e2 || "string" != typeof e2 || 20 < e2.length)
            return r2 = Object(n.x)(o, "callID is invalid."), this.logger.warn(i.Y.Call, t2, { error: r2, callID: e2 }), r2;
        }, p.prototype.validName = function(e2, t2, r2, i2) {
          var s2;
          if (!this._isValidName(t2))
            return s2 = Object(n.x)(o, e2 + " is invalid."), this.logger.warn(r2, i2, ((r2 = { error: s2 })[e2] = t2, r2)), s2;
        }, p.prototype.validTwoID = function(e2, t2, r2, i2, s2, a2) {
          var u2 = "";
          if (!Object(n.n)(t2) && (u2 = e2 + " is invalid.") || !Object(n.n)(i2) && (u2 = r2 + " is invalid."))
            return u2 = Object(n.x)(o, u2), this.logger.warn(s2, a2, ((s2 = { error: u2 })[e2] = t2, s2[r2] = i2, s2)), u2;
        }, p.prototype.validTwoName = function(e2, t2, r2, i2, s2, a2) {
          var u2 = "";
          if (!this._isValidName(t2) && (u2 = e2 + " is invalid.") || !this._isValidName(i2) && (u2 = r2 + " is invalid."))
            return u2 = Object(n.x)(o, u2), this.logger.warn(s2, a2, ((s2 = { error: u2 })[e2] = t2, s2[r2] = i2, s2)), u2;
        }, p.prototype.validIDAndName = function(e2, t2, r2, i2, s2, a2) {
          var u2 = "";
          if (!Object(n.n)(t2) && (u2 = e2 + " is invalid.") || !this._isValidName(i2) && (u2 = r2 + " is invalid."))
            return u2 = Object(n.x)(o, u2), this.logger.warn(s2, a2, ((s2 = { error: u2 })[e2] = t2, s2[r2] = i2, s2)), u2;
        }, p.prototype.validCount = function(e2, t2, r2, i2, s2) {
          var a2 = "";
          if (!e2 || "number" != typeof e2.count || e2.count < 0 ? a2 = "config or the config instance of count is invalid." : i2 && !Object(n.n)(s2) && (a2 = i2 + " is invalid."))
            return s2 = Object(n.x)(o, a2), this.logger.warn(t2, r2, { error: s2, config: e2 }), s2;
        }, p.prototype.validArray = function(e2, t2, r2, i2, s2) {
          if (!Array.isArray(t2) || !t2.length || t2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          }) || s2 && t2.length > s2)
            return s2 = e2 + " is invalid or every one of " + e2 + " must be a valid string type.", s2 = Object(n.x)(o, s2), this.logger.warn(r2, i2, ((r2 = { error: s2 })[e2] = t2, r2)), s2;
        }, p.prototype.validIDAndArray = function(e2, t2, r2, i2, s2, a2, u2) {
          var c2 = "";
          if (!Object(n.n)(t2) && (c2 = e2 + " is invalid.") || (!Array.isArray(i2) || !i2.length || i2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          }) || u2 && i2.length > u2) && (c2 = r2 + " is invalid or every one of " + r2 + " must be a valid string type."))
            return u2 = Object(n.x)(o, c2), this.logger.warn(s2, a2, ((c2 = { error: u2 })[e2] = t2, c2[r2] = i2, c2)), u2;
        }, p.prototype.validConvIDAndType = function(e2, t2, r2) {
          var a2 = "";
          if (Object(n.n)(e2) ? t2 !== i.r.Peer && t2 !== i.r.Group && (a2 = "conversationType is invalid.") : a2 = "conversationID is invalid.")
            return a2 = Object(n.x)(o, a2), this.logger.warn(s, r2, { error: a2, conversationID: e2, conversationType: t2 }), a2;
        }, p.prototype.validSDKMessage = function(e2, t2) {
          var r2 = this._checkSDKMessage(e2);
          if (r2)
            return r2 = Object(n.x)(o, r2), this.logger.warn(s, t2, { error: r2, message: e2 }), r2;
        }, p.prototype.setNotificationStatus = function(e2, t2, r2) {
          var a2 = "";
          if ((Object(n.n)(t2) ? r2 !== i.r.Group && r2 !== i.r.Peer && (a2 = "conversationType is not support.") : a2 = "conversationID is invalid.") || e2 !== i.p.Notify && e2 !== i.p.DoNotDisturb && (a2 = "status is invalid."))
            return a2 = Object(n.x)(o, a2), this.logger.warn(s, i.X.SetNotificationStatus, { error: a2, conversationID: t2, conversationType: r2, status: e2 }), a2;
        }, p.prototype.setConversationDraft = function(e2, t2, r2) {
          var a2 = i.X.SetConvDraft, u2 = this.validConvIDAndType(e2, t2, a2);
          return u2 || ("string" != typeof r2 ? (u2 = Object(n.x)(o, "draft is invalid."), this.logger.warn(s, a2, { error: u2, conversationID: e2, conversationType: t2, draft: r2 }), u2) : void 0);
        }, p.prototype.sendMessage = function(e2, t2, r2, a2) {
          var u2 = "";
          if ((Object(n.n)(t2) ? !this._checkConvType(r2) && (u2 = "conversationType is invalid.") : u2 = "toConversationID is invalid.") || !e2 && (u2 = "message is invalid.") || !a2 && (u2 = "config is invalid.") || !this._checkMesageType(e2.type, r2) && (u2 = "message type is invalid.") || !this._checkMesagePriority(a2.priority) && (u2 = "config priority is invalid.") || !this._checkMesageContent(r2, e2.type, e2.message) && (u2 = "The message instance of message is invalid.") || !this._checkMessageReceipt(r2, e2.type, a2.hasReceipt) && (u2 = "The message type is not support setting receipt.") || !this._checkSubType(e2) && (u2 = "The message subType is invalid."))
            return u2 = Object(n.x)(o, u2), this.logger.warn(s, i.X.SendMessage, { error: u2, toConversationID: t2, conversationType: r2, message: e2, config: a2 }), u2;
        }, p.prototype.sendMediaMessage = function(e2, t2, r2, a2) {
          var u2 = "";
          if ((Object(n.n)(t2) ? !this._checkConvType(r2) && (u2 = "conversationType is invalid.") : u2 = "toConversationID is invalid.") || !e2 && (u2 = "message is invalid.") || !a2 && (u2 = "config is invalid.") || !this._checkMediaMesageType(e2.type) && (u2 = "message type is invalid.") || !this._checkMesagePriority(a2.priority) && (u2 = "config priority is invalid.") || !this._checkMessageReceipt(r2, e2.type, a2.hasReceipt) && (u2 = "The message type is not support setting receipt.") || !e2.fileLocalPath && !e2.fileDownloadUrl && (u2 = "The message instance of fileLocalPath and fileDownloadUrl is empty."))
            return u2 = Object(n.x)(o, u2), this.logger.warn(s, i.X.SendMediaMessage, { error: u2, toConversationID: t2, conversationType: r2, message: e2, config: a2 }), u2;
        }, p.prototype.deleteMessages = function(e2, t2, r2, a2) {
          if (u2 = this.validConvIDAndType(t2, r2, i.X.DeleteMessages))
            return u2;
          var u2 = "";
          return Array.isArray(e2) && 0 != e2.length ? e2.some(function(e3) {
            return !e3.messageID || !e3.conversationSeq || e3.conversationID != t2 || e3.conversationType != r2;
          }) && (u2 = "Some messages int the message list in the conversationID are illegal messages.") : u2 = "messageList is invalid.", u2 ? (u2 = Object(n.x)(o, u2), this.logger.warn(s, i.X.DeleteMessages, { error: u2, messageList: e2, config: a2 }), u2) : void 0;
        }, p.prototype.queryHistoryMessage = function(e2, t2, r2) {
          var a2 = "";
          if ((Object(n.n)(e2) ? !this._checkConvType(t2) && (a2 = "conversationType is invalid.") : a2 = "conversationID is invalid.") || (!r2 || "number" != typeof r2.count || r2.count < 0) && (a2 = "The config or config instance of count is invalid."))
            return r2 = Object(n.x)(o, a2), this.logger.warn(s, i.X.QueryHistoryMessage, { error: r2, conversationID: e2, conversationType: t2 }), r2;
        }, p.prototype.insertMessageToLocalDB = function(e2, t2, r2, a2) {
          var u2 = "";
          if ((Object(n.n)(t2) ? !this._checkConvType(r2) && (u2 = "conversationType is invalid.") : u2 = "conversationID is invalid.") || !Object(n.n)(a2) && (u2 = "senderUserID is invalid.") || !e2 && (u2 = "message is invalid.") || !this._checkInsertMesageType(e2.type) && (u2 = "message type is invalid.") || !this._checkInsertMesageContent(e2) && (u2 = "The message instance of message is invalid."))
            return u2 = Object(n.x)(o, u2), this.logger.warn(s, i.X.InsertMessageToLocalDB, { error: u2, conversationID: t2, conversationType: r2, senderUserID: a2, message: e2 }), u2;
        }, p.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          var r2 = "";
          if (this._isValidName(e2) ? (!t2 || !t2.conversationID || !t2.messageID) && (r2 = "message is invalid.") : r2 = "localExtendedData is invalid.")
            return r2 = Object(n.x)(o, r2), this.logger.warn(s, i.X.UpdateMessageLocalExtendedData, { error: r2, localExtendedData: e2, message: t2 }), r2;
        }, p.prototype.sendCombineMessage = function(e2, t2, r2) {
          var a2, u2 = this;
          if (e2.type === i.hb.Combine)
            return a2 = "", ("string" != typeof e2.title || !e2.title || e2.title.length > t2 ? a2 = "The combine message title is invalid." : ("string" != typeof e2.summary || !e2.summary || e2.summary.length > r2) && (a2 = "The combine message summary is invalid.")) || (!Array.isArray(e2.messageList) || !e2.messageID && 0 == e2.messageList.length) && (a2 = "The combine message list is invalid.") || e2.messageList.some(function(e3) {
              return u2._checkSubMessage(e3, true);
            }) && (a2 = "The combine message list includes invalid message.") ? (a2 = Object(n.x)(o, a2), this.logger.warn(s, i.X.SendMessage, { error: a2, message: e2, tl: t2, sl: r2 }), a2) : void 0;
        }, p.prototype.queryCombineMessageDetail = function(e2) {
          var t2;
          if (!e2 || void 0 !== e2.sentStatus && e2.sentStatus != i.fb.Success || e2.type != i.hb.Combine || !e2.combineID)
            return t2 = Object(n.x)(o, "The combine message is invalid."), this.logger.warn(s, i.X.QueryCombineMessage, { error: t2, message: e2 }), t2;
        }, p.prototype.sendReceiptRead = function(e2, t2) {
          var r2 = "";
          if (Object(n.n)(e2) ? t2 !== i.r.Peer && (r2 = "conversationType is invalid.") : r2 = "conversationID is invalid.")
            return r2 = Object(n.x)(o, r2), this.logger.warn(s, i.X.SendReceiptRead, { error: r2, conversationID: e2, conversationType: t2 }), r2;
        }, p.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          if (a2 = this.validConvIDAndType(t2, r2, i.X.SendMessageReceiptsRead))
            return a2;
          var a2 = "";
          return Array.isArray(e2) && 0 != e2.length ? e2.every(function(e3) {
            return e3.direction != i.ab.Receive || e3.receiptStatus != i.cb.Processing || !e3.messageID || !e3.conversationSeq || e3.conversationID != t2 || e3.conversationType != r2;
          }) && (a2 = "Every message in the conversationID is not received receipt message.") : a2 = "messageList is invalid.", a2 ? (a2 = Object(n.x)(o, a2), this.logger.warn(s, i.X.SendMessageReceiptsRead, { error: a2, conversationID: t2, conversationType: r2, messageList: e2 }), a2) : void 0;
        }, p.prototype.queryReceiptsInfo = function(e2, t2, r2) {
          if (a2 = this.validConvIDAndType(t2, r2, i.X.QueryReceiptsInfo))
            return a2;
          var a2 = "";
          return Array.isArray(e2) && 0 != e2.length ? e2.every(function(e3) {
            return !e3.receiptStatus || !e3.messageID || !e3.conversationSeq || e3.conversationID != t2 || e3.conversationType != r2;
          }) && (a2 = "Every messages in the conversationID is not receipt message.") : a2 = "messageList is invalid.", a2 ? (a2 = Object(n.x)(o, a2), this.logger.warn(s, i.X.QueryReceiptsInfo, { error: a2, conversationID: t2, conversationType: r2, messageList: e2 }), a2) : void 0;
        }, p.prototype.queryReceiptMemberList = function(e2, t2, r2, a2, u2) {
          var c2 = "";
          if ((Object(n.n)(t2) ? (!r2 || "number" != typeof r2.count || r2.count < 0) && (c2 = "config or the config instance of count is invalid.") : c2 = "groupID is invalid.") || (!e2 || e2.senderUserID != u2 || e2.sentStatus != i.fb.Success || !e2.receiptStatus) && (c2 = "The message instance is not a successful receipt message sent by self.") || (e2.type == i.hb.Command || e2.type == i.hb.Revoke) && (c2 = "The message type is not support.") || (e2.conversationID !== t2 || e2.conversationType !== i.r.Group) && (c2 = "The message instance is not belong the groupID."))
            return u2 = Object(n.x)(o, c2), c2 = a2 ? i.X.QueryReceiptReadMemberList : i.X.QueryReceiptUnreadMemberList, this.logger.warn(s, c2, { error: u2, groupID: t2, message: e2, config: r2 }), u2;
        }, p.prototype.messageReaction = function(e2, t2, r2) {
          var a2;
          r2 = r2 ? i.X.AddReaction : i.X.DeleteReaction;
          if (a2 = "string" != typeof e2 ? "reactionType is invalid." : this._checkSDKMessage(t2))
            return e2 = Object(n.x)(o, a2), this.logger.warn(s, r2, { error: e2, message: t2 }), e2;
        }, p.prototype.queryMessageBase = function(e2, t2, r2) {
          var i2 = "";
          if (i2 = !t2 || "number" != typeof t2.count || t2.count < 0 || 100 < t2.count ? "config or the config instance of count is invalid." : this._checkSDKMessage(e2))
            return i2 = Object(n.x)(o, i2), this.logger.warn(s, r2, { error: i2, message: e2, config: t2 }), i2;
        }, p.prototype.createRoom = function(e2, t2, r2) {
          var s2 = "";
          if ((e2 ? !Object(n.n)(e2.roomID) && (s2 = "The roomInfo instance of roomID is invalid.") : s2 = "roomInfo is invalid.") || !this._isValidName(e2.roomName) && (s2 = "The roomInfo instance of roomName is invalid.") || t2 && t2.roomAttributes && !this._isValidAttribute(t2.roomAttributes, true) && (s2 = "The Key and Value of the roomAttributes property of the config instance only support string types."))
            return s2 = Object(n.x)(o, s2), r2 = r2 ? i.X.EnterRoom : i.X.CreateRoom, this.logger.warn(a, r2, { error: s2, roomInfo: e2, config: t2 }), s2;
        }, p.prototype.setRoomAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.n)(t2) ? !this._isValidAttribute(e2) && (r2 = "The Key and Value of the roomAttributes only support string types.") : r2 = "roomID is invalid.")
            return r2 = Object(n.x)(o, r2), this.logger.warn(a, i.X.SetRoomAttributes, { error: r2, roomID: t2, roomAttributes: e2 }), r2;
        }, p.prototype.setRoomMembersAttributes = function(e2, t2, r2) {
          var s2 = "";
          if ((Object(n.n)(r2) ? !this._isValidAttribute(e2) && (s2 = "The Key and Value of the attributes only support string types.") : s2 = "roomID is invalid.") || (!Array.isArray(t2) || !t2.length || t2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          })) && (s2 = "Every one of userIDs must be a valid string type."))
            return t2 = Object(n.x)(o, s2), this.logger.warn(a, i.X.SetRoomMembersAttributes, { error: t2, roomID: r2, attributes: e2 }), t2;
        }, p.prototype.createGroup = function(e2, t2, r2) {
          var s2 = String(e2.groupID || "").trim(), a2 = "";
          if ((s2 && !Object(n.n)(s2, true) ? a2 = "The groupInfo instance of groupID is invalid." : !this._isValidName(e2.groupName) && (a2 = "The groupInfo instance of groupName is invalid.")) || !this._isValidName(e2.groupAvatarUrl) && (a2 = "The groupInfo instance of groupAvatarUrl is invalid.") || !this._isValidName(r2.groupNotice) && (a2 = "The config instance of groupNotice is invalid.") || t2 && !Array.isArray(t2) && (a2 = "Every one of userIDs must be a valid string type.") || !this._isValidAttribute(r2.groupAttributes, true) && (a2 = "The Key and Value of the groupAttributes property of the config instance only support string types."))
            return s2 = Object(n.x)(o, a2), this.logger.warn(u, i.X.CreateGroup, { error: s2, groupInfo: e2, config: r2, userIDs: t2 }), s2;
        }, p.prototype.muteGroup = function(e2, t2, r2) {
          var s2 = "";
          if ((Object(n.n)(e2) ? (r2 && (!t2.mode || !t2.duration) || -1 == [0, 1, 2, 3].indexOf(t2.mode)) && (s2 = "The config instance or its mode is invalid.") : s2 = "groupID is invalid.") || ("number" != typeof t2.duration || t2.duration < -1) && (s2 = "The config instance of duration is invalid.") || t2.mode == i.U.Custom && (!Array.isArray(t2.roles) || !t2.roles.length || "3" == t2.roles.join()) && (s2 = "The config instance of roles is invalid."))
            return s2 = Object(n.x)(o, s2), this.logger.warn(u, i.X.MuteGroup, { error: s2, groupID: e2, isMute: r2, config: t2 }), s2;
        }, p.prototype.setGroupAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.n)(t2) ? !this._isValidAttribute(e2) && (r2 = "The Key and Value of the groupAttributes only support string types.") : r2 = "groupID is invalid.")
            return r2 = Object(n.x)(o, r2), this.logger.warn(u, i.X.SetGroupAttributes, { error: r2, groupID: t2, groupAttributes: e2 }), r2;
        }, p.prototype.queryGroupAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.n)(e2) ? Array.isArray(t2) && (!t2.length || t2.some(function(e3) {
            return !e3 || "string" != typeof e3;
          })) && (r2 = "Every one of kyes must be a valid string type.") : r2 = "groupID is invalid.")
            return r2 = Object(n.x)(o, r2), this.logger.warn(u, i.X.QueryGroupAttributes, { error: r2, groupID: e2, keys: t2 }), r2;
        }, p.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          var s2 = "";
          if ((this._isValidName(e2) ? !Object(n.n)(t2) && (s2 = "forUserID is invalid.") : s2 = "nickname is invalid.") || !Object(n.n)(r2) && (s2 = "groupID is invalid."))
            return s2 = Object(n.x)(o, s2), this.logger.warn(u, i.X.SetGroupMemberNickname, { error: s2, groupID: r2, forUserID: t2, nickname: e2 }), s2;
        }, p.prototype.setGroupMemberRole = function(e2, t2, r2) {
          var s2 = "";
          if (("number" != typeof e2 ? s2 = "role is invalid." : !Object(n.n)(t2) && (s2 = "forUserID is invalid.")) || !Object(n.n)(r2) && (s2 = "groupID is invalid."))
            return s2 = Object(n.x)(o, s2), this.logger.warn(u, i.X.SetGroupMemberRole, { error: s2, groupID: r2, forUserID: t2, role: e2 }), s2;
        }, p.prototype.updateGroupVerifyMode = function(e2, t2, r2) {
          var s2 = "";
          if ((Object(n.n)(t2) ? "number" != typeof e2 : s2 = "groupID is invalid.") || (r2 == i.W.Join && (e2 < 0 || 2 < e2) || r2 != i.W.Join && (e2 < 0 || 1 < e2)) && (s2 = "mode is invalid."))
            return s2 = Object(n.x)(o, s2), this.logger.warn(u, i.X.UpdateGroupVerifyMode, { error: s2, groupID: t2, mode: e2, type: r2 }), s2;
        }, p.prototype.callInvite = function(e2, t2) {
          var r2 = "";
          if (Array.isArray(e2) && e2.length ? t2 && "number" == typeof t2.timeout && (t2.timeout % 1 != 0 || t2.timeout < 1 || 600 < t2.timeout) && (r2 = "The config instance of timeout is invalid.") : r2 = "invitees is invalid.")
            return r2 = Object(n.x)(o, r2), this.logger.warn(i.Y.Call, i.X.CallInvite, { error: r2, invitees: e2, config: t2 }), r2;
        }, p.prototype.searchConversations = function(e2) {
          var t2 = "";
          if ((e2 ? ("number" != typeof e2.totalConversationCount || e2.totalConversationCount < 1) && (t2 = "The config instance of totalConversationCount is invalid.") : t2 = "config is invalid.") || ("number" != typeof e2.conversationMessageCount || e2.conversationMessageCount < 1) && (t2 = "The config instance of count is invalid.") || Array.isArray(e2.keywords) && (5 < e2.keywords.length || e2.keywords.some(function(e3) {
            return !e3;
          })) && (t2 = "The config instance of keywords is invalid.") || Array.isArray(e2.senderUserIDs) && (5 < e2.senderUserIDs.length || e2.senderUserIDs.some(function(e3) {
            return !e3;
          })) && (t2 = "The config instance of senderUserIDs is invalid."))
            return t2 = Object(n.x)(o, t2), this.logger.warn(l, i.X.SearchConvs, { config: e2, error: t2 }), t2;
        }, p.prototype.searchMessages = function(e2, t2) {
          var r2 = "";
          if ((e2 ? ("number" != typeof e2.count || e2.count < 1) && (r2 = "The config instance of count is invalid.") : r2 = "config is invalid.") || Array.isArray(e2.keywords) && (5 < e2.keywords.length || e2.keywords.some(function(e3) {
            return !e3;
          })) && (r2 = "The config instance of keywords is invalid.") || Array.isArray(e2.senderUserIDs) && (5 < e2.senderUserIDs.length || e2.senderUserIDs.some(function(e3) {
            return !e3;
          })) && (r2 = "The config instance of senderUserIDs is invalid."))
            return r2 = Object(n.x)(o, r2), this.logger.warn(l, t2, { config: e2, error: r2 }), r2;
        }, p.prototype.searchBase = function(e2, t2) {
          var r2 = "";
          if ((e2 ? ("number" != typeof e2.count || e2.count < 1) && (r2 = "The config instance of count is invalid.") : r2 = "config is invalid.") || (!Array.isArray(e2.keywords) || !e2.keywords.length || 5 < e2.keywords.length || e2.keywords.some(function(e3) {
            return !e3;
          })) && (r2 = "The config instance of keywords is invalid."))
            return r2 = Object(n.x)(o, r2), this.logger.warn(l, t2, { error: r2, config: e2 }), r2;
        }, p.prototype.addFriend = function(e2, t2) {
          var r2 = "";
          if ((Object(n.n)(e2) ? !t2 && (r2 = "config is invalid.") : r2 = "userID is invalid.") || "string" == typeof t2.wording && 1024 < t2.wording.length && (r2 = "The config instance of wording is invalid.") || "string" == typeof t2.friendAlias && 256 < t2.friendAlias.length && (r2 = "The config instance of friendAlias is invalid.") || t2.friendAttributes && !this._isValidAttribute(t2.friendAttributes, true) && (r2 = "The config instance of friendAttributes is invalid."))
            return r2 = Object(n.x)(o, r2), this.logger.warn(c, i.X.AddFriend, { error: r2, userID: e2, config: t2 }), r2;
        }, p.prototype.updateFriendAlias = function(e2, t2) {
          var r2 = "";
          if ((Object(n.n)(t2) ? "string" != typeof e2 && (r2 = "FriendAlias is invalid.") : r2 = "userID is invalid.") || "string" == typeof e2 && 256 < e2.length && (r2 = "FriendAlias is invalid."))
            return r2 = Object(n.x)(o, r2), this.logger.warn(c, i.X.UpdateFriendAlias, { error: r2, userID: t2, friendAlias: e2 }), r2;
        }, p.prototype.updateFriendAttributes = function(e2, t2) {
          var r2 = "";
          if (Object(n.n)(t2) ? e2 && !this._isValidAttribute(e2, true) && (r2 = "The config instance of friendAttributes is invalid.") : r2 = "userID is invalid.")
            return r2 = Object(n.x)(o, r2), this.logger.warn(c, i.X.UpdateFriendAlias, { error: r2, userID: t2, friendAttributes: e2 }), r2;
        }, p.prototype.acceptFriendApplication = function(e2, t2) {
          var r2 = "";
          if ((Object(n.n)(e2) ? t2 && "string" == typeof t2.friendAlias && 256 < t2.friendAlias.length && (r2 = "The config instance of friendAlias is invalid.") : r2 = "userID is invalid.") || t2 && t2.friendAttributes && !this._isValidAttribute(t2.friendAttributes, true) && (r2 = "The config instance of friendAttributes is invalid."))
            return r2 = Object(n.x)(o, r2), this.logger.warn(c, i.X.AcceptFriendApp, { error: r2, userID: e2, config: t2 }), r2;
        }, p.prototype.updateUserOfflinePushRule = function(e2) {
          var t2 = "", r2 = !!(e2 && null != e2 && e2.notToReceiveOfflinePushPlatforms && null != e2 && e2.onlinePlatforms) && (r2 = !e2.onlinePlatforms.some(function(e3) {
            return !i.ib[e3];
          }), !e2.notToReceiveOfflinePushPlatforms.some(function(e3) {
            return !i.ib[e3];
          }));
          if (!r2 && (t2 = "The onlinePlatforms or notToReceiveOfflinePushPlatforms instance of offlinePushRule is invalid."))
            return r2 = Object(n.x)(o, t2), this.logger.warn(c, i.X.UpdateUserOfflinePushRule, { error: r2, offlinePushRule: e2 }), r2;
        }, p.prototype._checkMesageContent = function(e2, t2, r2) {
          return !((t2 === i.hb.Text || t2 === i.hb.Custom || t2 === i.hb.Barrage && e2 === i.r.Room) && ("string" != typeof r2 || !r2 || !r2.trim() || Object(n.k)(r2).length > i.m.MAX_MESSAGE_SIZE) || !(t2 !== i.hb.Command || r2 instanceof Uint8Array && r2.length && !(r2.length > i.m.MAX_MESSAGE_SIZE) && Object(n.h)(r2).trim()));
        }, p.prototype._checkMesagePriority = function(e2) {
          return e2 === i.bb.Low || e2 === i.bb.Medium || e2 === i.bb.High;
        }, p.prototype._checkMesageType = function(e2, t2) {
          return e2 === i.hb.Text || e2 === i.hb.Custom || e2 === i.hb.Combine || e2 === i.hb.Command || t2 === i.r.Room && e2 === i.hb.Barrage;
        }, p.prototype._checkMediaMesageType = function(e2) {
          return e2 === i.hb.Image || e2 === i.hb.File || e2 === i.hb.Audio || e2 === i.hb.Video;
        }, p.prototype._checkInsertMesageType = function(e2) {
          return e2 === i.hb.Text || e2 === i.hb.System || e2 === i.hb.Custom || e2 === i.hb.Image || e2 === i.hb.File || e2 === i.hb.Audio || e2 === i.hb.Video;
        }, p.prototype._checkInsertMesageContent = function(e2) {
          var t2 = e2.message;
          return !(!(e2.type !== i.hb.Text && e2.type !== i.hb.System && e2.type !== i.hb.Custom || "string" == typeof t2 && t2 && t2.trim() && !(Object(n.k)(t2).length > i.m.MAX_MESSAGE_SIZE)) || e2.type >= i.hb.Image && e2.type <= i.hb.Video && !e2.fileLocalPath && !e2.fileDownloadUrl || !(e2.type != i.hb.Combine || e2.title && e2.summary));
        }, p.prototype._checkConvType = function(e2) {
          return e2 === i.r.Peer || e2 === i.r.Room || e2 === i.r.Group;
        }, p.prototype._checkMessageReceipt = function(e2, t2, r2) {
          return !r2 || e2 != i.r.Room && t2 != i.hb.Command && t2 != i.hb.Barrage;
        }, p.prototype._checkSubType = function(e2) {
          return e2.type !== i.hb.Custom || e2.type == i.hb.Custom && 0 <= e2.subType && e2.subType <= 200;
        }, p.prototype._checkSDKMessage = function(e2) {
          var t2 = "";
          return (!e2 || !e2.conversationID || e2.isUserInserted || e2.isBroadcastMessage || e2.sentStatus != i.fb.Success ? t2 = "The message instance is not a successful message." : (!e2.type || e2.type == i.hb.Command || e2.type == i.hb.Barrage || e2.type == i.hb.Revoke || e2.type == i.hb.Tips) && (t2 = "The message type is not support.")) || e2.conversationType !== i.r.Peer && e2.conversationType !== i.r.Group && (t2 = "The message conversation type is not support."), t2;
        }, p.prototype._checkSubMessage = function(e2, t2) {
          var r2 = "";
          return !e2 || !t2 && e2.isUserInserted || e2.isBroadcastMessage || e2.sentStatus != i.fb.Success ? r2 = "The message instance is not a successful message." : e2.type && e2.type != i.hb.Command && e2.type != i.hb.Barrage && e2.type != i.hb.Revoke && e2.type != i.hb.Tips || (r2 = "The message type is not support."), r2;
        }, p);
        function p(e2) {
          this.logger = e2, this._isValidName = function(e3) {
            return "string" == typeof e3 && e3.length <= i.m.MAX_NAME_SIZE;
          }, this._isValidAttribute = function(e3, t2) {
            return !(!e3 || "[object Object]" !== Object.prototype.toString.call(e3)) && (e3 = Object.values(e3), !(!t2 && !e3.length) && e3.every(function(e4) {
              return "string" == typeof e4;
            }));
          };
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        t = r(3);
        var n = r.n(t), i = r(2), o = r(1), s = r(0), a = function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, u = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, c = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, l = s.Y.Call, d = (p.prototype.destroy = function() {
          this.onLogout(), this.connMgr = null, this.eventBus = null, this.logger = null;
        }, p.prototype.callInvite = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), invitees: e2, config: t2 }, i2 = (t2.mode = t2.mode || s.g.General, t2.timeout = +t2.timeout || 90, e2 = Array.from(new Set(e2.filter(function(e3) {
            return Object(o.n)(e3);
          }))), Object(o.l)()), u2 = { call_id: i2, call_mode: t2.mode, timeout: t2.timeout, user_ids: e2, payload: this.encodeExtendedData(t2), offline_info: Object(o.g)(t2.pushConfig), check_ack_timeout: !!t2.enableNotReceivedCheck };
          return this.connMgr.sendRequest(s.d.call_create, u2).then(function(c2) {
            if (c2.code)
              return d2 = Object(o.x)(s.t.CallModuleServerError, c2.message, c2.code), n2.error = d2, r2.logger.warn(l, s.X.CallInvite, n2), Promise.reject(d2);
            r2.updateCallListSeq(c2.call_list_seq), c2.timeout || (c2.timeout = u2.timeout), e2.map(function(e3) {
              r2.createInviteTimeout(i2, e3, c2.timeout);
            });
            var d2 = +c2.create_time.toString(), p2 = ((f = {})[r2.engineConfig.user.userID] = { userID: r2.engineConfig.user.userID, state: s.i.Accepted, extendedData: "", acceptTime: 0, quitTime: 0, timeout: 0 }, f), h = c2.new_err_list.map(function(e3) {
              return { userID: e3.user_id, reason: e3.sub_code };
            }), f = c2.err_list.map(function(e3) {
              return { userID: e3.user_id, state: r2.translateUserState(e3), extendedData: "" };
            }), g = ((g = e2.filter(function(e3) {
              return !h.find(function(t3) {
                return t3.userID == e3;
              });
            }).map(function(e3) {
              return e3 = { userID: e3, state: s.i.Inviting, extendedData: "" }, p2[e3.userID] = a(a({}, e3), { acceptTime: 0, quitTime: 0, timeout: c2.timeout }), e3;
            })).unshift({ userID: r2.engineConfig.user.userID, state: s.i.Accepted, extendedData: "" }), r2.eventBus.emit(s.u.CallUserState, { callID: i2, callUserList: g }), { callID: i2, caller: r2.engineConfig.user.userID, mode: t2.mode, state: s.h.Started, extendedData: t2.extendedData, createTime: d2, endTime: 0, timeout: c2.timeout, inviter: r2.engineConfig.user.userID, callDuration: 0, userDuration: 0, callUserMap: p2 });
            return r2.dbCallMap.set(i2, g), r2.dbMgr.addCallList([g]), r2.logger.info(l, s.X.CallInvite, n2), r2.eventBus.emit(s.u.CallCreate, { callID: i2, mode: g.mode, caller: g.caller, extendedData: g.extendedData, timeout: g.timeout, createTime: g.createTime, callUserList: g.callUserMap ? Object.values(g.callUserMap).map(function(e3) {
              return r2.pickCallUser(e3);
            }) : [] }), { callID: i2, timeout: c2.timeout, errorUserList: h, errorInvitees: f };
          });
        }, p.prototype.callCancel = function(e2, t2, r2, n2) {
          var i2 = this, a2 = (void 0 === n2 && (n2 = s.f.Cancel), { time: /* @__PURE__ */ new Date(), callID: t2, state: n2, config: r2, invitees: e2 }), u2 = (e2 = Array.from(new Set(e2.filter(function(e3) {
            return Object(o.n)(e3);
          }))), r2.extendedData || ""), c2 = { call_id: t2, user_ids: e2, timeout: n2, payload: this.encodeExtendedData(r2), offline_info: Object(o.g)(r2.pushConfig) }, d2 = n2 == s.f.Cancel ? s.j.API : s.j.SDK;
          return this.connMgr.sendRequest(s.d.call_cancel, c2, d2).then(function(c3) {
            var d3 = i2.dbCallMap.get(t2);
            if (c3.code)
              return p2 = Object(o.x)(s.t.CallModuleServerError, c3.message, c3.code), a2.error = p2, i2.logger.warn(l, s.X.CallCancel, a2), Promise.reject(p2);
            i2.updateCallListSeq(c3.now_time);
            var p2, h = c3.err_list.map(function(e3) {
              return e3.user_id;
            });
            return d3 && (n2 == s.f.Cancel ? (d3.state = s.h.Ended, (p2 = d3.callUserMap[i2.engineConfig.user.userID]) && (p2.state = s.i.Cancelled, p2.extendedData = r2.extendedData)) : n2 == s.f.Timeout && d3.mode == s.g.General && (d3.state = s.h.Ended), p2 = e2.filter(function(e3) {
              return -1 == h.indexOf(e3);
            }).map(function(e3) {
              e3 = { userID: e3, state: s.i.Timeout, extendedData: u2 };
              var t3 = d3.callUserMap[e3.userID];
              return n2 == s.f.Cancel && t3 ? t3.userID == i2.engineConfig.user.userID && (t3.state = s.i.Cancelled, u2 && (t3.extendedData = u2)) : n2 == s.f.Timeout && t3 && (t3.state = s.i.Timeout), e3;
            }), n2 == s.f.Timeout && p2.length ? (i2.eventBus.emit(s.u.CallUserState, { callID: t2, callUserList: p2 }), i2.eventBus.emit("callInviteesAnsweredTimeout", { callID: t2, invitees: p2.map(function(e3) {
              return e3.userID;
            }) })) : n2 == s.f.Cancel && (p2 = c3.call_user_session_id.toString(), i2.isMainDevice(s.i.Accepted, p2) && i2.eventBus.emit(s.u.CallUserState, { callID: t2, callUserList: [{ userID: i2.engineConfig.user.userID, state: s.i.Cancelled, extendedData: u2 }] })), i2.dbMgr.addCallList([d3])), i2.logger.info(l, s.X.CallCancel, a2), { callID: t2, errorInvitees: h };
          });
        }, p.prototype.callAccept = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 }, i2 = { user_id: e2, user_name: this.encodeExtendedData(t2) };
          return this.connMgr.sendRequest(s.d.call_accept, i2).then(function(i3) {
            if (i3.code)
              return c2 = Object(o.x)(s.t.CallModuleServerError, i3.message, i3.code), n2.error = c2, r2.logger.warn(l, s.X.CallAccept, n2), Promise.reject(c2);
            r2.updateCallListSeq(i3.talk_time);
            var a2, u2 = +i3.quit_time.toString() || 0, c2 = r2.dbCallMap.get(e2);
            i3 = c2 && c2.callUserMap[r2.engineConfig.user.userID];
            return c2 && i3 && (c2.mode == s.g.General && (c2.state = s.h.Ended), i3.state = s.i.Accepted, i3.acceptTime = u2, i3.extendedData = t2.extendedData || "", 2 == (a2 = Object.values(c2.callUserMap)).length && a2.forEach(function(e3) {
              return e3.acceptTime = u2;
            }), r2.dbMgr.addCallList([c2]), r2.eventBus.emit(s.u.CallUserState, { callID: e2, callUserList: [r2.pickCallUser(i3)] })), r2.logger.info(l, s.X.CallAccept, n2), { callID: e2 };
          });
        }, p.prototype.callReject = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 }, i2 = { call_id: e2, payload: this.encodeExtendedData(t2) };
          return this.connMgr.sendRequest(s.d.call_refuse, i2).then(function(i3) {
            if (i3.code)
              return a2 = Object(o.x)(s.t.CallModuleServerError, i3.message, i3.code), n2.error = a2, r2.logger.warn(l, s.X.CallReject, n2), Promise.reject(a2);
            r2.updateCallListSeq(i3.talk_time);
            var a2 = r2.dbCallMap.get(e2);
            i3 = a2 && a2.callUserMap[r2.engineConfig.user.userID];
            return a2 && i3 && (i3.state = s.i.Rejected, a2.state = s.h.Ended, i3.extendedData = t2.extendedData || "", r2.dbMgr.addCallList([a2]), r2.eventBus.emit(s.u.CallUserState, { callID: e2, callUserList: [r2.pickCallUser(i3)] })), r2.logger.info(l, s.X.CallReject, n2), { callID: e2 };
          });
        }, p.prototype.callingInvite = function(e2, t2, r2) {
          var n2 = this, i2 = { time: /* @__PURE__ */ new Date(), callID: t2, invitees: e2, config: r2 }, u2 = [];
          e2 = Array.from(new Set(e2.filter(function(e3) {
            return !!Object(o.n)(e3) || (u2.push({ userID: e3, reason: 6000001 }), false);
          }))), r2 = { call_id: t2, user_ids: e2, offline_info: Object(o.g)(r2.pushConfig) };
          return this.connMgr.sendRequest(s.d.call_invite, r2).then(function(r3) {
            if (r3.code)
              return c2 = Object(o.x)(s.t.CallModuleServerError, r3.message, r3.code), i2.error = c2, n2.logger.warn(l, s.X.CallInvite, i2), Promise.reject(c2);
            r3.err_list.forEach(function(e3) {
              return u2.push({ userID: e3.user_id, reason: e3.sub_code });
            });
            var c2, d2, p2 = n2.dbCallMap.get(t2);
            return p2 && (c2 = e2.filter(function(e3) {
              return !u2.find(function(t3) {
                return t3.userID == e3;
              });
            }).map(function(e3) {
              return e3 = { userID: e3, state: s.i.Inviting, extendedData: "" }, p2.callUserMap[e3.userID] = a(a({}, e3), { acceptTime: 0, quitTime: 0, timeout: p2.timeout }), e3;
            }), n2.dbMgr.addCallList([p2]), d2 = null == (d2 = p2.callUserMap[n2.engineConfig.user.userID]) ? void 0 : d2.state, n2.isMainDevice(d2, null == (d2 = r3.call_user_session_id) ? void 0 : d2.toString()) ? (n2.eventBus.emit(s.u.CallUserState, { callID: t2, callUserList: c2 }), e2.map(function(e3) {
              clearTimeout(n2.receiveTimer[t2 + e3]), n2.createInviteTimeout(t2, e3, r3.timeout);
            })) : setTimeout(function() {
              e2.forEach(function(e3) {
                e3 = p2.callUserMap[e3], p2.state != s.h.Started || (null == e3 ? void 0 : e3.state) != s.i.Inviting && (null == e3 ? void 0 : e3.state) != s.i.Received || (e3.state = s.i.Timeout);
              });
            }, 1e3 * r3.timeout)), n2.logger.info(l, s.X.CallingInvite, i2), { callID: t2, errorUserList: u2 };
          });
        }, p.prototype.callQuit = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 }, i2 = { call_id: e2, payload: this.encodeExtendedData(t2), offline_info: Object(o.g)(t2.pushConfig) };
          return this.connMgr.sendRequest(s.d.call_quit, i2).then(function(i3) {
            if (i3.code)
              return c2 = Object(o.x)(s.t.CallModuleServerError, i3.message, i3.code), n2.error = c2, r2.logger.warn(l, s.X.CallQuit, n2), Promise.reject(c2);
            r2.updateCallListSeq(i3.call_list_seq);
            var a2, u2, c2 = r2.dbCallMap.get(e2), d2 = c2 && c2.callUserMap[r2.engineConfig.user.userID];
            return c2 && d2 && (a2 = d2.state, d2.state = s.i.Quit, c2.state = s.h.Ended, d2.extendedData = t2.extendedData || "", d2.quitTime = +i3.quit_time.toString() || 0, c2.userDuration = (d2.quitTime - d2.acceptTime) / 1e3 | 0, c2.endTime = !Object.values(c2.callUserMap).some(function(e3) {
              return e3.state == s.i.Accepted;
            }) && +i3.quit_time.toString() || 0, Object.values(c2.callUserMap).every(function(e3) {
              return e3.state == s.i.Quit;
            }) && (c2.endTime = 0), u2 = 0, Object.values(c2.callUserMap).forEach(function(e3) {
              var t3 = e3.state;
              e3 = e3.acceptTime;
              t3 != s.i.Rejected && t3 != s.i.Timeout && t3 != s.i.Quit || (u2 ? e3 < u2 && (u2 = e3) : u2 = e3 || 0);
            }), u2 && (c2.callDuration = (d2.quitTime - u2) / 1e3 | 0), r2.dbMgr.addCallList([c2]), i3 = null == (i3 = i3.call_user_session_id) ? void 0 : i3.toString(), r2.isMainDevice(a2, i3) && r2.eventBus.emit(s.u.CallUserState, { callID: e2, callUserList: [r2.pickCallUser(d2)] })), r2.logger.info(l, s.X.CallQuit, n2), { callID: e2, createTime: (null == c2 ? void 0 : c2.createTime) || 0, acceptTime: (null == d2 ? void 0 : d2.acceptTime) || (null == c2 ? void 0 : c2.createTime) || 0, quitTime: (null == d2 ? void 0 : d2.quitTime) || 0 };
          });
        }, p.prototype.callJoin = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 };
          t2 = { user_id: e2, user_name: this.encodeExtendedData(t2) };
          return this.connMgr.sendRequest(s.d.call_enter, t2).then(function(t3) {
            var i2;
            if (t3.code)
              return i2 = Object(o.x)(s.t.CallModuleServerError, t3.message, t3.code), n2.error = i2, r2.logger.warn(l, s.X.CallJoin, n2), Promise.reject(i2);
            r2.updateCallListSeq(t3.call_list_seq);
            var u2 = [], c2 = r2.dbCallMap.get(e2) || { callID: e2, caller: t3.caller, mode: s.g.Advanced, state: s.h.Started, createTime: t3.create_time, endTime: 0, extendedData: Object(o.h)(t3.payload), callDuration: 0, userDuration: 0, callUserMap: {} };
            return c2.state = s.h.Started, c2.timeout = t3.timeout, t3.user_state_list.map(function(e3) {
              e3 = { userID: e3.user_id, state: r2.translateUserState(e3), extendedData: Object(o.h)(e3.extended_data), acceptTime: e3.acceptTime || 0, quitTime: e3.quit_time || 0 }, c2.callUserMap[e3.userID] = a(a({}, e3), { timeout: c2.timeout }), u2.push(r2.pickCallUser(e3));
            }), r2.dbCallMap.set(e2, c2), r2.dbMgr.addCallList([c2]), { callID: e2, createTime: t3.create_time, joinTime: t3.accept_time, extendedData: Object(o.h)(t3.extended_data), callUserList: u2 };
          });
        }, p.prototype.callEnd = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), callID: e2, config: t2 }, i2 = { call_id: e2, payload: this.encodeExtendedData(t2), offline_info: Object(o.g)(t2.pushConfig) };
          return this.connMgr.sendRequest(s.d.call_destroy, i2).then(function(i3) {
            if (i3.code)
              return c2 = Object(o.x)(s.t.CallModuleServerError, i3.message, i3.code), n2.error = c2, r2.logger.warn(l, s.X.CallEnd, n2), Promise.reject(c2);
            r2.updateCallListSeq(i3.call_list_seq);
            var a2, u2, c2 = +i3.talk_time.toString() || 0, d2 = r2.dbCallMap.get(e2), p2 = d2 && d2.callUserMap[r2.engineConfig.user.userID];
            return d2 && p2 && (a2 = p2.state, d2.state = s.h.Ended, d2.endTime = c2, r2.calculateCallDuration(d2), r2.dbMgr.addCallList([d2]), u2 = { callID: e2, mode: d2.mode, caller: d2.caller, operatedUserID: r2.engineConfig.user.userID, endTime: c2, extendedData: t2.extendedData }, i3 = i3.quit_time.toString(), p2.extendedData = t2.extendedData, p2.state = s.i.Ended, r2.dbMgr.addCallList([d2]), r2.isMainDevice(a2, i3) && (r2.eventBus.emit(s.u.CallEnd, u2), r2.eventBus.emit(s.u.CallUserState, { callID: e2, callUserList: [{ userID: p2.userID, state: p2.state, extendedData: p2.extendedData }] }))), r2.logger.info(l, s.X.CallEnd, n2), { callID: e2, createTime: (null == d2 ? void 0 : d2.createTime) || 0, acceptTime: (null == p2 ? void 0 : p2.acceptTime) || 0, endTime: c2 };
          });
        }, p.prototype.queryList = function(e2) {
          var t2, r2 = this, n2 = Array.from(this.dbCallMap.values()).sort(function(e3, t3) {
            return t3.createTime - e3.createTime;
          }), i2 = { config: e2, total: n2.length, count: 0 }, o2 = 100 < e2.count ? 100 : e2.count, a2 = (e2 = (e2 = e2.nextFlag || 0) || 0, n2.length > o2 ? (e2 = (t2 = (e2 + 1) * o2) >= (n2 = (a2 = e2 * o2) > n2.length ? [] : n2).length ? 0 : e2 + 1, n2 = n2.slice(a2, t2), i2.start = a2, i2.end = t2) : e2 = 0, 0 == o2 && (e2 = 0), i2.count = n2.length, n2.map(function(e3) {
            return r2.getCallInfoFromDB(e3);
          }));
          return this.logger.info(l, s.X.QueryCallList, i2), Promise.resolve({ callList: a2, nextFlag: e2 });
        }, p.prototype.onPushCallInvited = function(e2) {
          var t2, r2, n2, i2, u2 = this, c2 = e2.call_id, l2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(c2)), d2 = l2 && l2.callUserMap[this.engineConfig.user.userID];
          l2 && d2 && d2.state != s.i.Inviting || (t2 = e2.timeout || 0, r2 = {}, n2 = [], e2.user_state_list.forEach(function(e3) {
            4 != e3.sub_code && (e3 = { userID: e3.user_id, state: u2.translateUserState(e3), extendedData: "" }, n2.push(e3), r2[e3.userID] = a(a({}, e3), { acceptTime: 0, quitTime: 0, timeout: t2 }));
          }), l2 || (l2 = { callID: c2, caller: e2.caller, mode: e2.call_mode == s.g.Advanced ? s.g.Advanced : s.g.General, state: s.h.Started, createTime: +e2.create_time.toString(), endTime: 0, extendedData: Object(o.h)(e2.payload), timeout: t2, inviter: e2.caller, userDuration: 0, callDuration: 0, callUserMap: r2 }, this.dbCallMap.set(c2, l2)), this.dbMgr.addCallList([l2]), l2.mode, i2 = l2.caller, l2.caller, l2.extendedData, l2.createTime, l2.timeout, i2 !== this.engineConfig.user.userID ? this.queryCallInfo(l2, true, "push") : (null == (d2 = e2.call_user_session_id) ? void 0 : d2.toString()) !== this.engineConfig.sessionID.toString() && setTimeout(function() {
            (null == l2 ? void 0 : l2.state) == s.h.Started && n2.filter(function(e3) {
              return e3.userID !== i2;
            }).forEach(function(e3) {
              (null == l2 ? void 0 : l2.callUserMap[e3.userID].state) != s.i.Inviting && (null == l2 ? void 0 : l2.callUserMap[e3.userID].state) != s.i.Received || (l2.callUserMap[e3.userID].state = s.i.Timeout);
            });
          }, 1e3 * t2));
        }, p.prototype.onPushCallCancel = function(e2) {
          var t2, r2, n2, i2, a2, u2 = this, c2 = e2.call_id, l2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(c2));
          l2 && (a2 = null == (t2 = l2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, t2 && t2.state != s.i.Timeout ? (i2 = e2.state == s.f.Timeout ? s.f.Timeout : s.f.Cancel, r2 = null == (r2 = e2.call_user_session_id) ? void 0 : r2.toString(), i2 == s.f.Timeout ? this.isSelfNotInCall(l2, "PushTimeout") || (n2 = [], e2.user_ids.forEach(function(e3) {
            (e3 = l2.callUserMap[e3]) && e3.state !== s.i.Timeout && (e3.state = s.i.Timeout, n2.push(u2.pickCallUser(e3)));
          }), -1 != e2.user_ids.indexOf(this.engineConfig.user.userID) && (l2.state = s.h.Ended, t2 && (t2.state = s.i.Timeout), r2 || this.eventBus.emit(s.u.CallTimeout, { callID: c2, mode: l2.mode })), this.checkEndCallState(l2), this.isMainDevice(a2, r2) && n2.length && this.eventBus.emit(s.u.CallUserState, { callID: c2, callUserList: n2 })) : (l2.state = s.h.Ended, i2 = { callID: c2, mode: l2.mode, inviter: e2.caller, extendedData: Object(o.h)(e2.extended_data) }, this.isMainDevice(t2.state, r2) && (this.eventBus.emit(s.u.CallCancel, i2), this.eventBus.emit(s.u.CallUserState, { callID: c2, callUserList: [{ userID: i2.inviter, state: s.i.Cancelled, extendedData: i2.extendedData }] })), (a2 = l2.callUserMap[e2.operator]) && (a2.state = s.i.Cancelled, a2.extendedData = i2.extendedData)), this.dbMgr.addCallList([l2])) : l2.state = s.h.Ended);
        }, p.prototype.onPushCallAccept = function(e2) {
          var t2, r2, n2 = e2.call_id, i2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(n2)), a2 = i2 && i2.callUserMap[e2.invitee];
          i2 && a2 && (t2 = null == (t2 = i2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, a2.state = s.i.Accepted, a2.extendedData = Object(o.h)(e2.extended_data), a2.acceptTime = +e2.accept_time.toString(), (r2 = i2.callUserMap[e2.caller]) && !r2.acceptTime && (r2.acceptTime = a2.acceptTime), this.dbMgr.addCallList([i2]), e2 = null == (r2 = e2.call_user_session_id) ? void 0 : r2.toString(), this.checkEndCallState(i2), this.isMainDevice(t2, e2) && (this.eventBus.emit(s.u.CallUserState, { callID: n2, callUserList: [this.pickCallUser(a2)] }), this.eventBus.emit("callInvitationAccepted", { callID: n2, invitee: a2.userID, extendedData: a2.extendedData })));
        }, p.prototype.onPushCallReject = function(e2) {
          var t2, r2 = e2.call_id, n2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(r2)), i2 = n2 && n2.callUserMap[e2.invitee];
          n2 && i2 && (t2 = null == (t2 = n2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, i2.state = s.i.Rejected, i2.extendedData = Object(o.h)(e2.extended_data), this.dbMgr.addCallList([n2]), this.checkEndCallState(n2), e2 = null == (e2 = e2.call_user_session_id) ? void 0 : e2.toString(), this.isMainDevice(t2, e2) && (this.eventBus.emit(s.u.CallUserState, { callID: r2, callUserList: [this.pickCallUser(i2)] }), this.eventBus.emit("callInvitationRejected", { callID: r2, invitee: i2.userID, extendedData: i2.extendedData })), this.engineConfig.user.userID == i2.userID && (n2.state = s.h.Ended));
        }, p.prototype.onPushCallingInvite = function(e2) {
          var t2, r2, n2, i2, a2, u2 = this, c2 = e2.call_id, d2 = (this.updateCallListSeq(e2.call_list_seq), null == (d2 = e2.call_user_session_id) ? void 0 : d2.toString()), p2 = e2.timeout, h = this.dbCallMap.get(c2) || { callID: c2, caller: e2.caller, mode: s.g.Advanced, state: s.h.Started, createTime: +e2.create_time.toString(), endTime: 0, extendedData: Object(o.h)(e2.payload), callDuration: 0, userDuration: 0, callUserMap: {} };
          h.inviter = e2.invitee, h.timeout = e2.timeout, !e2.user_state_list.find(function(e3) {
            return e3.user_id == u2.engineConfig.user.userID;
          }) && this.isSelfNotInCall(h) || (r2 = null == (r2 = h.callUserMap[this.engineConfig.user.userID]) ? void 0 : r2.state, n2 = e2.user_state_list.reduce(function(e3, t3) {
            return 4 != t3.sub_code && (e3[t3.user_id] = { userID: t3.user_id, state: u2.translateUserState(t3), extendedData: "", acceptTime: 0, quitTime: 0, timeout: p2 }), e3;
          }, {}), Object.assign(h.callUserMap, n2), this.dbCallMap.set(c2, h), i2 = [], e2.user_state_list.forEach(function(e3) {
            var r3 = h && h.callUserMap[e3.user_id];
            e3.sub_code || e3.user_id != u2.engineConfig.user.userID || (t2 = true, h.state = s.h.Started), r3 && i2.push(u2.pickCallUser(r3));
          }), i2.length && !t2 && (e2.invitee !== this.engineConfig.user.userID && i2.forEach(function(e3) {
            clearTimeout(u2.inviterTimer[c2 + e3.userID]);
          }), this.isMainDevice(r2, d2) && this.eventBus.emit(s.u.CallUserState, { callID: c2, callUserList: i2 })), (a2 = {}).isMain = d2 == this.engineConfig.sessionID.toString(), a2.callUserList = i2, e2.invitee == this.engineConfig.user.userID ? d2 && d2 == this.engineConfig.sessionID.toString() ? i2.map(function(t3) {
            u2.createInviteTimeout(e2.call_id, t3.userID, p2);
          }) : setTimeout(function() {
            h.state == s.h.Started && i2.forEach(function(e3) {
              h.callUserMap[e3.userID].state != s.i.Inviting && h.callUserMap[e3.userID].state != s.i.Received || (h.callUserMap[e3.userID].state = s.i.Timeout);
            }), u2.logger.info(l, "onPushCallingInvite timeout", a2);
          }, 1e3 * p2) : this.queryCallInfo(h, true, "push", i2), this.logger.info(l, "onPushCallingInvite", a2));
        }, p.prototype.onPushCallQuit = function(e2) {
          var t2, r2 = e2.call_id, n2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(r2)), i2 = n2 && n2.callUserMap[e2.invitee];
          n2 && i2 && !this.isSelfNotInCall(n2) && (t2 = null == (t2 = n2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, i2.state = s.i.Quit, i2.extendedData = Object(o.h)(e2.payload), i2.quitTime = +e2.quit_time.toString(), i2.acceptTime || (i2.acceptTime = +e2.accept_time.toString()), this.dbMgr.addCallList([n2]), e2 = null == (e2 = e2.call_user_session_id) ? void 0 : e2.toString(), this.checkEndCallState(n2), this.isMainDevice(t2, e2) && this.eventBus.emit(s.u.CallUserState, { callID: r2, callUserList: [this.pickCallUser(i2)] }), this.engineConfig.user.userID == i2.userID && (n2.state = s.h.Ended));
        }, p.prototype.onPushCallEnter = function(e2) {
          var t2, r2, n2, i2 = this, a2 = e2.call_id, u2 = (this.updateCallListSeq(e2.call_list_seq), this.dbCallMap.get(a2));
          (u2 && !this.isSelfNotInCall(u2) || e2.user_id === this.engineConfig.user.userID) && (u2 ? e2.user_id == this.engineConfig.user.userID && (u2.state = s.h.Started) : (u2 = { callID: a2, caller: this.engineConfig.user.userID, mode: s.g.Advanced, state: s.h.Started, extendedData: Object(o.h)(e2.call_payload), createTime: +e2.create_time.toString(), endTime: 0, timeout: e2.timeout, inviter: e2.caller, callDuration: 0, userDuration: 0, callUserMap: {} }, this.dbCallMap.set(a2, u2)), t2 = null == (t2 = u2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, (n2 = e2.user_state_list.find(function(t3) {
            return t3.user_id == e2.user_id;
          })) && (r2 = null == (r2 = e2.call_user_session_id) ? void 0 : r2.toString(), n2 = { userID: n2.user_id, state: this.translateUserState(n2), extendedData: Object(o.h)(e2.payload) }, e2.user_state_list.forEach(function(t3) {
            u2 && (u2.callUserMap[t3.user_id] = { userID: t3.user_id, state: i2.translateUserState(t3), extendedData: Object(o.h)(t3.extended_data), acceptTime: +t3.accept_time.toString(), quitTime: 0, timeout: +t3.residue_timeout_time.toString() }, t3.user_id == e2.user_id && (u2.callUserMap[t3.user_id].extendedData = Object(o.h)(e2.payload), u2.callUserMap[t3.user_id].acceptTime = +e2.enter_time.toString()));
          }), this.dbMgr.addCallList([u2]), this.isMainDevice(t2, r2) && this.eventBus.emit(s.u.CallUserState, { callID: a2, callUserList: [n2] })));
        }, p.prototype.onPushCallAckTimeout = function(e2) {
          var t2, r2, n2 = this, i2 = e2.call_id, o2 = this.dbCallMap.get(i2);
          o2 && !this.isSelfNotInCall(o2) && null != (r2 = e2.invitees) && r2.length && (t2 = [], e2.invitees.forEach(function(e3) {
            (e3 = o2.callUserMap[e3]) && (e3.state = s.i.NotYetReceived, t2.push(n2.pickCallUser(e3)));
          }), r2 = null == (r2 = o2.callUserMap[this.engineConfig.user.userID]) ? void 0 : r2.state, this.dbMgr.addCallList([o2]), e2 = null == (e2 = e2.session_id) ? void 0 : e2.toString(), this.isMainDevice(r2, e2) && this.eventBus.emit(s.u.CallUserState, { callID: i2, callUserList: t2 }));
        }, p.prototype.onPushCallEnd = function(e2) {
          var t2, r2, n2, i2, a2 = e2.call_id, u2 = this.dbCallMap.get(a2);
          u2 && (t2 = null == (t2 = u2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, u2.state = s.h.Ended, u2.endTime = +e2.destroy_time.toString(), this.calculateCallDuration(u2), this.dbMgr.addCallList([u2]), r2 = { callID: a2, mode: u2.mode, caller: u2.caller, operatedUserID: e2.operator || u2.caller, extendedData: Object(o.h)(e2.payload), endTime: u2.endTime }, n2 = u2.callUserMap[e2.operator || u2.caller], i2 = null == (i2 = e2.call_user_session_id) ? void 0 : i2.toString(), n2 && (n2.state = s.i.Ended, n2.extendedData = Object(o.h)(e2.payload), this.dbMgr.addCallList([u2])), this.isMainDevice(t2, i2) && !this.isSelfNotInCall(u2) && (this.eventBus.emit(s.u.CallEnd, r2), this.eventBus.emit(s.u.CallUserState, { callID: a2, callUserList: [{ userID: n2.userID, state: n2.state, extendedData: n2.extendedData }] })));
        }, p.prototype.onPushCallAck = function(e2) {
          var t2, r2 = e2.call_id, n2 = this.dbCallMap.get(r2), i2 = n2 && n2.callUserMap[e2.invitee];
          n2 && i2 && !this.isSelfNotInCall(n2) && i2.state != s.i.Received && (t2 = null == (t2 = n2.callUserMap[this.engineConfig.user.userID]) ? void 0 : t2.state, i2.state = s.i.Received, this.dbMgr.addCallList([n2]), e2 = null == (n2 = e2.call_user_session_id) ? void 0 : n2.toString(), this.isMainDevice(t2, e2) && this.eventBus.emit(s.u.CallUserState, { callID: r2, callUserList: [this.pickCallUser(i2)] }));
        }, p.prototype.registerInnerEvent = function() {
          this.eventBus.add(s.u.ILogined, this.onLogined.bind(this)), this.eventBus.add(s.u.ILogout, this.onLogout.bind(this)), this.eventBus.add(s.u.IConnected, this.onConnected.bind(this)), this.eventBus.add(s.u.INetworkChange, this.onNetworkChange.bind(this)), this.eventBus.add(s.u.ITriggerHB, this.onTriggerHB.bind(this));
        }, p.prototype.onLogined = function() {
          var e2 = this;
          this.dbMgr.getCallList().then(function(t2) {
            t2.forEach(function(t3) {
              e2.dbCallMap.set(t3.callID, t3), t3.state != s.h.Started || e2.isSelfNotInCall(t3) || e2.queryCallInfo(t3, false, "onLogined");
            });
          }), this.mergeServerCallList(s.v.SDKLogin);
        }, p.prototype.onLogout = function() {
          this.dbCallMap.clear();
        }, p.prototype.onConnected = function() {
          this.mergeServerCallList(s.v.SDKHb, "onConnected");
        }, p.prototype.onNetworkChange = function(e2) {
          this.online = e2;
        }, p.prototype.onTriggerHB = function() {
          this.mergeServerCallList(s.v.SDKHb, "hb");
        }, p.prototype.checkEndCallState = function(e2) {
          var t2, r2 = [];
          for (t2 in e2.callUserMap)
            r2.push(e2.callUserMap[t2]);
          e2.mode == s.g.General && r2.every(function(e3) {
            return e3.state == s.i.Accepted || e3.state == s.i.Rejected || e3.state == s.i.Timeout;
          }) && (e2.state = s.h.Ended), e2.mode == s.g.Advanced && r2.every(function(e3) {
            return e3.state == s.i.Quit;
          }) && (e2.state = s.h.Ended);
        }, p.prototype.mergeServerCallList = function(e2, t2) {
          var r2, i2, u2, c2, d2, p2 = this, h = n.a.fromString(this.engineConfig.user.callSeq || "0"), f = this.engineConfig.mailHBConfig.call_list_seq;
          (f && !f.lessThanOrEqual(h) || "onConnected" === t2) && (r2 = { time: /* @__PURE__ */ new Date(), dbSeq: h, hbSeq: f, how: e2, action: t2 }, i2 = 0, u2 = 1, c2 = ++this.mergeListSeq, d2 = function(n2) {
            var h2;
            i2 += n2.list.length, n2.list.forEach(function(e3) {
              var r3, i3, u3, c3, l2, d3, h3 = +e3.call_status.toString(), f2 = p2.dbCallMap.get(e3.call_id), g = !(null != f2 && f2.callUserMap[p2.engineConfig.user.userID]);
              f2 ? (f2.endTime = +e3.destroy_time.toString(), r3 = [], d3 = !p2.isSelfNotInCall(f2), e3.call_user_list.forEach(function(e4) {
                var t3, n3 = null == f2 ? void 0 : f2.callUserMap[e4.user_id];
                e4.user_id == p2.engineConfig.user.userID && (t3 = null == n3 ? void 0 : n3.state, g = (g = t3 == s.i.Accepted && e4.user_session_id.toString() == p2.engineConfig.sessionID.toString()) || t3 == s.i.Received || t3 == s.i.Inviting || "0" == e4.user_session_id.toString()), n3 && e4.user_state ? (t3 = p2.translateUserState(e4), n3.state !== t3 && t3 !== s.i.Unknown && n3.state !== s.i.Ended && (n3.state = t3, n3.extendedData = Object(o.h)(e4.extended_data), n3.timeout = +e4.residue_timeout_time.toString(), n3.acceptTime = +e4.accept_time.toString() || 0, n3.quitTime = +e4.quit_time.toString() || 0, r3.push(p2.pickCallUser(a({}, n3))), f2 && (f2.callUserMap[n3.userID] = a({}, n3)))) : (t3 = { userID: e4.user_id, state: p2.translateUserState(e4), extendedData: Object(o.h)(e4.extended_data), acceptTime: +e4.accept_time.toString() || 0, quitTime: +e4.quit_time.toString() || 0, timeout: +e4.residue_timeout_time.toString() }, r3.push(p2.pickCallUser(a({}, t3))), f2 && (f2.callUserMap[t3.userID] = a({}, t3)));
              }), i3 = false, u3 = e3.call_user_list.some(function(e4) {
                return p2.translateUserState(e4) == s.i.Ended;
              }), l2 = r3.find(function(e4) {
                return e4.state == s.i.Cancelled;
              }), r3.length && g && (h3 !== s.h.Ended && p2.eventBus.emit(s.u.CallUserState, { callID: f2.callID, callUserList: r3 }), (null == (c3 = r3.find(function(e4) {
                return e4.userID == p2.engineConfig.user.userID;
              })) ? void 0 : c3.state) == s.i.Timeout && (i3 = true, p2.eventBus.emit(s.u.CallTimeout, { callID: f2.callID, mode: f2.mode })), l2 && (i3 = true, p2.eventBus.emit(s.u.CallCancel, { callID: f2.callID, mode: f2.mode, inviter: f2.inviter, extendedData: l2.extendedData }))), f2.state == s.h.Started && h3 == s.h.Ended && (c3 = { callID: f2.callID, mode: f2.mode, caller: f2.caller, operatedUserID: f2.caller, extendedData: Object(o.h)(n2.payload), endTime: f2.endTime }, g && f2.mode == s.g.Advanced && d3 && !i3 && u3 && (f2.state = s.h.Ended, p2.eventBus.emit(s.u.CallEnd, c3))), f2.state = h3, p2.queryCallInfo(f2, false, "merge0")) : (l2 = e3.user_timeout, f2 = { callID: e3.call_id, caller: e3.caller, createTime: +e3.create_time.toString(), endTime: +e3.destroy_time.toString(), mode: e3.call_mode == s.g.Advanced ? s.g.Advanced : s.g.General, state: h3, extendedData: Object(o.h)(e3.payload), timeout: l2, inviter: e3.inviter, callDuration: 0, userDuration: 0, callUserMap: e3.call_user_list.reduce(function(e4, t3) {
                var r4 = p2.translateUserState(t3);
                return 4 != t3.sub_code && r4 !== s.i.Unknown && (e4[t3.user_id] = { userID: t3.user_id, state: r4, extendedData: Object(o.h)(t3.extended_data), acceptTime: +t3.accept_time.toString() || 0, quitTime: +t3.quit_time.toString() || 0, timeout: +t3.residue_timeout_time.toString() }), t3.user_id == p2.engineConfig.user.userID && (g = r4 == s.i.Accepted && t3.user_session_id.toString() == p2.engineConfig.sessionID.toString() || "0" == t3.user_session_id.toString()), e4;
              }, {}) }, p2.dbCallMap.set(f2.callID, f2), "onConnected" == t2 && (null == (d3 = f2.callUserMap[p2.engineConfig.user.userID]) ? void 0 : d3.state) == s.i.Timeout && p2.eventBus.emit(s.u.CallTimeout, { callID: f2.callID, mode: f2.mode }), f2.caller == p2.engineConfig.user.userID && g && p2.eventBus.emit(s.u.CallCreate, { callID: f2.callID, mode: f2.mode, caller: f2.caller, extendedData: f2.extendedData, timeout: f2.timeout, createTime: f2.createTime, callUserList: f2.callUserMap ? Object.values(f2.callUserMap).map(function(e4) {
                return p2.pickCallUser(e4);
              }) : [] }), p2.queryCallInfo(f2, true, "merge1"));
            }), n2.nextFlag && p2.engineConfig.token ? p2.fetchServerPageCall(n2.nextFlag, ++u2, e2).then(d2) : (n2.degree = u2, n2.svrCount = i2, p2.updateCallListSeq(n2.cur || n2.max, true), h2 = Array.from(p2.dbCallMap.values()), p2.dbMgr.addCallList(h2), "onConnected" == t2 && 0 == i2 && p2.dbCallMap.forEach(function(e3) {
              e3.state == s.h.Started && p2.queryCallInfo(e3, false, "onConnected");
            }), r2.svrCount = i2, r2.dataReport = p2.dataReport.endNetworkRequest(s.d.call_list.cmd, c2, n2), p2.logger.info(l, "mergeSvrCalls", r2));
          }, this.fetchServerPageCall(h, u2, e2).then(d2));
        }, p.prototype.fetchServerPageCall = function(e2, t2, r2) {
          return e2 = { cur_list_seq: e2, count: 100, full_pull: t2, how: r2 }, 1 == t2 && this.dataReport.beginNetworkRequest(s.d.call_list.cmd, this.mergeListSeq, s.j.SDK, e2), this.connMgr.sendRequest(s.d.call_list, e2, s.j.SDK).then(function(e3) {
            if (e3.code)
              return { cur: 0, list: [] };
            var t3 = e3.cur_list_seq, r3 = e3.max_list_seq, n2 = e3.fetch_end;
            return { nextFlag: n2 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, list: e3.calls, fetch_end: n2 };
          });
        }, p.prototype.queryCallInfo = function(e2, t2, r2, n2) {
          var i2, u2 = this;
          e2.state != s.h.Ended && (i2 = { call_id: e2.callID, action: r2 }, this.connMgr.sendRequest(s.d.call_info, i2, s.j.SDK).then(function(i3) {
            if (i3.code)
              6000104 !== i3.code && (e2.state = s.h.Ended);
            else {
              var c2 = [], l2 = {}, d2 = 0, p2 = (t2 || u2.diffCallUserState(e2, i3, r2), i3.user_list.forEach(function(t3) {
                var r3, n3;
                4 != t3.user_state && (r3 = { userID: t3.user_id, state: u2.translateUserState(t3), extendedData: Object(o.h)(t3.extended_data) }, c2.push(r3), n3 = +t3.accept_time.toString(), l2[r3.userID] = a(a({}, r3), { acceptTime: n3, quitTime: +t3.quit_time.toString(), timeout: +t3.residue_timeout_time.toString() }), n3 && (d2 = d2 ? Math.min(n3, d2) : n3), u2.callSessionIDMap[e2.callID] || (u2.callSessionIDMap[e2.callID] = {}), u2.callSessionIDMap[e2.callID][r3.userID] = t3.user_session_id);
              }), l2[u2.engineConfig.user.userID]), h = (l2[e2.caller] && (l2[e2.caller].acceptTime = d2), i3.now_time.toString()), f = p2 && p2.acceptTime, g = (h && f && e2.state == s.h.Started && (e2.userDuration = (h - f) / 1e3 | 0), e2.callUserMap = l2, u2.dbMgr.addCallList([e2]), u2.isSelfNotInCall(e2) && (e2.state = s.h.Ended), { callID: e2.callID, mode: e2.mode, caller: e2.caller, inviter: e2.inviter, extendedData: e2.extendedData, createTime: e2.createTime, timeout: p2.timeout, callUserList: c2 });
              if (t2 && p2)
                switch (p2.state != s.i.Inviting && p2.state != s.i.Accepted && p2.state != s.i.Received || i3.user_list.forEach(function(t3) {
                  (t3 = l2[t3.user_id]).state == s.i.Inviting && t3.timeout && u2.createReceiveTimeout(e2.callID, t3.userID, t3.timeout);
                }), p2.state) {
                  case s.i.Inviting:
                    u2.callAck(e2.callID), e2.state = s.h.Started, u2.eventBus.emit(s.u.CallRecv, g);
                    break;
                  case s.i.Received:
                    e2.state = s.h.Started, ("push" != r2 || n2 && n2.some(function(e3) {
                      return e3.userID == p2.userID;
                    })) && u2.eventBus.emit(s.u.CallRecv, g);
                    break;
                  case s.i.Timeout:
                    e2.state = s.h.Ended, u2.eventBus.emit(s.u.CallTimeout, { callID: e2.callID, mode: e2.mode });
                }
              !t2 && "merge0" == r2 && (null == p2 ? void 0 : p2.state) == s.i.Inviting && p2.timeout && (u2.callAck(e2.callID), u2.eventBus.emit(s.u.CallRecv, g), c2.map(function(t3) {
                u2.createReceiveTimeout(e2.callID, t3.userID, p2.timeout);
              })), t2 || "onConnected" != r2 || i3.user_list.forEach(function(t3) {
                (t3 = l2[t3.user_id]).state != s.i.Inviting && t3.state != s.i.Received || u2.createReceiveTimeout(e2.callID, t3.userID, t3.timeout);
              });
            }
          }));
        }, p.prototype.diffCallUserState = function(e2, t2, r2) {
          var n2 = this, i2 = { action: r2, call: e2.callID }, a2 = e2.callUserMap, d2 = null == (d2 = a2[this.engineConfig.user.userID]) ? void 0 : d2.state, p2 = [], h = "", f = (t2.user_list.forEach(function(e3) {
            var t3 = a2[e3.user_id], r3 = n2.translateUserState(e3);
            t3 && t3.state === r3 || (p2.push({ userID: e3.user_id, state: r3, extendedData: Object(o.h)(e3.extended_data) || "" }), i2[e3.user_id] = (null == t3 ? void 0 : t3.state) + "," + r3), e3.user_id == n2.engineConfig.user.userID && (h = null == e3.user_session_id ? "0" : e3.user_session_id);
          }), p2.find(function(e3) {
            return e3.userID == n2.engineConfig.user.userID;
          }) || {});
          f && f.state == s.i.Inviting && this.eventBus.emit(s.u.CallRecv, { callUserList: e2.callUserMap ? Object.values(e2.callUserMap).map(function(e3) {
            return n2.pickCallUser(e3);
          }) : [], caller: e2.caller, createTime: e2.createTime, extendedData: e2.extendedData, inviter: t2.inviter, timeout: t2.user_timeout, callID: e2.callID, mode: t2.mode }), f && f.state == s.i.Timeout && this.eventBus.emit(s.u.CallTimeout, { callID: e2.callID, mode: e2.mode }), t2 = p2.find(function(e3) {
            return e3.state == s.i.Cancelled && e3.userID !== (null === f ? void 0 : f.userID);
          }), "onLogined" == r2 && f && t2 && this.eventBus.emit(s.u.CallCancel, { callID: e2.callID, inviter: e2.inviter, mode: e2.mode, extendedData: t2.extendedData }), r2 = this.isMainDevice(d2, h);
          i2.isMain = r2, i2.selfOldState = d2, this.logger.info(l, "diffCallUserState", i2), p2.length && r2 && this.eventBus.emit(s.u.CallUserState, { callID: e2.callID, callUserList: c([], u(p2), false) });
        }, p.prototype.callAck = function(e2) {
          var t2 = this, r2 = { call_id: e2 }, n2 = this.dbCallMap.get(e2), i2 = n2 && n2.callUserMap[this.engineConfig.user.userID];
          (null == i2 ? void 0 : i2.state) === s.i.Inviting && this.connMgr.sendRequest(s.d.call_ack, r2, s.j.SDK).then(function(r3) {
            !r3.code && n2 && i2 && (i2.state = s.i.Received, t2.dbMgr.addCallList([n2]), t2.eventBus.emit(s.u.CallUserState, { callID: e2, callUserList: [t2.pickCallUser(i2)] }));
          });
        }, p.prototype.createInviteTimeout = function(e2, t2, r2) {
          var n2 = this, i2 = e2 + t2;
          this.inviterTimer[i2] && clearTimeout(this.inviterTimer[i2]), this.inviterTimer[i2] = setTimeout(function() {
            var r3 = n2.dbCallMap.get(e2);
            !r3 || r3.state == s.h.Ended && r3.mode == s.g.Advanced || (r3 = r3.callUserMap[t2]).state != s.i.Inviting && r3.state != s.i.Received && r3.state != s.i.NotYetReceived && r3.state != s.i.Unknown || n2.callCancel([t2], e2, { extendedData: "" }, s.f.Timeout);
          }, 1e3 * r2);
        }, p.prototype.createReceiveTimeout = function(e2, t2, r2) {
          var n2 = this, i2 = e2 + t2;
          this.receiveTimer[i2] && clearTimeout(this.receiveTimer[i2]), this.receiveTimer[i2] = setTimeout(function() {
            var r3, i3, o2, a2, u2;
            !n2.online || (r3 = n2.dbCallMap.get(e2)) && r3.state !== s.h.Ended && (o2 = !(i3 = []), (u2 = r3.callUserMap[t2]).state != s.i.Received && u2.state != s.i.Inviting || (i3.push({ userID: u2.userID, state: s.i.Timeout, extendedData: u2.extendedData }), t2 == n2.engineConfig.user.userID ? o2 = true : u2.state = s.i.Timeout), a2 = !(u2 = null == (u2 = n2.callSessionIDMap[e2]) ? void 0 : u2[n2.engineConfig.user.userID]) || u2 == n2.engineConfig.sessionID.toString(), u2 = { sid: u2, callUserList: i3.length }, n2.logger.info(l, "createReceiveTimeout", u2), a2 && i3.length && n2.eventBus.emit(s.u.CallUserState, { callID: e2, callUserList: i3 }), o2 && (r3.callUserMap[n2.engineConfig.user.userID].state = s.i.Timeout, r3.state = s.h.Ended, n2.eventBus.emit(s.u.CallTimeout, { callID: r3.callID, mode: r3.mode })));
          }, 1e3 * r2);
        }, p.prototype.translateUserState = function(e2) {
          var t2 = e2.call_state_list || [], r2 = e2.user_state || e2.sub_code;
          t2 = (t2 = t2.sort(function(e3, t3) {
            return e3.start_version - t3.start_version;
          })).shift(), r2 = r2 || (null == t2 ? void 0 : t2.state);
          return e2.is_timeout || 9 == r2 ? s.i.Timeout : r2 ? 1 == r2 ? s.i.Accepted : 2 == r2 ? s.i.Rejected : 3 == r2 ? s.i.Cancelled : 5 == r2 ? s.i.Received : 7 == r2 ? s.i.Quit : 8 == r2 ? s.i.Ended : 10 == r2 ? s.i.NotYetReceived : s.i.Unknown : s.i.Inviting;
        }, p.prototype.calculateCallDuration = function(e2) {
          var t2 = 0;
          Object.values(e2.callUserMap).forEach(function(e3) {
            0 < (e3 = e3.acceptTime) && (!t2 || e3 < t2) && (t2 = e3);
          }), e2.callDuration = t2 ? (e2.endTime - t2) / 1e3 | 0 : 0;
        }, p.prototype.pickCallUser = function(e2) {
          return { userID: e2.userID, state: e2.state, extendedData: e2.extendedData };
        }, p.prototype.encodeExtendedData = function(e2) {
          return (e2 = (null == e2 ? void 0 : e2.extendedData) || "") ? Object(o.k)(e2) : void 0;
        }, p.prototype.updateCallListSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.callSeq && r2.callSeq != e2.sub(1).toString() || (r2.callSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, p.prototype.isSelfNotInCall = function(e2, t2) {
          var r2, n2;
          return !!e2.callUserMap && (!(r2 = !(r2 = e2.callUserMap[this.engineConfig.user.userID]) || r2.state == s.i.Timeout || r2.state == s.i.Cancelled || r2.state == s.i.Rejected || r2.state == s.i.Quit) && t2 && (n2 = { action: t2, call: e2.callID }, Object.values(e2.callUserMap).forEach(function(e3) {
            return n2[e3.userID] = e3.state;
          }), this.logger.info(l, "isSelfNotInCall", n2)), r2);
        }, p.prototype.isMainDevice = function(e2, t2) {
          return e2 == s.i.Accepted && t2 == this.engineConfig.sessionID.toString() || e2 == s.i.Received || e2 == s.i.Inviting || "0" == (null == t2 ? void 0 : t2.toString());
        }, p.prototype.getCallInfoFromDB = function(e2) {
          var t2 = this;
          return { callID: e2.callID, caller: e2.caller, mode: e2.mode, state: e2.state, inviter: e2.inviter, extendedData: e2.extendedData, createTime: e2.createTime, endTime: e2.endTime, callUserList: e2.callUserMap ? Object.values(e2.callUserMap).map(function(e3) {
            return t2.pickCallUser(e3);
          }) : [] };
        }, p.prototype.checkCallAPI = function(e2, t2, r2) {
          var n2, i2 = this.dbCallMap.get(e2);
          if ((null == i2 ? void 0 : i2.state) == s.h.Ended)
            return n2 = Object(o.x)(6000270), i2 && (n2.message = "Call: " + e2 + " is ended."), t2.error = n2, this.logger.warn(l, r2, t2), n2;
        }, p);
        function p(e2, t2, r2, n2) {
          this.logger = i.a.getInstance().logger, this.dataReport = i.a.getInstance().dataReport, this.dbCallMap = /* @__PURE__ */ new Map(), this.mergeListSeq = 0, this.receiveTimer = {}, this.inviterTimer = {}, this.callSessionIDMap = {}, this.online = true, this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = n2, this.registerInnerEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        var n = r(2), i = r(66), o = r(1), s = r(0), a = r(67), u = function() {
          return (u = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, c = s.Y.Connection, l = (d.prototype.initEvent = function(e2, t2, r2) {
          this.onConnectedEvent = e2, this.onDisConnectedEvent = t2, this.onPushEvent = r2;
        }, d.prototype.create = function(e2) {
          return !e2 && this.connection && this.connection.isOpen ? Promise.resolve() : (this.streamID++, this.close(), (e2 = new a.a(this.eventBus, this.engineConfig)).onconnected = this.onConnectedEvent, e2.ondisconnected = this.onDisConnectedEvent, e2.onmessage = this.onmessage, this.connection = e2, this.initUrls(), this.initSessionID(), e2.create(this.urls));
        }, d.prototype.close = function() {
          this.connection && this.connection.destroy(), this.connection = null;
        }, d.prototype.destroy = function() {
          this.requestMap.clear(), this.qpsStgy.destroy(), this.close(), this.logger = null, this.dataReport = null, this.protobuf = null, this.engineConfig = null;
        }, d.prototype.sendDispatchRequest = function(e2) {
          var t2 = ++this.seq, r2 = (e2 = this.protobuf.encodeAccesshubGetAppConfigRequest(this.streamID, t2, this.engineConfig, e2), this.connection.send(e2), { time: /* @__PURE__ */ new Date(), seq: t2, size: e2.length, cmd: "AccesshubGetAppConfigRequest" });
          this.createRequest(t2, this.engineConfig.cloudSetting.req_to.def, r2), t2 = ++this.seq, e2 = this.protobuf.encodeAccesshubDispatchRequest(this.streamID, t2, this.engineConfig), this.connection.send(e2), r2 = { time: /* @__PURE__ */ new Date(), seq: t2, size: e2.length, cmd: "AccesshubDispatchRequest" }, this.createRequest(t2, this.engineConfig.cloudSetting.req_to.def, r2), t2 = ++this.seq, e2 = this.protobuf.encodeAccesshubGetSvraddrRequest(this.streamID, t2, this.engineConfig), this.connection.send(e2), r2 = { time: /* @__PURE__ */ new Date(), seq: t2, size: e2.length, cmd: "AccesshubGetSvraddrRequest" }, this.createRequest(t2, this.engineConfig.cloudSetting.req_to.def, r2);
        }, d.prototype.sendHttpRequest = function(e2, t2, r2) {
          var n2 = ++this.seq;
          r2 = this.protobuf.encodeAccesshubHTTPRequest(this.streamID, n2, this.engineConfig, e2, t2, r2), this.connection.send(r2), r2 = { time: /* @__PURE__ */ new Date(), seq: n2, size: r2.length, cmd: "AccesshubHTTPRequest", http: e2, body: t2 };
          return this.createRequest(n2, this.engineConfig.cloudSetting.req_to.def, r2);
        }, d.prototype.sendRequest = function(e2, t2, r2, n2, i2) {
          return void 0 === r2 && (r2 = s.j.API), void 0 === n2 && (n2 = this.engineConfig.cloudSetting.req_to.def), void 0 === i2 && (i2 = true), this.connection && this.engineConfig.serverUserID ? this.qpsStgy.canPass(e2.w, 1) ? this.sendRequestInner(e2.cmd, t2, r2, n2, i2) : this.createQPSRequest(e2.cmd, t2, r2, n2, i2, e2.w) : Promise.resolve(Object(o.x)(s.t.NetworkModuleNetworkError));
        }, d.prototype.sendRequestWithHeartbeat = function(e2, t2) {
          return this.sendRequestInner(e2, t2, s.j.SDK, this.engineConfig.cloudSetting.req_to.def, false);
        }, d.prototype.sendRequestWithNoRsp = function(e2, t2) {
          if (this.connection && this.engineConfig.serverUserID) {
            e2 = this.generateHeader(e2, s.j.SDK), e2 = this.protobuf.encodeRequest(e2, t2, this.streamID, this.engineConfig);
            try {
              this.connection.send(e2);
            } catch (e3) {
            }
          }
        }, d.prototype.responseRequest = function(e2, t2, r2) {
          var n2, i2;
          return this.requestMap.has(e2) ? (n2 = (i2 = this.requestMap.get(e2)).timer, i2 = i2.resolve, clearTimeout(n2), t2 && (this.requestMap.delete(e2), i2({ code: r2 })), e2) : 0;
        }, d.prototype.initUrls = function() {
          if (!this.urls.length) {
            var e2 = this.settings.advancedConfig.geoFence.host.accesshub;
            if (e2)
              this.urls[0] = e2;
            else {
              this.urls[0] = s.B[1].host.accesshub;
              try {
                var t2 = o.p ? o.p.getStorageSync(o.p._zisAlipay ? { key: this.urlKey } : this.urlKey) : localStorage.getItem(this.urlKey);
                if (!t2 || "object" == typeof t2 && !t2.data)
                  return;
                this.urls = n.a.getInstance().crypto.decryptString("object" == typeof t2 ? t2.data : t2, this.engineConfig).split(",");
              } catch (e3) {
              }
            }
          }
        }, d.prototype.saveUrls = function() {
          if (this.urls.length) {
            var e2 = n.a.getInstance().crypto.encryptString(this.urls.join(","), this.engineConfig);
            if (o.p)
              o.p._zisAlipay ? o.p.setStorageSync({ key: this.urlKey, data: e2 }) : o.p.setStorageSync(this.urlKey, e2);
            else
              try {
                localStorage.setItem(this.urlKey, e2);
              } catch (e3) {
              }
          }
        }, d.prototype.initSessionID = function() {
          try {
            var e2 = o.p ? o.p.getStorageSync(o.p._zisAlipay ? { key: this.sessionKey } : this.sessionKey) : localStorage.getItem(this.sessionKey);
            if (!e2 || "object" == typeof e2 && !e2.data)
              return;
            var t2 = "object" == typeof e2 ? e2.data : e2, r2 = t2.indexOf("_");
            t2.substring(r2 + 1) == this.engineConfig.user.userID && (this.sessionID = t2.substring(0, r2));
          } catch (e3) {
          }
        }, d.prototype.saveSessionID = function() {
          var e2 = this.engineConfig.sessionID + "_" + this.engineConfig.user.userID;
          if (o.p)
            o.p._zisAlipay ? o.p.setStorageSync({ key: this.sessionKey, data: e2 }) : o.p.setStorageSync(this.sessionKey, e2);
          else
            try {
              localStorage.setItem(this.sessionKey, e2);
            } catch (e3) {
            }
        }, d.prototype.initQPSEvent = function() {
          this.eventBus.add(s.u.IQPSSend, this.sendQPSRequest.bind(this));
        }, d.prototype.sendRequestInner = function(e2, t2, r2, n2, i2) {
          var a2 = this.generateHeader(e2, r2), u2 = a2.seq;
          e2 == s.d.sw_login.cmd && (t2._seq = u2), -1 == this.pageMergeReportCmdList.indexOf(e2) && this.dataReport.beginNetworkRequest(e2, u2, r2, t2), r2 = this.protobuf.encodeRequest(a2, t2, this.streamID, this.engineConfig);
          try {
            this.connection.send(r2);
          } catch (e3) {
            return Promise.resolve(Object(o.x)(s.t.NetworkModuleNetworkError));
          }
          return i2 = i2 ? { time: /* @__PURE__ */ new Date(), seq: u2, caller: a2.caller_type, size: r2.length, rsize: -1, cmd: e2, body: t2 } : null, this.createRequest(u2, n2, i2, e2);
        }, d.prototype.sendQPSRequest = function(e2) {
          var t2 = this.requestMap.get(e2);
          if (t2) {
            var r2 = t2.timeout, n2 = (i2 = t2.header).cmd, i2 = (-1 == this.pageMergeReportCmdList.indexOf(n2) && this.dataReport.beginNetworkRequest(n2, e2, i2.caller_type, t2.body), this.protobuf.encodeRequest(i2, t2.body, this.streamID, this.engineConfig));
            try {
              this.connection.send(i2);
            } catch (e3) {
              return t2.resolve(Object(o.x)(s.t.NetworkModuleNetworkError));
            }
            t2.log && (t2.timeout = Date.now()), t2.timer = this.createRequestTimer(e2, r2, t2.log, t2.resolve, n2);
          }
        }, d.prototype.createRequest = function(e2, t2, r2, n2) {
          var i2 = this;
          return new Promise(function(o2) {
            var s2 = i2.createRequestTimer(e2, t2, r2, o2, n2);
            i2.requestMap.set(e2, { seq: e2 + (n2 || ""), resolve: o2, log: r2, timer: s2 });
          });
        }, d.prototype.createQPSRequest = function(e2, t2, r2, n2, i2, o2) {
          var a2 = this, u2 = this.generateHeader(e2, r2), c2 = u2.seq, l2 = (e2 == s.d.sw_login.cmd && (t2._seq = c2), this.qpsStgy.collectRequest({ seq: c2, weight: o2, overhead: 1 }), i2 ? { time: /* @__PURE__ */ new Date(), weight: o2, seq: c2, caller: u2.caller_type, size: 0, rsize: -1, cmd: e2, body: t2 } : null);
          return new Promise(function(r3) {
            a2.requestMap.set(c2, { seq: c2 + e2, resolve: r3, log: l2, timer: null, timeout: n2, header: u2, body: t2 });
          });
        }, d.prototype.createRequestTimer = function(e2, t2, r2, n2, i2) {
          var o2 = this;
          return setTimeout(function() {
            o2.requestMap.delete(e2);
            var a2 = { seq: e2, code: 6000104, message: "Network error." };
            if (!o2.logger)
              return n2(a2);
            r2 && (r2.timeout = t2, o2.logger.warn(c, s.X.SCMD, r2)), i2 && -1 == o2.pageMergeReportCmdList.indexOf(i2) && o2.dataReport.endNetworkRequest(i2, e2, a2), n2(a2);
          }, t2);
        }, d.prototype.handleAccesshubPCDownwardMessage = function(e2) {
          var t2 = (r2 = function(e3, t3) {
            var r3 = "function" == typeof Symbol && e3[Symbol.iterator];
            if (!r3)
              return e3;
            var n3, i3, o3 = r3.call(e3), s2 = [];
            try {
              for (; (void 0 === t3 || 0 < t3--) && !(n3 = o3.next()).done; )
                s2.push(n3.value);
            } catch (e4) {
              i3 = { error: e4 };
            } finally {
              try {
                n3 && !n3.done && (r3 = o3.return) && r3.call(o3);
              } finally {
                if (i3)
                  throw i3.error;
              }
            }
            return s2;
          }(this.protobuf.decodeResponseHeader(e2), 2))[0], r2 = r2[1], n2 = t2.seq;
          if (-1 != this.swPushCmdList.indexOf(t2.cmd)) {
            n2 > this.seq && (this.seq = n2);
            var i2 = t2.cmd, o2 = this.protobuf.decodeResponseBody(e2, i2, r2, this.engineConfig), a2 = { time: 0, seq: n2, size: e2.byteLength, cmd: i2, body: o2 };
            i2 == s.d.swp_list.cmd && o2.push_requests && o2.push_requests[0] && (l2 = (u2 = o2.push_requests[0]).sub_cmd, d2 = u2.sender_user_id, p = u2.msg_id, u2 = u2.msg_body, a2.time = this.settings.getRealClientTimestamp() - o2.send_time, a2.cmd = l2, a2.body = { qos: o2.qos_flag || void 0, stime: o2.send_time, suid: d2, msg_id: p, msg_body: u2 }, 1 < (l2 = o2.push_requests.length) && (a2.body.length = l2)), this.logger.info(c, s.X.PCMD, a2), o2.subCmds || this.onPushEvent(i2, o2, a2.time);
          } else {
            if (!this.requestMap.has(n2))
              return d2 = Array.from(this.requestMap.values()).map(function(e3) {
                return e3.seq;
              }).join(), p = { seq: n2, cmd: t2.cmd, rsize: e2.byteLength - 7 - r2, seqs: d2 }, void this.logger.warn(c, s.X.SCMD, p);
            i2 = t2.cmd.replace("_rsp", "");
            var u2 = this.protobuf.decodeResponseBody(e2, i2, r2, this.engineConfig), l2 = (this.handleFileProxyHost(i2, u2), this.requestMap.get(n2)), d2 = (o2 = l2.resolve, a2 = l2.log, l2.timer), p = l2.timeout;
            (a2 || u2.code) && (r2 = null, a2 ? (a2.rsize = e2.byteLength, a2.rbody = u2, p && a2.hasOwnProperty("weight") && (a2.weight += "," + (Date.now() - p))) : r2 = { seq: n2, rsize: e2.byteLength, cmd: i2, rbody: u2 }, u2.code ? this.logger.warn(c, s.X.SCMD, a2 || r2) : this.logger.info(c, s.X.SCMD, a2 || r2)), this.requestMap.delete(n2), clearTimeout(d2), i2 === s.d.sw_login.cmd && (u2.rspHeader = t2), -1 == this.pageMergeReportCmdList.indexOf(i2) && u2.code != s.pb && this.dataReport.endNetworkRequest(i2, n2, u2), o2(u2);
          }
        }, d.prototype.handleAccesshubHTTPResponse = function(e2) {
          var t2 = e2.txid;
          if (t2 && this.requestMap.has(t2)) {
            var r2 = (i2 = this.requestMap.get(t2)).resolve, n2 = i2.log, i2 = i2.timer, a2 = {};
            if (e2.body && e2.body.length)
              try {
                a2 = JSON.parse(Object(o.h)(e2.body));
              } catch (e3) {
              }
            this.requestMap.delete(t2), clearTimeout(i2), n2.code = e2.status_code, n2.result = a2, this.logger.info(c, s.X.SCMD, n2), r2(a2);
          }
        }, d.prototype.handleAccesshubRsp = function(e2) {
          var t2 = e2.txid;
          if (!this.requestMap.has(t2))
            return false;
          var r2 = (n2 = this.requestMap.get(t2)).log, n2 = n2.timer;
          return this.requestMap.delete(t2), clearTimeout(n2), r2.result = e2, this.logger.info(c, s.X.SCMD, r2), !e2.code;
        }, d.prototype.handleAccesshubLog = function(e2, t2, r2) {
          this.logger.info(c, s.X.PCMD, { type: e2, cmd: "Accesshub" + (r2 = void 0 === r2 ? "" : r2), res: t2 }), 19 != e2 && 20 != e2 && 30 != e2 || this.onPushEvent(s.d.Accesshub.cmd, u({ _type: e2 }, t2), 0);
        }, d.prototype.generateHeader = function(e2, t2) {
          return { cmd: e2, seq: ++this.seq, timestamp: Date.now(), product: 2, flags: [1], caller_type: t2, app_id: this.engineConfig.appID, user_id: this.engineConfig.user.userID, session_id: this.engineConfig.sessionID, user_nid: this.engineConfig.serverUserID, controls: this.engineConfig.controls };
        }, d.prototype.handleFileProxyHost = function(e2, t2) {
          var r2, n2 = this.settings.advancedConfig.geoFence.host.fileproxy;
          n2 && !t2.code && (r2 = this.settings.advancedConfig.geoFence.reg, e2 == s.d.file_upload.cmd ? t2.upload_req.url = t2.upload_req.url.replace(r2, n2 + "$4") : e2 == s.d.file_process.cmd && (t2.download_url = t2.download_url.replace(r2, n2 + "$4")));
        }, d.prototype.replaceDomain = function(e2) {
          var t2 = e2.logreport, r2 = e2.detaillog, n2 = (e2 = e2.zimfile, this.settings.advancedConfig.geoFence.host);
          t2 && (n2.logreport = "wss://" + t2 + "/zglog/web"), r2 && (n2.detaillog = "https://" + r2), e2 && (n2.fileproxy = "https://" + e2);
        }, d);
        function d(e2, t2) {
          var r2 = this;
          this.eventBus = t2, this.urls = [], this.sessionID = "", this.seq = 0, this.streamID = 0, this.urlKey = "", this.sessionKey = "", this.requestMap = /* @__PURE__ */ new Map(), this.swPushCmdList = [s.d.swp_list.cmd, s.d.swp_kickout.cmd, s.d.swp_redirect.cmd], this.pageMergeReportCmdList = [s.d.c2c_msglist.cmd, s.d.group_msglist.cmd, s.d.room_msglist.cmd, s.d.call_list.cmd, s.d.conv_list.cmd, s.d.conv_pinned_list.cmd, s.d.group_list.cmd, s.d.group_member_list.cmd, s.d.room_userlist.cmd, s.d.msg_read_receipt_detail.cmd, s.d.extra_msglist.cmd, s.d.c2c_msg_state_list.cmd, s.d.group_msg_state_list.cmd, s.d.c2c_reaction_list.cmd, s.d.group_reaction_list.cmd], this.logger = n.a.getInstance().logger, this.dataReport = n.a.getInstance().dataReport, this.protobuf = n.a.getInstance().protobuf, this.settings = n.a.getInstance().settings, this.onmessage = function(e3) {
            e3 = o.p && e3.data.isBuffer ? Object(o.b)(e3.data.data) : new Uint8Array(e3.data);
            try {
              var t3, n2, i2 = (e3[2] << 8) + e3[3], a2 = r2.protobuf.decodeAccesshubResponse(i2, e3);
              switch (i2) {
                case 21:
                  r2.handleAccesshubPCDownwardMessage(a2);
                  break;
                case 5:
                  r2.handleAccesshubHTTPResponse(a2);
                  break;
                case 40:
                  r2.handleAccesshubRsp(a2) && (1 <= (t3 = a2.geofencing_id) && t3 <= 7 && t3 != r2.settings.advancedConfig.geoFence.id && (r2.settings.advancedConfig.geoFence.id = t3, r2.settings.advancedConfig.geoFence.host = s.B[t3].host), r2.replaceDomain(a2), (n2 = r2.settings.advancedConfig.geoFence.host.accesshub) && (r2.urls[1] = n2), r2.saveUrls());
                  break;
                case 27:
                  r2.handleAccesshubRsp(a2) && a2.wss_groups[0] && (n2 = a2.wss_groups[0].host, r2.settings.advancedConfig.geoFence.dispatch.host = n2, r2.urls[0] = "wss://" + n2 + "/accesshub", r2.saveUrls());
                  break;
                case 24:
                  r2.handleAccesshubRsp(a2) && (r2.settings.advancedConfig.geoFence.dispatch.domain = a2.domain);
                  break;
                case 3:
                  r2.handleAccesshubLog(i2, a2, "CloseConnection"), r2.onDisConnectedEvent(true);
                  break;
                case 22:
                  r2.handleAccesshubLog(i2, a2, "Redirect");
                  var u2 = a2.wss_groups.map(function(e4) {
                    return "wss://" + e4.host + "/accesshub";
                  });
                  u2.length && r2.onPushEvent(s.d.swp_redirect.cmd, { user_ids: u2 }, 0);
                  break;
                default:
                  r2.handleAccesshubLog(i2, a2);
              }
            } catch (e4) {
            }
          }, this.engineConfig = e2, this.qpsStgy = new i.a(t2), this.urlKey = "z_AccesshubURL_" + this.engineConfig.appID, this.sessionKey = "z_AccesshubSession_" + this.engineConfig.appID, n.a.getInstance().crypto.generateAppIDKey(this.engineConfig), this.initQPSEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n = r(1), i = r(0), o = (s.prototype.destroy = function() {
          this.requestList.length = 0, clearInterval(this.checkTokenTimer), clearInterval(this.checkRequestTimer), clearInterval(this.postQPSTimer), this.eventBus = null;
        }, s.prototype.canPass = function(e2, t2) {
          var r2 = this.tokenCount - t2 > this.defaultToken;
          return e2 !== i.e.Highest && (this.requestNum++, this.tokenCount -= t2, this.tokenCount < 0 && (this.tokenCount = 0)), e2 == i.e.Highest || r2;
        }, s.prototype.collectRequest = function(e2) {
          this.requestList.push(e2);
        }, s.prototype.postRequestData = function() {
          var e2 = this;
          this.postQPSTimer = setInterval(function() {
            var t2;
            e2.requestNum = 0, e2.isProd || n.p || (t2 = { reqLen: e2.requestList.length, token: e2.tokenCount, action: "setData", max: e2.maxToken, interval: 1e3, reqNum: e2.requestNum }, postMessage(JSON.stringify(t2), "*"));
          }, 1e3);
        }, s.prototype.warmUpTokenBuck = function() {
          var e2, t2 = this, r2 = this.maxToken - this.defaultToken, n2 = 1, i2 = 1, o2 = setInterval(function() {
            e2 = n2 + i2, n2 = i2, r2 <= (i2 = e2) || t2.tokenCount >= t2.maxToken ? (clearInterval(o2), o2 = null, t2.initCheckTokenInterval()) : (t2.tokenCount += i2, t2.tokenCount > t2.maxToken && (t2.tokenCount = t2.maxToken));
          }, 50);
        }, s.prototype.initCheckTokenInterval = function() {
          var e2 = this;
          this.checkTokenTimer = setInterval(function() {
            e2.tokenCount += e2.requestList.length > e2.maxToken / 2 ? 2 * e2.tokenStep : e2.tokenStep, e2.tokenCount > e2.maxToken && (e2.tokenCount = e2.maxToken);
          }, 100);
        }, s.prototype.initCheckRequestInterval = function() {
          var e2 = this;
          this.checkRequestTimer = setInterval(function() {
            e2.requestList.sort(function(e3, t3) {
              return t3.weight - e3.weight;
            });
            for (var t2 = 0; e2.requestList.length && t2++ < 10; ) {
              var r2 = e2.requestList.shift();
              if (!r2 || !e2.tokenCount)
                break;
              if (e2.eventBus.exec(i.u.IQPSSend, r2.seq), e2.tokenCount -= r2.overhead, e2.tokenCount < 1)
                break;
            }
          }, 100);
        }, s);
        function s(e2) {
          this.requestList = [], this.tokenCount = 30, this.maxToken = 100, this.defaultToken = 30, this.tokenStep = 5, this.requestNum = 0, this.isProd = true, this.eventBus = e2, this.warmUpTokenBuck(), this.initCheckRequestInterval(), this.postRequestData();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        });
        var n = r(2), i = r(1), o = r(0), s = o.Y.Connection, a = (u.prototype.create = function(e2) {
          var t2 = this;
          return this.close(), this.urls = e2, this.urlIndex = 0, this.retryCount = 0, this.retryTotalTime = 0, this.initDelayTask(), new Promise(function(e3, r2) {
            t2.createSocket(), t2.bindSocketEvent(e3, r2);
          });
        }, u.prototype.close = function() {
          this.isOpen = false, this.socket && (i.p ? (i.p._zim_isAlipay ? (this.socket.offMessage(), this.socket.offOpen(), this.socket.offClose(), this.socket.offError()) : (this.socket.onMessage(function() {
          }), this.socket.onOpen(function() {
          }), this.socket.onClose(function() {
          }), this.socket.onError(function() {
          })), this.socket.close()) : (this.socket.onmessage = null, this.socket.onopen = null, this.socket.onclose = null, this.socket.onerror = null, this.socket.close(1e3)), this.socket = null);
        }, u.prototype.destroy = function() {
          this.logger.warn(s, "closeconn"), this.close(), this.eventBus.remove(o.u.INetworkChange, this.onNetworkChange), this.logger = null;
        }, u.prototype.send = function(e2) {
          var t2;
          this.socket && (i.p ? (t2 = i.p._zim_isAlipay ? Object(i.c)(e2) : e2.buffer, this.socket.send({ data: t2, isBuffer: true })) : this.socket.send(e2));
        }, u.prototype.createSocket = function() {
          if (i.p)
            try {
              this.socket = i.p.connectSocket({ url: this.urls[this.urlIndex] + "?zim", multiple: true });
            } catch (e2) {
            }
          else
            try {
              this.socket = new WebSocket(this.urls[this.urlIndex] + "?zim"), this.socket.binaryType = "arraybuffer";
            } catch (e2) {
            }
        }, u.prototype.bindSocketEvent = function(e2, t2) {
          function r2() {
            o2.isOpen = true, o2.isConnecting = false, o2.retryCount = 0, o2.retryTotalTime = 0, o2.urlIndex = 0;
            var t3 = !e2, r3 = { event: "onconnected", isReconnect: t3, total: o2.initDelayTask(), max: o2.engineConfig.cloudSetting.retry.login_max_itvl, index: o2.urlIndex, urls: o2.urls };
            o2.logger.warn(s, o2.reconnAction, r3), o2.onconnected(t3), e2 && e2(), e2 = void 0;
          }
          function n2(r3) {
            !o2.isConnecting && o2.socket && (o2.isConnecting = true, o2.reconnect(r3, e2, t2));
          }
          var o2 = this;
          i.p ? (this.socket.onMessage(this.onmessage), this.socket.onOpen(r2), this.socket.onClose(n2), this.socket.onError(n2)) : (this.socket.onmessage = this.onmessage, this.socket.onopen = r2, this.socket.onclose = n2, this.socket.onerror = n2);
        }, u.prototype.reconnect = function(e2, t2, r2) {
          var i2, o2 = this, a2 = (e2 = e2 && e2.type ? { code: e2.code, message: e2.reason || "Socket " + e2.type } : e2, this.close(), this.delayTaskList.shift() || this.unlimited_retry);
          if (!a2)
            return i2 = { event: "ondisconnected", url: this.urls[this.urlIndex] }, this.logger.warn(s, this.reconnAction, i2), this.isOpen = false, this.isConnecting = false, this.retryCount = 0, this.retryTotalTime = 0, this.urlIndex = 0, this.ondisconnected(true), r2 && r2(e2), void (r2 = void 0);
          this.ondisconnected(false), this.retryTimer = setTimeout(function() {
            var i3;
            o2.logger && (o2.isOpen = false, o2.isConnecting = false, o2.retryCount++, o2.retryTotalTime += a2, o2.urlIndex = (o2.urlIndex + 1) % o2.urls.length, i3 = { delay: a2, count: o2.retryCount, time: o2.retryTotalTime, event: e2 }, o2.logger.warn(s, o2.reconnAction, i3), n.a.getInstance().dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(i3) }), o2.createSocket(), o2.bindSocketEvent(t2, r2), r2 && 3 == o2.retryCount && (o2.ondisconnected(true), r2(e2)));
          }, a2);
        }, u.prototype.initDelayTask = function() {
          var e2 = this.engineConfig.cloudSetting.retry.login_max_itvl, t2 = e2 < 0 ? 3e5 : 1e3 * e2;
          if ((this.unlimited_retry = 0) == e2)
            return this.delayTaskList.length = 0;
          for (var r2 = 500 + Math.floor(1500 * Math.random()), n2 = (this.delayTaskList = [r2], 0), i2 = r2; i2 < t2; ) {
            var o2 = Math.min(2e3 * Math.pow(2, n2), 32e3);
            i2 += o2, this.delayTaskList.push(o2), i2 < t2 && (i2 += o2, this.delayTaskList.push(o2)), n2++;
          }
          return e2 < 0 ? (this.unlimited_retry = this.delayTaskList[this.delayTaskList.length - 1], -1) : i2;
        }, u);
        function u(e2, t2) {
          var r2 = this;
          this.eventBus = e2, this.engineConfig = t2, this.logger = n.a.getInstance().logger, this.isOpen = false, this.urls = [], this.urlIndex = 0, this.isConnecting = false, this.unlimited_retry = 0, this.retryCount = 0, this.retryTotalTime = 0, this.retryTimer = 0, this.delayTaskList = [], this.reconnAction = "reconn", this.onNetworkChange = function(e3, t3) {
            var i2;
            "fetchSetting" == e3 ? (i2 = { event: "resetRetry", total: r2.initDelayTask(), login_max_itvl: r2.engineConfig.cloudSetting.retry.login_max_itvl }, r2.logger.warn(s, e3, i2)) : e3 && (r2.delayTaskList[0] || r2.unlimited_retry) ? (r2.isConnecting = true, r2.delayTaskList.unshift(100), r2.retryTimer && clearTimeout(r2.retryTimer), r2.reconnect("NetworkChange:" + t3)) : (r2.logger.warn(s, r2.reconnAction, i2 = { online: e3, netType: t3 }), n.a.getInstance().dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(i2) }));
          }, e2.add(o.u.INetworkChange, this.onNetworkChange);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return _;
        });
        t = r(3);
        var n = r.n(t), i = r(2), o = r(69), s = r(1), a = r(0), u = r(71), c = r(72), l = r(73), d = function() {
          return (d = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, p = function(e2, t2, r2, n2) {
          return new (r2 = r2 || Promise)(function(i2, o2) {
            function s2(e3) {
              try {
                u2(n2.next(e3));
              } catch (e4) {
                o2(e4);
              }
            }
            function a2(e3) {
              try {
                u2(n2.throw(e3));
              } catch (e4) {
                o2(e4);
              }
            }
            function u2(e3) {
              var t3;
              e3.done ? i2(e3.value) : ((t3 = e3.value) instanceof r2 ? t3 : new r2(function(e4) {
                e4(t3);
              })).then(s2, a2);
            }
            u2((n2 = n2.apply(e2, t2 || [])).next());
          });
        }, h = function(e2, t2) {
          var r2, n2, i2, o2 = { label: 0, sent: function() {
            if (1 & i2[0])
              throw i2[1];
            return i2[1];
          }, trys: [], ops: [] }, s2 = { next: a2(0), throw: a2(1), return: a2(2) };
          return "function" == typeof Symbol && (s2[Symbol.iterator] = function() {
            return this;
          }), s2;
          function a2(s3) {
            return function(a3) {
              var u2 = [s3, a3];
              if (r2)
                throw new TypeError("Generator is already executing.");
              for (; o2; )
                try {
                  if (r2 = 1, n2 && (i2 = 2 & u2[0] ? n2.return : u2[0] ? n2.throw || ((i2 = n2.return) && i2.call(n2), 0) : n2.next) && !(i2 = i2.call(n2, u2[1])).done)
                    return i2;
                  switch (n2 = 0, (u2 = i2 ? [2 & u2[0], i2.value] : u2)[0]) {
                    case 0:
                    case 1:
                      i2 = u2;
                      break;
                    case 4:
                      return o2.label++, { value: u2[1], done: false };
                    case 5:
                      o2.label++, n2 = u2[1], u2 = [0];
                      continue;
                    case 7:
                      u2 = o2.ops.pop(), o2.trys.pop();
                      continue;
                    default:
                      if (!(i2 = 0 < (i2 = o2.trys).length && i2[i2.length - 1]) && (6 === u2[0] || 2 === u2[0])) {
                        o2 = 0;
                        continue;
                      }
                      if (3 === u2[0] && (!i2 || u2[1] > i2[0] && u2[1] < i2[3])) {
                        o2.label = u2[1];
                        break;
                      }
                      if (6 === u2[0] && o2.label < i2[1]) {
                        o2.label = i2[1], i2 = u2;
                        break;
                      }
                      if (i2 && o2.label < i2[2]) {
                        o2.label = i2[2], o2.ops.push(u2);
                        break;
                      }
                      i2[2] && o2.ops.pop(), o2.trys.pop();
                      continue;
                  }
                  u2 = t2.call(e2, o2);
                } catch (a4) {
                  u2 = [6, a4], n2 = 0;
                } finally {
                  r2 = i2 = 0;
                }
              if (5 & u2[0])
                throw u2[1];
              return { value: u2[0] ? u2[1] : void 0, done: true };
            };
          }
        }, f = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, g = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, m = a.Y.Conversation, _ = (b.prototype.destroy = function() {
          this.onLogout(), this.connMgr = null, this.groupMgr = null, this.eventBus = null, this.logger = null, this.engineConfig = null, this.stgyMgr = null;
        }, b.prototype.queryUsersInfo = function(e2, t2) {
          var r2 = this, n2 = /* @__PURE__ */ new Map(), i2 = (e2 = e2.filter(function(e3) {
            return !!Object(s.n)(e3) || (n2.set(e3, { userID: e3, reason: 6000001 }), false);
          }), (e2 = Array.from(new Set(e2))).filter(function(e3) {
            return !r2.engineConfig.dbUserMap.has(e3);
          })), o2 = e2.length - i2.length, u2 = { time: /* @__PURE__ */ new Date(), config: t2, queryCount: e2.length, dbCount: o2 };
          return 0 != i2.length || t2 && t2.isQueryFromServer ? (o2 = { user_ids: t2 && t2.isQueryFromServer ? e2 : i2 }, this.connMgr.sendRequest(a.d.user_fetch, o2).then(function(t3) {
            var i3 = t3.code || 0, o3 = (i3 && (o3 = Object(s.x)(a.t.CommonModuleIMServerError, t3.message, t3.code), u2.error = o3, i3 = o3.code), t3.result), c2 = ((t3 = t3.err_list) && t3.length && t3.forEach(function(e3) {
              n2.set(e3.user_id, { userID: e3.user_id, reason: e3.sub_code });
            }), /* @__PURE__ */ new Map()), l2 = (o3 && o3.length && (o3.forEach(function(e3) {
              var t4 = e3.user_id, n3 = Object(s.h)(e3.user_name), i4 = Object(s.h)(e3.avatar), o4 = Object(s.h)(e3.extra);
              c2.set(t4, { baseInfo: { userID: t4, userName: n3, userAvatarUrl: i4 }, extendedData: o4 }), t4 = { userID: t4, userName: n3, userAvatarUrl: i4, extendedData: o4 };
              Object(s.w)(t4, r2.engineConfig), t4.userID == r2.engineConfig.user.userID && (n3 = r2.engineConfig.user, (i4 = e3.user_info_seq) && n3.userInfoSeq < i4 && (n3.userInfoSeq = i4));
            }), r2.dbMgr.addUserList(Array.from(r2.engineConfig.dbUserMap.values()))), i3 && 6000012 != i3 && e2.forEach(function(e3) {
              var t4;
              c2.has(e3) || ((t4 = r2.engineConfig.dbUserMap.get(e3)) ? c2.set(e3, { baseInfo: { userID: t4.userID, userName: t4.userName, userAvatarUrl: t4.userAvatarUrl }, extendedData: t4.extendedData }) : n2.has(e3) || n2.set(e3, { userID: e3, reason: i3 }));
            }), []);
            return r2.convMap.forEach(function(e3) {
              var t4 = c2.get(e3.convID);
              t4 && e3.convType == a.r.Peer && l2.push({ user: t4.baseInfo, dbConv: e3.dbConv });
            }), r2.emitConvInfo(l2), u2.count = c2.size, r2.logger.info(a.Y.User, a.X.QueryUsersInfo, u2), 0 == c2.size ? Promise.reject(u2.error) : { userList: Array.from(c2.values()), errorUserList: Array.from(n2.values()) };
          })) : (o2 = e2.map(function(e3) {
            return { baseInfo: { userID: (e3 = r2.engineConfig.dbUserMap.get(e3)).userID, userName: e3.userName, userAvatarUrl: e3.userAvatarUrl }, extendedData: e3.extendedData };
          }), this.logger.info(a.Y.User, a.X.QueryUsersInfo, u2), Promise.resolve({ userList: o2, errorUserList: Array.from(n2.values()) }));
        }, b.prototype.query = function(e2, t2) {
          var r2 = this;
          return new Promise(function(n2, i2) {
            var o2 = Array.from(r2.engineConfig.dbConvMap.values()).find(function(r3) {
              return r3.conversationID == e2 && r3.type == t2;
            });
            o2 && !r2.isDBConvInvalid(o2) ? (r2.logger.info(m, a.X.QueryConv, e2), n2({ conversation: Object(s.s)(a.m.convKeys, o2) })) : (n2 = Object(s.x)(a.t.ConversationModuleConversationDoesNotExist), r2.logger.warn(m, a.X.QueryConv, { error: n2, conversationID: e2 }), i2(n2));
          });
        }, b.prototype.queryList = function(e2) {
          var t2 = this;
          return e2.count < 1 ? Promise.resolve({ conversationList: [] }) : new Promise(function(r2) {
            var n2 = { time: /* @__PURE__ */ new Date(), logined: t2.isLogined, queryCount: e2.count, count: 0 };
            t2.isLogined ? t2.mergeServerConvList(a.v.Biz, function(i2) {
              t2.handleQueryConvsCallback(i2, { isPinned: false, config: e2, log: n2, resolve: r2 });
            }) : t2.queryConvsCallbackList.push({ isPinned: false, config: e2, log: n2, resolve: r2 });
          });
        }, b.prototype.queryPinnedList = function(e2) {
          var t2 = this;
          return e2.count < 1 ? Promise.resolve({ conversationList: [] }) : new Promise(function(r2) {
            var n2, i2 = { time: /* @__PURE__ */ new Date(), logined: t2.isLogined, queryCount: e2.count, count: 0 };
            t2.isLogined ? ((n2 = Array.from(t2.engineConfig.dbConvMap.values()).filter(function(e3) {
              var r3 = t2.filterValidConv(e3, true);
              return r3 && t2.createConversationInstance(e3.conversationID, e3.type), r3;
            })).sort(function(e3, t3) {
              return t3.orderKey - e3.orderKey;
            }), t2.handleQueryConvsCallback(n2, { isPinned: true, config: e2, log: i2, resolve: r2 })) : t2.queryConvsCallbackList.push({ isPinned: true, config: e2, log: i2, resolve: r2 });
          });
        }, b.prototype.delete = function(e2, t2, r2) {
          var n2 = this, i2 = (r2 = Object.assign({ isAlsoDeleteServerConversation: true }, r2), this.getConversationKey(e2, t2)), o2 = null == (i2 = this.convMap.get(i2)) ? void 0 : i2.dbConv;
          if (this.isDBConvInvalid(o2))
            return i2 = Object(s.x)(a.t.ConversationModuleConversationDoesNotExist), this.logger.warn(m, a.X.DeleteConv, { error: i2, convID: e2, type: t2, config: r2 }), Promise.reject(i2);
          var u2 = { time: /* @__PURE__ */ new Date(), convID: e2, type: t2, config: r2 };
          i2 = { conv_id: e2, conv_type: t2, read_seq: o2.msgSeq };
          return r2 && r2.isAlsoDeleteServerConversation ? this.connMgr.sendRequest(a.d.conv_del, i2).then(function(e3) {
            var t3;
            return e3.code ? (t3 = Object(s.x)(a.t.ConversationModuleServerError, e3.message, e3.code), u2.error = t3, n2.logger.warn(m, a.X.DeleteConv, u2), Promise.reject(t3)) : (o2.seq = e3.conv_list_seq ? e3.conv_list_seq.toString() : "0", n2.deleteLocalConv(o2, u2));
          }) : (this.connMgr.sendRequest(a.d.conv_read_seq, i2, a.j.SDK), this.deleteLocalConv(o2, u2));
        }, b.prototype.deleteAll = function(e2) {
          var t2 = this;
          if (0 == this.convMap.size)
            return Promise.resolve();
          e2 = Object.assign({ isAlsoDeleteServerConversation: true }, e2);
          var r2 = { time: /* @__PURE__ */ new Date(), config: e2 }, n2 = { conv_sid: this.engineConfig.mailHBConfig.conv_list_seq };
          return n2.conv_sid && +n2.conv_sid.toString() && e2.isAlsoDeleteServerConversation ? this.connMgr.sendRequest(a.d.conv_del_all, n2).then(function(e3) {
            return e3.code ? (e3 = Object(s.x)(a.t.ConversationModuleServerError, e3.message, e3.code), r2.error = e3, t2.logger.info(m, a.X.DeleteAllConv, r2), Promise.reject(e3)) : t2.deleteAllLocalConv(r2);
          }) : (this.connMgr.sendRequest(a.d.conv_clean_all_unread, n2), this.deleteAllLocalConv(r2));
        }, b.prototype.setNotificationStatus = function(e2, t2, r2) {
          var n2 = this, i2 = null == (o2 = this.convMap.get(this.getConversationKey(t2, r2))) ? void 0 : o2.dbConv, o2 = r2 == a.r.Group ? a.d.conv_group_mute : a.d.conv_c2c_mute;
          if (!i2)
            return c2 = Object(s.x)(a.t.ConversationModuleConversationDoesNotExist), this.logger.warn(m, a.X.SetNotificationStatus, { error: c2, convID: t2, status: e2 }), Promise.reject(c2);
          var u2 = { time: /* @__PURE__ */ new Date(), convID: t2, type: r2 }, c2 = e2 === a.p.DoNotDisturb;
          c2 = r2 == a.r.Group ? { conv_id: t2, enable: c2 } : { c2c_mute_list: [{ conv_id: t2, enable: c2 }] };
          return this.connMgr.sendRequest(o2, c2).then(function(o3) {
            if (o3.code)
              return d2 = Object(s.x)(a.t.ConversationModuleServerError, o3.message, o3.code), u2.error = d2, n2.logger.warn(m, a.X.SetNotificationStatus, u2), Promise.reject(d2);
            var c3 = o3.mute_info;
            if ((o3 = o3.error_user_list) && o3[0])
              return 106126 == (l2 = o3[0].sub_code) && (l2 = a.t.ConversationModuleServerError), (d2 = Object(s.x)(l2, "", o3[0].sub_code)).code !== a.t.ConversationModuleServerError && (d2.code = a.t.CommonModuleParamInvalid), u2.error = d2, n2.logger.warn(m, a.X.SetNotificationStatus, u2), Promise.reject(d2);
            if (c3 && c3[0]) {
              var l2 = c3[0].mute_list_seq;
              if (l2 < (i2.muteSeq || 0))
                return { conversationID: t2, conversationType: r2 };
              i2.muteSeq = l2;
            }
            i2.notificationStatus = e2;
            o3 = "setNotifyStatus";
            var d2 = (n2.emitConversationUpdated(i2, o3), n2.onUnreadMessageCount(o3), e2 == a.p.DoNotDisturb ? a.n.DontDisturb : a.n.RecoverDisturb);
            return n2.stgyMgr.updateConversationActivity(t2, r2, d2), n2.logger.info(m, a.X.SetNotificationStatus, u2), { conversationID: t2, conversationType: r2 };
          });
        }, b.prototype.updatePinnedState = function(e2, t2, r2) {
          var n2, i2 = this, o2 = null, u2 = null == (n2 = this.convMap.get(this.getConversationKey(t2, r2))) ? void 0 : n2.dbConv;
          if (this.isDBConvInvalid(u2) ? o2 = Object(s.x)(a.t.ConversationModuleConversationDoesNotExist) : u2.isPinned == e2 && (n2 = "Cannot set the same value of isPinned: " + e2, o2 = Object(s.x)(a.t.CommonModuleParamInvalid, n2)), o2)
            return this.logger.warn(m, a.X.UpdatePinnedState, { error: o2, convID: t2, isPinned: e2 }), Promise.reject(o2);
          var c2 = { time: /* @__PURE__ */ new Date(), convID: t2, type: r2 };
          return this.connMgr.sendRequest(a.d.conv_pinned, { user_id: t2, sub_code: r2, relation: e2 ? 1 : 0 }).then(function(n3) {
            var o3;
            return n3.code ? (o3 = Object(s.x)(a.t.ConversationModuleServerError, n3.message, n3.code), c2.error = o3, i2.logger.warn(m, a.X.UpdatePinnedState, c2), Promise.reject(o3)) : (u2.isPinned = e2, i2.updateConvPinnedListSeq(+n3.conv_list_seq.toString()), i2.emitConversationUpdated(u2, "setConvPinned"), i2.logger.info(m, a.X.UpdatePinnedState, c2), { conversationID: t2, conversationType: r2 });
          });
        }, b.prototype.clearUnreadCount = function(e2, t2) {
          var r2 = null == (r2 = this.convMap.get(this.getConversationKey(e2, t2))) ? void 0 : r2.dbConv;
          if (this.isDBConvInvalid(r2))
            return n2 = Object(s.x)(a.t.ConversationModuleConversationDoesNotExist), this.logger.warn(m, a.X.ClearUnreadCount, { error: n2, convID: e2, type: t2 }), Promise.reject(n2);
          var n2 = "clearUnrc", i2 = r2.msgSeq || 0, o2 = r2.unreadMessageCount || 0;
          return this.syncConvReadSeqToMsgSeq(r2, i2), this.dbMgr.addConversationList([r2], n2), 0 < o2 && (r2 = { event: a.o.Updated, conversation: Object(s.s)(a.m.convKeys, r2) }, this.eventBus.emit(a.u.ConvChanged, { infoList: [r2] }, n2), this.onUnreadMessageCount(n2), this.connMgr.sendRequest(a.d.conv_read_seq, { conv_id: e2, conv_type: t2, read_seq: i2 })), this.logger.info(m, a.X.ClearUnreadCount, { convID: e2, seq: i2, uncount: o2 }), Promise.resolve({ conversationID: e2, conversationType: t2 });
        }, b.prototype.clearAllUnreadCount = function() {
          var e2 = this, t2 = [], r2 = false, n2 = (this.convMap.forEach(function(n3) {
            e2.filterValidConv(n3.dbConv) && n3.dbConv.readMsgSeq < n3.dbConv.msgSeq && (r2 = true, e2.syncConvReadSeqToMsgSeq(n3.dbConv, n3.dbConv.msgSeq), t2.push(n3.dbConv));
          }), "clearAllUnrc");
          return r2 && (this.onUnreadMessageCount(n2), this.dbMgr.addConversationList(t2, n2), n2 = { conv_sid: this.engineConfig.mailHBConfig.conv_list_seq }, this.connMgr.sendRequest(a.d.conv_clean_all_unread, n2)), this.logger.info(m, a.X.ClearAllUnreadCount), Promise.resolve();
        }, b.prototype.delAllConMsgs = function(e2) {
          var t2 = this, r2 = (e2 = Object.assign({ isAlsoDeleteServerMessage: true }, e2), { time: /* @__PURE__ */ new Date(), config: e2 }), n2 = { conv_sid: this.engineConfig.mailHBConfig.conv_list_seq };
          return n2.conv_sid && +n2.conv_sid.toString() && e2.isAlsoDeleteServerMessage ? this.connMgr.sendRequest(a.d.conv_clean_all_msg, null).then(function(e3) {
            var i2;
            return e3.code ? (i2 = Object(s.x)(a.t.ConversationModuleServerError, e3.message, e3.code), r2.error = i2, t2.logger.info(m, a.X.DelAllConvMessages, r2), Promise.reject(i2)) : (t2.updateDeleteAllMsgTime(+e3.conv_list_seq.toString()), t2.connMgr.sendRequest(a.d.conv_clean_all_unread, n2), t2.deleteAllLocalConvMsg(r2));
          }) : (this.connMgr.sendRequest(a.d.conv_clean_all_unread, n2), this.updateDeleteAllMsgTime(this.settings.getRealClientTimestamp()), this.deleteAllLocalConvMsg(r2));
        }, b.prototype.setConvDraft = function(e2, t2, r2) {
          if (r2 == a.r.Group && !this.engineConfig.dbGroupMap.get(t2))
            return n2 = Object(s.x)(a.t.GroupModuleGroupDoesNotExist), this.logger.warn(m, a.X.SetConvDraft, { error: n2, convID: t2, type: r2 }), Promise.reject(n2);
          var n2 = this.createConversationInstance(t2, r2).dbConv;
          return n2.draft = e2, n2.state = a.q.Normal, e2 ? n2.orderKey = this.settings.getRealClientTimestamp() : n2.lastMessage && (n2.orderKey = n2.lastMessage.timestamp), this.emitConversationUpdated(n2, "setConvDraft"), Promise.resolve({ conversationID: t2, conversationType: r2 });
        }, b.prototype.sendMessage = function(e2, t2, r2, n2, i2) {
          var o2, u2, c2 = this;
          if (r2 === a.r.Room && !this.groupMgr.findRoom(t2))
            return o2 = Object(s.x)(a.t.MessageModuleSendMessageFailed, "Room is not exist or the user is not in the room."), this.logger.warn(m, a.X.SendMessage, { error: o2, convID: t2, type: r2 }), u2 = { status: a.fb.Failed, message: e2 }, this.eventBus.emit(a.u.MsgSentStatus, { infos: [u2] }), Promise.reject(o2);
          this.stgyMgr.updateConversationActivity(t2, r2, a.n.HandleMessage);
          var l2 = this.createConversationInstance(t2, r2);
          return e2.type === a.hb.Combine ? this.transformCombineMessage(e2).then(function(e3) {
            return l2.sendMediaMessage(e3, n2, i2).then(function(e4) {
              return c2.insertDBMessageExtra(e4), { message: c2.transformDBMessage(e4.message) };
            });
          }) : (e2 = Object.isFrozen(e2) || e2.messageID && e2.conversationSeq ? d({}, e2) : e2).type === a.hb.Command || e2.type === a.hb.Barrage ? l2.sendCommand(e2, n2, i2) : l2.sendMessage(e2, n2, false, i2).then(function(e3) {
            return c2.insertDBMessageExtra(e3), e3;
          });
        }, b.prototype.sendMediaMessage = function(e2, t2, r2, n2, i2) {
          var o2 = this;
          return r2 !== a.r.Room || this.groupMgr.findRoom(t2) ? (this.stgyMgr.updateConversationActivity(t2, r2, a.n.HandleMessage), (Object.isFrozen(e2) || e2.messageID && e2.conversationSeq) && (e2 = d({}, e2)), this.createConversationInstance(t2, r2).sendMediaMessage(e2, n2, i2).then(function(e3) {
            return o2.insertDBMessageExtra(e3), e3;
          })) : (n2 = Object(s.x)(a.t.MessageModuleSendMessageFailed, "Room is not exist or the user is not in the room."), this.logger.warn(m, a.X.SendMediaMessage, { error: n2, convID: t2, type: r2 }), i2 = { status: a.fb.Failed, message: e2 }, this.eventBus.emit(a.u.MsgSentStatus, { infos: [i2] }), Promise.reject(n2));
        }, b.prototype.deleteMessages = function(e2, t2, r2, n2) {
          var i2 = this;
          return this.createConversationInstance(t2, r2).deleteMessages(e2, n2).then(function(e3) {
            var n3 = i2.engineConfig.user.userID + r2 + t2;
            e3 = e3.map(function(e4) {
              return e4 = n3 + e4, i2.engineConfig.msgExtraMap.delete(e4), e4;
            });
            return i2.dbMgr.deleteMessageExtraList(e3), { conversationID: t2, conversationType: r2 };
          });
        }, b.prototype.deleteAllMessage = function(e2, t2, r2) {
          var n2 = this;
          return this.createConversationInstance(e2, t2).deleteAllMessage(r2).then(function(r3) {
            var i2 = [], o2 = n2.engineConfig.user.userID + t2 + e2;
            return n2.engineConfig.msgExtraMap.forEach(function(r4) {
              r4.conversationID == e2 && r4.conversationType == t2 && (r4 = o2 + r4.conversationSeq, i2.push(r4), n2.engineConfig.msgExtraMap.delete(r4));
            }), n2.dbMgr.deleteMessageExtraList(i2), r3;
          });
        }, b.prototype.queryHistoryMessage = function(e2, t2, r2) {
          var n2 = this, i2 = this.createConversationInstance(e2, t2);
          return t2 == a.r.Room ? i2.queryHistoryMessage(r2).then(function(r3) {
            var i3 = r3.list;
            r3 = r3.log;
            return n2.logger.info(m, a.X.QueryHistoryMessage, r3), { conversationID: e2, conversationType: t2, messageList: i3 };
          }) : i2.queryHistoryMessage(r2).then(function(r3) {
            var o2 = r3.list;
            r3 = r3.log;
            return i2.dbConv.type == a.r.Group && n2.mergeGroupMessageStatus(i2.dbConv, o2, a.v.Biz), n2.mergeMessageExtra(i2.dbConv, o2, r3.statusMap), n2.logger.info(m, a.X.QueryHistoryMessage, r3), { conversationID: e2, conversationType: t2, messageList: o2 };
          });
        }, b.prototype.insertMessageToLocalDB = function(e2, t2, r2, n2) {
          return e2.senderUserID = n2, this.createConversationInstance(t2, r2).insertMessageToLocalDB(e2);
        }, b.prototype.updateMessageLocalExtendedData = function(e2, t2) {
          var r2 = this, n2 = ((t2 = Object.isFrozen(t2) ? d({}, t2) : t2).localExtendedData = e2, t2.conversationID), i2 = t2.conversationType, o2 = JSON.parse(JSON.stringify(t2));
          return this.dbMgr.addMessageList(n2, i2, [o2]).then(function() {
            var o3 = null == (o3 = r2.engineConfig.dbConvMap.get(r2.getConversationKey(n2, i2))) ? void 0 : o3.lastMessage;
            return i2 != a.r.Room && o3 && o3.messageID == t2.messageID && (o3.localExtendedData = e2), r2.logger.info(m, a.X.UpdateMessageLocalExtendedData, t2.messageID), { message: t2 };
          });
        }, b.prototype.sendReceiptRead = function(e2, t2) {
          var r2 = this, n2 = null == (o2 = this.convMap.get(this.getConversationKey(e2, t2))) ? void 0 : o2.dbConv;
          if (this.isDBConvInvalid(n2))
            return i2 = Object(s.x)(a.t.ConversationModuleConversationDoesNotExist), this.logger.warn(m, a.X.SendReceiptRead, { error: i2, convID: e2, type: t2 }), Promise.reject(i2);
          var i2, o2 = n2.maxRecvReceiptMsgSeq || 0, u2 = n2.msgSeq || 0, c2 = { time: /* @__PURE__ */ new Date(), convID: e2, oldSeq: o2, seq: u2 };
          return u2 ? u2 <= o2 ? (this.logger.info(m, a.X.SendReceiptRead, c2), Promise.resolve({ conversationID: e2, conversationType: t2 })) : this.connMgr.sendRequest(a.d.c2c_conv_read_receipt, { group_id: e2, cur_list_seq: u2 }).then(function(i3) {
            if (i3.code)
              return o3 = Object(s.x)(a.t.ConversationModuleServerError, i3.message, i3.code), c2.error = o3, r2.logger.warn(m, a.X.SendReceiptRead, c2), Promise.reject(o3);
            r2.selfReceiptSeqs.push(i3.conv_list_seq.toString()), n2.maxRecvReceiptMsgSeq = u2;
            var o3 = n2.lastMessage;
            return o3 && o3.receiptStatus && o3.conversationSeq == u2 && o3.direction == a.ab.Receive && (o3.receiptStatus = a.cb.Done), r2.dbMgr.addConversationList([n2], "ackReceipt"), r2.logger.info(m, a.X.SendReceiptRead, c2), { conversationID: e2, conversationType: t2 };
          }) : (i2 = Object(s.x)(a.t.CommonModuleParamInvalid, "No message from server."), c2.error = i2, this.logger.warn(m, a.X.SendReceiptRead, c2), Promise.reject(i2));
        }, b.prototype.sendMessageReceiptsRead = function(e2, t2, r2) {
          function n2(n3) {
            var c3, l3 = n3.conv_msg_seq2_receipt_seq, d2 = [], p2 = [], h2 = null == (c3 = i2.engineConfig.dbConvMap.get(i2.getConversationKey(t2, r2))) ? void 0 : c3.lastMessage;
            return e2.forEach(function(e3) {
              var t3 = String(e3.conversationSeq), r3 = o2.get(t3);
              l3 && l3.hasOwnProperty(t3) && r3 && r3.messageID == e3.messageID ? (i2.selfReceiptSeqs.push(l3[t3]), (t3 = JSON.parse(JSON.stringify(r3))).receiptStatus = a.cb.Done, d2.push(t3), h2 && h2.receiptStatus && h2.conversationSeq == e3.conversationSeq && (h2.receiptStatus = a.cb.Done)) : p2.push(e3.messageID);
            }), i2.createConversationInstance(t2, r2).updateMsgCacheList(d2), i2.dbMgr.addMessageList(t2, r2, d2), n3.code || p2.length == e2.length ? (c3 = Object(s.x)(a.t.MessageModuleReceiptReadError, n3.message, n3.code), u2.error = c3, i2.logger.warn(m, a.X.SendMessageReceiptsRead, u2), Promise.reject(c3)) : (i2.logger.info(m, a.X.SendMessageReceiptsRead, u2), Promise.resolve({ conversationID: t2, conversationType: r2, errorMessageIDs: p2 }));
          }
          var i2 = this, o2 = /* @__PURE__ */ new Map(), u2 = (e2.forEach(function(e3) {
            e3.conversationID == t2 && e3.conversationType == r2 && e3.direction == a.ab.Receive && e3.receiptStatus == a.cb.Processing && e3.conversationSeq && e3.messageID && o2.set(String(e3.conversationSeq), e3);
          }), { time: /* @__PURE__ */ new Date(), convID: t2, count: o2.size });
          if (!o2.size)
            return n2({});
          var c2 = r2 == a.r.Peer ? a.d.c2c_msg_read_receipt : a.d.group_msg_read_receipt, l2 = { conv_id: t2, conv_msg_seq: Array.from(o2.keys()) };
          return this.connMgr.sendRequest(c2, l2).then(n2);
        }, b.prototype.queryReceiptsInfo = function(e2, t2, r2) {
          var n2 = this;
          return new Promise(function(i2) {
            var o2 = { time: /* @__PURE__ */ new Date(), convID: t2, count: 0, messageCount: e2.length };
            n2.mergeServerMsgExtraList(a.v.Biz, function() {
              var s2 = [], u2 = [], c2 = [];
              e2.forEach(function(e3) {
                var i3, l2, d2, p2, h2, f2;
                e3.type != a.hb.Revoke && e3.receiptStatus && e3.messageID && e3.conversationSeq && e3.conversationID === t2 && e3.conversationType === r2 ? (i3 = e3.conversationSeq, !(l2 = n2.engineConfig.msgExtraMap.get(n2.getMsgExtraKey(t2, r2, i3))) || !l2.revokeInfo && l2.receiptStatus ? (d2 = { conversationID: t2, conversationType: r2, messageID: e3.messageID, status: e3.receiptStatus, readMemberCount: 0, unreadMemberCount: 0, isSelfOperated: false }, u2.push(d2), l2 && !l2.messageID && (l2.messageID = e3.messageID, c2.push(l2)), e3.sentStatus == a.fb.Success && (p2 = false, r2 == a.r.Peer && (h2 = (null == (f2 = n2.engineConfig.dbConvMap.get(n2.getConversationKey(t2, r2))) ? void 0 : f2.maxSendReceiptMsgSeq) || 0, f2 = (null == f2 ? void 0 : f2.maxRecvReceiptMsgSeq) || 0, (e3.direction == a.ab.Send && i3 <= h2 || e3.direction == a.ab.Receive && i3 <= f2) && (p2 = true, d2.status = a.cb.Done, d2.readMemberCount = e3.direction == a.ab.Send ? 1 : 0, d2.isSelfOperated = 0 == d2.readMemberCount, o2.sendSeq = h2, o2.recvSeq = f2)), p2 || (l2 && !l2.convReceipt ? (d2.status = l2.receiptStatus, d2.readMemberCount = Math.max(l2.readMemberCount, 0), d2.unreadMemberCount = l2.unreadMemberCount) : (e3.receiptStatus == a.cb.Processing && l2 && (d2.status = l2.receiptStatus), r2 == a.r.Peer && e3.direction == a.ab.Send && (d2.status == a.cb.Done ? d2.readMemberCount = 1 : d2.unreadMemberCount = 1))))) : s2.push(e3.messageID)) : s2.push(e3.messageID);
              }), n2.dbMgr.addMessageExtraList(c2, "updateQueriedMessageID"), o2.count = u2.length, n2.logger.info(m, a.X.QueryReceiptsInfo, o2), i2({ infos: u2, errorMessageIDs: s2 });
            });
          });
        }, b.prototype.revokeMessage = function(e2, t2) {
          var r2 = this, n2 = e2.conversationType == a.r.Peer ? a.d.c2c_msg_revoke : a.d.group_msg_revoke, i2 = { conv_id: e2.conversationID, conv_msg_seq: e2.conversationSeq, payload: Object(s.k)((null == t2 ? void 0 : t2.revokeExtendedData) || ""), offline_push: Object(s.g)(null == t2 ? void 0 : t2.pushConfig) };
          return this.connMgr.sendRequest(n2, i2).then(function(n3) {
            if (n3.code)
              return i3 = Object(s.x)(a.t.CommonModuleIMServerError, n3.message, n3.code), r2.logger.warn(m, a.X.RevokeMessage, i3), Promise.reject(i3);
            var i3 = Object(s.v)(n3.msg_status), o2 = r2.createRevokeMessage(e2, { revokeType: a.jb.TwoWay, revokeStatus: i3.revoke, revokeTimestamp: n3.revoke_time, operatedUserID: r2.engineConfig.user.userID, revokeExtendedData: (null == t2 ? void 0 : t2.revokeExtendedData) || "", originalMessageType: e2.type, originalTextMessageContent: e2.type == a.hb.Text ? e2.message : "" });
            return r2.saveMessageRevokeExtra(o2, n3.statemsg_seq, "revokeMessage"), r2.logger.info(m, a.X.RevokeMessage, i3), { message: o2 };
          });
        }, b.prototype.addMessageReaction = function(e2, t2) {
          var r2 = this, n2 = t2.conversationType == a.r.Peer ? a.d.c2c_add_reaction : a.d.group_add_reaction, i2 = { conv_id: t2.conversationID, conv_msg_seq: t2.conversationSeq, reaction_key: e2, reaction_into_map: ((i2 = {})[e2] = { conv_id: "" }, i2) }, o2 = { time: /* @__PURE__ */ new Date() };
          return this.connMgr.sendRequest(n2, i2).then(function(n3) {
            return p(r2, void 0, void 0, function() {
              var r3, i3, u2, c2, l2, d2 = this;
              return h(this, function(p2) {
                switch (p2.label) {
                  case 0:
                    return n3.code || !n3.succ_list.length ? (l2 = Object(s.x)(a.t.ConversationModuleServerError, n3.message, n3.code), o2.reactionType = e2, o2.error = l2, this.logger.warn(m, a.X.AddReaction, o2), [2, Promise.reject(l2)]) : (r3 = this.createMessageExtra(t2.conversationID, t2.conversationType, t2.conversationSeq, t2.messageID), i3 = (i3 = null == (l2 = r3.reactions[e2]) ? void 0 : l2.userList) && i3.length ? i3.filter(function(e3) {
                      return e3.userID !== d2.engineConfig.user.userID;
                    }) : i3 || [], u2 = n3.succ_list.find(function(t3) {
                      return t3.reaction_key = e2;
                    }), i3.length < this.engineConfig.mailHBConfig.reaction_brief_len ? (i3.push({ userID: this.engineConfig.user.userID, seq: u2.cur_reaction_seq }), i3.length === u2.user_total_count ? [3, 2] : [4, this.fetchReactionKey(t2, e2, false)]) : [3, 2]);
                  case 1:
                    (c2 = p2.sent()).code || (i3 = c2.user_reaction, u2.cur_reaction_seq = c2.max_reaction_seq, u2.user_total_count = c2.total_user_count), p2.label = 2;
                  case 2:
                    return c2 = { reactionKey: u2.reaction_key, reactionSeq: u2.cur_reaction_seq, totalCount: u2.user_total_count, isSelfIncluded: true, userList: i3 }, this.saveMessageReactionExtra(r3, [c2], void 0, true), o2.reactionInfo = c2, this.logger.info(m, a.X.AddReaction, o2), [2, { reaction: { conversationID: t2.conversationID, conversationType: t2.conversationType, messageID: t2.messageID, totalCount: c2.totalCount, isSelfIncluded: true, reactionType: e2, userList: i3.map(function(e3) {
                      return { userID: e3.userID };
                    }) } }];
                }
              });
            });
          });
        }, b.prototype.deleteMessageReaction = function(e2, t2) {
          var r2 = this, n2 = t2.conversationType == a.r.Peer ? a.d.c2c_del_reaction : a.d.group_del_reaction, i2 = { conv_id: t2.conversationID, conv_msg_seq: t2.conversationSeq, reaction_key: [e2] }, o2 = { time: /* @__PURE__ */ new Date() };
          return this.connMgr.sendRequest(n2, i2).then(function(n3) {
            return p(r2, void 0, void 0, function() {
              var r3, i3, u2, c2, l2, d2 = this;
              return h(this, function(p2) {
                switch (p2.label) {
                  case 0:
                    return n3.code || !n3.succ_list.length ? (l2 = Object(s.x)(a.t.ConversationModuleServerError, n3.message, n3.code), o2.reactionType = e2, o2.error = l2, this.logger.warn(m, a.X.DeleteReaction, o2), [2, Promise.reject(l2)]) : (r3 = this.createMessageExtra(t2.conversationID, t2.conversationType, t2.conversationSeq, t2.messageID), i3 = (i3 = null == (l2 = r3.reactions[e2]) ? void 0 : l2.userList) && i3.length ? i3.filter(function(e3) {
                      return e3.userID !== d2.engineConfig.user.userID;
                    }) : i3 || [], u2 = n3.succ_list.find(function(t3) {
                      return t3.reaction_key = e2;
                    }), i3.length < this.engineConfig.mailHBConfig.reaction_brief_len && i3.length !== u2.user_total_count ? [4, this.fetchReactionKey(t2, e2, false)] : [3, 2]);
                  case 1:
                    (c2 = p2.sent()).code || (i3 = c2.user_reaction, u2.cur_reaction_seq = c2.max_reaction_seq, u2.user_total_count = c2.total_user_count), p2.label = 2;
                  case 2:
                    return 0 == u2.user_total_count && (i3.length = 0), c2 = { reactionKey: u2.reaction_key, reactionSeq: u2.cur_reaction_seq, totalCount: u2.user_total_count, isSelfIncluded: false, userList: i3 }, this.saveMessageReactionExtra(r3, [c2], void 0, true), o2.reactionInfo = c2, this.logger.info(m, a.X.DeleteReaction, o2), [2, { reaction: { conversationID: t2.conversationID, conversationType: t2.conversationType, messageID: t2.messageID, totalCount: c2.totalCount, isSelfIncluded: false, reactionType: e2, userList: i3.map(function(e3) {
                      return { userID: e3.userID };
                    }) } }];
                }
              });
            });
          });
        }, b.prototype.queryMessageReactionUserList = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), total: 0, count: 0, config: t2 }, i2 = t2.reactionType, o2 = this.getMsgExtraKey(e2.conversationID, e2.conversationType, e2.conversationSeq), u2 = this.engineConfig.msgExtraMap.get(o2);
          if (!u2 || !u2.reactions || !u2.reactions[i2])
            return o2 = Object(s.x)(a.t.CommonModuleParamInvalid, "reactionType is invalid"), this.logger.warn(m, a.X.QueryReaction, n2), Promise.reject(o2);
          function c2(o3, s2) {
            var u3 = o3.length, c3 = t2.nextFlag || 0, l3 = c3 + t2.count;
            return o3 = o3.slice(c3, l3).map(function(e3) {
              return { userID: e3.userID };
            }), c3 = l3 < u3 ? l3 : 0, n2.total = u3, n2.count = o3.length, r2.logger.info(m, a.X.QueryReaction, n2), { reactionType: i2, totalCount: s2, nextFlag: c3, userList: o3, message: e2 };
          }
          o2 = +u2.reactions[i2].detailSeq || 0;
          var l2 = +u2.reactions[i2].seq || 0;
          return 0 < l2 && o2 < l2 ? this.fetchReactionKey(e2, i2, true).then(function(t3) {
            if (t3.code)
              return o3 = Object(s.x)(a.t.ConversationModuleServerError, t3.message, t3.code), r2.logger.warn(m, a.X.QueryReaction, n2), Promise.reject(o3);
            var o3 = t3.max_reaction_seq, l3 = t3.total_user_count, d2 = (t3 = { reactionSeq: o3, reactionKey: i2, totalCount: l3, userList: t3.user_reaction, isSelfIncluded: false }, r2.engineConfig.user.userID);
            return t3.isSelfIncluded = t3.userList.some(function(e3) {
              return e3.userID == d2;
            }), u2.messageID = e2.messageID, r2.saveMessageReactionExtra(u2, [t3], o3, true, true), c2(t3.userList, l3);
          }) : (o2 = u2.reactions[i2].detailUserList || [], Promise.resolve(c2(o2, o2.length)));
        }, b.prototype.queryCombineMessageDetail = function(e2) {
          var t2 = this, r2 = e2.combineID, n2 = (o2 = f(r2.split("-"), 2))[0], i2 = o2[1], o2 = r2.replace(n2 + "-" + i2 + "-", ""), u2 = Number(i2[0]), c2 = { time: /* @__PURE__ */ new Date(), convID: o2, convType: u2 };
          return this.dbMgr.getMessageByCombineID(o2, u2, r2.replace(n2, "0")).then(function(o3) {
            if (!o3)
              throw Object(s.x)(a.t.CommonModuleParamInvalid, "The combine message no found.");
            if (0 < (l2 = (o3.messageList || []).filter(function(e3) {
              return e3.parentID == n2;
            })).length)
              return e2.messageList = l2.map(function(e3) {
                return t2.transformDBMessage(e3);
              }), { message: e2 };
            var u3, l2 = o3.fileDownloadUrl, d2 = o3.aesKey;
            if ("0" !== n2 && (l2 = (null == (u3 = o3.messageList.find(function(e3) {
              return e3.combineID == r2;
            })) ? void 0 : u3.fileDownloadUrl) || "", d2 = (null == u3 ? void 0 : u3.aesKey) || ""), l2 && d2)
              return t2.dbMgr.downloadFile(l2, "get combine onerror.").then(function(r3) {
                return c2.size = r3.length, t2.handleCombineFileRsp(e2, r3, o3, d2, i2, n2), { message: e2 };
              });
            throw Object(s.x)(a.t.CommonModuleParamInvalid, "The combine message no found.");
          }).then(function(e3) {
            return t2.logger.info(m, a.X.QueryCombineMessage, c2), e3;
          }).catch(function(e3) {
            throw c2.error = e3, t2.logger.warn(m, a.X.QueryCombineMessage, c2), e3;
          });
        }, b.prototype.onPushMsgDelete = function(e2) {
          var t2 = "onPushMsgDelete", r2 = e2.conv_id, n2 = e2.conv_type, i2 = e2.max_del_conv_msg_seq;
          e2.is_del_all && i2 ? this.createConversationInstance(r2, n2).onPushAllMsgDelete(i2, t2) : e2.del_conv_msg_seqs.length && this.createConversationInstance(r2, n2).onPushMsgDelete(e2.del_conv_msg_seqs, t2);
        }, b.prototype.onPushConvDelete = function(e2) {
          var t2;
          e2 = this.getConversationKey(e2.conv_id, e2.conv_type);
          (e2 = this.engineConfig.dbConvMap.get(e2)) && (e2.state != a.q.Delete && e2.maxOrderKey ? (this.deleteLocalConv(e2), t2 = { event: a.o.Deleted, conversation: Object(s.s)(a.m.convKeys, e2) }, this.eventBus.emit(a.u.ConvChanged, { infoList: [t2] }, "deleteConv")) : e2.state = a.q.Delete);
        }, b.prototype.onPushConvRead = function(e2) {
          var t2, r2 = this, n2 = e2.conv_msg_seq, i2 = e2.read_seq, o2 = (e2 = this.getConversationKey(e2.conv_id, e2.conv_type), this.engineConfig.dbConvMap.get(e2));
          o2 && n2 && (o2.readMsgSeq = Math.max(n2, o2.readMsgSeq || 0), o2.sendMsgCount = i2, o2.state != a.q.Delete && o2.maxOrderKey && (e2 = function(e3) {
            var t3 = ((t3 = o2.mentionedInfoList) && t3.length && (o2.mentionedInfoList = t3.filter(function(e4) {
              return e4.seq > n2;
            })), o2.deletedMsgCount = e3, "onPushConvRead"), s2 = o2.msgSeq || 0;
            (s2 = Math.max(s2 - o2.readMsgSeq - i2 - e3, 0)) != o2.unreadMessageCount ? (o2.unreadMessageCount = s2, r2.onUnreadMessageCount(t3), r2.emitConversationUpdated(o2, t3)) : r2.dbMgr.addConversationList([o2], t3 + s2);
          }, (t2 = o2.deletedMsgSeqs && o2.deletedMsgSeqs.length ? o2.deletedMsgSeqs.filter(function(e3) {
            return n2 < e3;
          }) : null) && t2.length ? this.dbMgr.getDeleteMessageCount(o2.conversationID, o2.type, t2, e2) : e2(0)));
        }, b.prototype.onPushConvMute = function(e2) {
          var t2, r2, n2 = this.getConversationKey(e2.conv_id, a.r.Group);
          (n2 = this.engineConfig.dbConvMap.get(n2)) && (t2 = e2.conv_type ? a.p.DoNotDisturb : a.p.Notify, n2.state != a.q.Delete && n2.maxOrderKey && n2.notificationStatus != t2 ? (n2.notificationStatus = t2, this.emitConversationUpdated(n2, r2 = "onPushConvMute"), this.onUnreadMessageCount(r2)) : n2.notificationStatus = t2, (r2 = this.engineConfig.dbGroupMap.get(n2.conversationID)) && (r2.notificationStatus = e2.conv_type ? a.T.Disturb : a.T.Notify, this.dbMgr.addGroupList([r2])));
        }, b.prototype.onPushConvPinned = function(e2) {
          var t2 = this.getConversationKey(e2.conv_id, e2.conv_type);
          (t2 = this.engineConfig.dbConvMap.get(t2)) && (t2.state != a.q.Delete && t2.maxOrderKey && !t2.isPinned != !e2.pinned_type ? (t2.isPinned = !!e2.pinned_type, this.emitConversationUpdated(t2, "onPushConvPinned")) : t2.isPinned = !!e2.pinned_type, this.updateConvPinnedListSeq(e2.conv_pinned_list_seq));
        }, b.prototype.onPushMessage = function(e2, t2) {
          var r2 = e2.msg_status || 0, n2 = (e2.recv_msg_info.msg_info.msg_status = r2, e2.recv_msg_info.msg_svr_info), i2 = e2.recv_msg_info.msg_info.conv_id, o2 = a.r.Peer, u2 = void 0, c2 = n2.sender_user_id, l2 = (t2 = (t2 == a.d.p_group_msg.cmd ? o2 = a.r.Group : t2 == a.d.p_room_msg.cmd ? (i2 = i2 || e2.room_id, o2 = a.r.Room) : t2 == a.d.p_c2c_msg.cmd && (i2 = i2 || c2, c2 && c2 != this.engineConfig.user.userID && (u2 = Object(s.h)(n2.sender_user_name))), e2.send_count_after_read || 0), e2.recv_msg_info.msg_info.sender_unaware);
          if (o2 == a.r.Room || c2 != this.engineConfig.user.userID && !l2 || this.logger.info(m, a.X.PCMD, { convID: i2, type: o2, name: u2, sendCount: t2, senderID: c2 }), i2) {
            var d2 = this.createConversationInstance(i2, o2);
            if (l2 && (!c2 || c2 == this.engineConfig.user.userID))
              return d2.dbConv.sendMsgCount = t2, this.dbMgr.addConversationList([d2.dbConv], "sender_unaware:" + t2), i2;
            o2 == a.r.Peer && c2 && c2 != this.engineConfig.user.userID && this.updateConvNameAndAvatar("onPushMessage", d2.dbConv, u2), (l2 = this.engineConfig.msgExtraMap.get(this.getMsgExtraKey(i2, o2, n2.conv_msg_seq))) || o2 != a.r.Peer || (l2 = this.engineConfig.msgExtraMap.get(this.getMsgExtraKey(i2, o2, 0))), r2 && l2 && (l2.receiptStatus = Object(s.v)(r2).receipt, l2.messageID || (l2.messageID = n2.msg_id), this.dbMgr.addMessageExtraList([l2], "onPushMessage")), this.syncConvInfoWhenPushMessage(d2, e2.recv_msg_info, t2, u2);
          }
          return i2;
        }, b.prototype.onPushCommand = function(e2, t2) {
          var r2 = "", n2 = a.r.Peer;
          return t2 == a.d.p_group_command.cmd ? (n2 = a.r.Group, r2 = e2.recv_command_info.command_msg_info.conv_id) : t2 == a.d.p_room_command.cmd ? (n2 = a.r.Room, r2 = e2.room_id) : t2 == a.d.p_c2c_command.cmd && (t2 = e2.recv_command_info.command_svr_info.sender_user_id, r2 = e2.recv_command_info.command_msg_info.conv_id || t2), this.emitReceiveCommandMessage(r2, n2, e2), r2;
        }, b.prototype.onPushBroadcastMessage = function(e2) {
          e2 = this.transform2Message(e2.recv_msg_info, "", a.r.Unknown), this.eventBus.emit(a.u.BroadcastMsg, { message: e2 });
        }, b.prototype.onPushReadReceipt = function(e2) {
          var t2 = this, r2 = n.a.fromString("0"), i2 = e2.PushItems.map(function(e3) {
            var i3 = t2.createMessageReceiptItemExtra(t2.mergeMsgReceiptDBConvMap, e3);
            t2.mergeMsgReceiptMap.set(i3.id, i3), i3 = e3.receipt_seq || n.a.fromString("0");
            return t2.mergeMsgReceiptSeqs.add(i3.toString()), i3.greaterThan(r2) && (r2 = i3), i3;
          }), o2 = (e2 = (i2.sort(function(e3, t3) {
            return e3.lessThanOrEqual(t3) ? -1 : 1;
          }), i2[i2.length - 1].sub(i2[0]).toNumber() == i2.length - 1), Array.from(this.mergeMsgReceiptMap.values())), s2 = (this.emitMessageReceiptOrRevoke(o2, a.v.SDKPush), i2[0]), u2 = this.engineConfig.user.msgExtraSeq || "0";
          "0" == u2 || s2.lessThanOrEqual(u2) || s2.sub(1).toString() == u2 && e2 && !this.mergeMsgReceiptTimer ? (s2 = "pushReadReceipt", this.updateMsgExtraSeq(r2), this.dbMgr.addMessageExtraList(o2, s2), this.dbMgr.addConversationList(Array.from(this.mergeMsgReceiptDBConvMap.values()), s2), this.mergeMsgReceiptSeqs.clear(), this.mergeMsgReceiptMap.clear(), this.mergeMsgReceiptDBConvMap.clear(), this.logger.info(m, "mergeMsgReceipt", { dbSeq: u2, seqs: i2, action: "continuousMerge" })) : this.mergeMsgReceiptTimer || (this.mergeMsgReceiptTimer = setTimeout(function() {
            var e3, r3;
            t2.logger && ((e3 = Array.from(t2.mergeMsgReceiptSeqs.values()).map(function(e4) {
              return n.a.fromString(e4);
            })).sort(function(e4, t3) {
              return e4.lessThanOrEqual(t3) ? -1 : 1;
            }), r3 = e3[e3.length - 1].sub(e3[0]).toNumber() == e3.length - 1, t2.logger.info(m, "mergeMsgReceipt", { dbSeq: u2, seqs: i2, action: "waitingPush", continuous: r3, mergeSeqs: e3 }), r3 ? (r3 = "pushReadReceipt", t2.updateMsgExtraSeq(e3[e3.length - 1]), t2.dbMgr.addMessageExtraList(Array.from(t2.mergeMsgReceiptMap.values()), r3), t2.dbMgr.addConversationList(Array.from(t2.mergeMsgReceiptDBConvMap.values()), r3)) : t2.mergeServerMsgExtraList(a.v.SDKPush), t2.mergeMsgReceiptTimer = 0, t2.mergeMsgReceiptSeqs.clear(), t2.mergeMsgReceiptMap.clear(), t2.mergeMsgReceiptDBConvMap.clear());
          }, this.engineConfig.mailHBConfig.list_to));
        }, b.prototype.onPushMsgRevoke = function(e2) {
          var t2 = this.createConversationInstance(e2.recv_msg_info.msg_info.conv_id, e2.conv_type), r2 = t2.dbConv.deletedMsgMaxSeq || 0, n2 = t2.dbConv.deletedMsgSeqs || [], i2 = e2.recv_msg_info.msg_svr_info.conv_msg_seq;
          -1 != n2.indexOf(i2) || i2 <= r2 || (n2 = t2.transform2Message(e2.recv_msg_info, false), this.eventBus.emit(a.u.MsgRevoke, { messageList: [n2] }), this.saveMessageRevokeExtra(n2, e2.statemsg_seq, "pushRevoke"));
        }, b.prototype.onPushReaction = function(e2) {
          var t2 = this, r2 = e2.conv_id, n2 = e2.conv_type, i2 = /* @__PURE__ */ new Set(), o2 = this.createConversationInstance(r2, n2), s2 = o2.dbConv.deletedMsgMaxSeq || 0, a2 = o2.dbConv.deletedMsgSeqs || [], u2 = e2.msg_reactions.filter(function(e3) {
            var o3 = e3.conv_msg_seq;
            if (-1 != a2.indexOf(o3) || o3 <= s2)
              return false;
            var u3 = t2.createMessageExtra(r2, n2, o3);
            return !(+u3.reactionSeq > e3.start_reaction_seq || (u3.messageID || i2.add(o3), 0));
          });
          this.logger.info(m, "pushReaction", { count: u2.length }), o2.fetchMsgListFromCache(Array.from(i2)).then(function(e3) {
            u2.forEach(function(i3) {
              var o3 = i3.conv_msg_seq, s3 = i3.start_reaction_seq, a3 = i3.end_reaction_seq, u3 = (i3 = i3.reaction_infos, t2.createMessageExtra(r2, n2, o3, null == (o3 = e3.get(o3)) ? void 0 : o3.messageID));
              u3.messageID && (o3 = i3.map(function(e4) {
                var t3 = e4.reaction_key, r3 = e4.total_user_count, n3 = e4.max_reaction_seq, i4 = e4.is_multi, o4 = e4.include_self, s4 = !(!u3.reactions || !u3.reactions[t3]) && u3.reactions[t3].isSelfIncluded;
                return { reactionSeq: n3, reactionKey: t3, totalCount: r3 || 0, userList: e4.user_reaction, isSelfIncluded: s4 = i4 ? o4 : s4, value: "" };
              }), t2.saveMessageReactionExtra(u3, o3, a3), +u3.reactionSeq + 1 < s3 && t2.mergeMessageReactionList(u3));
            });
          });
        }, b.prototype.onPushConvAllDelete = function(e2) {
          this.deleteAllLocalConv(null, +e2.conv_sid, true);
        }, b.prototype.onPushCleanAllUnread = function(e2) {
          var t2 = this, r2 = +e2.conv_sid, n2 = [];
          this.convMap.forEach(function(e3) {
            e3.convType == a.r.Room || +e3.dbConv.seq > r2 || (t2.syncConvReadSeqToMsgSeq(e3.dbConv, e3.dbConv.msgSeq), n2.push(e3.dbConv));
          }), e2 = "onPushClearAllUnrc";
          this.dbMgr.addConversationList(n2, e2), this.onUnreadMessageCount(e2);
        }, b.prototype.onPushCleanAllMsgs = function(e2) {
          this.updateDeleteAllMsgTime(+e2.conv_sid), this.deleteAllLocalConvMsg();
        }, b.prototype.onPushC2CMute = function(e2) {
          var t2 = this;
          e2.mute_info.forEach(function(e3) {
            var r2 = e3.peer_user_id, n2 = e3.mute, i2 = (e3 = e3.mute_list_seq, t2.getConversationKey(r2, a.r.Peer)), o2 = (n2 = n2 ? a.p.DoNotDisturb : a.p.Notify, "onPushC2CMute");
            !(i2 = t2.engineConfig.dbConvMap.get(i2)) || e3 < (0 | i2.muteSeq) || (i2.state != a.q.Delete && i2.maxOrderKey && i2.notificationStatus != n2 ? (i2.muteSeq = e3, i2.notificationStatus = n2, t2.serverMuteUserList = t2.serverMuteUserList.filter(function(e4) {
              return e4 !== r2;
            }), t2.emitConversationUpdated(i2, o2), t2.onUnreadMessageCount(o2)) : i2.notificationStatus = n2);
          });
        }, b.prototype.setDBUser = function(e2) {
          var t2 = this, r2 = [];
          e2.forEach(function(e3) {
            var n2 = t2.engineConfig.dbUserMap.get(e3.userID);
            n2 && n2.updateTime < e3.updateTime ? (r2.push(n2), Object.assign(n2, e3)) : n2 || (r2.push(e3), t2.engineConfig.dbUserMap.set(e3.userID, e3));
          }), 0 < r2.length && this.dbMgr.addUserList(r2);
        }, b.prototype.registerInnerEvent = function() {
          this.eventBus.add(a.u.ILogined, this.onLogined.bind(this)), this.eventBus.add(a.u.ILogout, this.onLogout.bind(this)), this.eventBus.add(a.u.ITriggerHB, this.onTriggerHB.bind(this)), this.eventBus.add(a.u.ISyncGroups, this.onSyncGroups.bind(this)), this.eventBus.add(a.u.IJoinedGroup, this.onJoinedGroup.bind(this)), this.eventBus.add(a.u.ILeftGroup, this.onLeftGroup.bind(this)), this.eventBus.add(a.u.ISyncGroupInfo, this.onSyncGroupInfo.bind(this)), this.eventBus.add(a.u.IUnreadMsgCount, this.onUnreadMessageCount.bind(this)), this.eventBus.add(a.u.IConnectedRoom, this.onConnectedRoom.bind(this)), this.eventBus.add(a.u.IMuteGroup, this.onMuteGroup.bind(this));
        }, b.prototype.onSyncGroups = function(e2) {
          var t2 = this, r2 = (this.isLogined = false, e2 ? a.v.SDKHb : a.v.SDKLogin);
          e2 && (this.mergeServerMsgExtraList(r2), this.mergeServerMsgStateList(r2)), this.mergeServerPinnedList(r2, function(n2) {
            t2.mergeServerConvList(r2, function(i2, o2) {
              var u2, c2 = { _action_: !(t2.isLogined = true) }, l2 = i2.filter(function(e3) {
                var r3, i3, s2, u3, l3 = e3.id, d3 = false;
                return n2 && (s2 = -1 != n2.indexOf(l3), !e3.isPinned != !s2 && (e3.isPinned = s2, o2.has(l3) || o2.set(l3, a.o.Updated), d3 = true)), 0 < t2.serverMuteUserList.length && e3.type == a.r.Peer && t2.serverMuteUserList.includes(e3.id) && e3.notificationStatus !== a.p.DoNotDisturb && (e3.notificationStatus = a.p.DoNotDisturb, o2.has(l3) || o2.set(l3, a.o.Updated), d3 = true), e3.type == a.r.Group && ((s2 = t2.engineConfig.dbGroupMap.get(e3.conversationID)) ? (r3 = s2.notificationStatus, u3 = s2.groupName, i3 = s2.groupAvatarUrl, s2 = s2.totalMemberCount, e3.state = a.q.Normal, "string" == typeof u3 && (e3.conversationName = u3), "string" == typeof i3 && (e3.conversationAvatarUrl = i3), e3.notificationStatus != r3 && (e3.notificationStatus = r3, o2.has(l3) || o2.set(l3, a.o.Updated)), e3.conversationName || e3.conversationAvatarUrl || (c2._action_ = true, c2[e3.conversationID] = r3 + "," + s2), d3 = true) : e3.state != a.q.Disable && (e3.state = a.q.Disable, (u3 = o2.has(l3) ? o2.get(l3) : a.o.Disabled) != a.o.Deleted && (u3 = a.o.Disabled), o2.set(l3, u3), c2._action_ = true, c2[e3.conversationID] = "state:Disable", d3 = true)), d3;
              }), d2 = "onSyncGroups" + o2.size;
              t2.dbMgr.addConversationList(l2, d2), o2.size && (u2 = [], o2.forEach(function(e3, r3) {
                r3 = Object(s.s)(a.m.convKeys, t2.engineConfig.dbConvMap.get(r3)), u2.push({ event: e3, conversation: r3 }), t2.stgyMgr.modifyConversation(r3.conversationID, r3.type, e3, a.a.FetchAll);
              }), t2.eventBus.emit(a.u.ConvChanged, { infoList: u2 }, d2)), t2.onUnreadMessageCount(d2, i2), c2._action_ && (t2.logger.info(m, d2, c2), c2._action_ = d2, t2.dataReport.reportSDKEvent("/sdk/log", { error_message: JSON.stringify(c2) })), t2.queryConvsCallbackList.forEach(function(e3) {
                return t2.handleQueryConvsCallback(i2, e3);
              }), t2.queryConvsCallbackList.length = 0, i2.slice(0, 30).forEach(function(n3) {
                e2 && n3.type == a.r.Room || t2.createConversationInstance(n3.conversationID, n3.type).mergeServerMessageList(r2);
              }), e2 || (t2.dbMgr.loadDB(function() {
                var e3 = [];
                t2.engineConfig.dbUserMap.forEach(function(t3) {
                  t3.userName || e3.push(t3.userID);
                }), t2.fetchSvrUsers(e3, "loadGDB");
              }), t2.fetchDeletedPeerConvMsgs());
            });
          });
        }, b.prototype.onLogined = function() {
          var e2 = this, t2 = [], r2 = [];
          this.engineConfig.dbConvMap.forEach(function(e3) {
            e3.type || e3.conversationName && e3.conversationAvatarUrl || t2.push(e3.conversationID), r2.push({ conversationID: e3.conversationID, conversationType: e3.type, conversationOrderKey: e3.orderKey, todoFlag: 0 });
          }), this.fetchSvrUsers(t2, "initLocalConv"), this.stgyMgr.start(), this.stgyMgr.initConversations(r2), setTimeout(function() {
            e2.mergeServerMsgExtraList(a.v.SDKLogin), e2.mergeServerMsgStateList(a.v.SDKLogin);
          }, 1e3);
        }, b.prototype.onLogout = function() {
          this.engineConfig.dbConvMap.clear(), this.engineConfig.dbGroupMap.clear(), this.engineConfig.msgExtraMap.clear(), this.groupMgr.clearRoomMessage(), this.convMap.forEach(function(e2) {
            return e2.destroy();
          }), this.convMap.clear(), this.muteGroupConvMap.clear(), this.msgReceiptChangedMap.clear(), this.isLogined = false, this.stgyMgr.stop();
        }, b.prototype.onTriggerHB = function() {
          this.engineConfig.syncUserTask.size && this.fetchSvrUsers(Array.from(this.engineConfig.syncUserTask), "syncTask"), this.mergeServerMsgExtraList(a.v.SDKHb), this.mergeServerMsgStateList(a.v.SDKHb), this.mergeServerConvList(a.v.SDKHb), this.mergeServerDelAllConvMsgs(), this.mergeServerC2CMuteList(a.v.SDKHb), this.groupMgr.mergeServerGroupList(a.v.SDKHb), this.groupMgr.mergeServerGroupApplyList("", a.v.SDKHb), this.checkIfGroupConvUnmute();
        }, b.prototype.onJoinedGroup = function(e2, t2, r2, n2) {
          var i2 = ((e2 = this.createConversationInstance(e2, a.r.Group).dbConv).state == a.q.Disable && (e2.state = a.q.Normal), e2.isDisabled = false, "onJoinedGroup");
          this.updateConvNameAndAvatar(i2, e2, t2, r2), (!e2.msgSeq || n2 > e2.msgSeq) && (e2.msgSeq = n2, this.syncConvReadSeqToMsgSeq(e2, n2), this.dbMgr.addConversationList([e2], i2 + n2));
        }, b.prototype.onLeftGroup = function(e2, t2, r2, n2) {
          var i2, o2 = this.createConversationInstance(e2, a.r.Group);
          o2.dbConv.maxOrderKey && o2.dbConv.state != a.q.Disable && (i2 = "onLeftGroup", this.engineConfig.mailHBConfig.group_tips && t2 && r2 && (t2 = { type: a.hb.Tips, event: t2, operatedUser: r2, targetUserList: n2 || [] }, o2.insertMessageToLocalDB(t2, a.eb.Tips), this.eventBus.emit(a.u.RecvGroupMsg, { messageList: [t2], fromConversationID: e2 }, i2)), r2 = o2.dbConv.msgSeq || 0, o2.dbConv.state != a.q.Delete && (o2.dbConv.state = a.q.Disable, this.connMgr.sendRequest(a.d.conv_read_seq, { conv_id: e2, conv_type: 2, read_seq: r2 }, a.j.SDK)), this.syncConvReadSeqToMsgSeq(o2.dbConv, r2, true), o2.dbConv.isDisabled = true, this.dbMgr.addConversationList([o2.dbConv], i2), n2 = { event: a.o.Disabled, conversation: Object(s.s)(a.m.convKeys, o2.dbConv) }, this.eventBus.emit(a.u.ConvChanged, { infoList: [n2] }, i2), this.onUnreadMessageCount(i2));
        }, b.prototype.onSyncGroupInfo = function(e2, t2, r2) {
          var n2 = this.createConversationInstance(e2, a.r.Group);
          this.updateConvNameAndAvatar("onSyncGroupInfo", n2.dbConv, t2, r2), e2 = { userID: e2, userName: t2, userAvatarUrl: r2 };
          this.emitConvInfo([{ user: e2, dbConv: n2.dbConv }]);
        }, b.prototype.onUnreadMessageCount = function(e2, t2) {
          var r2 = this, n2 = a.p.DoNotDisturb, i2 = 0;
          t2 ? t2.forEach(function(e3) {
            e3.notificationStatus != n2 && (i2 += e3.unreadMessageCount);
          }) : this.convMap.forEach(function(e3) {
            e3.dbConv.notificationStatus != n2 && r2.filterValidConv(e3.dbConv) && (i2 += e3.dbConv.unreadMessageCount);
          }), this.oldTotalUnreadCount != i2 && (this.oldTotalUnreadCount = i2, this.eventBus.emit(a.u.ConvUnreadMsgCount, { totalUnreadMessageCount: i2 }, e2));
        }, b.prototype.onConnectedRoom = function(e2, t2) {
          (e2 = this.convMap.get(this.getConversationKey(e2, a.r.Room))) && (t2 || this.setAssociatedGroup(e2, e2.convID, e2.convType), e2.mergeServerMessageList(a.v.SDKHb, t2));
        }, b.prototype.onMuteGroup = function(e2) {
          var t2 = "onMuteGroup", r2 = this.createConversationInstance(e2, a.r.Group).dbConv, n2 = r2.mutedExpiredTime;
          this.updateGroupConv(r2), r2.mutedExpiredTime !== n2 && (0 == r2.mutedExpiredTime ? this.muteGroupConvMap.delete(e2) : this.muteGroupConvMap.set(e2, r2), this.dbMgr.addConversationList([r2], t2), n2 = { event: a.o.Updated, conversation: Object(s.s)(a.m.convKeys, r2) }, this.eventBus.emit(a.u.ConvChanged, { infoList: [n2] }, t2), this.onUnreadMessageCount(t2));
        }, b.prototype.fetchDeletedPeerConvMsgs = function() {
          var e2 = this;
          this.engineConfig.dbConvMap.forEach(function(t2) {
            t2.state == a.q.Delete && t2.type == a.r.Peer && e2.createConversationInstance(t2.conversationID, t2.type).mergeServerMessageList(a.v.SDKLogin);
          });
        }, b.prototype.syncConvInfoWhenPushMessage = function(e2, t2, r2, n2) {
          var i2, o2 = this, u2 = e2.dbConv, c2 = u2.conversationID;
          u2.type == a.r.Peer ? this.engineConfig.dbUserMap.has(c2) || u2.maxOrderKey && u2.state != a.q.Delete ? (i2 = this.engineConfig.dbUserMap.get(c2), "string" == typeof n2 && i2 && i2.userName != n2 && (i2.userName = n2, this.dbMgr.setUser(i2)), e2.onPushMessage(t2, r2)) : this.connMgr.sendRequest(a.d.user_fetch, { _ev_: "onPushMessage", user_ids: [c2] }, a.j.SDK).then(function(n3) {
            var i3;
            (n3 = n3.result && n3.result[0]) && (i3 = Object(s.h)(n3.user_name), n3 = Object(s.h)(n3.avatar), u2.conversationName = i3, u2.conversationAvatarUrl = n3, o2.dbMgr.addConversationList([u2], "onSyncConvInfo"), i3 = Object(s.w)({ userID: c2, userName: i3, userAvatarUrl: n3 }, o2.engineConfig), o2.dbMgr.setUser(i3), o2.emitConvInfo([{ user: i3, dbConv: u2 }])), e2.onPushMessage(t2, r2);
          }) : e2.onPushMessage(t2, r2);
        }, b.prototype.getConversationKey = function(e2, t2) {
          return this.engineConfig.user.userID + (t2 || 0) + e2;
        }, b.prototype.getMsgExtraKey = function(e2, t2, r2) {
          return this.engineConfig.user.userID + (t2 || 0) + e2 + (r2 || "");
        }, b.prototype.getDBConversation = function(e2, t2, r2) {
          return t2 = this.engineConfig.dbConvMap.get(e2) || { conversationID: t2, conversationName: "", conversationAlias: "", conversationAvatarUrl: "", type: r2, unreadMessageCount: 0, notificationStatus: a.p.Notify, orderKey: 0, isPinned: false, draft: "", mentionedInfoList: [], id: e2, ownerID: this.engineConfig.user.userID, seq: "0", state: a.q.Normal, maxSeq: 0, maxOrderKey: 0, msgSeq: 0, readMsgSeq: 0, sendMsgCount: 0, deletedMsgCount: 0, deletedMsgMaxSeq: 0, deletedMsgSeqs: [], maxSendReceiptMsgSeq: 0, maxRecvReceiptMsgSeq: 0, minStatemsgSeq: 0, maxStatemsgSeq: 0, muteSeq: 0, mutedExpiredTime: 0, isDisabled: false }, this.engineConfig.dbConvMap.set(e2, t2), t2;
        }, b.prototype.initDBConversationFields = function(e2, t2) {
          Object.assign(e2, { conversationName: "", conversationAvatarUrl: "", notificationStatus: a.p.Notify, isPinned: false, draft: "", maxSeq: 0, maxOrderKey: t2 * a.m.MESSAGE_SEQ_MULTIPLIER, deletedMsgMaxSeq: 0, deletedMsgSeqs: [], maxSendReceiptMsgSeq: 0, maxRecvReceiptMsgSeq: 0, minStatemsgSeq: 0, maxStatemsgSeq: e2.maxStatemsgSeq || 0 });
        }, b.prototype.createConversationInstance = function(e2, t2) {
          var r2 = this.getConversationKey(e2, t2), n2 = this.convMap.get(r2);
          return n2 || (n2 = new (t2 === a.r.Peer ? c : t2 === a.r.Group ? u : l).a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr, this), this.convMap.set(r2, n2), r2 = this.getDBConversation(r2, e2, t2), t2 === a.r.Peer && this.engineConfig.user.userID === e2 && (r2.state = a.q.Disable, r2.conversationName = this.engineConfig.user.userName, r2.conversationAvatarUrl = this.engineConfig.user.userAvatarUrl), t2 == a.r.Peer && this.serverMuteUserList.includes(e2) && (r2.notificationStatus = a.p.DoNotDisturb), n2.setDBConv(r2)), this.setAssociatedGroup(n2, e2, t2), this.updateConvNameAndAvatar("create", n2.dbConv), n2;
        }, b.prototype.emitConvInfo = function(e2) {
          var t2 = [], r2 = [];
          e2.forEach(function(e3) {
            var n2, i2, o2 = e3.user;
            (e3 = e3.dbConv) && e3.state == a.q.Normal && (n2 = false, i2 = o2.userName, o2 = o2.userAvatarUrl, "string" == typeof i2 && e3.conversationName != i2 && (n2 = true, e3.conversationName = i2, t2.push(e3)), "string" == typeof o2 && e3.conversationAvatarUrl != o2 && (n2 = true, e3.conversationAvatarUrl = o2), n2 && (t2.push(e3), e3.maxOrderKey && r2.push({ event: a.o.Updated, conversation: Object(s.s)(a.m.convKeys, e3) })));
          }), e2 = "onSyncConvInfo";
          this.dbMgr.addConversationList(t2, e2), r2.length && this.eventBus.emit(a.u.ConvChanged, { infoList: r2 }, e2);
        }, b.prototype.emitConversationUpdated = function(e2, t2) {
          this.dbMgr.addConversationList([e2], t2), e2.state != a.q.Delete && (e2 = { event: a.o.Updated, conversation: Object(s.s)(a.m.convKeys, e2) }, this.eventBus.emit(a.u.ConvChanged, { infoList: [e2] }, t2));
        }, b.prototype.emitReceiveCommandMessage = function(e2, t2, r2) {
          var n2, i2, o2;
          e2 && (n2 = r2.msg_info, t2 != a.r.Room && (n2 = r2.recv_command_info.command_msg_info, o2 = (r2 = r2.recv_command_info.command_svr_info).sender_user_id, i2 = r2.msg_id, r2 = r2.msg_time, n2.sender_user_id = o2, n2.msg_id = i2, n2.msg_time = r2), o2 = t2 === a.r.Peer ? a.u.RecvPeerMsg : t2 === a.r.Group ? a.u.RecvGroupMsg : a.u.RecvRoomMsg, this.eventBus.emit(o2, { messageList: [this.transform2Command(e2, t2, n2)], fromConversationID: e2 }));
        }, b.prototype.emitMessageDelete = function(e2) {
          var t2 = this, r2 = "emitMessageDelete";
          e2.forEach(function(e3, n2) {
            var i2 = +n2[0], o2 = (n2 = n2.substring(1), t2.logger.info(m, r2, { convID: n2, type: i2, seqs: e3.join() }), e3.shift());
            0 < e3.length && 0 < (e3 = o2 ? e3.filter(function(e4) {
              return o2 < e4;
            }) : e3).length && t2.createConversationInstance(n2, i2).onPushMsgDelete(e3, r2), 0 < o2 && t2.createConversationInstance(n2, i2).onPushAllMsgDelete(o2, r2);
          });
        }, b.prototype.emitMessageReceiptOrRevoke = function(e2, t2) {
          var r2 = this, n2 = "boolean" == typeof t2, i2 = t2 === a.v.SDKPush, o2 = /* @__PURE__ */ new Map(), u2 = (e2.forEach(function(e3) {
            var t3 = e3.conversationType + e3.conversationID, r3 = o2.get(t3) || /* @__PURE__ */ new Set();
            r3.add(e3.conversationSeq), o2.set(t3, r3);
          }), []), c2 = [], l2 = [], d2 = [], p2 = /* @__PURE__ */ new Map(), h2 = [];
          o2.forEach(function(t3, i3) {
            var o3 = i3.substring(1), s2 = +i3[0], f2 = r2.createConversationInstance(o3, s2);
            t3 = f2.fetchMsgListFromCache(Array.from(t3)).then(function(t4) {
              e2.forEach(function(e3) {
                if (e3.conversationID == o3 && e3.conversationType === s2) {
                  var h3 = t4.get(e3.conversationSeq);
                  if (h3) {
                    e3.messageID || (e3.messageID = h3.messageID, d2.push(e3));
                    var g2 = [], m2 = r2.engineConfig.dbConvMap.get(r2.getConversationKey(o3, s2)), _2 = null == m2 ? void 0 : m2.lastMessage, b2 = e3.receiptStatus;
                    if (e3.revokeInfo || !b2 || n2 && b2 == h3.receiptStatus || (-1 == r2.selfReceiptSeqs.indexOf(e3.receiptSeq) && (e3.convReceipt ? u2.push(e3) : 0 != e3.readMemberCount && c2.push(e3)), !h3.receiptStatus || e3.convReceipt && h3.direction != a.ab.Receive || (h3.receiptStatus = b2, g2.push(h3), _2 && _2.messageID == h3.messageID && _2.receiptStatus != b2 && (_2.receiptStatus = b2, p2.set(i3, m2)))), n2 && h3.type !== a.hb.Revoke && e3.revokeInfo) {
                      if (b2 = r2.createRevokeMessage(h3, JSON.parse(e3.revokeInfo)), g2.push(b2), l2.push(b2), !m2)
                        return;
                      h3.direction == a.ab.Receive && 0 < m2.unreadMessageCount && h3.conversationSeq > m2.readMsgSeq && (++m2.deletedMsgCount, --m2.unreadMessageCount, p2.set(i3, m2)), _2 && _2.messageID == h3.messageID && _2.type != a.hb.Revoke && (m2.lastMessage = b2, p2.set(i3, m2));
                    }
                    f2.updateMsgCacheList(g2), r2.dbMgr.addMessageList(o3, s2, g2);
                  }
                }
              });
            });
            h2.push(t3);
          }), Promise.all(h2).then(function() {
            var e3, o3, h3;
            r2.dbMgr.addMessageExtraList(d2, "fetchMessageID"), u2.length && (e3 = r2.mapMessageExtra2ReceiptInfo(u2, i2)).length && r2.eventBus.emit(a.u.ConvMsgReceipt, { infos: e3 }), !c2.length || n2 && true !== t2 || (e3 = r2.mapMessageExtra2ReceiptInfo(c2, i2)).length && r2.eventBus.emit(a.u.MsgReceipt, { infos: e3 }), l2.length && r2.eventBus.emit(a.u.MsgRevoke, { messageList: l2 }), p2.size && (e3 = "emitReceiptOrRevoke:" + t2, h3 = (o3 = Array.from(p2.values())).map(function(e4) {
              return { event: a.o.Updated, conversation: Object(s.s)(a.m.convKeys, e4) };
            }), r2.eventBus.emit(a.u.ConvChanged, { infoList: h3 }, e3), r2.onUnreadMessageCount(e3), r2.dbMgr.addConversationList(o3, e3));
          });
        }, b.prototype.mapMessageExtra2ReceiptInfo = function(e2, t2) {
          var r2 = this, n2 = [];
          return e2.forEach(function(e3) {
            var i2;
            e3.messageID && (i2 = e3.messageID + e3.receiptSeq, t2 && r2.msgReceiptChangedMap.set(i2, true), !t2 && r2.msgReceiptChangedMap.get(i2) || (i2 = Math.max(e3.readMemberCount, 0), n2.push({ conversationID: e3.conversationID, conversationType: e3.conversationType, messageID: e3.messageID, status: e3.receiptStatus, readMemberCount: i2, unreadMemberCount: e3.unreadMemberCount, isSelfOperated: !(!e3.convReceipt || 0 != i2) })));
          }), n2;
        }, b.prototype.handleQueryConvsCallback = function(e2, t2) {
          var r2, n2 = t2.isPinned, i2 = t2.config, o2 = t2.log, u2 = (t2 = t2.resolve, (e2 = n2 ? e2.filter(function(e3) {
            return e3.isPinned;
          }) : e2).length), c2 = i2.count, l2 = 0;
          (i2 = i2.nextConversation) && i2.conversationID && (r2 = this.getConversationKey(i2.conversationID, i2.type), l2 = e2.findIndex(function(e3) {
            return e3.id == r2;
          }) + 1), i2 = l2 + c2, e2 = e2.slice(l2, i2), Object.assign(o2, { start: l2, end: i2, total: u2, count: e2.length }), c2 = n2 ? a.X.QueryPinnedList : a.X.QueryConvList;
          this.logger.info(m, c2, o2), t2({ conversationList: e2.map(function(e3) {
            return Object(s.s)(a.m.convKeys, e3);
          }) });
        }, b.prototype.mergeServerConvList = function(e2, t2) {
          var r2 = this, i2 = n.a.fromString(this.engineConfig.user.convSeq || "0"), o2 = this.engineConfig.mailHBConfig.conv_list_seq, u2 = this.engineConfig.mailHBConfig.fetch_conv_list;
          if (!u2 || !o2 || o2.lessThanOrEqual(i2)) {
            if (!t2)
              return;
            var c2 = Array.from(this.engineConfig.dbConvMap.values()).filter(function(e3) {
              var t3 = r2.filterValidConv(e3);
              return t3 && r2.createConversationInstance(e3.conversationID, e3.type), t3;
            });
            return c2.sort(s.e), t2(c2, /* @__PURE__ */ new Map());
          }
          var l2 = { time: /* @__PURE__ */ new Date(), dbSeq: i2, hbSeq: o2, how: e2, fetch: u2, logined: this.isLogined }, d2 = 1, p2 = ++this.mergeListSeqs.conv, h2 = /* @__PURE__ */ new Map(), f2 = function(n2) {
            var i3;
            n2.list.forEach(function(e3) {
              e3.type != a.r.Room && h2.set(e3.id, e3);
            }), n2.nextFlag && r2.engineConfig.token ? r2.fetchServerPageConv(n2.nextFlag, ++d2, e2, n2.full_list ? 1 : 0).then(f2) : (n2.degree = d2, n2.svrCount = h2.size, r2.engineConfig.user.preVersion = r2.settings.deviceInfo.sdk_ver, r2.updateConvSeq(n2.cur, true), t2 ? (l2.dataReport = r2.dataReport.endNetworkRequest(a.d.conv_list.cmd, p2, n2), r2.saveConversationList(h2, n2.full_list, l2, t2)) : e2 == a.v.SDKHb && (i3 = [], h2.forEach(function(e3, t3) {
              var n3;
              (t3 = r2.engineConfig.dbConvMap.get(t3)) && (e3 = e3.mentionedInfoList).length && ((null == (n3 = t3.mentionedInfoList) ? void 0 : n3.length) || 0) != (t3.mentionedInfoList = e3).length && i3.push({ event: a.o.Updated, conversation: Object(s.s)(a.m.convKeys, t3) });
            }), i3.length && r2.eventBus.emit(a.u.ConvChanged, { infoList: i3 }, "")));
          };
          this.mergeServerC2CMuteList(e2), this.fetchServerPageConv(i2, d2, e2, 0).then(f2);
        }, b.prototype.mergeServerPinnedList = function(e2, t2) {
          var r2 = this, n2 = +this.engineConfig.user.convPinnedSeq || 0, i2 = this.engineConfig.mailHBConfig.conv_pinned_list_seq;
          if (i2 <= n2)
            return t2();
          var o2 = { time: /* @__PURE__ */ new Date(), dbSeq: n2, hbSeq: i2, how: e2, logined: this.isLogined }, s2 = 1, u2 = ++this.mergeListSeqs.pinned, c2 = [], l2 = function(e3) {
            var n3;
            e3.list.forEach(function(e4) {
              c2.push(r2.getConversationKey(e4.conv_id, e4.conv_type));
            }), e3.nextFlag && r2.engineConfig.token ? r2.fetchServerPageConvPinned(e3.nextFlag, ++s2, e3.full_list ? 1 : 0).then(l2) : (e3.degree = s2, e3.svrCount = c2.length, r2.updateConvPinnedListSeq(+(null == (n3 = e3.cur) ? void 0 : n3.toString()), true), n3 = a.d.conv_pinned_list.cmd, o2.dataReport = r2.dataReport.endNetworkRequest(n3, u2, e3), r2.logger.info(m, "mergeSvrConvPinned", o2), t2(c2));
          };
          this.fetchServerPageConvPinned(n2, s2, 0).then(l2);
        }, b.prototype.mergeMessageReactionList = function(e2) {
          var t2 = this, r2 = ++this.mergeListSeqs.msgReaction, n2 = [], i2 = 1, o2 = { time: /* @__PURE__ */ new Date(), dataReport: null }, s2 = function(u2) {
            return p(t2, void 0, void 0, function() {
              var t3, c2, l2, d2;
              return h(this, function(p2) {
                return u2.code || (t3 = u2.msg_next_reaction_seq, c2 = u2.msg_max_reaction_seq, d2 = u2.fetch_end, l2 = u2.reaction_list, d2 ? (l2.forEach(function(e3) {
                  n2.push({ reactionSeq: e3.max_reaction_seq, reactionKey: e3.reaction_key, totalCount: e3.total_user_count, userList: e3.user_reaction, isSelfIncluded: e3.include_self });
                }), this.saveMessageReactionExtra(e2, n2, c2), u2.degree = i2, u2.svrCount = n2.length, d2 = e2.conversationType == a.r.Peer ? a.d.c2c_reaction_list : a.d.group_reaction_list, o2.dataReport = this.dataReport.endNetworkRequest(d2.cmd, r2, u2), this.logger.info(m, "mergeSvrMsgReactions", o2)) : this.fetchServerPageMsgReaction(e2, t3, ++i2).then(s2)), [2];
              });
            });
          };
          this.fetchServerPageMsgReaction(e2, e2.reactionSeq, i2).then(s2);
        }, b.prototype.mergeServerC2CMuteList = function(e2) {
          var t2 = this.engineConfig.user.muteSeq || 0, r2 = this.engineConfig.mailHBConfig.c2c_mute_max_seq || 0;
          t2 < r2 && (this.logger.info(m, "mergeServerC2CMuteList", { time: /* @__PURE__ */ new Date(), how: e2, dbSeq: t2, hbSeq: r2 }), this.fetchC2CMuteList());
        }, b.prototype.mergeServerMsgExtraList = function(e2, t2) {
          var r2 = this, i2 = n.a.fromString(this.engineConfig.user.msgExtraSeq || "0"), o2 = this.engineConfig.mailHBConfig.extra_msg_list_seq;
          if (!o2 || o2.lessThanOrEqual(i2))
            return t2 && t2();
          var s2 = { time: /* @__PURE__ */ new Date(), dbSeq: i2, hbSeq: o2, how: e2 }, u2 = 1, c2 = i2, l2 = 0, d2 = ++this.mergeListSeqs.msgExtra, p2 = /* @__PURE__ */ new Map(), h2 = /* @__PURE__ */ new Map(), _2 = /* @__PURE__ */ new Map(), b2 = function(n2) {
            n2.list || (n2.list = []), c2 = n2.next_list_seq || c2;
            var i3, o3 = n2.fetch_end || n2.code && 6000104 != n2.code ? 0 : c2;
            l2 += n2.list.length, n2.list.forEach(function(e3) {
              var t3, n3;
              1 == e3.type ? (t3 = r2.createMessageReceiptItemExtra(h2, e3), p2.set(t3.id, t3)) : 2 != e3.type && 3 != e3.type || (t3 = e3.conv_type + e3.conv_id, n3 = _2.get(t3) || [0], _2.set(t3, n3), 2 == e3.type ? n3.push.apply(n3, g([], f(e3.del_conv_msg_seqs), false)) : n3[0] = Math.max(n3[0], e3.del_conv_msg_seqs[0]));
            }), o3 && r2.engineConfig.token ? r2.fetchServerPageMsgExtra(o3, ++u2, e2).then(b2) : (n2.degree = u2, n2.svrCount = l2, o3 = Array.from(p2.values()), i3 = "mergeMsgExtra" + e2, r2.updateMsgExtraSeq(c2, true), r2.dbMgr.addMessageExtraList(o3, i3), r2.dbMgr.addConversationList(Array.from(h2.values()), i3), r2.emitMessageReceiptOrRevoke(o3, e2), r2.emitMessageDelete(_2), s2.dataReport = r2.dataReport.endNetworkRequest(a.d.extra_msglist.cmd, d2, n2), r2.logger.info(m, "mergeSvrMsgExtras", s2), t2 && t2());
          };
          this.fetchServerPageMsgExtra(i2, u2, e2).then(b2);
        }, b.prototype.mergeServerMsgStateList = function(e2, t2, r2, i2, o2) {
          var u2 = this, c2 = (void 0 === t2 && (t2 = 0), void 0 === r2 && (r2 = 0), void 0 === i2 && (i2 = 0), o2 ? o2.conversationID : "");
          t2 = c2 ? n.a.fromNumber(t2) : n.a.fromString(this.engineConfig.user.c2cMsgStateSeq || "0");
          if (!c2) {
            var l2 = this.engineConfig.mailHBConfig.c2c_statemsg_seq;
            if (!l2 || l2.lessThanOrEqual(t2))
              return;
            r2 = 1, i2 = this.engineConfig.mailHBConfig.c2c_msg_seq;
          }
          var d2 = { time: /* @__PURE__ */ new Date(), dbSeq: t2, how: e2, minMsgSeq: r2, maxMsgSeq: i2 }, p2 = 1, h2 = t2, f2 = 0, g2 = ++this.mergeListSeqs.msgState, _2 = /* @__PURE__ */ new Map(), b2 = function(t3) {
            t3.statemsg_list || (t3.statemsg_list = []), h2 = t3.next_statemsg_seq || h2;
            var n2 = t3.fetch_end || t3.code && 6000104 != t3.code ? 0 : h2;
            f2 += t3.statemsg_list.length;
            for (var l3, v = 0; v < t3.statemsg_list.length; v++) {
              var y, M, k, C, I, S = t3.statemsg_list[v], D = S.conv_id, q = S.conv_type, w = S.conv_msg_seq, A = u2.createConversationInstance(D, q), R = A.dbConv.deletedMsgMaxSeq || 0;
              -1 != (A.dbConv.deletedMsgSeqs || []).indexOf(w) || w <= R || (y = (R = Object(s.v)(S.msg_status)).revoke, R = (M = !!S.revoke_time) ? a.cb.None : R.receipt, k = S.reaction_seq, C = u2.getMsgExtraKey(D, q, w), (I = u2.engineConfig.msgExtraMap.get(C)) || !k && !M && R != a.cb.Expired && R != a.cb.Failed || ((I = u2.createMessageExtra(D, q, w)).receiptStatus = R, I.reactionSeq = 0, I.reactions = {}), I && (+I.reactionSeq < k && u2.handleMsgStateReactionBriefs(I, S.reaction_briefs), M ? (I.receiptStatus = a.cb.None, D = S.msg_type, I.revokeInfo = JSON.stringify({ revokeType: S.revoke_type, revokeStatus: y, revokeTimestamp: S.revoke_time, operatedUserID: S.user_id || "", revokeExtendedData: Object(s.h)(S.payload), originalMessageType: 200 <= D && D <= 400 ? a.hb.Custom : D, originalTextMessageContent: "" }), u2.revokeMentionedInfoList(A.dbConv, w)) : R && (I.receiptStatus = -1 == I.readMemberCount ? a.cb.Done : R), _2.set(C, I)));
            }
            n2 && u2.engineConfig.token ? u2.fetchServerPageMsgState(n2, ++p2, e2, c2, r2, i2).then(b2) : (t3.degree = p2, t3.svrCount = f2, n2 = "mergeMsgState" + e2, o2 ? (o2.minStatemsgSeq = +h2.toString(), o2.maxStatemsgSeq = o2.minStatemsgSeq, u2.dbMgr.addConversationList([o2], n2)) : u2.updateC2CMsgStateSeq(h2, true), l3 = Array.from(_2.values()), u2.emitMessageReceiptOrRevoke(l3, e2 != a.v.Other), u2.dbMgr.addMessageExtraList(l3, n2), l3 = (c2 ? a.d.group_msg_state_list : a.d.c2c_msg_state_list).cmd, d2.count = _2.size, d2.dataReport = u2.dataReport.endNetworkRequest(l3, g2, t3), u2.logger.info(m, "mergeSvrMsgStates", d2));
          };
          this.fetchServerPageMsgState(t2, p2, e2, c2, r2, i2).then(b2);
        }, b.prototype.mergeServerDelAllConvMsgs = function() {
          var e2 = this.engineConfig.user.deleteAllMsgTime || 0, t2 = this.engineConfig.mailHBConfig.delete_all_msg_time || 0;
          e2 < t2 && (this.updateDeleteAllMsgTime(t2), this.dbMgr.clearMessage(t2));
        }, b.prototype.fetchC2CMuteList = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), dataReport: null }, r2 = "fetchC2CMuteList";
          this.connMgr.sendRequest(a.d.conv_mute_list, null).then(function(n2) {
            var i2;
            if (n2.code)
              return i2 = Object(s.x)(a.t.CommonModuleIMServerError, n2.message, n2.code), t2.error = i2, e2.logger.info(m, "fetchC2CMuteList", t2), Promise.reject(i2);
            n2.user_ids.forEach(function(t3) {
              var i3 = e2.getConversationKey(t3, a.r.Peer);
              (i3 = e2.engineConfig.dbConvMap.get(i3)) ? (e2.serverMuteUserList = e2.serverMuteUserList.filter(function(e3) {
                return n2.user_ids.includes(e3);
              }), i3.state != a.q.Delete && i3.maxOrderKey && i3.notificationStatus != a.p.DoNotDisturb && (i3.notificationStatus = a.p.DoNotDisturb, e2.emitConversationUpdated(i3, r2), e2.onUnreadMessageCount(r2))) : e2.serverMuteUserList.includes(t3) || e2.serverMuteUserList.push(t3);
            }), e2.updateMuteListSeq(n2.max_mute_seq || 0, true);
          });
        }, b.prototype.fetchServerPageConv = function(e2, t2, r2, n2) {
          var i2 = this, o2 = a.d.conv_list;
          e2 = { cur_list_seq: e2, count: 100, full_pull: n2, degree: t2, how: r2 };
          return 1 == t2 && this.dataReport.beginNetworkRequest(o2.cmd, this.mergeListSeqs.conv, a.j.SDK, e2), this.connMgr.sendRequest(o2, e2, a.j.SDK).then(function(e3) {
            if (e3.code)
              return { list: [] };
            var t3 = e3.conv_list_seq, r3 = e3.max_list_seq, n3 = e3.full_list, o3 = e3.fetch_end, s2 = o3 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, a2 = { _action_: false };
            e3 = e3.conv_list.map(function(e4) {
              var t4 = i2.transform2DBConv(e4), r4 = e4.is_del, n4 = e4.last_msg_del, o4 = e4.last_msg;
              return !r4 && !n4 && t4.orderKey || (a2[e4.conv_id] = { orderKey: t4.orderKey, is_del: r4, last_msg_del: n4, last_msg: o4 }, a2._action_ = true), t4;
            });
            return a2._action_ && i2.logger.info(m, "fetchSvrConv", a2), { nextFlag: s2, cur: t3, max: r3, list: e3, full_list: r3 ? n3 : 0, fetch_end: o3 };
          });
        }, b.prototype.fetchServerPageConvPinned = function(e2, t2, r2) {
          var n2 = a.d.conv_pinned_list;
          e2 = { cur_list_seq: e2, count: 100, full_pull: r2, degree: t2 };
          return 1 == t2 && this.dataReport.beginNetworkRequest(n2.cmd, this.mergeListSeqs.pinned, a.j.SDK, e2), this.connMgr.sendRequest(n2, e2, a.j.SDK).then(function(e3) {
            if (e3.code)
              return { list: [] };
            var t3 = e3.conv_list_seq, r3 = e3.max_list_seq, n3 = e3.full_list, i2 = e3.fetch_end;
            return { nextFlag: i2 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, list: e3.conv_list, full_list: n3, fetch_end: i2 };
          });
        }, b.prototype.fetchServerPageMsgExtra = function(e2, t2, r2) {
          var n2 = a.d.extra_msglist;
          e2 = { cur_list_seq: e2, count: 100, full_pull: t2, how: r2 };
          return 1 == t2 && this.dataReport.beginNetworkRequest(n2.cmd, this.mergeListSeqs.msgExtra, a.j.SDK, e2), this.connMgr.sendRequest(n2, e2, a.j.SDK);
        }, b.prototype.fetchServerPageMsgState = function(e2, t2, r2, n2, i2, o2) {
          return e2 = { statemsg_seq: e2, count: 100, degree: t2, how: r2, min_msg_seq: i2, max_msg_seq: o2 }, n2 && (e2.conv_id = n2), r2 = n2 ? a.d.group_msg_state_list : a.d.c2c_msg_state_list, 1 == t2 && this.dataReport.beginNetworkRequest(r2.cmd, this.mergeListSeqs.msgState, a.j.SDK, e2), this.connMgr.sendRequest(r2, e2, a.j.SDK);
        }, b.prototype.fetchServerPageMsgReaction = function(e2, t2, r2) {
          var n2 = e2.conversationType == a.r.Peer ? a.d.c2c_reaction_list : a.d.group_reaction_list;
          e2 = { conv_id: e2.conversationID, conv_msg_seq: e2.conversationSeq, start_reaction_seq: t2, degree: r2 };
          return 1 == r2 && this.dataReport.beginNetworkRequest(n2.cmd, this.mergeListSeqs.msgReaction, a.j.SDK, e2), this.connMgr.sendRequest(n2, e2);
        }, b.prototype.fetchReactionKey = function(e2, t2, r2) {
          var n2 = e2.conversationType == a.r.Peer ? a.d.c2c_get_reaction : a.d.group_get_reaction;
          e2 = { conv_id: e2.conversationID, conv_msg_seq: e2.conversationSeq, reaction_key: t2, max_reaction_seq: 0, is_detail: r2 };
          return this.connMgr.sendRequest(n2, e2, r2 ? a.j.API : a.j.SDK);
        }, b.prototype.createMessageReceiptItemExtra = function(e2, t2) {
          var r2 = t2.conv_id, i2 = t2.conv_type, o2 = t2.conv_msg_seq, s2 = t2.receipt_seq.toString(), u2 = t2.read_count, c2 = t2.unread_count, l2 = -1 == u2, d2 = (t2 = t2.is_conv_read, this.createMessageExtra(r2, i2, o2));
          return d2.receiptSeq && n.a.fromString(d2.receiptSeq).greaterThan(s2) || (d2.conversationSeq = o2, d2.receiptSeq = s2, d2.readMemberCount = u2, d2.unreadMemberCount = c2, d2.convReceipt = t2 ? 1 : 0, (t2 || l2 || 0 < u2 && 0 == c2) && (d2.receiptStatus = a.cb.Done), t2 && (d2.messageID = "", o2 = e2.get(r2) || this.createConversationInstance(r2, i2).dbConv, s2 = d2.conversationSeq, u2 = o2.maxSendReceiptMsgSeq || 0, c2 = o2.maxRecvReceiptMsgSeq || 0, l2 && c2 < s2 ? o2.maxRecvReceiptMsgSeq = s2 : !l2 && u2 < s2 && (o2.maxSendReceiptMsgSeq = s2), e2.set(r2, o2))), d2;
        }, b.prototype.createRevokeMessage = function(e2, t2) {
          return d({ type: a.hb.Revoke, message: "", extendedData: e2.extendedData, localExtendedData: e2.localExtendedData, isMentionAll: e2.isMentionAll, mentionedUserIDs: e2.mentionedUserIDs ? g([], f(e2.mentionedUserIDs), false) : [], localMessageID: e2.localMessageID, messageID: e2.messageID, senderUserID: e2.senderUserID, timestamp: e2.timestamp, conversationID: e2.conversationID, conversationType: e2.conversationType, direction: e2.direction, sentStatus: e2.sentStatus, orderKey: e2.orderKey, conversationSeq: e2.conversationSeq, receiptStatus: a.cb.None }, t2);
        }, b.prototype.saveMessageRevokeExtra = function(e2, t2, r2) {
          var n2 = [e2], i2 = this.createConversationInstance(e2.conversationID, e2.conversationType), o2 = (n2 = (i2.updateMsgCacheList(n2), this.dbMgr.addMessageList(e2.conversationID, e2.conversationType, n2), i2.dbConv.lastMessage), false);
          e2.direction == a.ab.Receive && 0 < i2.dbConv.unreadMessageCount && e2.conversationSeq > i2.dbConv.readMsgSeq && (o2 = true, ++i2.dbConv.deletedMsgCount, --i2.dbConv.unreadMessageCount, this.onUnreadMessageCount(r2)), (null == n2 ? void 0 : n2.messageID) == e2.messageID && (o2 = true, i2.dbConv.lastMessage = e2), (o2 = !!this.revokeMentionedInfoList(i2.dbConv, e2.conversationSeq) || o2) && this.emitConversationUpdated(i2.dbConv, r2), n2 = false;
          e2.conversationType == a.r.Peer ? (t2.sub(1).toString(), this.engineConfig.user.c2cMsgStateSeq, this.updateC2CMsgStateSeq(t2), n2 = true) : e2.conversationType == a.r.Group && (o2 = +i2.dbConv.maxStatemsgSeq || 0, t2.greaterThan(o2) && (i2.dbConv.maxStatemsgSeq = +t2.toString()), o2 = +i2.dbConv.minStatemsgSeq || 0, t2.toNumber() == o2 + 1 && (i2.dbConv.minStatemsgSeq = +t2.toString(), n2 = true)), n2 && (o2 = this.getMsgExtraKey(e2.conversationID, e2.conversationType, e2.conversationSeq), (i2 = this.engineConfig.msgExtraMap.get(o2)) || (i2 = { id: o2, ownerID: this.engineConfig.user.userID, conversationID: e2.conversationID, conversationType: e2.conversationType, conversationSeq: e2.conversationSeq }, this.engineConfig.msgExtraMap.set(o2, i2)), i2.messageID = e2.messageID, i2.revokeInfo = JSON.stringify({ revokeType: e2.revokeType, revokeStatus: e2.revokeStatus, revokeTimestamp: e2.revokeTimestamp, operatedUserID: e2.operatedUserID, revokeExtendedData: e2.revokeExtendedData, originalMessageType: e2.originalMessageType, originalTextMessageContent: e2.originalTextMessageContent }), this.dbMgr.addMessageExtraList([i2], r2));
        }, b.prototype.createMessageExtra = function(e2, t2, r2, n2) {
          void 0 === n2 && (n2 = "");
          var i2 = this.getMsgExtraKey(e2, t2, r2), o2 = this.engineConfig.msgExtraMap.get(i2);
          return o2 || (o2 = { id: i2, ownerID: this.engineConfig.user.userID, conversationID: e2, conversationType: t2, conversationSeq: r2, messageID: n2, convReceipt: 0, receiptStatus: a.cb.Processing, receiptSeq: "0", receiptMemberListSeq: 0, readMemberCount: 0, unreadMemberCount: 0, memberSeqs: {}, reactionSeq: 0, reactions: {} }, this.engineConfig.msgExtraMap.set(i2, o2)), o2.reactions || (o2.reactions = {}), n2 && !o2.messageID && (o2.messageID = n2), o2;
        }, b.prototype.saveMessageReactionExtra = function(e2, t2, r2, n2, i2) {
          var o2 = "saveReactionExtra", u2 = [], c2 = this.engineConfig.mailHBConfig.reaction_brief_len;
          if (this.logger.info(m, o2, { reactionInfoList: t2, maxReactionSeq: r2, noEmit: n2, isDetail: i2 }), r2 && r2 <= e2.reactionSeq && !i2)
            return [];
          if (r2 && (e2.reactionSeq = r2), t2.forEach(function(t3) {
            var r3 = i2 ? t3.reactionSeq : (null == (r3 = e2.reactions[t3.reactionKey]) ? void 0 : r3.detailSeq) || 0, n3 = (null == (n3 = e2.reactions[t3.reactionKey]) ? void 0 : n3.userList) || [], o3 = (null == (o3 = e2.reactions[t3.reactionKey]) ? void 0 : o3.detailUserList) || [], a2 = 0 == t3.userList.length && t3.totalCount > c2 || i2 ? n3 : t3.userList;
            o3 = i2 ? t3.userList : o3;
            if (i2 && (a2 = o3.slice(0, c2)), !(e2.reactions[t3.reactionKey] && t3.reactionSeq < e2.reactions[t3.reactionKey].seq)) {
              if (n3 = !Object(s.a)(a2, n3) || t3.totalCount !== (null == (n3 = e2.reactions[t3.reactionKey]) ? void 0 : n3.totalCount), +t3.reactionSeq > +(e2.reactionSeq || 0) && (e2.reactionSeq = t3.reactionSeq), 0 == t3.totalCount)
                delete e2.reactions[t3.reactionKey];
              else {
                if (t3.totalCount > c2 && a2.length < c2)
                  return;
                e2.reactions[t3.reactionKey] = { seq: t3.reactionSeq, detailSeq: r3, value: "", totalCount: t3.totalCount, userList: a2, detailUserList: o3, isSelfIncluded: t3.isSelfIncluded };
              }
              n3 && u2.push({ conversationID: e2.conversationID, conversationType: e2.conversationType, messageID: e2.messageID, reactionType: t3.reactionKey, totalCount: t3.totalCount, isSelfIncluded: t3.isSelfIncluded, userList: a2.map(function(e3) {
                return { userID: e3.userID };
              }) });
            }
          }), this.dbMgr.addMessageExtraList([e2], o2), !n2 && 0 < u2.length && this.eventBus.emit(a.u.MsgReactions, { reactions: u2 }), (t2 = (r2 = this.createConversationInstance(e2.conversationID, e2.conversationType)).dbConv.lastMessage) && t2.messageID == e2.messageID) {
            var l2, d2 = [];
            for (l2 in e2.reactions) {
              var p2 = e2.reactions[l2];
              d2.push({ conversationID: e2.conversationID, conversationType: e2.conversationType, messageID: e2.messageID, userList: p2.userList, totalCount: p2.totalCount, reactionType: l2, isSelfIncluded: p2.isSelfIncluded });
            }
            Object(s.a)(t2.reactions, d2) || (t2.reactions = d2, this.emitConversationUpdated(r2.dbConv, o2));
          }
          return u2;
        }, b.prototype.updateConvSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.convSeq && r2.convSeq != e2.sub(1).toString() || (r2.convSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, b.prototype.updateMsgExtraSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.msgExtraSeq && r2.msgExtraSeq != e2.sub(1).toString() || (r2.msgExtraSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, b.prototype.updateC2CMsgStateSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.c2cMsgStateSeq && r2.c2cMsgStateSeq != e2.sub(1).toString() || (r2.c2cMsgStateSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, b.prototype.updateConvPinnedListSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.convPinnedSeq && r2.convPinnedSeq != e2 - 1 || (r2.convPinnedSeq = e2, this.dbMgr.setUser(r2));
        }, b.prototype.updateDeleteAllMsgTime = function(e2, t2) {
          var r2 = this.engineConfig.user;
          e2 && (t2 || !+r2.deleteAllMsgTime || e2 > r2.deleteAllMsgTime) && (r2.deleteAllMsgTime = e2, this.dbMgr.setUser(r2));
        }, b.prototype.updateMuteListSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.muteSeq && r2.muteSeq != e2 - 1 || (r2.muteSeq = e2, this.dbMgr.setUser(r2));
        }, b.prototype.updateConvNameAndAvatar = function(e2, t2, r2, n2) {
          var i2 = ((i2 = t2.type == a.r.Peer ? this.engineConfig.dbUserMap.get(t2.conversationID) : void 0) && void 0 === r2 && (r2 = i2.userName), i2 && void 0 === n2 && (n2 = i2.userAvatarUrl), false);
          "string" == typeof r2 && r2 != t2.conversationName && (i2 = true, t2.conversationName = r2), "string" == typeof n2 && n2 != t2.conversationAvatarUrl && (i2 = true, t2.conversationAvatarUrl = n2), i2 && t2 && t2.type != a.r.Room && this.dbMgr.addConversationList([t2], e2);
        }, b.prototype.setAssociatedGroup = function(e2, t2, r2) {
          r2 === a.r.Group ? this.groupMgr.initGroupByConversation(t2) : r2 === a.r.Room && ((r2 = this.groupMgr.findRoom(t2)) ? e2.setAssociatedGroup(r2.sessionID, r2.userSessionID, r2.subRoomID, r2.enabledOfflineMsg) : e2.setAssociatedGroup());
        }, b.prototype.saveConversationList = function(e2, t2, r2, i2) {
          var o2 = this, u2 = [], c2 = /* @__PURE__ */ new Map(), l2 = /* @__PURE__ */ new Map(), d2 = /* @__PURE__ */ new Map(), p2 = [], h2 = (t2 && 0 < this.engineConfig.dbConvMap.size && this.engineConfig.dbConvMap.forEach(function(e3, t3) {
            return o2.filterValidConv(e3) && d2.set(t3, e3);
          }), e2.forEach(function(e3, t3) {
            d2.delete(t3);
            var r3, i3, s2, h3 = null, f2 = e3.state == a.q.Delete, g2 = e3.msgSeq, m2 = o2.engineConfig.dbConvMap.get(t3), _2 = !m2 || !m2.maxOrderKey;
            m2 ? (r3 = m2.orderKey, i3 = m2.msgSeq || 0, s2 = m2.state == a.q.Delete, m2.mentionedInfoList = e3.mentionedInfoList, f2 && e3.seq && n.a.fromString(m2.seq || "0").lessThan(e3.seq) && (e3.seq = e3.seq.toString(), p2.push(e3.conversationID), Object.assign(m2, e3), l2.set(t3, m2)), (i3 < g2 || m2.readMsgSeq < e3.readMsgSeq) && (p2.push(e3.conversationID + ":" + m2.readMsgSeq + "," + e3.readMsgSeq), Object.assign(m2, e3), l2.set(t3, m2), h3 = s2 || _2 ? a.o.Added : a.o.Updated), f2 && !s2 && (h3 = a.o.Deleted), m2.maxOrderKey || (m2.maxOrderKey = g2 * a.m.MESSAGE_SEQ_MULTIPLIER), r3 > e3.orderKey && (m2.orderKey = r3), m2.maxStatemsgSeq = e3.maxStatemsgSeq) : (o2.initDBConversationFields(m2 = e3, g2), o2.engineConfig.dbConvMap.set(t3, m2), l2.set(t3, m2), !f2 && 0 < g2 && (h3 = a.o.Added)), f2 || (e3.type != a.r.Peer || !_2 && o2.engineConfig.dbUserMap.has(e3.conversationID) || u2.push(e3.conversationID), 0 < g2 && _2 && (h3 = a.o.Added)), null != (h3 = e3.state == a.q.Disable && (null == (i3 = e3.lastMessage) ? void 0 : i3.type) == a.hb.Tips ? a.o.Disabled : h3) && c2.set(t3, h3);
          }), r2.updateConvs = p2.join(), d2.forEach(function(e3, t3) {
            e3.state = a.q.Delete, o2.syncConvReadSeqToMsgSeq(e3, e3.msgSeq), o2.convMap.delete(t3), o2.muteGroupConvMap.delete(e3.conversationID), c2.set(t3, a.o.Deleted);
          }), "mergeSvrConvs" + c2.size);
          d2.size && this.dbMgr.addConversationList(Array.from(d2.values()), h2), this.fetchSvrUsers(u2, h2).then(function() {
            o2.dbMgr.addConversationList(Array.from(l2.values()), h2);
            var e3 = Array.from(o2.engineConfig.dbConvMap.values()).filter(function(e4) {
              var t3 = o2.filterValidConv(e4);
              return t3 && o2.createConversationInstance(e4.conversationID, e4.type), t3;
            });
            e3.sort(s.e), r2.count = e3.length, o2.logger.info(m, h2, r2), i2(e3, c2);
          });
        }, b.prototype.mergeMessageExtra = function(e2, t2, r2) {
          var n2 = this, i2 = e2.type == a.r.Peer, o2 = e2.maxSendReceiptMsgSeq || 0, s2 = e2.maxRecvReceiptMsgSeq || 0, u2 = [];
          i2 && r2 && (r2.sendSeq = o2, r2.recvSeq = s2), t2.forEach(function(t3) {
            if (!t3.isUserInserted && t3.sentStatus == a.fb.Success) {
              var c2 = null, l2 = t3.conversationSeq, p2 = (f2 = n2.engineConfig.msgExtraMap.get(n2.getMsgExtraKey(e2.conversationID, e2.type, l2))) && f2.receiptStatus, h2 = f2 && f2.reactions, f2 = f2 && f2.revokeInfo && JSON.parse(f2.revokeInfo);
              if (t3.receiptStatus == a.cb.Processing && (i2 && (t3.direction == a.ab.Send && l2 <= o2 || t3.direction == a.ab.Receive && l2 <= s2) ? (t3.receiptStatus = a.cb.Done, c2 = t3) : p2 && p2 != t3.receiptStatus && (t3.receiptStatus = p2, c2 = t3, r2 && (r2[l2] = p2))), h2) {
                var g2, m2 = [];
                for (g2 in h2) {
                  var _2 = h2[g2];
                  m2.push({ conversationID: t3.conversationID, conversationType: t3.conversationType, messageID: t3.messageID, userList: _2.userList, totalCount: _2.totalCount, reactionType: g2, isSelfIncluded: _2.isSelfIncluded });
                }
                (t3.reactions = m2).length && (c2 = t3);
              }
              f2 && f2.originalTextMessageContent && t3.type == a.hb.Revoke && (t3.originalTextMessageContent = f2.originalTextMessageContent), c2 && u2.push(d({}, c2));
            }
          }), this.createConversationInstance(e2.conversationID, e2.type).updateMsgCacheList(u2), this.dbMgr.addMessageList(e2.conversationID, e2.type, u2);
        }, b.prototype.mergeGroupMessageStatus = function(e2, t2, r2) {
          if (t2.length) {
            var n2 = +e2.minStatemsgSeq || 0, i2 = +e2.maxStatemsgSeq || 0;
            if (!i2 || n2 < i2) {
              for (var o2 = t2[0].conversationSeq, s2 = o2, a2 = 1; a2 < t2.length; a2++) {
                var u2 = t2[a2].conversationSeq;
                u2 < o2 && (o2 = u2), s2 < u2 && (s2 = u2);
              }
              this.mergeServerMsgStateList(r2, n2, o2, s2, e2);
            }
          }
        }, b.prototype.insertDBMessageExtra = function(e2) {
          var t2, r2;
          e2.receiptInfo && (t2 = e2.message, (r2 = this.createMessageExtra(t2.conversationID, t2.conversationType, t2.conversationSeq)).messageID = t2.messageID, r2.receiptStatus = t2.receiptStatus, r2.receiptSeq = e2.receiptInfo.seq.toString(), r2.unreadMemberCount = e2.receiptInfo.count, this.dbMgr.addMessageExtraList([r2], "sendMsgReceiptRsp"), this.updateMsgExtraSeq(e2.receiptInfo.seq)), delete e2.receiptInfo;
        }, b.prototype.isDBConvInvalid = function(e2) {
          return !e2 || e2.state == a.q.Delete || !e2.maxOrderKey;
        }, b.prototype.filterValidConv = function(e2, t2) {
          var r2 = e2.state != a.q.Delete && !!e2.maxOrderKey && e2.type != a.r.Room && "number" == typeof e2.type;
          return t2 ? r2 && !!e2.isPinned : r2;
        }, b.prototype.transform2DBConv = function(e2) {
          var t2, r2, n2 = e2.conv_id, i2 = e2.conv_type, o2 = e2.conv_msg_seq, s2 = e2.read_seq, u2 = e2.send_count_after_read, c2 = e2.sub_read_count, l2 = e2.last_msg_time, d2 = this.getConversationKey(n2, i2), p2 = this.engineConfig.dbConvMap.get(d2), h2 = this.engineConfig.user.userID, f2 = null == p2 ? void 0 : p2.lastMessage, g2 = e2.last_msg_del ? void 0 : this.transform2Message(e2.last_msg, n2, i2), m2 = false;
          g2 && g2.type == a.hb.Tips && g2.messageID != (null == f2 ? void 0 : f2.messageID) && (g2.event == a.ob.GroupDismissed || g2.event == a.ob.GroupKickedOut && g2.targetUserList.find(function(e3) {
            return e3.userID == h2;
          }) || g2.event == a.ob.GroupLeft && g2.operatedUser.userID == h2) && (m2 = true, g2.event == a.ob.GroupDismissed && (e2.last_msg.msg_svr_info.conv_msg_seq = ((null == p2 ? void 0 : p2.msgSeq) || 0) + 1), this.createConversationInstance(n2, i2).onPushMessage(e2.last_msg, 0)), g2 && f2 && (this.createConversationInstance(n2, i2).calculateMessageOrderKey(g2, false), (f2.sentStatus !== a.fb.Success && g2.timestamp < f2.timestamp || g2.orderKey < f2.orderKey) && (g2 = f2)), i2 == a.r.Peer && g2 && g2.receiptStatus == a.cb.Processing && p2 && (t2 = g2.conversationSeq, f2 = p2.maxSendReceiptMsgSeq || 0, r2 = p2.maxRecvReceiptMsgSeq || 0, (g2.direction == a.ab.Send && t2 <= f2 || g2.direction == a.ab.Receive && t2 <= r2) && (g2.receiptStatus = a.cb.Done)), p2 && p2.readMsgSeq > s2 && (s2 = p2.readMsgSeq), g2 && (null == g2 ? void 0 : g2.type) == a.hb.Combine && (g2.messageList = []), f2 = { conversationID: n2, type: i2, id: d2, ownerID: this.engineConfig.user.userID, msgSeq: o2, readMsgSeq: s2, sendMsgCount: u2, unreadMessageCount: Math.max(o2 - s2 - u2 - c2, 0), deletedMsgCount: c2, orderKey: this.getConversationOrderKey(l2, e2.last_msg, e2.update_time), lastMessage: g2, isDisabled: false, mutedExpiredTime: 0 };
          return i2 == a.r.Group && e2.statemsg_seq && (t2 = e2.statemsg_seq, this.engineConfig.user.preVersion ? f2.maxStatemsgSeq = t2 : (r2 = this.engineConfig.mailHBConfig.state_seq_reduce_num, f2.maxStatemsgSeq = -1 == r2 ? 0 : t2 - r2)), this.updateGroupConv(f2), e2.is_del ? (f2.state = a.q.Delete, f2.seq = e2.conv_list_seq, f2.mentionedInfoList = []) : (f2.state = p2 ? p2.state : m2 ? a.q.Disable : a.q.Normal, this.filterMentionedInfoList(f2, e2.at_info_list, p2 && p2.deletedMsgSeqs ? p2.deletedMsgSeqs.slice() : [])), f2.state == a.q.Disable && (f2.sendMsgCount = 0, f2.deletedMsgCount = 0, f2.readMsgSeq = f2.msgSeq, f2.unreadMessageCount = 0), f2;
        }, b.prototype.filterMentionedInfoList = function(e2, t2, r2) {
          Array.from(this.engineConfig.msgExtraMap.values()).forEach(function(t3) {
            t3.revokeInfo && t3.conversationID == e2.conversationID && t3.conversationType == e2.type && r2.push(t3.conversationSeq);
          });
          var n2 = e2.readMsgSeq, i2 = [];
          t2.forEach(function(e3) {
            var t3 = e3.conv_msg_seq;
            n2 < t3 && -1 == r2.indexOf(t3) && i2.push({ type: e3.at_type, fromUserID: e3.user_id, messageID: e3.msg_id, seq: t3 });
          }), e2.mentionedInfoList = i2;
        }, b.prototype.revokeMentionedInfoList = function(e2, t2) {
          var r2 = e2.mentionedInfoList;
          return !!(t2 > e2.readMsgSeq && r2 && r2.length && -1 != (e2 = r2.findIndex(function(e3) {
            return e3.seq == t2;
          }))) && (r2.splice(e2, 1), true);
        }, b.prototype.getConversationOrderKey = function(e2, t2, r2) {
          return t2 && t2.msg_svr_info && t2.msg_svr_info.msg_time ? t2.msg_svr_info.msg_time || e2 || r2 : e2 || r2;
        }, b.prototype.transform2Message = function(e2, t2, r2) {
          var n2, i2, o2;
          if (e2 && e2.msg_info && e2.msg_info.msg_type && e2.msg_svr_info)
            return n2 = e2.msg_info, e2 = e2.msg_svr_info, i2 = n2.msg_type, o2 = e2.sender_user_id, (i2 = { type: 200 <= i2 && i2 <= 400 ? a.hb.Custom : i2, messageID: e2.msg_id, localMessageID: "", timestamp: e2.msg_time, extendedData: n2.payload && i2 != a.hb.Revoke ? Object(s.h)(n2.payload) : void 0, conversationSeq: e2.conv_msg_seq, conversationID: t2, conversationType: r2, senderUserID: o2, sentStatus: a.fb.Success, direction: o2 === this.engineConfig.user.userID ? a.ab.Send : a.ab.Receive, isUserInserted: false, isServerMessage: !!e2.is_server, receiptStatus: a.cb.None, isMentionAll: !!n2.at_all, mentionedUserIDs: n2.at, clientSeq: n2.msg_client_info ? n2.msg_client_info.client_msg_seq : 0, clientSid: n2.msg_client_info ? n2.msg_client_info.conv_sid : "" }).localMessageID = i2.clientSid + i2.clientSeq, this.protobuf.decodeMsgBody(this.engineConfig, i2, n2.msg, e2.version), r2 == a.r.Unknown && (i2.isBroadcastMessage = true), i2.isBroadcastMessage || i2.type == a.hb.Tips || (i2.type == a.hb.Custom && (i2.subType = n2.sub_msg_type || 0, i2.searchedContent = n2.searched_content), n2.has_receipt && i2.type != a.hb.Revoke && (i2.receiptStatus = a.cb.Processing, (o2 = this.engineConfig.msgExtraMap.get(this.getMsgExtraKey(t2, r2, i2.conversationSeq))) && (i2.receiptStatus = o2.receiptStatus), this.dbMgr.checkMessageStatus(i2)), i2.reactions = this.handleReactionList(i2, e2.reactions)), i2;
        }, b.prototype.transform2Command = function(e2, t2, r2) {
          var n2 = r2.sender_user_id;
          return (r2 = { type: r2.msg_type, message: r2.msg_type == a.hb.Barrage ? Object(s.h)(r2.msg) : r2.msg, localMessageID: "", messageID: r2.msg_id, timestamp: r2.msg_time, extendedData: r2.payload ? Object(s.h)(r2.payload) : void 0, conversationID: e2, conversationType: t2, senderUserID: n2, sentStatus: a.fb.Success, direction: n2 === this.engineConfig.user.userID ? a.ab.Send : a.ab.Receive }).localMessageID = r2.messageID, r2;
        }, b.prototype.syncConvReadSeqToMsgSeq = function(e2, t2, r2) {
          void 0 === r2 && (r2 = false), e2.sendMsgCount = 0, e2.deletedMsgCount = 0, e2.unreadMessageCount = 0, e2.readMsgSeq = t2 || 0, e2.mentionedInfoList = [];
        }, b.prototype.deleteLocalConv = function(e2, t2) {
          e2.state = a.q.Delete, this.syncConvReadSeqToMsgSeq(e2, e2.msgSeq), this.convMap.delete(e2.id), this.muteGroupConvMap.delete(e2.conversationID);
          var r2 = "deleteConv";
          return this.dbMgr.addConversationList([e2], r2), this.onUnreadMessageCount(r2), this.stgyMgr.modifyConversation(e2.conversationID, e2.type, a.o.Deleted), t2 && this.logger.info(m, a.X.DeleteConv, t2), Promise.resolve({ conversationID: e2.conversationID, conversationType: e2.type });
        }, b.prototype.deleteAllLocalConv = function(e2, t2, r2) {
          var n2 = this, i2 = [], o2 = (this.convMap.forEach(function(e3) {
            e3.convType == a.r.Room || t2 && +e3.dbConv.seq > t2 || ((e3 = e3.dbConv).state = a.q.Delete, n2.syncConvReadSeqToMsgSeq(e3, e3.msgSeq), i2.push(e3), n2.convMap.delete(e3.id), n2.muteGroupConvMap.delete(e3.conversationID));
          }), "deleteAllConv");
          return this.dbMgr.addConversationList(i2, o2), this.onUnreadMessageCount(o2), this.stgyMgr.deleteAllConversation(i2), e2 && this.logger.info(m, a.X.DeleteAllConv, e2), r2 && this.eventBus.emit(a.u.ConvAllDeleted, { count: i2.length }), Promise.resolve();
        }, b.prototype.handleReactionList = function(e2, t2) {
          var r2 = this;
          if (!t2 || e2.type == a.hb.Revoke)
            return [];
          var n2 = t2.is_detail, i2 = (t2 = t2.reaction_list, []), o2 = this.engineConfig.mailHBConfig.reaction_brief_len;
          return t2 && t2.forEach(function(t3) {
            var s2 = t3.user_reaction.slice(0, o2).map(function(e3) {
              return { userID: e3.userID };
            });
            (s2 = { conversationID: e2.conversationID, conversationType: e2.conversationType, messageID: e2.messageID, userList: s2, totalCount: t3.total_user_count, reactionType: t3.reaction_key, isSelfIncluded: false }).isSelfIncluded = n2 ? s2.userList.some(function(e3) {
              return e3.userID == r2.engineConfig.user.userID;
            }) : !!t3.include_self, i2.push(s2);
          }), i2;
        }, b.prototype.handleMsgStateReactionBriefs = function(e2, t2) {
          return p(this, void 0, void 0, function() {
            var r2, n2, i2, o2;
            return h(this, function(s2) {
              switch (s2.label) {
                case 0:
                  return t2 ? e2.messageID ? [3, 2] : [4, this.createConversationInstance(e2.conversationID, e2.conversationType).fetchMsgListFromCache([e2.conversationSeq])] : [2];
                case 1:
                  if (!(r2 = (r2 = s2.sent()).get(e2.conversationSeq)))
                    return [2];
                  e2.messageID = r2.messageID, s2.label = 2;
                case 2:
                  if (n2 = [], null != e2 && e2.reactions)
                    for (o2 in i2 = function(r3) {
                      t2.find(function(e3) {
                        return e3.reaction_key == r3;
                      }) || n2.push({ reactionSeq: e2.reactions[r3].seq + 1, reactionKey: r3, totalCount: 0, userList: [], isSelfIncluded: false });
                    }, e2.reactions)
                      i2(o2);
                  return t2.forEach(function(e3) {
                    n2.push({ reactionSeq: e3.max_reaction_seq, reactionKey: e3.reaction_key, totalCount: e3.total_user_count, userList: e3.user_reaction, isSelfIncluded: !!e3.include_self });
                  }), 0 < n2.length && this.saveMessageReactionExtra(e2, n2), [2];
              }
            });
          });
        }, b.prototype.handleCombineFileRsp = function(e2, t2, r2, n2, i2, o2) {
          var u2, c2 = this, l2 = (t2 = this.protobuf.decodeMsgCombineInfo(t2, n2)).send_user_map, d2 = [];
          for (u2 in t2.child.forEach(function(e3) {
            e3.cb_id = e3.cb_id.replace(e3.cb_id.substring(8), o2.substring(8)), e3.parent_id = "0" == e3.parent_id ? o2 : e3.parent_id.replace(e3.parent_id.substring(8), o2.substring(8));
            var t3 = { type: e3.msg_type, senderUserID: e3.sender_user_id, timestamp: e3.msg_time, extendedData: e3.extended_data, subType: e3.sub_type, searchedContent: e3.searched_content, isServerMessage: !!e3.is_server, rootID: i2, cbID: e3.cb_id, parentID: e3.parent_id };
            t3.type == a.hb.Combine && (t3.combineID = e3.cb_id + "-" + i2 + "-" + r2.conversationID), c2.protobuf.decodeMsgBody(c2.engineConfig, t3, e3.msg, 1), r2.messageList.find(function(e4) {
              return e4.cbID == t3.cbID && e4.parentID == t3.parentID;
            }) || r2.messageList.push(t3);
          }), this.dbMgr.addMessageList(r2.conversationID, r2.conversationType, [r2]), l2) {
            var p2 = Object(s.h)(l2[u2].sender_user_name), h2 = Object(s.h)(l2[u2].sender_user_avatar), f2 = l2[u2].update_time || 0;
            d2.push({ userID: u2, userName: p2, userAvatarUrl: h2, updateTime: f2 });
          }
          this.setDBUser(d2), e2.messageList = r2.messageList.filter(function(e3) {
            return e3.parentID == o2;
          }).map(function(e3) {
            return c2.transformDBMessage(e3);
          });
        }, b.prototype.transformDBMessage = function(e2) {
          return e2 && (e2.type == a.hb.Combine ? (delete (e2 = d(d({}, e2), { messageList: [] })).aesKey, delete e2.fileDownloadUrl, delete e2.fileName, delete e2.fileSize, delete e2.fileUID, delete e2.rootID, delete e2.cbID, delete e2.parentID) : e2.type == a.hb.Tips && e2.event == a.ob.Unknown && this.protobuf.decodeMsgBody(this.engineConfig, e2, e2.message), e2);
        }, b.prototype.transformCombineMessage = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            return p(t2, void 0, void 0, function() {
              var t3, n2 = this;
              return h(this, function(i2) {
                switch (i2.label) {
                  case 0:
                    return e2.combineID && e2.messageID && e2.conversationSeq ? [4, this.dbMgr.getMessageByCombineID(e2.conversationID, e2.conversationType, e2.combineID)] : [3, 2];
                  case 1:
                    if (t3 = i2.sent())
                      return (e2 = d({}, e2)).combineID = "", e2.aesKey = t3.aesKey, e2.fileUID = t3.fileUID, e2.fileName = t3.fileName, e2.messageList = t3.messageList || [], r2(e2), [2];
                    throw Object(s.x)(a.t.CommonModuleParamInvalid, "The message is invalid combine message for forward.");
                  case 2:
                    return [4, e2.messageList.forEach(function(t4, r3) {
                      return p(n2, void 0, void 0, function() {
                        var n3;
                        return h(this, function(i3) {
                          switch (i3.label) {
                            case 0:
                              return t4.type != a.hb.Combine ? [3, 2] : [4, this.dbMgr.getMessageByCombineID(t4.conversationID, t4.conversationType, t4.combineID)];
                            case 1:
                              if (!(n3 = i3.sent()))
                                throw Object(s.x)(a.t.CommonModuleParamInvalid, "The messageList have invalid combine message.");
                              e2.messageList[r3] = n3, i3.label = 2;
                            case 2:
                              return [2];
                          }
                        });
                      });
                    })];
                  case 3:
                    return i2.sent(), r2(d({}, e2)), [2];
                }
              });
            });
          });
        }, b.prototype.fetchSvrUsers = function(e2, t2) {
          var r2 = this;
          if (!e2.length)
            return Promise.resolve();
          for (var n2 = [], i2 = 0; i2 < e2.length; i2 += 100) {
            var o2 = this.connMgr.sendRequest(a.d.user_fetch, { _ev_: t2, user_ids: e2.slice(i2, i2 + 100) }, a.j.SDK);
            n2.push(o2);
          }
          return Promise.all(n2).then(function(e3) {
            e3.forEach(function(e4) {
              (e4 = e4.result) && e4.length && e4.forEach(function(e5) {
                var t3 = e5.user_id, n3 = Object(s.h)(e5.user_name);
                e5 = Object(s.h)(e5.avatar);
                (t3 = (Object(s.w)({ userID: t3, userName: n3, userAvatarUrl: e5 }, r2.engineConfig), r2.engineConfig.syncUserTask.delete(t3), r2.engineConfig.dbConvMap.get(r2.getConversationKey(t3, a.r.Peer)))) && (t3.conversationName = n3, t3.conversationAvatarUrl = e5);
              });
            }), r2.dbMgr.addUserList(Array.from(r2.engineConfig.dbUserMap.values()));
          });
        }, b.prototype.deleteAllLocalConvMsg = function(e2) {
          var t2 = [], r2 = (this.convMap.forEach(function(e3) {
            var r3;
            e3.convType != a.r.Room && (r3 = e3.dbConv.msgSeq || 0, e3.dbConv.sendMsgCount = 0, e3.dbConv.deletedMsgCount = 0, e3.dbConv.unreadMessageCount = 0, e3.dbConv.readMsgSeq = r3, e3.dbConv.deletedMsgMaxSeq = r3, e3.dbConv.deletedMsgSeqs = [], e3.dbConv.mentionedInfoList = [], e3.dbConv.lastMessage = void 0, t2.push(e3.dbConv));
          }), "deleteAllConvMsg");
          this.dbMgr.addConversationList(t2, r2), this.dbMgr.clearMessage(this.engineConfig.user.deleteAllMsgTime || 0), this.dbMgr.deleteMessageExtraList(Array.from(this.engineConfig.msgExtraMap.keys())), this.engineConfig.msgExtraMap.clear(), this.onUnreadMessageCount(r2), r2 = { conversationID: "", conversationType: a.r.Unknown, isDeleteConversationAllMessage: true, messageList: [], messageDeleteType: a.Z.AllConversationMessagesDeleted };
          return this.eventBus.emit(a.u.MsgDeleted, r2), e2 && this.logger.info(m, a.X.DelAllConvMessages, e2), Promise.resolve();
        }, b.prototype.updateGroupConv = function(e2) {
          var t2, r2, n2;
          e2.type === a.r.Group && (r2 = this.groupMgr.findGroup(e2.conversationID)) && (t2 = this.settings.getRealClientTimestamp(), n2 = r2.queryUserInfo(this.engineConfig.user.userID), r2 = null == (r2 = null == r2 ? void 0 : r2.dbGroup.mutedInfo) ? void 0 : r2.expiredTime, (n2 = null == (null == n2 ? void 0 : n2.muteExpiredTime) ? 0 : null == n2 ? void 0 : n2.muteExpiredTime) && n2 <= t2 && (n2 = 0), e2.mutedExpiredTime = -1 == (r2 = r2 && r2 <= t2 ? 0 : r2) || -1 == n2 ? -1 : Math.max(r2, n2));
        }, b.prototype.checkIfGroupConvUnmute = function() {
          var e2, t2 = this, r2 = "checkIfGroupConvUnmute", n2 = [];
          this.muteGroupConvMap.forEach(function(e3) {
            !e3.mutedExpiredTime || e3.mutedExpiredTime <= 0 || (t2.updateGroupConv(e3), 0 == e3.mutedExpiredTime && (n2.push(e3), t2.muteGroupConvMap.delete(e3.conversationID)));
          }), 0 < n2.length && (this.dbMgr.addConversationList(n2, r2), e2 = n2.map(function(e3) {
            return { event: a.o.Updated, conversation: Object(s.s)(a.m.convKeys, e3) };
          }), this.eventBus.emit(a.u.ConvChanged, { infoList: e2 }, r2), this.onUnreadMessageCount(r2));
        }, b);
        function b(e2, t2, r2, n2, s2) {
          this.logger = i.a.getInstance().logger, this.dataReport = i.a.getInstance().dataReport, this.protobuf = i.a.getInstance().protobuf, this.settings = i.a.getInstance().settings, this.msgReceiptChangedMap = /* @__PURE__ */ new Map(), this.mergeMsgReceiptSeqs = /* @__PURE__ */ new Set(), this.mergeMsgReceiptMap = /* @__PURE__ */ new Map(), this.mergeMsgReceiptDBConvMap = /* @__PURE__ */ new Map(), this.mergeMsgReceiptTimer = 0, this.mergeListSeqs = { conv: 0, pinned: 0, msgExtra: 0, msgState: 0, msgReaction: 0 }, this.isLogined = false, this.oldTotalUnreadCount = 0, this.queryConvsCallbackList = [], this.selfReceiptSeqs = [], this.serverMuteUserList = [], this.convMap = /* @__PURE__ */ new Map(), this.muteGroupConvMap = /* @__PURE__ */ new Map(), this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = n2, this.groupMgr = s2, this.stgyMgr = new o.a(e2, t2), this.registerInnerEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(2), i = r(1), o = r(0), s = r(70), a = o.Y.Strategy, u = (c.prototype.start = function() {
          var e2, t2 = this;
          this.triggerTimer || (this.convStrategy.start(), !i.p && window && "requestIdleCallback" in window ? (e2 = function(e3) {
            if (e3)
              for (var r2 = t2.convStrategy.popFrontConversations(); (0 < e3.timeRemaining() || e3.didTimeout) && r2.length; )
                t2.handleIdleTimeStrategy(1, r2.shift());
          }, this.triggerTimer = setInterval(function() {
            return requestIdleCallback(e2);
          }, this.triggerInterval)) : this.triggerTimer = setInterval(function() {
            for (var e3 = t2.convStrategy.popFrontConversations(); e3.length; )
              t2.handleIdleTimeStrategy(0, e3.shift());
          }, this.triggerInterval));
        }, c.prototype.stop = function() {
          this.convStrategy.stop(), this.triggerTimer && clearInterval(this.triggerTimer), this.triggerTimer = 0;
        }, c.prototype.initConversations = function(e2) {
          this.convStrategy.initList(e2);
        }, c.prototype.modifyConversation = function(e2, t2, r2, n2) {
          switch (r2) {
            case o.o.Added:
            case o.o.Updated:
              this.convStrategy.insertConversation(e2, t2, n2);
              break;
            case o.o.Disabled:
            case o.o.Deleted:
              this.convStrategy.removeConversation(e2, t2);
          }
          this.logger.info(a, "MGR.modifyConv", { convID: e2, convType: t2, state: r2, todoList: n2 });
        }, c.prototype.deleteAllConversation = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            return t2.convStrategy.removeConversation(e3.conversationID, e3.type);
          });
        }, c.prototype.updateConversationTodoList = function(e2, t2, r2, n2) {
          this.convStrategy.modifyConversationTodoList(e2, t2, r2, n2), this.logger.info(a, "MGR.updateConvTodos", { convID: e2, convType: t2, state: r2, todo: n2 });
        }, c.prototype.updateConversationActivity = function(e2, t2, r2) {
          this.convStrategy.increaseConversationActivities(e2, t2), this.logger.info(a, "MGR.updateConvAct", { convID: e2, convType: t2, activity: r2 });
        }, c.prototype.handleIdleTimeStrategy = function(e2, t2) {
          t2 && (this.eventBus.exec(o.u.IIdleFetchConvMsg, t2.convID, t2.convType, t2.todoFlag), this.modifyConversation(t2.convID, t2.convType, o.o.Disabled, o.a.FetchAll), this.logger.info(a, "MGR.trigConvAct:" + e2, t2));
        }, c);
        function c(e2, t2) {
          this.engineConfig = e2, this.logger = n.a.getInstance().logger, this.triggerInterval = 3e4, this.triggerTimer = null, this.eventBus = t2, this.convStrategy = new s.a();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(2), i = r(0), o = i.Y.Strategy, s = (a.prototype.actionActivities = function() {
          this.activities++;
        }, a);
        function a(e2, t2, r2) {
          this.inactiveTurn = 0, this.activities = 0, this.todoFlag = 3, this.convID = e2, this.convType = t2, r2 == i.a.FetchAll ? this.todoFlag = 3 : r2 == i.a.FetchMessageList ? this.todoFlag = 1 : r2 == i.a.FetchMessageStatusList && (this.todoFlag = 2);
        }
        c.prototype.start = function() {
          var e2 = this;
          this.sortTask || (this.sortTask = setInterval(function() {
            e2.strategyList.sort(function(e3, t2) {
              return t2.activities - e3.activities;
            }), e2.strategyList = e2.strategyList.filter(function(t2) {
              return t2.inactiveTurn < e2.inactiveRemoveTurn;
            }), e2.strategyList.forEach(function(e3) {
              e3.todoFlag && e3.inactiveTurn++;
            }), e2.strategyList.length && e2.logger.info(o, "start", { strategyList: e2.strategyList });
          }, this.sortInterval));
        }, c.prototype.stop = function() {
          this.sortTask && clearInterval(this.sortTask), this.sortTask = 0, this.strategyList.length = 0, this.groupConvInfoMap.clear(), this.c2cConvInfoMap.clear();
        }, c.prototype.initList = function(e2) {
          var t2 = this;
          e2.length && (e2.sort(function(e3, t3) {
            return e3.conversationOrderKey - t3.conversationOrderKey;
          }), e2.forEach(function(e3) {
            var r2;
            e3.conversationType == i.r.Group && (r2 = new s(e3.conversationID, e3.conversationType, i.a.FetchAll), t2.strategyList.push(r2), t2.groupConvInfoMap.set(e3.conversationID, r2));
          }), this.strategyList.sort(function(e3, t3) {
            return e3.activities - t3.activities;
          }), this.logger.info(o, "initList", { strategyList: this.strategyList }));
        }, c.prototype.insertConversation = function(e2, t2, r2) {
          r2 = new s(e2, t2, r2), t2 == i.r.Group ? this.groupConvInfoMap.set(e2, r2) : t2 == i.r.Peer && this.c2cConvInfoMap.set(e2, r2), this.strategyList.some(function(r3) {
            return e2 == r3.convID && t2 == r3.convType;
          }) || this.strategyList.push(r2);
        }, c.prototype.removeConversation = function(e2, t2) {
          t2 == i.r.Group ? this.groupConvInfoMap.delete(e2) : t2 == i.r.Peer && this.c2cConvInfoMap.delete(e2);
          var r2 = this.strategyList.findIndex(function(r3) {
            return e2 == r3.convID && t2 == r3.convType;
          });
          -1 != r2 && this.strategyList.splice(r2, 1);
        }, c.prototype.modifyConversationTodoList = function(e2, t2, r2, n2) {
          switch (n2) {
            case i.a.FetchAll:
              t2 == i.r.Group ? (s2 = this.groupConvInfoMap.get(e2), r2 == i.b.Insert ? s2.todoFlag |= 3 : r2 == i.b.Remove && (s2.todoFlag &= 0)) : t2 == i.r.Peer && (s2 = this.c2cConvInfoMap.get(e2), r2 == i.b.Insert ? s2.todoFlag |= 3 : r2 == i.b.Remove && (s2.todoFlag &= 0));
              break;
            case i.a.FetchMessageList:
              t2 == i.r.Group ? (s2 = this.groupConvInfoMap.get(e2), r2 == i.b.Insert ? s2.todoFlag |= 3 : r2 == i.b.Remove && (s2.todoFlag &= 0)) : t2 == i.r.Peer && ((s2 = this.c2cConvInfoMap.get(e2)).todoFlag |= 1, r2 == i.b.Remove && (s2.todoFlag &= 2));
              break;
            case i.a.FetchMessageStatusList:
              var s2;
              t2 == i.r.Group ? ((s2 = this.groupConvInfoMap.get(e2)).todoFlag |= 2, r2 == i.b.Remove && (s2.todoFlag &= 1)) : t2 == i.r.Peer && ((s2 = this.c2cConvInfoMap.get(e2)).todoFlag |= 2, r2 == i.b.Remove && (s2.todoFlag &= 1));
          }
          this.logger.info(o, "modifyConvTodos", { convID: e2, convType: t2, state: r2, todo: n2 });
        }, c.prototype.increaseConversationActivities = function(e2, t2) {
          var r2 = this.strategyList.find(function(t3) {
            return t3.convID == e2;
          });
          r2 ? r2.inactiveTurn = 0 : (r2 = new s(e2, t2, i.a.FetchAll), this.strategyList.push(r2)), r2.actionActivities(), t2 == i.r.Group && this.groupConvInfoMap.set(e2, r2), t2 == i.r.Peer && this.c2cConvInfoMap.set(e2, r2), this.logger.info(o, "incConvAct", { convID: e2, convType: t2, strategy: r2 });
        }, c.prototype.popFrontConversations = function() {
          return this.strategyList.slice(0, 2);
        };
        var u = c;
        function c() {
          this.strategyList = [], this.groupConvInfoMap = /* @__PURE__ */ new Map(), this.c2cConvInfoMap = /* @__PURE__ */ new Map(), this.logger = n.a.getInstance().logger, this.sortInterval = 6e4, this.inactiveRemoveTurn = 10, this.sortTask = null;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        });
        var n, i, o = r(0), s = (t = r(12), (r = (n = function(e2, t2) {
          return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var r2 in t3)
              Object.prototype.hasOwnProperty.call(t3, r2) && (e3[r2] = t3[r2]);
          })(e2, t2);
        }, function(e2, t2) {
          if ("function" != typeof t2 && null !== t2)
            throw new TypeError("Class extends value " + String(t2) + " is not a constructor or null");
          function r2() {
            this.constructor = e2;
          }
          n(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (r2.prototype = t2.prototype, new r2());
        }))(a, i = t.a), a.prototype.setAssociatedGroup = function() {
        }, a.prototype.getAssociatedReqBody = function() {
          return null;
        }, a.prototype.isFetchMessageWhenLogin = function(e2) {
          return !(e2 === o.v.SDKLogin && !this.engineConfig.mailHBConfig.fetch_group_msg_count);
        }, a.prototype.getFetchMessageReqBody = function(e2, t2, r2, n2) {
          var i2 = this.engineConfig.mailHBConfig.fetch_group_msg_count || 100;
          return t2 <= o.v.SDKLogin && (n2 = Math.min(n2, i2 < 0 ? 100 : i2)), { group_id: this.convID, conv_msg_seq: e2, count: n2, sort_type: r2 };
        }, a);
        function a(e2, t2, r2, n2, s2, a2) {
          return (e2 = i.call(this, e2, t2, r2, n2, s2, a2) || this).dbConv.type = o.r.Group, e2.convType = o.r.Group, e2.convTypeMap = { receiveMessage: o.u.RecvGroupMsg, textMsgCmd: o.d.group_msg, commandMsgCmd: o.d.group_command, fetchMsgList: o.d.group_msglist, msgStatusQuery: o.d.group_query_msg }, e2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return s;
        });
        var n, i, o = r(0), s = (t = r(12), (r = (n = function(e2, t2) {
          return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var r2 in t3)
              Object.prototype.hasOwnProperty.call(t3, r2) && (e3[r2] = t3[r2]);
          })(e2, t2);
        }, function(e2, t2) {
          if ("function" != typeof t2 && null !== t2)
            throw new TypeError("Class extends value " + String(t2) + " is not a constructor or null");
          function r2() {
            this.constructor = e2;
          }
          n(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (r2.prototype = t2.prototype, new r2());
        }))(a, i = t.a), a.prototype.setAssociatedGroup = function() {
        }, a.prototype.getAssociatedReqBody = function() {
          return null;
        }, a.prototype.isFetchMessageWhenLogin = function(e2) {
          return !(e2 === o.v.SDKLogin && !this.engineConfig.mailHBConfig.fetch_c2c_msg_count);
        }, a.prototype.getFetchMessageReqBody = function(e2, t2, r2, n2) {
          var i2 = this.engineConfig.mailHBConfig.fetch_c2c_msg_count || 100;
          return t2 <= o.v.SDKLogin && (n2 = Math.min(n2, i2 < 0 ? 100 : i2)), { conv_id: this.convID, conv_type: this.convType, conv_msg_seq: e2, count: n2, mode: r2, login_fetch: t2 === o.v.SDKLogin ? 1 : 0 };
        }, a);
        function a(e2, t2, r2, n2, s2, a2) {
          return (e2 = i.call(this, e2, t2, r2, n2, s2, a2) || this).dbConv.type = o.r.Peer, e2.convType = o.r.Peer, e2.convTypeMap = { receiveMessage: o.u.RecvPeerMsg, textMsgCmd: o.d.c2c_msg, commandMsgCmd: o.d.c2c_command, fetchMsgList: o.d.c2c_msglist, msgStatusQuery: o.d.c2c_query_msg }, e2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        t = r(3);
        var n, i, o = r.n(t), s = r(0), a = (t = r(12), r = (n = function(e2, t2) {
          return (n = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var r2 in t3)
              Object.prototype.hasOwnProperty.call(t3, r2) && (e3[r2] = t3[r2]);
          })(e2, t2);
        }, function(e2, t2) {
          if ("function" != typeof t2 && null !== t2)
            throw new TypeError("Class extends value " + String(t2) + " is not a constructor or null");
          function r2() {
            this.constructor = e2;
          }
          n(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (r2.prototype = t2.prototype, new r2());
        }), function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }), u = (r(c, i = t.a), c.prototype.setAssociatedGroup = function(e2, t2, r2, n2) {
          this.roomReq.room_session_id = e2, this.roomReq.room_user_session_id = t2, this.roomReq.sub_room_id = r2, this.enabledOfflineMsg = n2, e2 && !this.dbConv.roomSessionID && (this.dbConv.roomSessionID = e2.toString());
        }, c.prototype.getAssociatedReqBody = function() {
          return this.roomReq;
        }, c.prototype.isFetchMessageWhenLogin = function(e2) {
          return !(e2 === s.v.SDKLogin && !this.engineConfig.mailHBConfig.fetch_room_msg_count) && this.enabledOfflineMsg;
        }, c.prototype.getFetchMessageReqBody = function(e2, t2, r2, n2) {
          if (!this.roomReq.room_session_id || 0 == this.roomReq.room_session_id.toNumber() || !this.enabledOfflineMsg)
            return null;
          var i2 = this.engineConfig.mailHBConfig.fetch_room_msg_count || 100;
          return t2 <= s.v.SDKLogin && (n2 = Math.min(n2, i2 < 0 ? 100 : i2)), a(a({}, this.roomReq), { room_id: this.convID, conv_msg_seq: e2, count: n2, sort_type: r2 });
        }, c);
        function c(e2, t2, r2, n2, a2, u2) {
          return (e2 = i.call(this, e2, t2, r2, n2, a2, u2) || this).roomReq = { room_session_id: o.a.fromNumber(0), room_user_session_id: o.a.fromNumber(0), sub_room_id: "" }, e2.enabledOfflineMsg = false, e2.dbConv.type = s.r.Room, e2.convType = s.r.Room, e2.convTypeMap = { receiveMessage: s.u.RecvRoomMsg, textMsgCmd: s.d.room_msg, commandMsgCmd: s.d.room_command, fetchMsgList: s.d.room_msglist, msgStatusQuery: s.d.room_query_msg }, e2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        }), r(21);
        var n = r(2), i = r(0), o = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, s = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, a = (u.prototype.setContext = function(e2) {
          this.context = e2;
        }, u.prototype.on = function(e2, t2) {
          this.listenerMap.set(e2, t2);
        }, u.prototype.off = function(e2) {
          e2 ? this.listenerMap.delete(e2) : (this.listenerMap.clear(), this.innerEvents[i.u.ILogined].length = 0, this.innerEvents[i.u.ILogout].length = 0, this.innerEvents[i.u.IJoinedGroup].length = 0, this.innerEvents[i.u.ILeftGroup].length = 0, this.innerEvents[i.u.ISyncGroups].length = 0, this.innerEvents[i.u.ISyncGroupInfo].length = 0, this.innerEvents[i.u.IUnreadMsgCount].length = 0, this.innerEvents[i.u.IConnectedRoom].length = 0, this.innerEvents[i.u.IConnected].length = 0, this.innerEvents[i.u.IDisConnected].length = 0, this.innerEvents[i.u.INetworkChange].length = 0, this.innerEvents[i.u.IIdleFetchConvMsg].length = 0, this.innerEvents[i.u.ITriggerHB].length = 0, this.innerEvents[i.u.IQPSSend].length = 0, this.context = null);
        }, u.prototype.emit = function(e2, t2, r2) {
          var o2 = this, s2 = this.listenerMap.get(e2);
          "function" == typeof s2 && (r2 = r2 ? "EV." + e2 + ":" + r2 : "EV." + e2, n.a.getInstance().logger.info(i.Y.Manager, r2, t2), setTimeout(function() {
            try {
              s2(o2.context, t2);
            } catch (e3) {
              throw e3;
            }
          }, 0));
        }, u.prototype.add = function(e2, t2) {
          this.innerEvents[e2].push(t2);
        }, u.prototype.remove = function(e2, t2) {
          var r2;
          t2 ? -1 !== (r2 = this.innerEvents[e2].findIndex(function(e3) {
            return e3 === t2;
          })) && this.innerEvents[e2].splice(r2, 1) : this.innerEvents[e2].length = 0;
        }, u.prototype.exec = function(e2) {
          for (var t2, r2 = [], a2 = 1; a2 < arguments.length; a2++)
            r2[a2 - 1] = arguments[a2];
          -1 == this.unlogEvents.indexOf(e2) && (t2 = e2 == i.u.ILogined ? void 0 : r2.length <= 1 ? r2[0] : r2, n.a.getInstance().logger.info(i.Y.Manager, "IE." + e2, t2)), this.innerEvents[e2].forEach(function(e3) {
            return e3.apply(void 0, s([], o(r2), false));
          });
        }, u);
        function u() {
          var e2;
          this.listenerMap = /* @__PURE__ */ new Map(), this.unlogEvents = [i.u.ITriggerHB, i.u.IConnectedRoom, i.u.IQPSSend], this.innerEvents = ((e2 = {})[i.u.ILogined] = [], e2[i.u.ILogout] = [], e2[i.u.IJoinedGroup] = [], e2[i.u.ILeftGroup] = [], e2[i.u.ISyncGroups] = [], e2[i.u.ISyncGroupInfo] = [], e2[i.u.IUnreadMsgCount] = [], e2[i.u.IConnectedRoom] = [], e2[i.u.IConnected] = [], e2[i.u.IDisConnected] = [], e2[i.u.INetworkChange] = [], e2[i.u.IIdleFetchConvMsg] = [], e2[i.u.ITriggerHB] = [], e2[i.u.IQPSSend] = [], e2[i.u.IMuteGroup] = [], e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return l;
        });
        var n = r(2), i = r(1), o = r(0), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, a = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, u = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, c = o.Y.Friend, l = (d.prototype.destroy = function() {
          this.connMgr = null, this.eventBus = null, this.logger = null;
        }, d.prototype.addUsersToBlacklist = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), userIDs: e2 };
          return this.connMgr.sendRequest(o.d.blacklist_add, { user_ids: e2 }).then(function(e3) {
            var n2;
            if (e3.code)
              return n2 = Object(i.x)(o.t.CommonModuleIMServerError, e3.message, e3.code), r2.error = n2, t2.logger.warn(c, o.X.AddUserToBlacklist, r2), Promise.reject(n2);
            t2.logger.info(c, o.X.AddUserToBlacklist, r2);
            var s2 = [];
            return e3.black_list.forEach(function(r3) {
              var n3, o2 = { userID: r3.user_base_info.user_id, userName: Object(i.h)(r3.user_base_info.user_name), userAvatarUrl: Object(i.h)(r3.user_base_info.avatar) };
              Object(i.w)(o2, t2.engineConfig), t2.blacklist.get(o2.userID) || e3.err_list.some(function(e4) {
                return e4.user_id == o2.userID;
              }) || (n3 = { userID: o2.userID, createTime: +r3.create_time.toString() || 0 }, t2.blacklist.set(o2.userID, n3), s2.push(n3), t2.updateBlacklistSeq(r3.black_list_seq));
            }), t2.dbMgr.addBlacklist(s2), t2.eventBus.emit(o.u.BlacklistUpd, { action: o.c.Added, userList: s2.map(function(e4) {
              return Object(i.u)(e4.userID, t2.engineConfig);
            }) }), { errorUserList: e3.err_list.map(function(e4) {
              return { userID: e4.user_id, reason: e4.sub_code };
            }) };
          });
        }, d.prototype.removeUsersFromBlacklist = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), userIDs: e2 };
          return this.connMgr.sendRequest(o.d.blacklist_del, { user_ids: e2 }).then(function(e3) {
            var n2;
            if (e3.code)
              return n2 = Object(i.x)(o.t.CommonModuleIMServerError, e3.message, e3.code), r2.error = n2, t2.logger.warn(c, o.X.RemoveUsersFromBlacklist, r2), Promise.reject(n2);
            t2.logger.info(c, o.X.RemoveUsersFromBlacklist, r2);
            var s2 = [];
            return e3.black_list.forEach(function(r3) {
              var n3 = t2.blacklist.get(r3.user_id);
              n3 && !e3.err_list.some(function(e4) {
                return e4.user_id == n3.userID;
              }) && (s2.push(n3.userID), t2.blacklist.delete(n3.userID), t2.updateBlacklistSeq(r3.apply_list_seq));
            }), t2.dbMgr.deleteBlacklist(s2), t2.eventBus.emit(o.u.BlacklistUpd, { action: o.c.Removed, userList: s2.map(function(e4) {
              return Object(i.u)(e4, t2.engineConfig);
            }) }), { errorUserList: e3.err_list.map(function(e4) {
              return { userID: e4.user_id, reason: e4.sub_code };
            }) };
          });
        }, d.prototype.checkUserIsInBlacklist = function(e2) {
          return Promise.resolve({ isUserInBlacklist: this.blacklist.has(e2) });
        }, d.prototype.queryBlacklist = function(e2) {
          var t2, r2, n2 = this, o2 = Array.from(this.blacklist.values()).sort(function(e3, t3) {
            return t3.createTime - e3.createTime;
          }), s2 = { config: e2, total: o2.length, count: 0 }, a2 = e2.count;
          return e2 = (e2 = e2.nextFlag || 0) || 0, o2.length > a2 ? (t2 = e2 * a2, e2 = (r2 = (e2 + 1) * a2) >= o2.length ? 0 : e2 + 1, o2 = o2.slice(t2, r2), s2.start = t2, s2.end = r2) : (e2 * a2 > o2.length && (o2 = []), e2 = 0), 0 == a2 && (e2 = 0), s2.count = o2.length, Promise.resolve({ blacklist: o2.map(function(e3) {
            return Object(i.u)(e3.userID, n2.engineConfig);
          }), nextFlag: e2 });
        }, d.prototype.onPushBlacklistAdded = function(e2) {
          var t2 = this, r2 = [];
          e2.black_list.forEach(function(e3) {
            var n2, o2 = { userID: e3.user_base_info.user_id, userName: Object(i.h)(e3.user_base_info.user_name), userAvatarUrl: Object(i.h)(e3.user_base_info.avatar) };
            Object(i.w)(o2, t2.engineConfig), t2.blacklist.has(o2.userID) || (n2 = { userID: o2.userID, createTime: +e3.create_time.toString() || 0 }, t2.blacklist.set(o2.userID, n2), r2.push(o2.userID), t2.updateBlacklistSeq(e3.black_list_seq));
          }), this.dbMgr.addBlacklist(Array.from(this.blacklist.values())), this.eventBus.emit(o.u.BlacklistUpd, { action: o.c.Added, userList: r2.map(function(e3) {
            return Object(i.u)(e3, t2.engineConfig);
          }) });
        }, d.prototype.onPushBlacklistDeleted = function(e2) {
          var t2 = this, r2 = [];
          e2.black_list.forEach(function(e3) {
            var n2 = e3.user_id;
            t2.blacklist.get(n2) && (r2.push(n2), t2.blacklist.delete(n2), t2.updateBlacklistSeq(e3.apply_list_seq));
          }), this.dbMgr.deleteBlacklist(r2), this.eventBus.emit(o.u.BlacklistUpd, { action: o.c.Removed, userList: r2.map(function(e3) {
            return Object(i.u)(e3, t2.engineConfig);
          }) });
        }, d.prototype.addFriend = function(e2, t2) {
          var r2, n2 = this, s2 = { time: /* @__PURE__ */ new Date(), userID: e2, config: t2 }, a2 = [];
          for (r2 in t2.friendAttributes)
            a2.push({ key: r2, value: t2.friendAttributes[r2] });
          return e2 = { user_base_info: { user_id: e2 }, remark: (null == t2 ? void 0 : t2.friendAlias) || "", attributes: a2, wording: (null == t2 ? void 0 : t2.wording) || "" }, this.connMgr.sendRequest(o.d.friend_add, { friend_infos: [e2] }).then(function(e3) {
            if (e3.code || e3.err_list.length)
              return t3 = e3.code || e3.err_list[0].sub_code, t3 = Object(i.x)(o.t.FriendModuleServerError, e3.message, t3), s2.error = t3, n2.logger.warn(c, o.X.AddFriend, s2), Promise.reject(t3);
            n2.updateFriendListSeq(null == (t3 = e3.friend_infos[0]) ? void 0 : t3.friend_list_seq), null != (t3 = e3.friend_infos[0]) && t3.wording && e3.apply_status_change_list[0] && (e3.apply_status_change_list[0].wording = e3.friend_infos[0].wording), n2.handleApplicationChanged(e3.apply_status_change_list, true);
            var t3 = n2.getFriendFromServer(e3.friend_infos[0]);
            return n2.addFriendCallback([t3]), { friendInfo: t3 };
          });
        }, d.prototype.sendFriendApplication = function(e2, t2) {
          var r2, n2 = this, s2 = { time: /* @__PURE__ */ new Date(), userID: e2, config: t2 }, a2 = [];
          for (r2 in t2.friendAttributes)
            a2.push({ key: r2, value: t2.friendAttributes[r2] });
          return e2 = { friend_infos: [{ user_base_info: { user_id: e2 }, remark: t2.friendAlias, attributes: a2, wording: t2.wording }], offline_info: Object(i.g)(t2.pushConfig) }, this.connMgr.sendRequest(o.d.friend_apply, e2).then(function(e3) {
            var t3, r3;
            return e3.code || e3.err_list.length ? (r3 = e3.code || e3.err_list[0].sub_code, r3 = Object(i.x)(o.t.FriendModuleServerError, e3.message, r3), s2.error = r3, n2.logger.warn(c, o.X.SendFriendApp, s2), Promise.reject(r3)) : (e3.apply_infos[0] ? t3 = n2.getFriendAppFromServer(e3.apply_infos[0]) : (r3 = n2.getFriendFromServer(e3.friend_infos[0]), n2.addFriendCallback([r3]), t3 = { applyUser: { userID: r3.userID, userName: r3.userName, userAvatarUrl: r3.userAvatarUrl }, wording: r3.wording, createTime: r3.createTime, updateTime: r3.createTime, type: o.y.Sent, state: o.x.Waiting }, r3 = e3.friend_infos[0].friend_list_seq.toString(), n2.updateFriendListSeq(r3)), e3.apply_infos.length && (r3 = n2.dbFriendAppMap.get(t3.applyUser.userID), n2.handleApplicationChanged(e3.apply_infos, !!r3)), { applicationInfo: t3 });
          });
        }, d.prototype.deleteFriends = function(e2, t2) {
          var r2 = this, n2 = { user_ids: e2, delete_type: (null == t2 ? void 0 : t2.type) || 0 }, s2 = { time: /* @__PURE__ */ new Date(), userIDs: e2, config: t2 };
          return this.connMgr.sendRequest(o.d.friend_delete, n2).then(function(t3) {
            if (t3.code)
              return a2 = t3.code || t3.apply_status_change_list[0].status, a2 = Object(i.x)(o.t.FriendModuleServerError, t3.message, a2), s2.error = a2, r2.logger.warn(c, o.X.DeleteFriends, s2), Promise.reject(a2);
            var n3 = t3.apply_status_change_list.map(function(e3) {
              return { userID: e3.user_id, reason: e3.status };
            }), a2 = e2.filter(function(e3) {
              return !n3.find(function(t4) {
                return t4.userID == e3;
              });
            }), u2 = [];
            return a2.forEach(function(e3) {
              var t4 = r2.dbFriendMap.get(e3);
              t4 && u2.push(t4), r2.dbFriendMap.delete(e3);
            }), r2.dbMgr.deleteFriendList(a2), r2.emitConversationChanged(u2, true), r2.eventBus.emit(o.u.FriendList, { action: o.z.Deleted, friendList: u2 }), { errorUserList: n3 };
          });
        }, d.prototype.checkFriendsRelation = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), userIDs: e2, config: t2 };
          e2 = { user_ids: e2, delete_type: (null == t2 ? void 0 : t2.type) || o.A.Both };
          return this.connMgr.sendRequest(o.d.friend_check, e2).then(function(e3) {
            var t3;
            return e3.code ? (t3 = Object(i.x)(o.t.FriendModuleServerError, e3.message, e3.code), n2.error = t3, r2.logger.warn(c, o.X.CheckFriends, n2), Promise.reject(t3)) : { relationInfos: e3.successes.map(function(e4) {
              return { userID: e4.user_id, type: r2.transFriendRelation(e4.sub_code) };
            }), errorUserList: (null == (t3 = e3.fails) ? void 0 : t3.map(function(e4) {
              return { userID: e4.user_id, reason: e4.sub_code };
            })) || [] };
          });
        }, d.prototype.updateFriendAlias = function(e2, t2) {
          var r2 = this;
          if (!this.dbFriendMap.has(t2))
            return Promise.reject(Object(i.x)(o.t.CommonModuleParamInvalid));
          var n2 = { time: /* @__PURE__ */ new Date(), userID: t2, alias: e2 };
          return this.connMgr.sendRequest(o.d.friend_modify_remark, { key: t2, value: e2 || "" }).then(function(a2) {
            var u2, l2 = r2.dbFriendMap.get(t2);
            return a2.code || !l2 ? (u2 = a2.code ? o.t.FriendModuleServerError : o.t.FriendModuleCommonError, u2 = Object(i.x)(u2, a2.message, a2.code), n2.error = u2, r2.logger.warn(c, o.X.UpdateFriendAlias, n2), Promise.reject(u2)) : (r2.updateFriendListSeq(a2.conv_list_seq), l2.friendAlias = e2, r2.eventBus.emit(o.u.FriendInfo, { friendList: [s({}, l2)] }), r2.emitConversationChanged([l2]), r2.dbMgr.addFriendList([l2]), { friendInfo: l2 });
          });
        }, d.prototype.updateFriendAttributes = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), userID: t2, attributes: e2 };
          if (!this.dbFriendMap.has(t2))
            return Promise.reject(Object(i.x)(o.t.CommonModuleParamInvalid));
          var a2 = [], u2 = this.dbFriendMap.get(t2);
          if (u2)
            for (var l2 in e2)
              u2.friendAttributes[l2] !== e2[l2] && a2.push({ key: l2, value: e2[l2] });
          return this.connMgr.sendRequest(o.d.friend_modify_attr, { user_id: t2, attributes: a2, action: 0 }).then(function(t3) {
            var a3;
            return t3.code || !u2 ? (a3 = t3.code ? o.t.FriendModuleServerError : o.t.FriendModuleCommonError, a3 = Object(i.x)(a3, t3.message, t3.code), n2.error = a3, r2.logger.warn(c, o.X.UpdateFriendAlias, n2), Promise.reject(a3)) : (r2.updateFriendListSeq(t3.friend_list_seq), u2.friendAttributes = Object.assign(u2.friendAttributes, e2), r2.eventBus.emit(o.u.FriendInfo, { friendList: [s({}, u2)] }), r2.dbMgr.addFriendList([u2]), { friendInfo: u2 });
          });
        }, d.prototype.acceptFriendApplication = function(e2, t2) {
          var r2 = this, n2 = { time: /* @__PURE__ */ new Date(), userID: e2, config: t2 };
          if (this.checkFriendAppDB(e2, n2, o.X.AcceptFriendApp))
            return Promise.reject(n2.error);
          var a2 = [];
          if (null != t2 && t2.friendAttributes)
            for (var u2 in t2.friendAttributes)
              a2.push({ key: u2, value: t2.friendAttributes[u2] });
          var l2 = { user_id: e2, remark: (null == t2 ? void 0 : t2.friendAlias) || "", attributes: a2, offline_info: Object(i.g)(null == t2 ? void 0 : t2.pushConfig) };
          return this.connMgr.sendRequest(o.d.friend_accept, l2).then(function(t3) {
            if (t3.code)
              return a3 = Object(i.x)(o.t.FriendModuleServerError, t3.message, t3.code), n2.error = a3, r2.logger.warn(c, o.X.AcceptFriendApp, n2), Promise.reject(a3);
            r2.updateFriendAppListSeq(t3.apply_list_seq), r2.updateFriendListSeq(t3.friend.friend_list_seq);
            var a3 = r2.getFriendFromServer(t3.friend);
            return (t3 = (r2.addFriendCallback([a3]), r2.dbFriendAppMap.get(e2))) && (t3.state = o.x.Accepted, r2.dbMgr.addFriendApplicationList([t3]), r2.eventBus.emit(o.u.FriendAppUpd, { applicationList: [s({}, t3)] })), { friendInfo: a3 };
          });
        }, d.prototype.rejectFriendApplication = function(e2, t2) {
          var r2 = this, n2 = { call_id: e2, offline_info: Object(i.g)(null == t2 ? void 0 : t2.pushConfig) }, a2 = { time: /* @__PURE__ */ new Date(), userID: e2, config: t2 };
          return this.checkFriendAppDB(e2, a2, o.X.RejectFriendApp) ? Promise.reject(a2.error) : this.connMgr.sendRequest(o.d.friend_refuse, n2).then(function(t3) {
            if (t3.code)
              return n3 = Object(i.x)(o.t.FriendModuleServerError, t3.message, t3.code), a2.error = n3, r2.logger.warn(c, o.X.RejectFriendApp, a2), Promise.reject(n3);
            r2.updateFriendAppListSeq(t3.conv_list_seq);
            var n3 = r2.dbFriendAppMap.get(e2);
            n3 && (n3.state = o.x.Rejected, n3.updateTime = +t3.conv_msg_seq.toString(), r2.dbMgr.addFriendApplicationList([n3]), t3 = s({}, n3), r2.eventBus.emit(o.u.FriendAppUpd, { applicationList: [t3] })), t3 = { userID: e2, userName: "", userAvatarUrl: "" };
            return { userInfo: (null == n3 ? void 0 : n3.applyUser) || t3 };
          });
        }, d.prototype.queryFriendsInfo = function(e2) {
          var t2 = this, r2 = [], n2 = [];
          return e2.forEach(function(e3) {
            var i2 = t2.dbFriendMap.get(e3);
            i2 ? (t2.updateUserInfo(i2), r2.push(i2)) : n2.push({ userID: e3, reason: o.t.FriendModuleIsNotYourFriend });
          }), Promise.resolve({ friendInfos: r2, errorUserList: n2 });
        }, d.prototype.queryFriendList = function(e2) {
          var t2, r2, n2 = Array.from(this.dbFriendMap.values()).sort(function(e3, t3) {
            return t3.createTime - e3.createTime;
          }), i2 = { config: e2, total: n2.length, count: 0 }, o2 = e2.count;
          return e2 = (e2 = e2.nextFlag || 0) || 0, n2.length > o2 ? (t2 = e2 * o2, e2 = (r2 = (e2 + 1) * o2) >= n2.length ? 0 : e2 + 1, n2 = n2.slice(t2, r2), i2.start = t2, i2.end = r2) : (e2 * o2 > n2.length && (n2 = []), e2 = 0), 0 == o2 && (e2 = 0), i2.count = n2.length, Promise.resolve({ friendList: n2, nextFlag: e2 });
        }, d.prototype.queryFriendApplicationList = function(e2) {
          var t2, r2, n2 = this, i2 = Array.from(this.dbFriendAppMap.values()).sort(function(e3, t3) {
            return t3.createTime - e3.createTime;
          }), o2 = { config: e2, total: i2.length, count: 0 }, s2 = e2.count;
          return e2 = (e2 = e2.nextFlag || 0) || 0, i2.length > s2 ? (t2 = e2 * s2, e2 = (r2 = (e2 + 1) * s2) >= i2.length ? 0 : e2 + 1, i2 = i2.slice(t2, r2), o2.start = t2, o2.end = r2) : (e2 * s2 > i2.length && (i2 = []), e2 = 0), 0 == s2 && (e2 = 0), o2.count = i2.length, i2.forEach(function(e3) {
            return n2.updateUserInfo(e3.applyUser);
          }), Promise.resolve({ applicationList: i2, nextFlag: e2 });
        }, d.prototype.searchFriends = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            var n2 = e2.keywords.filter(function(e3) {
              return "string" == typeof e3 && e3 && e3.trim().length;
            }).map(function(e3) {
              return e3.toLocaleLowerCase();
            });
            if (!n2.length)
              return r2({ nextFlag: 0, friendInfoList: [] });
            var s2 = [], a2 = e2.isAlsoMatchFriendAlias, u2 = (t2.dbFriendMap.forEach(function(e3) {
              var t3 = e3.userName, r3 = e3.friendAlias;
              (n2.every(function(e4) {
                return Object(i.d)(t3, e4);
              }) || a2 && n2.every(function(e4) {
                return Object(i.d)(r3, e4);
              })) && s2.push(e3);
            }), s2.sort(function(e3, t3) {
              return e3.createTime - t3.createTime;
            }), s2.length), l2 = e2.nextFlag, d2 = (null == (d2 = s2[s2.length - 1]) ? void 0 : d2.createTime) || 0, p = 0, h = (d2 = (0 < l2 && l2 < d2 ? p = s2.findIndex(function(e3) {
              return e3.createTime == l2;
            }) : d2 <= l2 && d2 && (p = s2.length - 1), p + Math.min(o.m.MAX_QUERY_PAGE_COUNT, e2.count)), (null == (h = s2[d2]) ? void 0 : h.createTime) || 0);
            s2 = s2.slice(p, d2), p = { dbCount: t2.dbFriendMap.size, start: p, end: d2, total: u2, count: s2.length, nextFlag: h, config: e2 };
            t2.logger.info(c, o.X.SearchFriends, p), r2({ nextFlag: h, friendInfoList: s2 });
          });
        }, d.prototype.onPushFriendAdded = function(e2, t2) {
          var r2 = this, n2 = [], i2 = [], o2 = ((t2 = void 0 !== t2 && t2) ? (n2 = e2.friend_infos, i2 = e2.apply_status_changes_list) : (n2.push(e2.friend_info), e2.apply_status_change && (e2.friend_info.wording && (e2.apply_status_change.wording = e2.friend_info.wording), i2.push(e2.apply_status_change))), this.handleApplicationChanged(i2, true), []);
          n2.forEach(function(e3) {
            r2.updateFriendListSeq(e3.friend_list_seq) && o2.push(r2.getFriendFromServer(e3));
          }), this.addFriendCallback(o2);
        }, d.prototype.onPushFriendDeleted = function(e2, t2) {
          var r2 = this, n2 = [], i2 = ((t2 = void 0 !== t2 && t2) ? e2.friend_infos.forEach(function(e3) {
            n2.push(e3.user_base_info.user_id);
          }) : n2.push(e2.user_id), []);
          n2.forEach(function(e3) {
            var t3 = r2.dbFriendMap.get(e3);
            t3 && i2.push(t3), r2.dbFriendMap.delete(e3);
          }), this.dbMgr.deleteFriendList(n2), this.emitConversationChanged(i2, true), i2.length && this.eventBus.emit(o.u.FriendList, { action: o.z.Deleted, friendList: i2 });
        }, d.prototype.onPushFriendAllDeleted = function(e2) {
          var t2 = this, r2 = +e2.conv_list_seq.toString(), n2 = +e2.conv_msg_seq.toString(), i2 = [];
          this.dbFriendMap.forEach(function(e3) {
            var o2 = e3.seq;
            r2 < o2 && o2 < n2 && (i2.push(e3), t2.dbFriendMap.delete(e3.userID));
          }), this.emitConversationChanged(i2, true), this.dbMgr.deleteFriendList(i2.map(function(e3) {
            return e3.userID;
          }));
        }, d.prototype.onPushFriendRemarkUpdated = function(e2) {
          var t2;
          !this.updateFriendListSeq(e2.seq) || (t2 = this.dbFriendMap.get(e2.key)) && (t2.friendAlias = e2.value, this.dbMgr.addFriendList([t2]), this.eventBus.emit(o.u.FriendInfo, { friendList: [t2] }), this.emitConversationChanged([t2]));
        }, d.prototype.onPushFriendAttributesUpdated = function(e2) {
          var t2, r2;
          !this.updateFriendListSeq(e2.friend_list_seq) || (t2 = this.dbFriendMap.get(e2.user_id)) && (r2 = t2.friendAttributes, e2.attributes.forEach(function(t3) {
            0 == e2.action ? r2[t3.key] = t3.value || "" : 1 == e2.action && delete r2[t3.key];
          }), this.dbMgr.addFriendList([t2]), this.eventBus.emit(o.u.FriendInfo, { friendList: [t2] }));
        }, d.prototype.onPushFriendApply = function(e2, t2) {
          var r2 = this, n2 = [];
          if (t2 = void 0 !== t2 && t2) {
            if (n2 = e2.apply_infos, e2.friends.length)
              return t2 = e2.friends.map(function(e3) {
                return r2.getFriendFromServer(e3);
              }), void this.addFriendCallback(t2);
          } else
            n2.push(e2.apply_info);
          this.handleApplicationChanged(n2);
        }, d.prototype.onPushFriendAccept = function(e2) {
          this.updateFriendListSeq(e2.friend_list_seq), this.updateFriendAppListSeq(e2.apply_list_seq), e2 = this.getFriendFromServer(e2.friend_info), this.addFriendCallback([e2]), (e2 = this.dbFriendAppMap.get(e2.userID)) && (e2.state = o.x.Accepted, this.dbMgr.addFriendApplicationList([e2]), this.eventBus.emit(o.u.FriendAppUpd, { applicationList: [e2] }));
        }, d.prototype.onPushFriendReject = function(e2) {
          var t2;
          !this.updateFriendAppListSeq(e2.apply_list_seq) || (t2 = this.dbFriendAppMap.get(e2.user_id)) && (t2.state = o.x.Rejected, t2.updateTime = +e2.update_time.toString(), this.dbMgr.addFriendApplicationList([t2]), this.eventBus.emit(o.u.FriendAppUpd, { applicationList: [t2] }));
        }, d.prototype.registerInnerEvent = function() {
          this.eventBus.add(o.u.ILogined, this.onLogined.bind(this)), this.eventBus.add(o.u.ILogout, this.onLogout.bind(this)), this.eventBus.add(o.u.IConnected, this.onConnected.bind(this)), this.eventBus.add(o.u.ITriggerHB, this.onTriggerHB.bind(this));
        }, d.prototype.onLogined = function() {
          var e2 = this, t2 = this.settings.getRealClientTimestamp();
          this.dbMgr.getBlacklist().then(function(t3) {
            t3.forEach(function(t4) {
              return e2.blacklist.set(t4.userID, t4);
            });
          }), this.dbMgr.getFriendList().then(function(t3) {
            t3.forEach(function(t4) {
              e2.updateUserInfo(t4), e2.dbFriendMap.set(t4.userID, t4);
            });
          }), this.dbMgr.getFriendApplicationList().then(function(r2) {
            var n2 = e2.engineConfig.mailHBConfig.apply_expired_duration;
            r2.forEach(function(r3) {
              t2 - r3.createTime > n2 && (r3.state = o.x.Expired), e2.updateUserInfo(r3.applyUser), e2.dbFriendAppMap.set(r3.applyUser.userID, r3);
            });
          }), this.mergeServerBlacklist(o.v.SDKLogin), this.mergeServerFriendList(o.v.SDKLogin), this.mergeServerFriendAppList(o.v.SDKLogin);
        }, d.prototype.onLogout = function() {
          this.blacklist.clear(), this.dbFriendMap.clear(), this.dbFriendAppMap.clear();
        }, d.prototype.onConnected = function() {
          this.mergeServerBlacklist(o.v.SDKHb, "onConnected"), this.mergeServerFriendList(o.v.SDKHb, "onConnected"), this.mergeServerFriendAppList(o.v.SDKHb, "onConnected");
        }, d.prototype.onTriggerHB = function() {
          this.mergeServerBlacklist(o.v.SDKHb, "hb"), this.mergeServerFriendList(o.v.SDKHb, "hb"), this.mergeServerFriendAppList(o.v.SDKHb, "hb");
        }, d.prototype.emitConversationChanged = function(e2, t2) {
          var r2 = this, n2 = (void 0 === t2 && (t2 = false), []), s2 = [];
          e2.forEach(function(e3) {
            var a2 = r2.engineConfig.user.userID + o.r.Peer + e3.userID;
            (a2 = r2.engineConfig.dbConvMap.get(a2)) && a2.state != o.q.Delete && (a2.conversationAlias !== e3.friendAlias || t2) && (a2.conversationAlias = t2 ? "" : e3.friendAlias, s2.push(a2), e3 = { event: o.o.Updated, conversation: Object(i.s)(o.m.convKeys, a2) }, n2.push(e3));
          }), this.dbMgr.addConversationList(s2, "updatAlias"), n2.length && this.eventBus.emit(o.u.ConvChanged, { infoList: n2 });
        }, d.prototype.addFriendCallback = function(e2) {
          e2.length && (this.eventBus.emit(o.u.FriendList, { action: o.z.Added, friendList: e2 }), this.dbMgr.addFriendList(e2), this.emitConversationChanged(e2));
        }, d.prototype.handleApplicationChanged = function(e2, t2) {
          var r2 = this, n2 = (void 0 === t2 && (t2 = false), []), i2 = [];
          e2.forEach(function(e3) {
            var s2 = r2.getFriendAppFromServer(e3), a2 = r2.dbFriendAppMap.get(e3.user_id);
            r2.updateFriendAppListSeq(e3.apply_list_seq), a2 ? !t2 && s2.type === a2.type && s2.state === a2.state && s2.updateTime === a2.updateTime || (Object.assign(a2, s2), r2.dbFriendAppMap.set(a2.applyUser.userID, a2), i2.push(s2)) : s2.state == o.x.Waiting && (n2.push(s2), r2.dbFriendAppMap.set(s2.applyUser.userID, s2));
          }), this.dbMgr.addFriendApplicationList(u(u([], a(n2), false), a(i2), false)), n2.length && this.eventBus.emit(o.u.FriendAppList, { applicationList: n2, action: o.w.Added }), i2.length && this.eventBus.emit(o.u.FriendAppUpd, { applicationList: i2 });
        }, d.prototype.fetchServerPageFriend = function(e2, t2, r2, n2) {
          return e2 = { cur_list_seq: e2, count: 100, full_pull: 0, degree: 0, how: r2 }, (n2 = void 0 !== n2 && n2) ? e2.full_pull = t2 : (e2.full_pull = 0, e2.degree = t2), r2 = n2 ? o.d.friend_apply_list : o.d.friend_list, this.connMgr.sendRequest(r2, e2, o.j.SDK).then(function(e3) {
            if (e3.code)
              return { cur: 0, list: [] };
            var t3 = e3.cur_list_seq, r3 = e3.max_list_seq, i2 = e3.fetch_end;
            return { nextFlag: i2 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, fetch_end: i2, full_list: e3.full_list, count: e3.friend_count, list: n2 ? e3.apply_list : e3.friends };
          });
        }, d.prototype.mergeServerFriendList = function(e2, t2) {
          var r2, n2, i2, s2, l2, d2, p, h = this, f = +this.engineConfig.user.friendSeq || 0, g = this.engineConfig.mailHBConfig.friend_list_seq;
          !g || g <= f || (r2 = { time: /* @__PURE__ */ new Date(), dbSeq: f, hbSeq: g, how: e2, action: t2 }, n2 = 1, i2 = /* @__PURE__ */ new Map(), s2 = /* @__PURE__ */ new Map(), l2 = /* @__PURE__ */ new Map(), d2 = 0, p = function(t3) {
            var f2, g2;
            t3.full_list && !d2 && h.dbFriendMap.size && (h.dbFriendMap.forEach(function(e3) {
              return l2.set(e3.userID, e3);
            }), h.dbMgr.deleteFriendList([], true), h.dbFriendMap.clear()), d2 += t3.list.length, t3.list.forEach(function(e3) {
              var t4, r3, n3 = e3.info.user_base_info.user_id, o2 = h.dbFriendMap.get(n3);
              e3.is_del ? (i2.delete(n3), s2.delete(n3), o2 && l2.set(n3, o2)) : (l2.delete(n3), t4 = h.getFriendFromServer(e3.info), o2 ? (n3 = Object.keys(t4.friendAttributes), r3 = false, n3.length !== Object.keys(o2.friendAttributes).length && (r3 = true), n3.forEach(function(e4) {
                t4.friendAttributes[e4] !== o2.friendAttributes[e4] && (r3 = true);
              }), t4.friendAlias === o2.friendAlias && t4.userName === o2.userName && t4.userAvatarUrl === o2.userAvatarUrl && t4.wording === o2.wording && !r3 || s2.set(t4.userID, t4)) : i2.set(t4.userID, t4));
            }), t3.nextFlag && h.engineConfig.token ? h.fetchServerPageFriend(t3.nextFlag, ++n2, e2).then(p) : (l2.size && (f2 = Array.from(l2.values()), h.eventBus.emit(o.u.FriendList, { friendList: f2, action: o.z.Deleted }), h.dbMgr.deleteFriendList(f2.map(function(e3) {
              return e3.userID;
            })), h.emitConversationChanged(f2, true)), f2 = Array.from(i2.values()), i2.size && h.eventBus.emit(o.u.FriendList, { friendList: f2, action: o.z.Added }), s2.size && (g2 = Array.from(s2.values()), h.eventBus.emit(o.u.FriendInfo, { friendList: g2 }), f2.push.apply(f2, u([], a(g2), false))), h.dbMgr.addFriendList(f2), h.emitConversationChanged(f2), h.updateFriendListSeq(t3.cur || t3.max, true), h.logger.info(c, "mergeSvrFriends", r2));
          }, this.fetchServerPageFriend(f, n2, e2).then(p));
        }, d.prototype.mergeServerFriendAppList = function(e2, t2) {
          var r2, n2, i2, s2, l2, d2 = this, p = +this.engineConfig.user.friendAppSeq || 0, h = this.engineConfig.mailHBConfig.friend_apply_list_seq;
          !h || h <= p || (r2 = { time: /* @__PURE__ */ new Date(), dbSeq: p, hbSeq: h, how: e2, action: t2 }, n2 = 1, i2 = [], s2 = [], l2 = function(t3) {
            var p2, h2;
            t3.list.forEach(function(e3) {
              var t4 = d2.getFriendAppFromServer(e3);
              d2.dbFriendAppMap.has(e3.user_id) ? d2.friendAppHasChanged(t4) && s2.push(t4) : i2.push(t4);
            }), t3.nextFlag && d2.engineConfig.token ? d2.fetchServerPageFriend(t3.nextFlag, ++n2, e2, true).then(l2) : (i2.length && (d2.dbFriendAppMap.size ? (p2 = i2.filter(function(e3) {
              return !d2.dbFriendAppMap.has(e3.applyUser.userID);
            }), h2 = i2.filter(function(e3) {
              return d2.dbFriendAppMap.has(e3.applyUser.userID) && d2.friendAppHasChanged(e3);
            }), p2.length && d2.eventBus.emit(o.u.FriendAppList, { applicationList: p2, action: o.w.Added }), h2.length && d2.eventBus.emit(o.u.FriendAppUpd, { applicationList: h2 })) : d2.eventBus.emit(o.u.FriendAppList, { applicationList: u([], a(i2), false), action: o.w.Added })), s2.length && d2.eventBus.emit(o.u.FriendAppUpd, { applicationList: s2 }), d2.dbMgr.addFriendApplicationList(u(u([], a(i2), false), a(s2), false)), u(u([], a(i2), false), a(s2), false).forEach(function(e3) {
              d2.dbFriendAppMap.set(e3.applyUser.userID, e3);
            }), d2.updateFriendAppListSeq(t3.cur || t3.max, true), d2.logger.info(c, "mergeSvrFriendApps", r2));
          }, this.fetchServerPageFriend(p, n2, e2, true).then(l2));
        }, d.prototype.updateBlacklistSeq = function(e2, t2) {
          e2 && "number" != typeof e2 && (e2 = +e2.toString());
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.blacklistSeq && r2.blacklistSeq + 1 != e2 || (r2.blacklistSeq = e2, this.dbMgr.setUser(r2));
        }, d.prototype.updateFriendListSeq = function(e2, t2) {
          e2 && "number" != typeof e2 && (e2 = +e2.toString());
          var r2 = this.engineConfig.user;
          return !(!e2 || !t2 && r2.friendSeq && r2.friendSeq + 1 != e2 || r2.friendSeq && r2.friendSeq > e2 || (r2.friendSeq = e2, this.dbMgr.setUser(r2), 0));
        }, d.prototype.updateFriendAppListSeq = function(e2, t2) {
          e2 && "number" != typeof e2 && (e2 = +e2.toString());
          var r2 = this.engineConfig.user;
          return !(!e2 || !t2 && r2.friendAppSeq && r2.friendAppSeq + 1 != e2 || r2.friendAppSeq && r2.friendAppSeq > e2 || (r2.friendAppSeq = e2, this.dbMgr.setUser(r2), 0));
        }, d.prototype.transApplyType = function(e2) {
          return 0 == e2 ? o.y.None : 1 == e2 ? o.y.Received : 2 == e2 ? o.y.Sent : 3 == e2 ? o.y.Both : o.y.None;
        }, d.prototype.transApplyState = function(e2) {
          return 2 == e2 ? o.x.Accepted : 3 == e2 ? o.x.Rejected : 4 == e2 ? o.x.Expired : 5 == e2 ? o.x.Disabled : o.x.Waiting;
        }, d.prototype.transFriendRelation = function(e2) {
          return 2 == e2 ? o.qb.SingleHave : 3 == e2 ? o.qb.BothAllNo : 4 == e2 ? o.qb.BothSelfHave : 5 == e2 ? o.qb.BothOtherHave : 6 == e2 ? o.qb.BothAllHave : o.qb.SingleNo;
        }, d.prototype.getFriendFromServer = function(e2) {
          var t2 = e2.attributes.reduce(function(e3, t3) {
            return e3[t3.key] = t3.value || "", e3;
          }, {});
          t2 = { userID: e2.user_base_info.user_id, userName: Object(i.h)(e2.user_base_info.user_name), userAvatarUrl: Object(i.h)(e2.user_base_info.avatar), createTime: +e2.create_time, wording: e2.wording, friendAlias: e2.remark, friendAttributes: t2 || {}, seq: +e2.friend_list_seq.toString() };
          return this.dbFriendMap.set(t2.userID, t2), t2;
        }, d.prototype.getFriendAppFromServer = function(e2) {
          var t2, r2 = this.dbFriendAppMap.get(e2.user_id);
          return { applyUser: { userID: e2.user_id, userName: e2.user_name ? Object(i.h)(e2.user_name) : (null == r2 ? void 0 : r2.applyUser.userName) || "", userAvatarUrl: e2.avatar ? Object(i.h)(e2.avatar) : (null == r2 ? void 0 : r2.applyUser.userAvatarUrl) || "" }, wording: e2.wording ? Object(i.h)(e2.wording) : (null == r2 ? void 0 : r2.wording) || "", createTime: e2.create_time ? +(null == (t2 = e2.create_time) ? void 0 : t2.toString()) : (null == r2 ? void 0 : r2.createTime) || 0, updateTime: e2.update_time ? +(null == (t2 = e2.update_time) ? void 0 : t2.toString()) || +(null == (t2 = e2.apply_update_time) ? void 0 : t2.toString()) : (null == r2 ? void 0 : r2.updateTime) || 0, type: void 0 !== e2.app_type ? this.transApplyType(e2.app_type) : (null == r2 ? void 0 : r2.type) || o.y.None, state: void 0 !== e2.status ? this.transApplyState(e2.status) : (null == r2 ? void 0 : r2.state) || o.x.Waiting };
        }, d.prototype.checkFriendAppDB = function(e2, t2, r2) {
          var n2;
          if (!this.dbFriendAppMap.get(e2))
            return (n2 = Object(i.x)(o.t.CommonModuleParamInvalid)).message = "friendApp: " + e2 + " not found.", t2.error = n2, this.logger.warn(c, r2, t2), n2;
        }, d.prototype.mergeServerBlacklist = function(e2, t2) {
          var r2, n2, l2, d2, p, h = this, f = +this.engineConfig.user.blacklistSeq || 0, g = this.engineConfig.mailHBConfig.black_list_seq;
          !g || g <= f || (r2 = { time: /* @__PURE__ */ new Date(), dbSeq: f, hbSeq: g, how: e2, action: t2 }, n2 = 1, l2 = 0, d2 = [], p = function(t3) {
            var f2, m;
            l2 = l2 || t3.fullPull, t3.fullPull && (d2.length = 0), d2.push.apply(d2, u([], a(t3.list), false)), t3.nextFlag && h.engineConfig.token ? h.fetchServerPageBlacklist(t3.nextFlag, ++n2, e2).then(p) : (f2 = [], m = [], l2 && !d2.length ? (h.blacklist.forEach(function(e3) {
              (e3 = Object(i.u)(e3.userID, h.engineConfig)) && m.push(e3);
            }), h.blacklist.clear()) : (l2 && h.blacklist.clear(), d2.forEach(function(e3) {
              var t4 = { userID: e3.info.user_base_info.user_id, userName: Object(i.h)(e3.info.user_base_info.user_name), userAvatarUrl: Object(i.h)(e3.info.user_base_info.avatar) }, r3 = e3.info.user_base_info.user_id;
              e3.is_del ? (m.push(t4), h.blacklist.delete(r3), f2 = f2.filter(function(e4) {
                return e4.userID !== r3;
              })) : (f2.push(t4), h.blacklist.set(r3, s(s({}, t4), { createTime: +e3.info.create_time.toString() || 0 })), m = m.filter(function(e4) {
                return e4.userID !== r3;
              }));
            })), h.updateBlacklistSeq(g, true), f2.length && h.eventBus.emit(o.u.BlacklistUpd, { action: o.c.Added, userList: f2 }), m.length && h.eventBus.emit(o.u.BlacklistUpd, { action: o.c.Removed, userList: m }), r2.serLen = d2.length, r2.addLen = f2.length, r2.delLen = m.length, h.dbMgr.deleteBlacklist(m.map(function(e3) {
              return e3.userID;
            })), h.dbMgr.addBlacklist(Array.from(h.blacklist.values())), h.logger.info(c, "mergeSvrBlacklist", r2));
          }, this.fetchServerPageBlacklist(f, n2, e2).then(p));
        }, d.prototype.fetchServerPageBlacklist = function(e2, t2, r2) {
          return this.connMgr.sendRequest(o.d.blacklist_fetch, { cur_list_seq: e2, count: 100, degree: t2, how: r2 }, o.j.SDK).then(function(e3) {
            if (e3.code)
              return { cur: 0, list: [] };
            var t3 = e3.cur_list_seq, r3 = e3.max_list_seq, n2 = e3.fetch_end, i2 = e3.full_list;
            return { nextFlag: n2 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, list: e3.blacklists, fetch_end: n2, fullPull: i2 };
          });
        }, d.prototype.friendAppHasChanged = function(e2) {
          var t2 = this.dbFriendAppMap.get(e2.applyUser.userID);
          return t2.wording !== e2.wording || t2.state !== e2.state || t2.type !== e2.type || t2.updateTime !== e2.updateTime;
        }, d.prototype.updateUserInfo = function(e2) {
          var t2 = this.engineConfig.dbUserMap.get(e2.userID), r2 = this.dbFriendMap.get(e2.userID);
          t2 && (e2.userName = t2.userName !== e2.userName ? t2.userName || "" : e2.userName, e2.userAvatarUrl = t2.userAvatarUrl !== e2.userAvatarUrl ? t2.userAvatarUrl || "" : e2.userAvatarUrl), r2 && (r2.userName = e2.userName, r2.userAvatarUrl = e2.userAvatarUrl, this.dbMgr.addFriendList([r2]));
        }, d);
        function d(e2, t2, r2, i2) {
          this.logger = n.a.getInstance().logger, this.settings = n.a.getInstance().settings, this.blacklist = /* @__PURE__ */ new Map(), this.dbFriendMap = /* @__PURE__ */ new Map(), this.dbFriendAppMap = /* @__PURE__ */ new Map(), this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = i2, this.registerInnerEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        t = r(3);
        var n = r.n(t), i = r(2), o = r(1), s = r(0), a = r(18), u = r(77), c = function() {
          return (c = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, l = s.Y.Group, d = (p.prototype.destroy = function() {
          this.onLogout(), this.connMgr = null, this.eventBus = null, this.logger = null, this.engineConfig = null;
        }, p.prototype.findRoom = function(e2) {
          return this.roomMap.get(e2);
        }, p.prototype.findGroup = function(e2) {
          return this.groupMap.get(e2);
        }, p.prototype.initGroupByConversation = function(e2) {
          var t2 = this.groupMap.get(e2);
          t2 || (t2 = new a.a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), this.groupMap.set(e2, t2), e2 = this.engineConfig.dbGroupMap.get(e2), t2.setDBGroup(this.dbGroupApplyMap, e2));
        }, p.prototype.clearRoomMessage = function() {
          var e2 = this, t2 = Array.from(this.roomIDs);
          t2.forEach(function(t3) {
            (t3 = e2.engineConfig.dbConvMap.get(e2.engineConfig.user.userID + s.r.Room + t3)) && (t3.maxSeq = 0, t3.msgSeq = 0, t3.maxOrderKey = 0);
          }), this.dbMgr.clearRoomMessage(t2, false), this.roomIDs.clear();
        }, p.prototype.createRoom = function(e2, t2, r2) {
          var n2 = this, i2 = this.createRoomInstance(e2.roomID);
          return i2.create(e2.roomName, t2, r2).then(function(e3) {
            return n2.clearRoomMessageByDestroy(i2), e3;
          });
        }, p.prototype.joinRoom = function(e2) {
          var t2 = this, r2 = this.createRoomInstance(e2);
          return r2.enter().then(function(e3) {
            return t2.clearRoomMessageByDestroy(r2), e3;
          });
        }, p.prototype.leaveRoom = function(e2) {
          var t2 = this, r2 = this.findRoom(e2);
          return r2 ? r2.quit().then(function() {
            return t2.clearRoomMessageByLeave(r2.groupID, r2.destroyDelay, t2.dbMgr), t2.roomMap.delete(e2), { roomID: e2 };
          }) : Promise.resolve({ roomID: e2 });
        }, p.prototype.leaveAllRoom = function() {
          var e2 = this;
          return this.connMgr.sendRequest(s.d.room_quit_all, {}).then(function(t2) {
            var r2;
            return t2.code ? (r2 = Object(o.x)(s.t.RoomModuleLeaveRoomError, t2.message, t2.code), Promise.reject(r2)) : { roomIDs: t2.room_list.map(function(t3) {
              var r3 = t3.room_id, n2 = (t3 = t3.room_session_id, e2.findRoom(r3));
              return n2 && t3.eq(n2.sessionID) && (e2.eventBus.emit(s.u.RoomState, { roomID: r3, state: s.mb.Disconnected, event: s.lb.Success, extendedData: "" }), e2.clearRoomMessageByLeave(r3, n2.destroyDelay, e2.dbMgr), e2.roomMap.delete(r3)), r3;
            }) };
          });
        }, p.prototype.queryRoomMemberList = function(e2, t2) {
          var r2 = this.createNoRoomError(e2, s.X.QueryRoomMemberList);
          return r2 ? Promise.reject(r2) : this.findRoom(e2).queryPageMember(t2);
        }, p.prototype.queryRoomMembers = function(e2, t2) {
          var r2 = this.createNoRoomError(t2, s.X.QueryRoomMembers);
          return r2 ? Promise.reject(r2) : this.findRoom(t2).queryRoomMembers(e2);
        }, p.prototype.queryRoomAllAttributes = function(e2) {
          var t2 = this.createNoRoomError(e2, s.X.QueryRoomAllAttributes);
          return t2 ? Promise.reject(t2) : this.findRoom(e2).queryRoomAllAttributes();
        }, p.prototype.setRoomAttributes = function(e2, t2, r2) {
          var n2 = this.createNoRoomError(t2, s.X.SetRoomAttributes);
          return n2 ? Promise.reject(n2) : this.findRoom(t2).setRoomAttributes(e2, r2);
        }, p.prototype.deleteRoomAttributes = function(e2, t2, r2) {
          var n2 = this.createNoRoomError(t2, s.X.DeleteRoomAttributes);
          return n2 ? Promise.reject(n2) : this.findRoom(t2).deleteRoomAttributes(e2, r2);
        }, p.prototype.beginRoomAttributesBatchOperation = function(e2, t2) {
          this.createRoomInstance(e2).beginRoomAttributesBatchOperation(t2);
        }, p.prototype.endRoomAttributesBatchOperation = function(e2) {
          var t2 = this.createNoRoomError(e2, s.X.EndRoomAttributesBatchOperation);
          return t2 ? Promise.reject(t2) : this.findRoom(e2).endRoomAttributesBatchOperation();
        }, p.prototype.setRoomMembersAttributes = function(e2, t2, r2, n2) {
          var i2 = this.createNoRoomError(r2, s.X.SetRoomMembersAttributes);
          return i2 ? Promise.reject(i2) : this.findRoom(r2).setRoomMembersAttributes(e2, t2, n2);
        }, p.prototype.queryRoomMembersAttributes = function(e2, t2) {
          var r2 = this.createNoRoomError(t2, s.X.QueryRoomMembersAttributes);
          return r2 ? Promise.reject(r2) : this.findRoom(t2).queryRoomMembersAttributes(e2);
        }, p.prototype.queryRoomMemberAttributesList = function(e2, t2) {
          var r2 = this.createNoRoomError(e2, s.X.QueryRoomMemberAttributesList);
          return r2 ? Promise.reject(r2) : this.findRoom(e2).queryRoomMemberAttributesList(t2);
        }, p.prototype.queryRoomOnlineMemberCount = function(e2) {
          var t2 = this.createNoRoomError(e2, s.X.QueryRoomOnlineMemberCount);
          return t2 ? Promise.reject(t2) : this.findRoom(e2).queryMemberCount();
        }, p.prototype.onPushRoomKickout = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && (t2.onPushKickout(e2), this.clearRoomMessageByLeave(t2.groupID, t2.destroyDelay, this.dbMgr), this.roomMap.delete(t2.groupID));
        }, p.prototype.onPushRoomEnter = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushEnter(e2);
        }, p.prototype.onPushRoomQuit = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushQuit(e2);
        }, p.prototype.onPushRoomAttributesModify = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushRoomAttributesModify(e2);
        }, p.prototype.onPushRoomUserAttributesModify = function(e2) {
          var t2 = this.findRoom(e2.room_id);
          t2 && t2.onPushRoomUserAttributesModify(e2);
        }, p.prototype.createGroup = function(e2, t2, r2) {
          var i2 = this, a2 = String(e2.groupID || "").trim() || Object(o.l)(), u2 = this.createGroupInstance(a2, e2.groupName, e2.groupAvatarUrl);
          return u2.createGroup(e2, t2, r2).then(function(e3) {
            return i2.groupMap.delete(a2), i2.groupDelIDMap.delete(a2), i2.groupDelIDMap.delete(u2.groupID), i2.groupMap.set(u2.groupID, u2), i2.updateGroupSeq(u2.dbGroup.groupSeq ? n.a.fromString(u2.dbGroup.groupSeq) : void 0), e3;
          }).catch(function(e3) {
            throw e3 && e3.code && e3.code != s.t.GroupModuleGroupAlreadyExists && (i2.groupMap.delete(a2), i2.groupMap.delete(u2.groupID), u2.destroy()), e3;
          });
        }, p.prototype.joinGroup = function(e2, t2, r2) {
          var i2 = this, o2 = this.createGroupInstance(t2);
          return o2.joinGroup(e2, r2).then(function(r3) {
            if (r3) {
              if (i2.groupDelIDMap.delete(t2), i2.updateGroupSeq(o2.dbGroup.groupSeq ? n.a.fromString(o2.dbGroup.groupSeq) : void 0), e2)
                return r3;
            } else
              i2.groupMap.delete(t2), o2.destroy();
            return { groupID: t2 };
          }).catch(function(e3) {
            throw e3 && e3.code && e3.code != s.t.GroupModuleMemberIsAlreadyInTheGroup && (i2.groupMap.delete(t2), o2.destroy()), e3;
          });
        }, p.prototype.leaveGroup = function(e2) {
          return this.quitGroup(e2, s.d.group_quit, s.X.LeaveGroup, s.t.GroupModuleLeaveGroupError);
        }, p.prototype.dismissGroup = function(e2) {
          return this.quitGroup(e2, s.d.group_destroy, s.X.DismissGroup, s.t.GroupModuleDismissGroupError);
        }, p.prototype.queryGroupList = function() {
          var e2 = this;
          return new Promise(function(t2) {
            var r2 = { time: /* @__PURE__ */ new Date(), logined: e2.mergeListSeqs.groupLogined, count: 0 };
            e2.mergeListSeqs.groupLogined ? e2.mergeServerGroupList(s.v.Biz, function(n2) {
              return t2(e2.handleQueryGroupsCallback(n2, r2));
            }) : e2.queryGroupsCallbackList.push({ log: r2, resolve: t2 });
          });
        }, p.prototype.updateGroupInfo = function(e2, t2, r2) {
          return this.createGroupInstance(t2).updateGroupInfo(e2, r2);
        }, p.prototype.queryGroupInfo = function(e2) {
          return this.createGroupInstance(e2).queryGroupInfo();
        }, p.prototype.setGroupAttributes = function(e2, t2) {
          return this.createGroupInstance(t2).updateGroupAttributes(e2);
        }, p.prototype.deleteGroupAttributes = function(e2, t2) {
          return this.createGroupInstance(t2).updateGroupAttributes(e2);
        }, p.prototype.queryGroupAttributes = function(e2, t2) {
          return this.createGroupInstance(e2).queryGroupAttributes(t2);
        }, p.prototype.muteGroup = function(e2, t2) {
          return this.createGroupInstance(e2).muteGroup(t2);
        }, p.prototype.setGroupMemberNickname = function(e2, t2, r2) {
          return this.createGroupInstance(r2).setMemberInfo(t2, e2, s.Q.Nickname);
        }, p.prototype.setGroupMemberRole = function(e2, t2, r2) {
          return this.createGroupInstance(r2).setMemberInfo(t2, e2, s.Q.Role);
        }, p.prototype.transferGroupOwner = function(e2, t2) {
          return this.createGroupInstance(t2).transferGroupOwner(e2);
        }, p.prototype.queryGroupMemberInfo = function(e2, t2) {
          return this.createGroupInstance(t2).queryMemberInfo(e2);
        }, p.prototype.inviteUsersIntoGroup = function(e2, t2, r2, n2) {
          return this.createGroupInstance(r2).inviteUsers(e2, t2, n2);
        }, p.prototype.kickGroupMembers = function(e2, t2) {
          return this.createGroupInstance(t2).kickMembers(e2);
        }, p.prototype.queryGroupMemberList = function(e2, t2) {
          return this.createGroupInstance(e2).queryMemberList(t2);
        }, p.prototype.queryGroupMemberCount = function(e2) {
          return this.createGroupInstance(e2).queryMemberCount();
        }, p.prototype.muteGroupMembers = function(e2, t2, r2, n2) {
          return n2 = e2 ? n2 && !isNaN(n2.duration) ? +n2.duration : -1 : 0, this.createGroupInstance(r2).muteMembers(e2, t2, n2);
        }, p.prototype.queryGroupMemberMutedList = function(e2, t2) {
          return this.createGroupInstance(e2).queryMemberMutedList(t2);
        }, p.prototype.queryReceiptMemberList = function(e2, t2, r2, n2) {
          var i2 = this.engineConfig.user.userID + s.r.Group + t2 + e2.conversationSeq, o2 = this.engineConfig.msgExtraMap.get(i2);
          return o2 ? o2.messageID || (o2.messageID = e2.messageID) : (o2 = { id: i2, ownerID: this.engineConfig.user.userID, conversationID: t2, conversationType: s.r.Group, conversationSeq: e2.conversationSeq, messageID: e2.messageID, receiptStatus: e2.receiptStatus, memberSeqs: {} }, this.engineConfig.msgExtraMap.set(i2, o2)), this.createGroupInstance(t2).queryReceiptMemberList(e2, o2, r2, n2);
        }, p.prototype.searchGroups = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            var n2 = e2.keywords.filter(function(e3) {
              return "string" == typeof e3 && e3 && e3.trim().length;
            }).map(function(e3) {
              return e3.toLocaleLowerCase();
            });
            if (!n2.length)
              return r2({ nextFlag: 0, groupSearchInfoList: [] });
            var i2 = /* @__PURE__ */ new Date(), a2 = e2.isAlsoMatchGroupMemberUserName, u2 = e2.isAlsoMatchGroupMemberNickname;
            t2.dbMgr.searchGroups(n2, a2, u2, function(a3, u3) {
              var c2 = [], l2 = (Array.from(t2.engineConfig.dbGroupMap.values()).sort(function(e3, t3) {
                return Number(e3.groupSeq) - Number(t3.groupSeq);
              }).forEach(function(e3) {
                var r3, i3 = e3.groupID, u4 = e3.groupName, l3 = e3.groupAvatarUrl;
                e3 = e3.groupSeq;
                n2.every(function(e4) {
                  return Object(o.d)(u4, e4);
                }) && (r3 = a3.filter(function(e4) {
                  return e4.ownerID == i3;
                }).map(function(e4) {
                  var r4 = t2.engineConfig.dbUserMap.get(e4.userID), n3 = e4.operatedUser;
                  return n3 && Object.assign(n3, Object(o.u)(n3.userID, t2.engineConfig)), { userID: e4.userID, userName: (null == r4 ? void 0 : r4.userName) || "", userAvatarUrl: (null == r4 ? void 0 : r4.userAvatarUrl) || "", memberNickname: e4.memberNickname || "", memberRole: e4.memberRole || 0, muteExpiredTime: e4.muteExpiredTime || 0, groupEnterInfo: { enterTime: e4.enterTime || 0, enterType: e4.enterType || s.K.Unknown, operatedUser: n3 } };
                }), c2.push({ groupInfo: { groupID: i3, groupName: u4, groupAvatarUrl: l3 }, userList: r3, seq: +e3 || 0 }));
              }), c2.length), d2 = t2.engineConfig.dbGroupMap.size, p2 = a3.length, h = 0, f = (h = e2.nextFlag ? c2.findIndex(function(t3) {
                return e2.nextFlag === t3.seq;
              }) + 1 : h) + Math.min(s.m.MAX_SEARCH_PAGE_COUNT, e2.count), g = c2[f], m = (c2 = c2.slice(h, f), g = g ? c2[c2.length - 1].seq : 0, c2.length);
              t2.logger.info(s.Y.Database, s.X.SearchGroups, { time: i2, dbCount: u3, start: h, end: f, total: l2, totalGroup: d2, totalUser: p2, count: m, nextFlag: g, config: e2 }), r2({ nextFlag: g, groupSearchInfoList: c2 });
            });
          });
        }, p.prototype.updateGroupVerifyMode = function(e2, t2, r2) {
          return this.createGroupInstance(t2).updateGroupVerifyMode(e2, r2);
        }, p.prototype.acceptGroupApply = function(e2, t2, r2, n2) {
          return this.createGroupInstance(r2).acceptApply(e2, t2, n2);
        }, p.prototype.rejectGroupApply = function(e2, t2, r2, n2) {
          var i2 = this, a2 = { time: /* @__PURE__ */ new Date() }, u2 = e2 ? s.X.RejectGroupJoinApp : s.X.RejectGroupInviteApp, d2 = e2 ? s.d.group_apply_reject : s.d.group_invite_reject;
          n2 = { group_id: r2, user_id: t2, offline_info: Object(o.g)(null == n2 ? void 0 : n2.pushConfig) };
          return this.connMgr.sendRequest(d2, n2).then(function(n3) {
            if (n3.code)
              return d3 = Object(o.x)(s.t.GroupModuleServerError, n3.message, n3.code), a2.error = d3, i2.logger.warn(l, u2, a2), Promise.reject(d3);
            var d3 = e2 ? s.F.Join : s.F.BeInvite, p2 = null == (p2 = i2.groupMap.get(r2)) ? void 0 : p2.dbGroupMemberMap.get(i2.engineConfig.user.userID), h = i2.engineConfig.dbGroupMap.get(r2), f = i2.dbGroupApplyMap.get(i2.getApplyID(d3, r2, t2)), g = e2 ? { groupID: r2, groupName: (null == h ? void 0 : h.groupName) || "", groupAvatarUrl: (null == h ? void 0 : h.groupAvatarUrl) || "" } : c(c({}, null == f ? void 0 : f.groupInfo), { groupID: r2 });
            d3 = { type: d3, state: s.E.Rejected, updateTime: n3.apply_group_info.update_time, createTime: 0, wording: "", seq: e2 ? (null == h ? void 0 : h.dataSeq) || 0 : (null == f ? void 0 : f.seq) || 0, groupInfo: g, applyUser: Object(o.u)(t2, i2.engineConfig), operatedUser: e2 ? c(c({}, Object(o.u)(i2.engineConfig.user.userID, i2.engineConfig)), { memberRole: p2 ? p2.memberRole : s.R.Admin, memberNickname: p2 ? p2.memberNickname : "" }) : void 0 };
            return i2.syncGroupApplyMap(r2, d3), i2.eventBus.emit(s.u.GroupAppUpd, { applicationList: [d3] }), i2.updateGroupApplySeq(e2 ? r2 : "", n3.apply_group_info.apply_list_seq), i2.logger.info(l, u2, a2), e2 ? { groupID: r2, userID: t2 } : { groupID: r2, inviterUserID: t2 };
          });
        }, p.prototype.queryGroupApplyList = function(e2) {
          var t2 = this;
          return new Promise(function(r2) {
            var n2 = { time: /* @__PURE__ */ new Date(), logined: t2.mergeListSeqs.groupApplyLogined, config: e2, count: 0 };
            t2.mergeListSeqs.groupApplyLogined ? t2.mergeServerGroupApplyList("", s.v.Biz, function() {
              r2(t2.handleQueryGroupApplysCallback(e2, n2));
            }) : t2.queryGroupApplysCallbackList.push({ config: e2, log: n2, resolve: r2 });
          });
        }, p.prototype.onPushGroupCreate = function(e2) {
          this.groupDelIDMap.delete(e2.group_id), this.createGroupInstance(e2.group_id, e2.group_name).onPushGroupCreate(e2);
        }, p.prototype.onPushGroupJoin = function(e2, t2) {
          var r2 = t2 ? s.P.Joined : s.P.Invited;
          t2 = t2 ? s.L.Joined : s.L.Invited;
          this.groupDelIDMap.delete(e2.group_id), this.createGroupInstance(e2.group_id, e2.group_name).onPushGroupJoin(e2, r2, t2);
        }, p.prototype.onPushGroupDestroy = function(e2, t2) {
          this.deleteGroup(e2, t2);
        }, p.prototype.onPushGroupDataModify = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushGroupDataModify(e2), this.engineConfig.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onPushGroupAttributesModify = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushGroupAttributesModify(e2), this.engineConfig.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onPushGroupOwnerTransfer = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushGroupOwnerTransfer(e2), this.engineConfig.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onPushGroupMemberChange = function(e2) {
          this.groupDelIDMap.delete(e2.group_id);
          var t2 = this.createGroupInstance(e2.group_id);
          t2.onPushMemberChange(e2), this.engineConfig.dbGroupMap.set(t2.groupID, t2.dbGroup);
        }, p.prototype.onPushGroupEnterApply = function(e2) {
          var t2 = this, r2 = e2.group_id, n2 = this.engineConfig.dbGroupMap.get(r2);
          if (n2) {
            for (var i2 = this.engineConfig.user.userID, a2 = [], u2 = [], l2 = [], d2 = [n2.groupAppSeq || 0], p2 = (e2.list.forEach(function(e3) {
              d2.push(e3.apply_list_seq);
              var p3, h, f, g, m, _, b = e3.apply_status;
              !b || b < 1 || 6 < b || (p3 = 1 == b || 3 == b || 4 == b ? s.F.Join : s.F.Invite) == s.F.Invite && e3.op_user.user_id != i2 || (h = (_ = e3.base_info).user_id, g = _.user_name, _ = _.avatar, Object(o.w)({ userID: h, userName: Object(o.h)(g), userAvatarUrl: Object(o.h)(_) }, t2.engineConfig), p3 == s.F.Join && e3.op_user && (_ = (g = e3.op_user).user_id, f = g.user_name, m = g.role, g = g.group_nick_name, (m = c(c({}, Object(o.u)(_, t2.engineConfig)), { memberRole: m, memberNickname: g })).userName || (m.userName = Object(o.h)(f))), _ = { type: p3, state: t2.getGroupApplyState(b), createTime: e3.create_time, updateTime: e3.update_time, wording: e3.wording, seq: n2.dataSeq, groupInfo: { groupID: r2, groupName: n2.groupName, groupAvatarUrl: n2.groupAvatarUrl }, applyUser: Object(o.u)(h, t2.engineConfig), operatedUser: m }, (t2.checkGroupApplyCreateTime(_) ? l2 : u2).push(_), a2.push(_));
            }), this.syncGroupApplyMap(r2), u2.length && (e2 = s.D.Added, this.eventBus.emit(s.u.GroupAppList, { action: e2, applicationList: u2 })), l2.length && this.eventBus.emit(s.u.GroupAppUpd, { applicationList: l2 }), d2.sort(function(e3, t3) {
              return e3 - t3;
            }), 0); p2 < d2.length && d2[p2] + 1 == d2[p2 + 1]; p2++)
              ;
            p2 && this.updateGroupApplySeq(r2, d2[p2], true);
          }
        }, p.prototype.onPushGroupApply = function(e2) {
          var t2, r2, n2, i2 = e2.apply_info.apply_status;
          !i2 || i2 < 1 || 6 < i2 || (t2 = 1 == i2 || 3 == i2 || 4 == i2 ? s.F.Join : s.F.BeInvite, n2 = (r2 = e2.apply_info).base_info.user_id, !e2.group_info || 3 != i2 && 5 != i2 || (e2.group_info.op_user = r2.op_user, this.onPushGroupJoin(e2.group_info, t2 == s.F.Join)), e2 = Object(o.u)(this.engineConfig.user.userID, this.engineConfig), r2.op_user && t2 == s.F.BeInvite && !(e2 = Object(o.u)(r2.op_user.user_id, this.engineConfig)).userName && (e2.userName = Object(o.h)(r2.op_user.user_name)), (i2 = { type: t2, state: this.getGroupApplyState(i2), updateTime: r2.update_time, createTime: r2.create_time, wording: r2.wording, seq: r2.base_info.update_time, groupInfo: { groupID: n2, groupName: r2.base_info.user_name, groupAvatarUrl: Object(o.h)(r2.base_info.avatar) }, applyUser: e2, operatedUser: t2 == s.F.Join && r2.op_user ? c(c({}, Object(o.u)(r2.op_user.user_id, this.engineConfig)), { memberRole: r2.op_user.role, memberNickname: r2.op_user.group_nick_name }) : void 0 }).operatedUser && !i2.operatedUser.userName && r2.op_user && (i2.operatedUser.userName = Object(o.h)(r2.op_user.user_name)), this.syncGroupApplyMap(n2, i2) ? this.eventBus.emit(s.u.GroupAppUpd, { applicationList: [i2] }) : (e2 = s.D.Added, this.eventBus.emit(s.u.GroupAppList, { action: e2, applicationList: [i2] })), this.updateGroupApplySeq("", r2.apply_list_seq));
        }, p.prototype.onLogined = function() {
          var e2 = this, t2 = this.settings.getRealClientTimestamp();
          this.engineConfig.dbGroupMap.forEach(function(t3) {
            return e2.initGroupInstance(t3);
          }), this.dbMgr.getGroupApplyList().then(function(r2) {
            var n2 = e2.engineConfig.mailHBConfig.apply_expired_duration;
            r2.forEach(function(r3) {
              r3.state == s.E.Waiting && t2 - r3.createTime > n2 && (r3.state = s.E.Expired);
              var i2 = ((i2 = r3.operatedUser) && Object.assign(i2, Object(o.u)(i2.userID, e2.engineConfig)), { type: r3.type, state: r3.state, createTime: r3.createTime, updateTime: r3.updateTime, wording: r3.wording, seq: r3.seq, groupInfo: r3.groupInfo, applyUser: Object(o.u)(r3.applyUser, e2.engineConfig), operatedUser: i2 }), a2 = e2.engineConfig.dbGroupMap.get(r3.groupInfo.groupID);
              a2 && (i2.seq = a2.dataSeq, i2.groupInfo.groupName = a2.groupName, i2.groupInfo.groupAvatarUrl = a2.groupAvatarUrl), e2.dbGroupApplyMap.set(r3.id, i2);
            });
          }), this.mergeListSeqs.groupLogined = false, this.mergeListSeqs.groupApplyLogined = false, this.mergeServerGroupList(s.v.SDKLogin, function(t3) {
            e2.mergeListSeqs.groupLogined = true, e2.queryGroupsCallbackList.forEach(function(r2) {
              return r2.resolve(e2.handleQueryGroupsCallback(t3, r2.log));
            }), e2.queryGroupsCallbackList.length = 0, e2.eventBus.exec(s.u.ISyncGroups, false), e2.syncGroupInfo(s.v.SDKLogin);
          }), this.mergeServerGroupApplyList("", s.v.SDKLogin, function() {
            e2.mergeListSeqs.groupApplyLogined = true, e2.queryGroupApplysCallbackList.forEach(function(t3) {
              return t3.resolve(e2.handleQueryGroupApplysCallback(t3.config, t3.log));
            }), e2.queryGroupApplysCallbackList.length = 0;
          });
        }, p.prototype.onLogout = function() {
          this.roomMap.forEach(function(e2) {
            return e2.destroy(true);
          }), this.groupMap.forEach(function(e2) {
            return e2.destroy();
          }), this.roomMap.clear(), this.groupMap.clear(), this.groupDelIDMap.clear(), this.dbGroupApplyMap.clear(), this.mergeListSeqs.groupLogined = false, this.mergeListSeqs.groupApplyLogined = false;
        }, p.prototype.onConnected = function() {
          var e2 = this;
          this.roomMap.forEach(function(t2) {
            t2.enter().then(function() {
              e2.clearRoomMessageByDestroy(t2), e2.eventBus.exec(s.u.IConnectedRoom, t2.groupID);
            });
          }), this.mergeServerGroupList(s.v.SDKHb, function() {
            e2.eventBus.exec(s.u.ISyncGroups, true), e2.syncGroupInfo(s.v.SDKHb);
          }), this.mergeServerGroupApplyList("", s.v.SDKHb);
        }, p.prototype.onDisConnected = function(e2) {
          this.roomMap.forEach(function(t2) {
            return t2.onDisConnected(e2);
          }), this.groupMap.forEach(function(e3) {
            return e3.onDisConnected();
          });
        }, p.prototype.syncGroupInfo = function(e2) {
          for (var t2 = this, r2 = Array.from(this.engineConfig.dbGroupMap.keys()), n2 = [], i2 = 0; i2 < r2.length; i2 += 100) {
            var a2 = { user_ids: r2.slice(i2, i2 + 100) };
            a2 = this.connMgr.sendRequest(s.d.group_infos, a2, s.j.SDK);
            n2.push(a2);
          }
          Promise.all(n2).then(function(r3) {
            r3.forEach(function(r4) {
              r4.group_infos && r4.group_infos.forEach(function(r5) {
                var n3, i3 = r5.group_id, a3 = t2.engineConfig.dbGroupMap.get(i3);
                1 == r5.type ? (t2.groupDelIDMap.set(i3, true), a3 && (t2.engineConfig.dbGroupMap.delete(i3), t2.eventBus.exec(s.u.ILeftGroup, i3))) : a3 && (a3.groupName = r5.group_name, a3.groupAvatarUrl = Object(o.h)(r5.group_avatar), a3.totalMemberCount = r5.member_count, n3 = t2.initGroupInstance(a3), (!a3.dataSeq || r5.group_data_seq > a3.dataSeq) && t2.connMgr.sendRequest(s.d.group_data, { group_id: i3 }).then(function(e3) {
                  e3.code || n3.queryGroupInfoCallback(e3);
                }), (!a3.memberSeq || r5.all_member_seq > a3.memberSeq) && n3.mergeServerMemberList(e2), (r5 = r5.user_apply_list_seq) && (r5 > a3.groupAppSeq || !a3.groupAppSeq) && t2.mergeServerGroupApplyList(i3, e2));
              });
            });
          });
        }, p.prototype.handleQueryGroupsCallback = function(e2, t2) {
          var r2 = this, n2 = [];
          return e2.forEach(function(e3) {
            r2.groupDelIDMap.get(e3.groupID) || (n2.push({ baseInfo: { groupID: e3.groupID, groupName: e3.groupName, groupAvatarUrl: e3.groupAvatarUrl }, notificationStatus: e3.notificationStatus }), r2.createGroupInstance(e3.groupID));
          }), t2.count = n2.length, this.logger.info(l, s.X.QueryGroupList, t2), { groupList: n2 };
        }, p.prototype.handleQueryGroupApplysCallback = function(e2, t2) {
          (o2 = Array.from(this.dbGroupApplyMap.values())).sort(function(e3, t3) {
            return t3.createTime - e3.createTime;
          });
          var r2 = o2.length, n2 = e2.nextFlag || 0, i2 = (e2 = n2 + e2.count) < r2 ? e2 : 0, o2 = o2.slice(n2, e2);
          return Object.assign(t2, { start: n2, end: e2, total: r2, count: o2.length, nextFlag: i2 }), this.logger.info(l, s.X.QueryGroupApp, t2), { applicationList: o2, nextFlag: i2 };
        }, p.prototype.registerInnerEvent = function() {
          this.eventBus.add(s.u.ILogined, this.onLogined.bind(this)), this.eventBus.add(s.u.ILogout, this.onLogout.bind(this)), this.eventBus.add(s.u.IConnected, this.onConnected.bind(this)), this.eventBus.add(s.u.IDisConnected, this.onDisConnected.bind(this));
        }, p.prototype.createRoomInstance = function(e2) {
          var t2 = this.findRoom(e2);
          return t2 || (t2 = new u.a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), this.roomMap.set(e2, t2), this.roomIDs.add(e2)), t2;
        }, p.prototype.createGroupInstance = function(e2, t2, r2) {
          var n2 = this.groupMap.get(e2);
          return n2 || (n2 = new a.a(e2, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), this.groupMap.set(e2, n2), e2 = this.engineConfig.dbGroupMap.get(e2) || { id: this.engineConfig.user.userID + e2, ownerID: this.engineConfig.user.userID, groupID: e2, groupName: t2 || "", groupAvatarUrl: r2 || "", groupNotice: "", notificationStatus: s.T.Notify, attributes: {}, mutedInfo: { mode: 0, expiredTime: 0, roles: [] }, verifyInfo: { joinMode: s.N.Any, inviteMode: s.M.Any, beInviteMode: s.I.None }, createTime: 0, maxMemberCount: 0, totalMemberCount: 0, dataSeq: 0, attributeSeq: 0, memberSeq: 0, groupSeq: "0", groupAppSeq: 0 }, n2.setDBGroup(this.dbGroupApplyMap, e2)), t2 && (n2.dbGroup.groupName = t2), r2 && (n2.dbGroup.groupAvatarUrl = r2), n2;
        }, p.prototype.initGroupInstance = function(e2) {
          var t2 = this.groupMap.get(e2.groupID);
          return t2 || (t2 = new a.a(e2.groupID, this.engineConfig, this.eventBus, this.dbMgr, this.connMgr), e2.dataSeq || (e2.dataSeq = 0), e2.attributeSeq || (e2.attributeSeq = 0), e2.memberSeq || (e2.memberSeq = 0), e2.groupSeq || (e2.groupSeq = "0"), t2.setDBGroup(this.dbGroupApplyMap, e2), this.groupMap.set(e2.groupID, t2)), t2;
        }, p.prototype.clearRoomMessageByLeave = function(e2, t2, r2) {
          var n2 = this;
          t2 = t2 ? 1e3 * t2 : 0, setTimeout(function() {
            var t3 = n2.findRoom(e2);
            t3 && t3.state != s.mb.Disconnected || ((t3 = n2.engineConfig.dbConvMap.get(n2.engineConfig.user.userID + s.r.Room + e2)) && (t3.maxSeq = 0, t3.msgSeq = 0, t3.maxOrderKey = 0), n2.roomIDs.delete(e2), r2.clearRoomMessage([e2], false));
          }, t2);
        }, p.prototype.clearRoomMessageByDestroy = function(e2) {
          var t2 = this.engineConfig.dbConvMap.get(this.engineConfig.user.userID + s.r.Room + e2.groupID);
          t2 && t2.roomSessionID != e2.sessionID.toString() && (t2.maxSeq = 0, t2.msgSeq = 0, t2.maxOrderKey = 0, t2.roomSessionID = e2.sessionID.toString(), this.dbMgr.addConversationList([t2], "clearRoomMsg"), this.dbMgr.clearRoomMessage([e2.groupID], true));
        }, p.prototype.deleteGroup = function(e2, t2) {
          var r2, n2, i2, a2, u2, c2 = e2.group_id, l2 = this.groupMap.get(c2);
          l2 && (this.groupMap.delete(c2), e2.op_user || (e2.op_user = { user_id: this.engineConfig.user.userID, user_name: this.engineConfig.user.userName }), e2.op_user.role || (i2 = l2.dbGroupMemberMap.get(e2.op_user.user_id)) && (e2.op_user.role = i2.memberRole, e2.op_user.group_nick_name = i2.memberNickname), a2 = (i2 = e2.op_user).user_id, n2 = i2.user_name, u2 = i2.group_nick_name, i2 = i2.role, a2 = { userID: a2 }, n2 && (a2.userName = Object(o.h)(n2)), u2 && (a2.memberNickname = u2), i2 && (a2.memberRole = i2), n2 = a2, u2 = Object(o.t)(l2.dbGroupMemberMap.get(this.engineConfig.user.userID), this.engineConfig), t2 == s.L.KickedOut && (r2 = [{ userID: u2.userID, userName: u2.userName, memberNickname: u2.memberNickname, memberRole: u2.memberRole }]), this.eventBus.emit(s.u.GroupMemberState, { groupID: c2, state: s.S.Quit, event: t2 === s.L.KickedOut ? s.P.KickedOut : s.P.Left, userList: [u2], operatedInfo: a2 }), this.eventBus.emit(s.u.GroupState, { state: s.V.Quit, event: t2, groupInfo: l2.createGroupFullInfo(), operatedInfo: a2 }), l2.destroy()), this.dbMgr.deleteGroupList([c2]), this.groupDelIDMap.set(c2, true), this.engineConfig.dbGroupMap.delete(c2), this.updateGroupSeq(e2.conv_list_seq), this.eventBus.exec(s.u.ILeftGroup, c2, t2, n2, r2);
        }, p.prototype.quitGroup = function(e2, t2, r2, n2) {
          var i2 = this, a2 = { time: /* @__PURE__ */ new Date(), groupID: e2 };
          return this.connMgr.sendRequest(t2, { group_id: e2 }).then(function(u2) {
            var c2;
            return u2.code ? (c2 = Object(o.x)(n2, u2.message, u2.code), a2.error = c2, i2.logger.warn(l, r2, a2), Promise.reject(c2)) : (u2.group_id = e2, u2.op_user = { user_id: i2.engineConfig.user.userID, user_name: i2.engineConfig.user.userName }, i2.deleteGroup(u2, t2 === s.d.group_destroy ? s.L.Dismissed : s.L.Left), i2.logger.info(l, r2, a2), { groupID: e2 });
          });
        }, p.prototype.fetchServerPageGroup = function(e2, t2, r2, n2) {
          return e2 = { cur_list_seq: e2, count: 100, full_pull: n2, degree: t2, how: r2 }, 1 == t2 && (n2 = this.mergeListSeqs.group, this.dataReport.beginNetworkRequest(s.d.group_list.cmd, n2, s.j.SDK, e2)), this.connMgr.sendRequest(s.d.group_list, e2, s.j.SDK).then(function(e3) {
            if (e3.code)
              return { list: [] };
            var t3 = e3.cur_list_seq, r3 = e3.max_list_seq, n3 = e3.fetch_end, i2 = e3.full_list;
            return { nextFlag: n3 || t3 && r3 && t3.greaterThanOrEqual(r3) ? 0 : t3, cur: t3, max: r3, list: e3.groups, fetch_end: n3, full_list: i2 };
          });
        }, p.prototype.fetchServerPageGroupApply = function(e2, t2, r2, n2) {
          var i2 = e2 ? s.d.group_apply_list : s.d.group_self_apply_list, o2 = n2 == s.v.Biz ? s.j.API : s.j.SDK;
          e2 = { group_id: e2, cur_list_seq: t2, count: 100, full_pull: r2, how: n2 };
          return 1 == r2 && (t2 = this.mergeListSeqs.groupApply, this.dataReport.beginNetworkRequest(i2.cmd, t2, o2, e2)), this.connMgr.sendRequest(i2, e2, s.j.SDK).then(function(e3) {
            if (e3.code)
              return { cmd: i2.cmd, list: [] };
            var t3 = e3.cur_list_seq, r3 = e3.max_list_seq, n3 = e3.fetch_end;
            return { nextFlag: n3 || t3 && r3 && r3 <= t3 ? 0 : t3, cur: t3, max: r3, list: e3.list, fetch_end: n3, cmd: i2.cmd };
          });
        }, p.prototype.mergeServerGroupList = function(e2, t2) {
          var r2 = this, i2 = n.a.fromString(String(this.engineConfig.user.groupSeq) || "0"), a2 = this.engineConfig.mailHBConfig.group_list_seq;
          if (!this.engineConfig.mailHBConfig.fetch_group_list || !a2 || a2.lessThanOrEqual(i2))
            return t2 && t2(Array.from(this.engineConfig.dbGroupMap.values()));
          var u2 = { time: /* @__PURE__ */ new Date(), dbSeq: i2, hbSeq: a2, how: e2 }, c2 = 0, d2 = 0, p2 = this.engineConfig.dbGroupMap.size, h = ++this.mergeListSeqs.group, f = 1, g = [], m = function(n2) {
            var i3, _;
            c2 += n2.list.length, n2.list.forEach(function(t3) {
              var n3, i4, a3, u3, c3, l2 = t3.group_id, p3 = t3.group_name;
              1 == t3.type ? (d2++, r2.groupDelIDMap.set(l2, true), r2.engineConfig.dbGroupMap.has(l2) && (r2.engineConfig.dbGroupMap.delete(l2), r2.eventBus.exec(s.u.ILeftGroup, l2), e2 == s.v.SDKHb && g.push({ state: s.V.Quit, event: s.L.Left, operatedInfo: {}, groupInfo: { baseInfo: { groupID: l2, groupName: p3 } } }))) : (n3 = Object(o.h)(t3.group_avatar), i4 = t3.member_count, a3 = t3.not_notify ? s.T.Disturb : s.T.Notify, c3 = r2.engineConfig.dbGroupMap.has(l2), u3 = r2.engineConfig.dbGroupMap.get(l2) || { id: r2.engineConfig.user.userID + l2, ownerID: r2.engineConfig.user.userID, groupID: l2, groupName: p3, groupAvatarUrl: n3, notificationStatus: a3, totalMemberCount: i4, groupNotice: "", attributes: {}, mutedInfo: { mode: 0, expiredTime: 0, roles: [] }, verifyInfo: { joinMode: s.N.Any, inviteMode: s.M.Any, beInviteMode: s.I.None }, createTime: 0, maxMemberCount: 0, dataSeq: 0, attributeSeq: 0, memberSeq: 0, groupSeq: "0", groupAppSeq: 0 }, c3 ? (u3.groupName = p3, u3.notificationStatus = a3, n3 && (u3.groupAvatarUrl = n3), i4 && (u3.totalMemberCount = i4)) : (r2.engineConfig.dbGroupMap.set(l2, u3), e2 == s.v.SDKHb && g.push({ state: s.V.Enter, event: s.L.Joined, operatedInfo: {}, groupInfo: { baseInfo: { groupID: l2, groupName: p3, groupAvatarUrl: n3 }, notificationStatus: a3 } })), u3.attributes || (u3.attributes = {}), (c3 = t3.user_apply_list_seq) && (c3 > u3.groupAppSeq || !u3.groupAppSeq) && r2.mergeServerGroupApplyList(l2, e2));
            }), n2.nextFlag && r2.engineConfig.token ? r2.fetchServerPageGroup(n2.nextFlag, ++f, e2, n2.full_list ? 1 : 0).then(m) : (n2.degree = f, n2.svrCount = c2, r2.groupDelIDMap.size && ((i3 = Array.from(r2.groupDelIDMap.keys())).forEach(function(e3) {
              return r2.engineConfig.dbGroupMap.delete(e3);
            }), r2.dbMgr.deleteGroupList(i3)), (i3 = n2.full_list ? n2.max : n2.cur) && "0" == i3.toString() && (i3 = a2), r2.updateGroupSeq(i3, true), i3 = Array.from(r2.engineConfig.dbGroupMap.values()), r2.dbMgr.addGroupList(i3), g.length && g.forEach(function(e3) {
              return r2.eventBus.emit(s.u.GroupState, e3);
            }), u2.dbCount = p2, u2.count = r2.engineConfig.dbGroupMap.size, u2.svrDelCount = d2, _ = JSON.stringify({ dbCount: p2, svrDelCount: d2, rspCount: r2.engineConfig.dbGroupMap.size }), u2.dataReport = r2.dataReport.endNetworkRequest(s.d.group_list.cmd, h, n2, _), r2.logger.info(l, "mergeSvrGroups", u2), t2 && t2(i3));
          };
          this.fetchServerPageGroup(i2, f, e2, 0).then(m);
        }, p.prototype.mergeServerGroupApplyList = function(e2, t2, r2) {
          var n2 = this, i2 = e2 ? (null == (i2 = this.engineConfig.dbGroupMap.get(e2)) ? void 0 : i2.groupAppSeq) || 0 : this.engineConfig.user.groupAppSeq || 0, a2 = this.engineConfig.mailHBConfig.group_apply_list_seq;
          if (!e2 && (!a2 || a2 <= i2))
            return r2 && r2();
          var u2 = { time: /* @__PURE__ */ new Date(), dbSeq: i2, hbSeq: a2, how: t2, dbCount: this.dbGroupApplyMap.size }, d2 = this.engineConfig.mailHBConfig.apply_expired_duration, p2 = this.engineConfig.user.userID, h = ++this.mergeListSeqs.groupApply, f = 0, g = 1, m = 0, _ = { groupID: e2, groupName: "", groupAvatarUrl: "" }, b = (e2 && (a2 = this.engineConfig.dbGroupMap.get(e2), m = (null == a2 ? void 0 : a2.dataSeq) || 0, _.groupName = (null == a2 ? void 0 : a2.groupName) || "", _.groupAvatarUrl = (null == a2 ? void 0 : a2.groupAvatarUrl) || ""), function(i3) {
            var a3 = n2.settings.getRealClientTimestamp();
            i3.list.forEach(function(t3) {
              var r3, i4, u3, l2 = null == t3 ? void 0 : t3.apply_status;
              !l2 || l2 < 1 || 6 < l2 || (r3 = 1 == l2 || 3 == l2 || 4 == l2 ? s.F.Join : e2 ? s.F.Invite : s.F.BeInvite) == s.F.Invite && t3.op_user.user_id != p2 || (f += 1, i4 = e2 || t3.base_info.user_id, r3 != s.F.Join || e2 ? r3 == s.F.BeInvite ? (u3 = t3.op_user.user_id).userName || (u3.userName = Object(o.h)(t3.op_user.user_name)) : (u3 = Object(o.u)(t3.base_info.user_id, n2.engineConfig)).userName || (u3.userName = Object(o.h)(t3.base_info.user_name)) : u3 = Object(o.u)(p2, n2.engineConfig), (l2 = { type: r3, state: n2.getGroupApplyState(l2), createTime: t3.create_time, updateTime: t3.update_time, wording: t3.wording || "", seq: e2 ? m : t3.base_info.update_time, groupInfo: e2 ? _ : { groupID: i4, groupName: Object(o.h)(t3.base_info.user_name), groupAvatarUrl: Object(o.h)(t3.base_info.avatar) }, applyUser: u3, operatedUser: r3 == s.F.Join && t3.op_user ? c(c({}, Object(o.u)(t3.op_user.user_id, n2.engineConfig)), { memberRole: t3.op_user.role, memberNickname: t3.op_user.group_nick_name }) : void 0 }).operatedUser && !l2.operatedUser.userName && t3.op_user && (l2.operatedUser.userName = Object(o.h)(t3.op_user.user_name)), l2.state == s.E.Waiting && a3 - l2.createTime > d2 && (l2.state = s.E.Expired), n2.dbGroupApplyMap.set(n2.getApplyID(r3, i4, u3.userID), l2));
            }), i3.nextFlag && n2.engineConfig.token ? n2.fetchServerPageGroupApply(e2, i3.nextFlag, ++g, t2).then(b) : (i3.degree = g, i3.svrCount = f, n2.updateGroupApplySeq(e2, i3.cur, true), 0 < f && n2.dbMgr.addGroupApplyList(Array.from(n2.dbGroupApplyMap.values())), u2.count = n2.dbGroupApplyMap.size, u2.dataReport = n2.dataReport.endNetworkRequest(i3.cmd, h, i3), n2.logger.info(l, "mergeSvrGroupApplys", u2), r2 && r2());
          });
          this.fetchServerPageGroupApply(e2, i2, g, t2).then(b);
        }, p.prototype.updateGroupSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          !e2 || !t2 && +r2.groupSeq && r2.groupSeq != e2.sub(1).toString() || (r2.groupSeq = e2.toString(), this.dbMgr.setUser(r2));
        }, p.prototype.updateGroupApplySeq = function(e2, t2, r2) {
          e2 ? (e2 = this.engineConfig.dbGroupMap.get(e2)) && t2 && (r2 || !e2.groupAppSeq || e2.groupAppSeq + 1 == t2) && (e2.groupAppSeq = t2, this.dbMgr.addGroupList([e2])) : (e2 = this.engineConfig.user, !t2 || !r2 && e2.groupAppSeq && e2.groupAppSeq + 1 != t2 || (e2.groupAppSeq = t2, this.dbMgr.setUser(e2)));
        }, p.prototype.createNoRoomError = function(e2, t2) {
          var r2;
          if (!this.findRoom(e2))
            return r2 = Object(o.x)(s.t.RoomModuleUserIsNotInTheRoom), this.logger.warn(s.Y.Room, t2, { error: r2, roomID: e2 }), r2;
        }, p.prototype.getApplyID = function(e2, t2, r2) {
          return e2 + "_" + t2 + "_" + r2;
        }, p.prototype.getGroupApplyState = function(e2) {
          return 1 == e2 || 2 == e2 ? s.E.Waiting : 3 == e2 || 5 == e2 ? s.E.Accepted : 4 == e2 || 6 == e2 ? s.E.Rejected : s.E.Disabled;
        }, p.prototype.checkGroupApplyCreateTime = function(e2) {
          var t2 = this.getApplyID(e2.type, e2.groupInfo.groupID, e2.applyUser.userID), r2 = this.dbGroupApplyMap.get(t2);
          return this.dbGroupApplyMap.set(t2, e2), r2 && (e2.wording = e2.wording || r2.wording, !r2.createTime || e2.createTime && r2.state != s.E.Accepted && r2.state != s.E.Rejected || (e2.createTime = r2.createTime)), !!r2;
        }, p.prototype.syncGroupApplyMap = function(e2, t2) {
          t2 = !!t2 && this.checkGroupApplyCreateTime(t2);
          var r2 = Array.from(this.dbGroupApplyMap.values()).filter(function(t3) {
            return t3.groupInfo.groupID == e2;
          }), n2 = r2[0];
          return r2.forEach(function(e3) {
            e3.seq > n2.seq && (n2 = e3);
          }), r2.forEach(function(e3) {
            e3.seq = n2.seq, e3.groupInfo = n2.groupInfo;
          }), this.dbMgr.addGroupApplyList(r2), t2;
        }, p);
        function p(e2, t2, r2, n2) {
          this.logger = i.a.getInstance().logger, this.dataReport = i.a.getInstance().dataReport, this.settings = i.a.getInstance().settings, this.mergeListSeqs = { group: 0, groupLogined: false, groupApply: 0, groupApplyLogined: false }, this.queryGroupsCallbackList = [], this.queryGroupApplysCallbackList = [], this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = n2, this.roomIDs = /* @__PURE__ */ new Set(), this.roomMap = /* @__PURE__ */ new Map(), this.groupMap = /* @__PURE__ */ new Map(), this.groupDelIDMap = /* @__PURE__ */ new Map(), this.dbGroupApplyMap = /* @__PURE__ */ new Map(), this.registerInnerEvent();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(2), i = r(1), o = r(0), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, a = (t = function(e2, t2, r2, n2) {
          var i2, o2 = arguments.length, s2 = o2 < 3 ? t2 : null === n2 ? n2 = Object.getOwnPropertyDescriptor(t2, r2) : n2;
          if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
            s2 = Reflect.decorate(e2, t2, r2, n2);
          else
            for (var a2 = e2.length - 1; 0 <= a2; a2--)
              (i2 = e2[a2]) && (s2 = (o2 < 3 ? i2(s2) : 3 < o2 ? i2(t2, r2, s2) : i2(t2, r2)) || s2);
          return 3 < o2 && s2 && Object.defineProperty(t2, r2, s2), s2;
        }, o.Y.Room), u = (c.prototype.destroy = function(e2) {
          this.stopHB(), this.reset(), e2 && this.state !== o.mb.Disconnected && this.emitRoomStateChanged(o.mb.Disconnected, o.lb.Success), this.dbMgr = null, this.connMgr = null, this.eventBus = null, this.engineConfig = null;
        }, c.prototype.create = function(e2, t2, r2) {
          var n2 = this, u2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, roomName: e2, state: this.state, config: t2 }, c2 = (this.state == o.mb.Disconnected && this.emitRoomStateChanged(o.mb.Connecting, o.lb.ActiveCreate), { room_id: this.groupID, room_name: Object(i.k)(e2) });
          return r2 && (c2.create_if_not_exist = true), this.addRoomAttributes(c2, t2), this.connMgr.sendRequest(r2 ? o.d.room_enter : o.d.room_create, c2).then(function(c3) {
            var l, d, p, h = c3.code;
            return h ? (l = Object(i.x)(o.t.RoomModuleCreateRoomError, c3.message, h), p = n2.state == o.mb.Connected && 103032 == h ? o.mb.Connected : o.mb.Disconnected, d = 6000104 === h ? o.lb.NetworkDisconnected : o.lb.CreateFailed, n2.emitRoomStateChanged(p, p == o.mb.Connected ? o.lb.ActiveCreate : d), u2.state_ = n2.state, u2.error = l, n2.logger.warn(a, r2 ? o.X.EnterRoom : o.X.CreateRoom, u2), 51011 == h && (n2.stopHB(), n2.reset()), Promise.reject(l)) : (n2.groupName = e2, n2.subRoomID = c3.sub_room_id, n2.sessionID = c3.room_session_id, n2.userSessionID = c3.room_user_session_id, n2.enabledOfflineMsg = !!c3.enabled_offline_msg, n2.emitRoomStateChanged(o.mb.Connected, o.lb.Success), r2 || (n2.localSeq = 1), n2.totalMemberCount = c3.user_count || 1, n2.startHB(c3.room_info_interval), n2.mergeConfig.listPullInterval = c3.userlist_interval, n2.mergeConfig.listMergeTimeout = c3.userlist_merge_timeout, n2.mergeConfig.attrPullInterval = c3.attributes_pull_interval, n2.mergeConfig.attrMergeTimeout = c3.attributes_merge_timeout, n2.isMergeUser = 1 == c3.userlist_enable, n2.destroyDelay = c3.destroy_delay || 0, n2.isMergeUser && (r2 && c3.userlist_seq != n2.localSeq ? n2.fetchAllUser() : (p = { userID: n2.engineConfig.user.userID, userName: n2.engineConfig.user.userName, userAvatarUrl: n2.engineConfig.user.userAvatarUrl }, n2.userMap.set(p.userID, p), n2.eventBus.emit(o.u.RoomMemberJoined, { roomID: n2.groupID, memberList: [s({}, p)] }))), n2.emitRoomAttributesUpdated(c3.attributes, true, t2), u2.state_ = n2.state, n2.logger.info(a, r2 ? o.X.EnterRoom : o.X.CreateRoom, u2), { roomInfo: { baseInfo: { roomID: n2.groupID, roomName: e2 } } });
          });
        }, c.prototype.enter = function() {
          var e2 = this;
          if (this.state === o.mb.Connected)
            return r2 = { roomID: this.groupID, roomName: this.groupName, state: this.state }, this.logger.info(a, o.X.JoinRoom, r2), Promise.resolve({ roomInfo: { baseInfo: { roomID: this.groupID, roomName: this.groupName } } });
          this.state !== o.mb.Connecting && this.emitRoomStateChanged(o.mb.Connecting, o.lb.ActiveEnter);
          var t2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, state: this.state }, r2 = { room_id: this.groupID, room_name: this.groupName ? Object(i.k)(this.groupName) : void 0, room_user_session_id: this.userSessionID || 0 };
          return this.connMgr.sendRequest(o.d.room_enter, r2).then(function(r3) {
            var n2;
            return r3.code ? (n2 = Object(i.x)(o.t.RoomModuleJoinRoomError, r3.message, r3.code), e2.emitRoomStateChanged(o.mb.Disconnected, 6000104 === r3.code ? o.lb.NetworkDisconnected : o.lb.EnterFailed), t2.state_ = e2.state, t2.error = n2, e2.logger.warn(a, o.X.JoinRoom, t2), 51011 == r3.code && (e2.stopHB(), e2.reset()), Promise.reject(n2)) : (e2.groupName = Object(i.h)(r3.room_name), e2.subRoomID = r3.sub_room_id, e2.sessionID = r3.room_session_id, e2.userSessionID = r3.room_user_session_id, e2.enabledOfflineMsg = !!r3.enabled_offline_msg, e2.emitRoomStateChanged(o.mb.Connected, o.lb.Success), e2.totalMemberCount = r3.user_count, e2.startHB(r3.room_info_interval), e2.mergeConfig.listPullInterval = r3.userlist_interval, e2.mergeConfig.listMergeTimeout = r3.userlist_merge_timeout, e2.mergeConfig.attrPullInterval = r3.attributes_pull_interval, e2.mergeConfig.attrMergeTimeout = r3.attributes_merge_timeout, e2.isMergeUser = 1 == r3.userlist_enable, e2.destroyDelay = r3.destroy_delay || 0, e2.isMergeUser && r3.userlist_seq != e2.localSeq && e2.fetchAllUser(), e2.emitRoomAttributesUpdated(r3.attributes), t2.state_ = e2.state, t2.roomName = e2.groupName, e2.logger.info(a, o.X.JoinRoom, t2), { roomInfo: { baseInfo: { roomID: e2.groupID, roomName: e2.groupName } } });
          });
        }, c.prototype.quit = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, state: this.state };
          if (this.state === o.mb.Disconnected)
            return this.logger.info(a, o.X.LeaveRoom, t2), this.destroy(false), Promise.resolve();
          var r2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID };
          return this.connMgr.sendRequest(o.d.room_quit, r2).then(function(r3) {
            if (r3.code)
              return r3 = Object(i.x)(o.t.RoomModuleLeaveRoomError, r3.message, r3.code), t2.state_ = e2.state, t2.error = r3, e2.logger.warn(a, o.X.LeaveRoom, t2), Promise.reject(r3);
            e2.emitRoomStateChanged(o.mb.Disconnected, o.lb.Success), t2.state_ = e2.state, e2.logger.info(a, o.X.LeaveRoom, t2), e2.destroy(false);
          });
        }, c.prototype.queryPageMember = function(e2) {
          var t2 = this, r2 = s({ time: /* @__PURE__ */ new Date(), roomID: this.groupID }, e2), n2 = ++this.mergeMemberListSeq + this.groupID;
          return this.fetchServerPageUser(0 | e2.count, e2.nextFlag, o.j.API, n2).then(function(e3) {
            t2.logger.info(a, o.X.QueryRoomMemberList, r2), e3.svrCount = (null == (i2 = e3.users) ? void 0 : i2.length) || 0, t2.dataReport.endNetworkRequest(o.d.room_userlist.cmd, n2, e3);
            var i2 = e3.users.map(function(e4) {
              return t2.createUser(e4);
            });
            return { roomID: t2.groupID, memberList: i2, nextFlag: e3.pos_flag };
          });
        }, c.prototype.queryRoomMembers = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, userIDs: e2 }, n2 = [];
          e2 = e2.filter(function(e3) {
            return !!Object(i.n)(e3) || (n2.push({ userID: e3, reason: 6000001 }), false);
          }), e2 = Array.from(new Set(e2)), e2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, user_ids: e2 };
          return this.connMgr.sendRequest(o.d.room_userinfos, e2).then(function(e3) {
            if (e3.code)
              return s2 = Object(i.x)(o.t.RoomModuleTheRoomMemberQueryFailed, e3.message, e3.code), r2.error = s2, t2.logger.warn(a, o.X.QueryRoomMembers, r2), Promise.reject(s2);
            e3.err_list.forEach(function(e4) {
              return n2.push({ userID: e4.user_id, reason: e4.sub_code });
            });
            var s2 = e3.result.map(function(e4) {
              return t2.createUser(e4);
            });
            return t2.logger.info(a, o.X.QueryRoomMembers, r2), { roomID: t2.groupID, memberList: s2, errorUserList: n2 };
          });
        }, c.prototype.queryMemberCount = function() {
          var e2 = { roomID: this.groupID, count: this.totalMemberCount };
          return this.logger.info(a, o.X.QueryRoomOnlineMemberCount, e2), Promise.resolve(e2);
        }, c.prototype.queryRoomAllAttributes = function(e2) {
          var t2 = this, r2 = (void 0 === e2 && (e2 = false), { time: /* @__PURE__ */ new Date(), roomID: this.groupID }), n2 = (this.queryAttrFlag = true, (/* @__PURE__ */ new Date()).getTime()), s2 = 0, u2 = (this.queryAttrTask.length && (u2 = this.queryAttrTask[this.queryAttrTask.length - 1], n2 - u2 < this.mergeConfig.attrPullInterval && (s2 = this.mergeConfig.attrPullInterval - (n2 - u2) + 10)), this.queryAttrTask.push(n2), { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, attributes: { attribute_seq: this.stRoomAttributes.attribute_seq || 0, attributes: [] } }), c2 = this.connMgr.sendRequest(o.d.room_attr, u2).then(function(s3) {
            var u3;
            return s3.code ? (u3 = Object(i.x)(o.t.RoomModuleRoomAttributesQueryFailed, s3.message, s3.code), r2.error = u3, t2.logger.warn(a, o.X.QueryRoomAllAttributes, r2), Promise.reject(u3)) : (t2.queryAttrTask = t2.queryAttrTask.filter(function(e3) {
              return e3 !== n2;
            }), t2.queryRoomAllAttributesRspHandle(s3, e2));
          });
          return s2 ? new Promise(function(e3) {
            setTimeout(function() {
              t2.connMgr && c2.then(e3);
            }, s2);
          }) : c2;
        }, c.prototype.setRoomAttributes = function(e2, t2) {
          var r2 = this;
          if (this.batchFlag)
            return new Promise(function(t3, n3) {
              return r2.batchRoomAttributesHandle(e2, [], t3, n3);
            });
          var n2, i2, o2 = [];
          for (n2 in e2)
            n2 && (i2 = { action: 0, attribute: { key: n2, value: e2[n2].toString(), seq: this.attrItemSeq++, auto_delete: t2.isDeleteAfterOwnerLeft ? 1 : 0 } }, this.localAttrKeySeqMap[n2] = i2.attribute.seq, o2.push(i2));
          var s2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, force_modify: t2.isForce ? 1 : 0, set_member: t2.isUpdateOwner ? 1 : 0, attributes_seq: this.stRoomAttributes.attribute_seq || 0, op_fail_fast: 0, attributes: o2 };
          return this.modifyRoomAttributes(e2, s2);
        }, c.prototype.deleteRoomAttributes = function(e2, t2) {
          var r2 = this;
          if (this.batchFlag)
            return new Promise(function(t3, n3) {
              return r2.batchRoomAttributesHandle({}, e2, t3, n3);
            });
          var n2 = [];
          e2.forEach(function(e3) {
            var t3 = r2.stRoomAttributes.attributes.find(function(t4) {
              return t4.key == e3;
            });
            t3 = { action: 1, attribute: { key: e3, value: (null == t3 ? void 0 : t3.value) || "", seq: r2.attrItemSeq++, auto_delete: 1 } };
            r2.localAttrKeySeqMap[e3] = t3.attribute.seq, n2.push(t3);
          }), t2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, force_modify: t2.isForce ? 1 : 0, set_member: 1, attributes_seq: this.stRoomAttributes.attribute_seq || 0, op_fail_fast: 0, attributes: n2 };
          return this.modifyRoomAttributes({}, t2);
        }, c.prototype.beginRoomAttributesBatchOperation = function(e2) {
          this.batchFlag = true, this.batchOperationConfig = e2, this.batchRoomAttributes.length = 0;
        }, c.prototype.endRoomAttributesBatchOperation = function() {
          var e2, t2 = this, r2 = { time: /* @__PURE__ */ new Date(), roomID: this.groupID, attributes: this.batchRoomAttributes }, n2 = (this.batchFlag = false, []), s2 = {};
          return this.batchRoomAttributes.length ? (this.batchRoomAttributes.forEach(function(e3) {
            var r3 = { action: e3.action, attribute: { key: e3.key, value: e3.value.toString(), seq: t2.attrItemSeq++, auto_delete: t2.batchOperationConfig.isDeleteAfterOwnerLeft ? 1 : 0 } };
            e3.action || (s2[e3.key] = e3.value), t2.localAttrKeySeqMap[r3.attribute.key] = r3.attribute.seq, n2.push(r3);
          }), r2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, force_modify: this.batchOperationConfig.isForce ? 1 : 0, set_member: this.batchOperationConfig.isUpdateOwner ? 1 : 0, attributes_seq: this.stRoomAttributes.attribute_seq || 0, op_fail_fast: 1, attributes: n2 }, this.modifyRoomAttributes(s2, r2, true).then(function() {
            return t2.batchOperationConfig = null, t2.batchRoomAttributes.length = 0, t2.batchAttributesMap.clear(), t2.batchIndex = 0, { roomID: t2.groupID };
          })) : (e2 = Object(i.x)(o.t.RoomModuleRoomAttributesOperationFailedCompletely), r2.error = e2, this.logger.warn(a, o.X.EndRoomAttributesBatchOperation, r2), Promise.reject(e2));
        }, c.prototype.setRoomMembersAttributes = function(e2, t2, r2) {
          var n2, s2 = this, u2 = { roomID: this.groupID, attributes: e2, userIDs: t2, config: r2 }, c2 = [], l = (t2 = t2.filter(function(e3) {
            return !!Object(i.n)(e3) || (c2.push(e3), false);
          }), t2 = Array.from(new Set(t2)), { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, force_modify: 1, auto_save: null == r2.isDeleteAfterOwnerLeft || r2.isDeleteAfterOwnerLeft ? 0 : 1, op_fail_fast: 0, attributes: { user_ids: t2, modify_attribute: [] } });
          for (n2 in e2) {
            this.userAttrSeq++;
            var d = { action: 0, attribute: { key: n2, value: e2[n2], seq: this.userAttrSeq } };
            l.attributes.modify_attribute.push(d);
          }
          return this.connMgr.sendRequest(o.d.room_user_attr_modify, l).then(function(t3) {
            if (t3.code)
              return r3 = Object(i.x)(o.t.RoomModuleRoomMemberAttributesCommonError, t3.message, t3.code), u2.error = r3, s2.logger.warn(a, o.X.SetRoomMembersAttributes, u2), Promise.reject(r3);
            var r3, n3 = (l2 = function(e3, t4) {
              var r4 = "function" == typeof Symbol && e3[Symbol.iterator];
              if (!r4)
                return e3;
              var n4, i2, o2 = r4.call(e3), s3 = [];
              try {
                for (; (void 0 === t4 || 0 < t4--) && !(n4 = o2.next()).done; )
                  s3.push(n4.value);
              } catch (e4) {
                i2 = { error: e4 };
              } finally {
                try {
                  n4 && !n4.done && (r4 = o2.return) && r4.call(o2);
                } finally {
                  if (i2)
                    throw i2.error;
                }
              }
              return s3;
            }(s2.mergeServeUserAttributesHandle(t3, e2), 2))[0], l2 = l2[1];
            return t3.user_err_list.forEach(function(e3) {
              return c2.push(e3.user_id);
            }), t3.user_err_list.length && !l2.length ? (r3 = Object(i.x)(o.t.RoomModuleRoomMemberAttributesCommonError, t3.message, t3.code), Promise.reject(r3)) : (s2.eventBus.emit(o.u.RoomMemberAttr, { roomID: s2.groupID, infos: n3, operatedInfo: { userID: s2.engineConfig.user.userID } }), u2.setInfos = l2, s2.logger.info(a, o.X.SetRoomMembersAttributes, u2), { roomID: s2.groupID, infos: l2, errorUserList: c2 });
          });
        }, c.prototype.queryRoomMembersAttributes = function(e2) {
          var t2 = this, r2 = { roomID: this.groupID, userIDs: e2 }, n2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, req_attributes: [] };
          return e2.forEach(function(e3) {
            var r3 = t2.userAttributeMap.get(e3);
            e3 = { user_id: e3, user_attributes_seq: r3 ? r3.seq : 0 };
            n2.req_attributes.push(e3);
          }), this.connMgr.sendRequest(o.d.room_user_attr_get, n2).then(function(e3) {
            if (e3.code)
              return n3 = Object(i.x)(o.t.RoomModuleCommonError, e3.message, e3.code), r2.error = n3, t2.logger.warn(a, o.X.QueryRoomMembersAttributes, r2), Promise.reject(n3);
            var n3 = t2.mergeServeUserAttributesHandle(e3)[0].map(function(e4) {
              return e4.attributesInfo;
            });
            return r2.infos = n3, t2.logger.info(a, o.X.QueryRoomMembersAttributes, r2), { roomID: t2.groupID, infos: n3 };
          });
        }, c.prototype.queryRoomMemberAttributesList = function(e2) {
          var t2 = this, r2 = { roomID: this.groupID, config: e2 };
          e2 = { room_id: this.groupID, room_session_id: this.sessionID, room_user_session_id: this.userSessionID, sub_room_id: this.subRoomID, pos_flag: e2.nextFlag || "", count: e2.count };
          return this.connMgr.sendRequest(o.d.room_user_attr_list_get, e2).then(function(e3) {
            if (e3.code)
              return n2 = Object(i.x)(o.t.RoomModuleCommonError, e3.message, e3.code), r2.error = n2, t2.logger.warn(a, o.X.QueryRoomMemberAttributesList, r2), Promise.reject(n2);
            var n2 = t2.mergeServeUserAttributesHandle(e3)[0].map(function(e4) {
              return e4.attributesInfo;
            });
            return r2.infos = n2, t2.logger.info(a, o.X.QueryRoomMemberAttributesList, r2), { roomID: t2.groupID, infos: n2, nextFlag: e3.pos_flag };
          });
        }, c.prototype.onDisConnected = function(e2) {
          e2 ? (this.stopHB(), this.emitRoomStateChanged(o.mb.Disconnected, o.lb.NetworkDisconnected)) : this.emitRoomStateChanged(o.mb.Connecting, o.lb.NetworkInterrupted);
        }, c.prototype.onPushKickout = function(e2) {
          var t2 = [0, o.lb.KickedOut, o.lb.RoomNotExist, o.lb.KickedOutByOtherDevice];
          this.emitRoomStateChanged(o.mb.Disconnected, t2[e2.reason] || 0, JSON.stringify(e2)), this.destroy(false);
        }, c.prototype.onPushEnter = function(e2) {
          this.totalMemberCount = e2.user_count;
          var t2 = this.createUser(e2);
          this.isMergeUser ? this.waitingMergeUser(e2.userlist_seq, t2, "enter") : this.eventBus.emit(o.u.RoomMemberJoined, { roomID: e2.room_id, memberList: [t2] });
        }, c.prototype.onPushQuit = function(e2) {
          this.totalMemberCount = e2.user_count;
          var t2 = this.createUser(e2);
          this.isMergeUser ? this.waitingMergeUser(e2.userlist_seq, t2, "quit") : this.eventBus.emit(o.u.RoomMemberLeft, { roomID: e2.room_id, memberList: [t2] });
        }, c.prototype.onPushRoomAttributesModify = function(e2) {
          var t2, r2, n2, i2 = this, s2 = (this.logger.info(a, "onPushAttr", this.stRoomAttributes), e2.attributes), u2 = e2.attributes_seq;
          this.queryAttrFlag ? this.batchPushQueue.push(e2) : (t2 = (null == (e2 = this.stRoomAttributes) ? void 0 : e2.attribute_seq) || 0, u2 && (r2 = { delete: {}, set: {} }, 1 < u2 - t2 ? this.queryRoomAllAttributes(true) : (s2.forEach(function(e3) {
            var n3;
            t2++, e3.seq ? ((n3 = i2.stRoomAttributes.attributes.find(function(t3) {
              return t3.key == e3.key;
            })) ? (n3.value = e3.value, n3.seq = e3.seq) : i2.stRoomAttributes.attributes.push(e3), r2.set[e3.key] = e3.value) : i2.stRoomAttributes.attributes.length && (i2.stRoomAttributes.attributes.find(function(t3) {
              return t3.key == e3.key;
            }) && (r2.delete[e3.key] = ""), i2.stRoomAttributes.attributes = i2.stRoomAttributes.attributes.filter(function(t3) {
              return t3.key !== e3.key;
            }));
          }), this.stRoomAttributes.attribute_seq = u2, e2 = [], Object.keys(r2.set).length && (n2 = { action: o.kb.Set, roomAttributes: r2.set }, e2.push(n2)), Object.keys(r2.delete).length && (n2 = { action: o.kb.Delete, roomAttributes: r2.delete }, e2.push(n2)), s2.length && (u2 = 1 < e2.length ? o.u.RoomAttrBatch : o.u.RoomAttr, this.eventBus.emit(u2, { roomID: this.groupID, infos: e2 })))));
        }, c.prototype.onPushRoomUserAttributesModify = function(e2) {
          e2.user_attributes = e2.push_attributes, this.eventBus.emit(o.u.RoomMemberAttr, { roomID: this.groupID, infos: this.mergeServeUserAttributesHandle(e2)[0], operatedInfo: { userID: e2.user_id } });
        }, c.prototype.createFrequencyLimitError = function(e2) {
          var t2 = Object(i.x)(o.t.CommonModuleTriggerSDKFrequencyLimit), r2 = { roomID: this.groupID, error: t2 };
          return this.logger.warn(a, e2, r2), t2;
        }, c.prototype.modifyRoomAttributes = function(e2, t2, r2) {
          var n2 = this;
          return void 0 === r2 && (r2 = false), this.connMgr.sendRequest(o.d.room_attr_modify, t2).then(function(u2) {
            function c2(e3) {
              r2 && (n2.batchAttributesMap.forEach(function(t4) {
                t4.reject && t4.reject(e3);
              }), n2.batchOperationConfig = null, n2.batchRoomAttributes.length = 0, n2.batchAttributesMap.clear(), n2.batchIndex = 0);
              var t3 = { error: e3, local: n2.stRoomAttributes };
              return n2.logger.warn(a, "modifyAttr", t3), Promise.reject(e3);
            }
            if (u2.code)
              return c2(Object(i.x)(o.t.RoomModuleRoomAttributesOperationFailedCompletely, u2.message, u2.code));
            if (u2.err_list.length && u2.err_list.length == t2.attributes.length)
              return c2(Object(i.x)(o.t.RoomModuleRoomAttributesOperationFailedCompletely));
            var l, d, p = u2.attributes.attributes, h = (r2 && (l = [], p.forEach(function(e3) {
              var t3 = l.findIndex(function(t4) {
                return t4.key == e3.key;
              });
              e3.seq ? (-1 != t3 && l.splice(t3, 1), l.push(e3)) : -1 !== t3 && l.splice(t3, 1);
            }), p = l), n2.stRoomAttributes.attribute_seq = u2.attributes.attribute_seq, { delete: {}, set: {} }), f = (p.forEach(function(t3) {
              t3 = s({}, t3);
              var r3 = n2.stRoomAttributes.attributes.find(function(e3) {
                return e3.key == t3.key;
              }), i2 = n2.stRoomAttributes.attributes.findIndex(function(e3) {
                return e3.key == t3.key;
              });
              r3 ? t3.seq ? (r3.value = e2[r3.key].toString(), r3.seq = t3.seq, void 0 !== h.delete[r3.key] && delete h.delete[r3.key], h.set[r3.key] = r3.value) : (n2.stRoomAttributes.attributes.splice(i2, 1), h.delete[r3.key] = "") : t3.seq && (t3.value = e2[t3.key].toString(), n2.stRoomAttributes.attributes.push(t3), void 0 !== h.delete[t3.key] && delete h.delete[t3.key], h.set[t3.key] = t3.value);
            }), n2.logger.info(a, "operaAttr", { local: n2.stRoomAttributes }), []), g = (Object.keys(h.set).length && (d = { action: o.kb.Set, roomAttributes: h.set }, f.push(d)), Object.keys(h.delete).length && (d = { action: o.kb.Delete, roomAttributes: h.delete }, f.push(d)), u2.err_list.map(function(e3) {
              return e3.key;
            }));
            return r2 && n2.batchAttributesMap.forEach(function(e3) {
              var t3, r3, i2, s2, u3, c3;
              g.length ? (t3 = g[0], i2 = false, r3 = {}, !Array.isArray(e3.data) && t3 in e3.data && !p.some(function(r4) {
                return r4.value == e3.data[t3];
              }) || Array.isArray(e3.data) && -1 != e3.data.indexOf(t3) ? (i2 = true, s2 = [], e3.action == o.kb.Delete && -1 !== (u3 = e3.data.findIndex(function(e4) {
                return e4 == t3;
              })) && (s2 = e3.data.slice(u3)), e3.action == o.kb.Set && (s2 = Object.keys(e3.data)), e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: s2 }), r3 = { attributeList: p, data: e3.data }) : i2 ? (e3.action == o.kb.Delete && (c3 = e3.data.slice()), e3.action == o.kb.Set && (c3 = Object.keys(e3.data)), e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: c3 })) : (r3.error = false, e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: g })), n2.logger.info(a, "operaAttr", r3)) : e3.resolve && e3.resolve({ roomID: n2.groupID, errorKeys: [] });
            }), p.length && (d = r2 ? o.u.RoomAttrBatch : o.u.RoomAttr, n2.eventBus.emit(d, { roomID: n2.groupID, infos: f })), { roomID: n2.groupID, errorKeys: g };
          });
        }, c.prototype.mergeServeUserAttributesHandle = function(e2, t2) {
          var r2 = this, n2 = [], i2 = [];
          return e2.user_attributes.forEach(function(e3) {
            var o2 = e3.user_id, a2 = e3.attributes, u2 = e3.err_list, c2 = {}, l = r2.userAttributeMap.get(o2) || { seq: 0, attribute: [] };
            if (e3.user_attributes_seq > l.seq)
              l.seq = e3.user_attributes_seq, a2.forEach(function(e4) {
                var t3 = l.attribute.find(function(t4) {
                  return t4.key == e4.key;
                });
                t3 ? (t3.value = e4.value, c2[e4.key] = e4.value) : (l.attribute.push(s(s({}, e4), { value: e4.value || "" })), c2[e4.key] = e4.value || "");
              });
            else if (t2)
              for (d in t2)
                !function(e4) {
                  var r3 = t2[e4], n3 = l.attribute.find(function(t3) {
                    return t3.key == e4;
                  });
                  n3 ? n3.value = r3 : l.attribute.push({ key: e4, value: r3 }), c2[e4] = r3;
                }(d);
            else
              l.attribute.forEach(function(e4) {
                c2[e4.key] = e4.value;
              });
            if (r2.userAttributeMap.set(o2, l), (a2.length || e3.user_attributes_seq) && n2.push({ attributesInfo: { userID: o2, attributes: c2 } }), t2) {
              var d, p = u2.map(function(e4) {
                return e4.key;
              }), h = {};
              for (d in t2)
                -1 == p.indexOf(d) && (h[d] = c2[d]);
              i2.push({ errorKeys: p, attributesInfo: { userID: o2, attributes: h } });
            }
          }), [n2, i2];
        }, c.prototype.queryRoomAllAttributesRspHandle = function(e2, t2) {
          var r2 = { isSeqUpdate: t2 = void 0 !== t2 && t2, local: this.stRoomAttributes, batchPushQueue: this.batchPushQueue };
          if (this.logger.info(a, o.X.QueryRoomAllAttributes, r2), this.queryAttrFlag = false, this.batchPushQueue.length)
            try {
              this.mergeStAttributeHandle(e2.attributes);
            } catch (e3) {
              r2 = { error: true, stack: (null == e3 ? void 0 : e3.message) || (null == e3 ? void 0 : e3.stack), action: "catch mergeStAttributeHandle" }, this.logger.info(a, o.X.QueryRoomAllAttributes, r2);
            }
          else {
            var n2, i2, u2 = { delete: {}, set: {} };
            r2 = (this.stRoomAttributes.attribute_seq = e2.attributes.attribute_seq, e2.attributes.attributes.length ? ((n2 = this.stRoomAttributes.attributes).map(function(e3) {
              e3.seq = 0;
            }), e2.attributes.attributes.forEach(function(e3) {
              var t3 = n2.findIndex(function(t4) {
                return t4.key == e3.key;
              });
              -1 !== t3 ? e3.seq && (n2[t3].seq = e3.seq, n2[t3].value !== e3.value && (u2.set[e3.key] = e3.value, n2[t3].value = e3.value)) : e3.key && (u2.set[e3.key] = e3.value, n2.push(s(s({}, e3), { value: e3.value })));
            }), this.stRoomAttributes.attributes = n2.filter(function(e3) {
              return 0 == e3.seq && (u2.delete[e3.key] = ""), 0 !== e3.seq;
            })) : (this.stRoomAttributes.attributes.forEach(function(e3) {
              u2.delete[e3.key] = "";
            }), this.stRoomAttributes.attributes = []), []), e2 = (Object.keys(u2.set).length && (i2 = { action: o.kb.Set, roomAttributes: u2.set }, r2.push(i2)), Object.keys(u2.delete).length && (i2 = { action: o.kb.Delete, roomAttributes: u2.delete }, r2.push(i2)), { isSeqUpdate: t2, local: this.stRoomAttributes, infoList: r2 });
            this.logger.info(a, o.X.QueryRoomAllAttributes, e2), t2 && r2.length && (this.logger.info(a, "attrUpdated", u2), i2 = 1 < r2.length ? o.u.RoomAttrBatch : o.u.RoomAttr, this.eventBus.emit(i2, { roomID: this.groupID, infos: r2 }));
          }
          return { roomID: this.groupID, roomAttributes: this.getRecordFromStRoomAttributes() };
        }, c.prototype.addRoomAttributes = function(e2, t2) {
          if (t2 && "[object Object]" == Object.prototype.toString.call(t2.roomAttributes)) {
            var r2, n2, i2 = [];
            for (r2 in t2.roomAttributes)
              r2 && (n2 = { key: r2, value: t2.roomAttributes[r2].toString(), seq: this.attrItemSeq++, auto_delete: 1 }, i2.push(n2), this.localAttrKeySeqMap[r2] = n2.seq);
            i2.length && (e2.attributes = i2);
          }
          t2 && t2.roomDestroyDelayTime && (e2.destroy_delay = +t2.roomDestroyDelayTime);
        }, c.prototype.batchRoomAttributesHandle = function(e2, t2, r2, n2) {
          var i2, s2 = this, u2 = { batchRoomAttributes: this.batchRoomAttributes, roomAttributes: e2, delKeys: t2 = void 0 === t2 ? [] : t2 };
          for (i2 in this.logger.info(a, "bmodifyAttr", u2), this.batchRoomAttributes || (this.batchRoomAttributes = []), t2.length ? this.batchAttributesMap.set(this.batchIndex, { action: o.kb.Delete, data: t2, resolve: r2, reject: n2 }) : this.batchAttributesMap.set(this.batchIndex, { action: o.kb.Set, data: e2, resolve: r2, reject: n2 }), e2) {
            var c2 = { action: o.kb.Set, key: i2, value: e2[i2] };
            this.batchRoomAttributes.push(c2);
          }
          t2.forEach(function(e3) {
            e3 = { action: o.kb.Delete, key: e3, value: "" }, s2.batchRoomAttributes.push(e3);
          }), this.batchIndex++;
        }, c.prototype.mergeStAttributeHandle = function(e2) {
          this.batchPushQueue.sort(function(e3, t3) {
            return e3.attribute_seq - t3.attribute_seq;
          });
          var t2 = this.batchPushQueue.findIndex(function(t3) {
            return t3.attribute_seq >= e2.attribute_seq;
          }), r2 = (this.batchPushQueue = this.batchPushQueue.slice(t2), this.batchPushQueue.unshift(e2), this.batchPushQueue[this.batchPushQueue.length - 1].attribute_seq), n2 = { delete: {}, set: {} }, i2 = this.stRoomAttributes.attributes;
          i2.map(function(e3) {
            e3.seq = 0;
          }), t2 = { localAttributes: i2, batchPushQueue: this.batchPushQueue };
          for (this.logger.info(a, "mergeAttr", t2); this.batchPushQueue.length; ) {
            var u2 = (c2 = this.batchPushQueue.shift()).attributes, c2 = c2.attribute_seq;
            r2 && c2 && c2 < r2 || u2.forEach(function(e3) {
              var t3;
              e3 && (t3 = i2.find(function(t4) {
                return t4.key == e3.key;
              }), -1 !== i2.findIndex(function(t4) {
                return t4.key == e3.key;
              }) ? e3.seq && (t3.seq = e3.seq, t3.value !== e3.value && (n2.set[null == t3 ? void 0 : t3.key] = e3.value, t3.value = e3.value)) : e3.key && e3.seq && (n2.set[e3.key] = e3.value, i2.push(s(s({}, e3), { value: e3.value }))));
            });
          }
          var l, d = [];
          this.stRoomAttributes.attributes = i2.filter(function(e3) {
            return 0 == e3.seq && (n2.delete[e3.key] = ""), 0 !== e3.seq;
          }), Object.keys(n2.set).length && (l = { action: o.kb.Set, roomAttributes: n2.set }, d.push(l)), Object.keys(n2.delete).length && (l = { action: o.kb.Delete, roomAttributes: n2.delete }, d.push(l)), t2 = { local: this.stRoomAttributes, infoList: d }, this.logger.info(a, "mergeAttr", t2), d.length && this.eventBus.emit(o.u.RoomAttr, { roomID: this.groupID, infos: d }), this.stRoomAttributes.attribute_seq = r2;
        }, c.prototype.getRecordFromStRoomAttributes = function() {
          if (!this.stRoomAttributes.attributes.length)
            return {};
          var e2 = {};
          return this.stRoomAttributes.attributes.forEach(function(t2) {
            e2[t2.key] = t2.value;
          }), e2;
        }, c.prototype.checkRoomAttributesUpdateByHb = function(e2) {
          var t2 = this;
          this.stRoomAttributes && e2.attribute_seq > this.stRoomAttributes.attribute_seq + 1 && (this.attrTimer = setTimeout(function() {
            t2.logger && t2.queryRoomAllAttributes();
          }, this.mergeConfig.attrMergeTimeout));
        }, c.prototype.fetchServerPageUser = function(e2, t2, r2, n2) {
          var i2 = this;
          e2 = { room_id: this.groupID, room_session_id: this.sessionID, sub_room_id: this.subRoomID, count: e2, pos_flag: t2, expect_seq: this.localSeq };
          return n2 && this.dataReport.beginNetworkRequest(o.d.room_userlist.cmd, n2, r2, e2), this.connMgr.sendRequest(o.d.room_userlist, e2, r2).then(function(e3) {
            return e3.code || (i2.totalMemberCount = e3.user_count, i2.localSeq = e3.userlist_seq), e3;
          });
        }, c.prototype.emitRoomStateChanged = function(e2, t2, r2) {
          this.state = e2, this.eventBus.emit(o.u.RoomState, { roomID: this.groupID, state: e2, event: t2, extendedData: r2 || "" });
        }, c.prototype.emitRoomAttributesUpdated = function(e2, t2, r2) {
          var n2;
          (t2 = void 0 !== t2 && t2) && null != e2 && e2.attributes && null != r2 && r2.roomAttributes && (n2 = r2.roomAttributes, e2.attributes.forEach(function(e3) {
            e3.seq && (e3.value = n2[e3.key]);
          })), this.stRoomAttributes = e2 || { attributes: [] }, this.stRoomAttributes.attributes.length && (t2 = { action: o.kb.Set, roomAttributes: this.getRecordFromStRoomAttributes() }, this.eventBus.emit(o.u.RoomAttr, { roomID: this.groupID, infos: [t2] }));
        }, c.prototype.startHB = function(e2) {
          var t2 = this;
          !e2 || e2 < 0 || (this.stopHB(), this.hbTimer = setInterval(function() {
            var e3;
            t2.logger && (e3 = { room_id: t2.groupID, room_session_id: t2.sessionID, sub_room_id: t2.subRoomID }, t2.connMgr.sendRequestWithHeartbeat(o.d.room_info.cmd, e3).then(function(e4) {
              if (e4.code == o.pb)
                return t2.stopHB();
              if (e4.code) {
                if (6000104 == e4.code && t2.hbTimeoutCount++, e4.timeoutCount = t2.hbTimeoutCount, t2.hbTimeoutCount >= o.m.hbTimeoutMaxCount)
                  t2.stopHB(), t2.emitRoomStateChanged(o.mb.Connecting, o.lb.NetworkInterrupted);
                else if (1 == e4.code || -1 != o.m.needReloginCodeList.indexOf(e4.code)) {
                  t2.stopHB();
                  var r2 = o.lb.NetworkDisconnected;
                  switch (e4.code) {
                    case 103015:
                      r2 = o.lb.ConnectTimeout;
                      break;
                    case 103021:
                      r2 = o.lb.RoomNotExist;
                  }
                  t2.emitRoomStateChanged(o.mb.Disconnected, r2);
                }
                e4.state = t2.state;
              } else
                e4.room_info_interval && (t2.hbTimeoutCount = 0, t2.totalMemberCount = e4.user_count, t2.enabledOfflineMsg && e4.max_conv_msg_seq && t2.eventBus.exec(o.u.IConnectedRoom, t2.groupID, e4.max_conv_msg_seq), e4.ulist_to && (t2.mergeConfig.listMergeTimeout = e4.ulist_to), e4.ulist_itvl && (t2.mergeConfig.listPullInterval = e4.ulist_itvl), t2.checkRoomAttributesUpdateByHb(e4));
            }));
          }, e2));
        }, c.prototype.stopHB = function() {
          this.hbTimer && clearInterval(this.hbTimer), this.hbTimeoutCount = 0, this.hbTimer = 0;
        }, c.prototype.reset = function() {
          this.localSeq = 0, this.attrItemSeq = 0, this.isMergeUser = false, this.totalMemberCount = 0, this.userMap.clear();
        }, c.prototype.createUser = function(e2) {
          return { userID: e2.user_id, userName: Object(i.h)(e2.user_name), userAvatarUrl: (null == (e2 = this.engineConfig.dbUserMap.get(e2.user_id)) ? void 0 : e2.userAvatarUrl) || "" };
        }, c.prototype.fetchAllUser = function() {
          var e2 = this, t2 = { time: /* @__PURE__ */ new Date(), event: "fetchAllUser", roomID: this.groupID, localSeq: this.localSeq, totalMemberCount: this.totalMemberCount }, r2 = 1, n2 = ++this.mergeMemberListSeq + this.groupID, i2 = [], s2 = function(u3) {
            u3.users.forEach(function(t3) {
              return i2.push(e2.createUser(t3));
            }), u3.pos_flag && e2.connMgr ? (r2++, e2.fetchServerPageUser(100, u3.pos_flag, o.j.SDK).then(s2)) : (u3.degree = r2, u3.svrCount = i2.length, e2.updateUserList(i2), t2.localSeq_ = e2.localSeq, t2.tatalMemberCount_ = e2.totalMemberCount, t2.dataReport = e2.dataReport.endNetworkRequest(o.d.room_userlist.cmd, n2, u3), e2.logger.info(a, "mergeUser", t2));
          }, u2 = Date.now(), c2 = this.lastFetchAllUserTime + this.mergeConfig.listPullInterval;
          setTimeout(function() {
            e2.lastFetchAllUserTime = u2, e2.connMgr && e2.fetchServerPageUser(100, "", o.j.SDK, n2).then(s2);
          }, u2 < c2 ? c2 - u2 : 0);
        }, c.prototype.waitingMergeUser = function(e2, t2, r2) {
          var n2, i2, u2, c2 = this;
          e2 <= this.localSeq ? this.logger.info(a, "mergeUser", { roomID: this.groupID, event: "dropMerge", action: r2, seq: e2, localSeq: this.localSeq, totalMemberCount: this.totalMemberCount }) : e2 != this.localSeq + 1 || this.mergeTimer ? (-1 == this.mergeSeqList.indexOf(e2) && this.mergeSeqList.push(e2), n2 = t2.userID, u2 = this.mergeUserList.findIndex(function(e3) {
            return e3.userID == n2;
          }), "enter" == r2 && -1 == u2 ? this.mergeUserList.push(t2) : "quit" == r2 && -1 != u2 && this.mergeUserList.splice(u2, 1), this.mergeTimer || (i2 = { roomID: this.groupID, event: "waitingPush", action: r2, seq: e2, localSeq: this.localSeq, totalMemberCount: this.totalMemberCount }, -1 == this.mergeSeqList.indexOf(this.localSeq) && this.mergeSeqList.push(this.localSeq), this.mergeTimer = setTimeout(function() {
            var e3;
            c2.logger && (c2.mergeSeqList.sort(), e3 = c2.mergeSeqList.length - 1, (e3 = c2.mergeSeqList[e3] - c2.mergeSeqList[0] == e3) ? c2.updateUserList(c2.mergeUserList) : c2.fetchAllUser(), Object.assign(i2, { time: c2.mergeConfig.listMergeTimeout, localSeq_: c2.localSeq, tatalMemberCount_: c2.totalMemberCount, continuous: e3, mergeSeqList: c2.mergeSeqList }), c2.logger.info(a, "mergeUser", i2), c2.mergeTimer = 0, c2.mergeSeqList.length = 0, c2.mergeUserList.length = 0);
          }, this.mergeConfig.listMergeTimeout))) : (this.localSeq = e2, u2 = this.userMap.has(t2.userID), "enter" != r2 || u2 ? "quit" == r2 && u2 && (this.userMap.delete(t2.userID), this.eventBus.emit(o.u.RoomMemberLeft, { roomID: this.groupID, memberList: [s({}, t2)] })) : (this.userMap.set(t2.userID, t2), this.eventBus.emit(o.u.RoomMemberJoined, { roomID: this.groupID, memberList: [s({}, t2)] })), t2 = { roomID: this.groupID, event: "continuousMerge", action: r2, has: u2, seq: e2, localSeq: this.localSeq, totalMemberCount: this.totalMemberCount }, this.logger.info(a, "mergeUser", t2));
        }, c.prototype.updateUserList = function(e2) {
          var t2 = this, r2 = e2.map(function(e3) {
            return e3.userID;
          }), n2 = Array.from(this.userMap.values()), i2 = (e2 = e2.filter(function(e3) {
            var r3 = !t2.userMap.has(e3.userID);
            return r3 && t2.userMap.set(e3.userID, s({}, e3)), r3;
          }), n2.filter(function(e3) {
            var n3 = -1 == r2.indexOf(e3.userID);
            return n3 && t2.userMap.delete(e3.userID), n3;
          }));
          e2.length && this.eventBus.emit(o.u.RoomMemberJoined, { roomID: this.groupID, memberList: e2 }), i2.length && this.eventBus.emit(o.u.RoomMemberLeft, { roomID: this.groupID, memberList: i2 }), n2 = { roomID: this.groupID, event: "updateRoomMember", localSeq: this.localSeq, totalMemberCount: this.totalMemberCount, mergeIds: r2, beginLocalIds: n2.map(function(e3) {
            return e3.userID;
          }), endLocalIDs: Array.from(this.userMap.keys()), joinedUserIDs: e2.map(function(e3) {
            return e3.userID;
          }), leftUserIDs: i2.map(function(e3) {
            return e3.userID;
          }) };
          this.logger.info(a, "mergeUser", n2);
        }, t([Object(i.o)(o.m.get_user_attribute_qps, o.m.get_user_attribute_interval, o.X.QueryRoomMembersAttributes)], c.prototype, "queryRoomMembersAttributes", null), t([Object(i.o)(o.m.get_user_attribute_qps, o.m.get_user_attribute_interval, o.X.QueryRoomMemberAttributesList)], c.prototype, "queryRoomMemberAttributesList", null), c);
        function c(e2, t2, r2, i2, s2) {
          this.type = o.r.Room, this.state = o.mb.Disconnected, this.subRoomID = "", this.enabledOfflineMsg = false, this.destroyDelay = 0, this.userMap = /* @__PURE__ */ new Map(), this.userAttributeMap = /* @__PURE__ */ new Map(), this.totalMemberCount = 0, this.isMergeUser = false, this.mergeMemberListSeq = 0, this.mergeTimer = 0, this.mergeSeqList = [], this.mergeUserList = [], this.mergeConfig = { listMergeTimeout: 0, listPullInterval: 0, attrMergeTimeout: 0, attrPullInterval: 0 }, this.lastFetchAllUserTime = 0, this.hbTimer = 0, this.hbTimeoutCount = 0, this.localSeq = 0, this.userAttrSeq = 0, this.attrItemSeq = 0, this.stRoomAttributes = { attributes: [], attribute_seq: 0 }, this.localAttrKeySeqMap = {}, this.batchOperationConfig = null, this.batchRoomAttributes = [], this.batchAttributesMap = /* @__PURE__ */ new Map(), this.batchIndex = 0, this.batchFlag = false, this.batchPushQueue = [], this.queryAttrFlag = false, this.attrTimer = null, this.queryAttrTask = [], this.groupID = e2, this.engineConfig = t2, this.logger = n.a.getInstance().logger, this.dataReport = n.a.getInstance().dataReport, this.eventBus = r2, this.dbMgr = i2, this.connMgr = s2;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return d;
        });
        t = r(3);
        var n = r.n(t), i = r(2), o = r(1), s = r(0), a = function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, u = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, c = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, l = s.Y.User, d = (Object.defineProperty(p.prototype, "renewTokenTimeout", { get: function() {
          return 30;
        }, enumerable: false, configurable: true }), p.prototype.destroy = function() {
          this.lastLoginExecutor.notSendError = null, this.connMgr.saveSessionID(), this.stopUserHB(true), this.stopMailHB(), this.updateLocalToken("", 0), this.settings.unInitEngine(this.engineConfig.handle, true), this.connMgr = null, this.eventBus = null, this.logger = null, this.settings = null, this.dataReport = null, this.crypto = null, this.engineConfig = null;
        }, p.prototype.login = function(e2, t2) {
          var r2, n2 = this, i2 = t2.userName, a2 = t2.token, c2 = (t2 = t2.isOfflineLogin, u(Object(o.m)(a2, 0), 2)), d2 = c2[0], p2 = c2[1];
          if (d2 || this.lastLoginExecutor.notSendError)
            return r2 = this.lastLoginExecutor.notSendError || Object(o.x)(d2), this.logger.warn(l, s.X.Login, { error: r2, expireTime: p2, token: a2 }), Promise.reject(r2);
          if (this.loginState == s.l.Reconnecting || this.loginState == s.l.Connecting)
            return new Promise(function(t3, r3) {
              n2.engineConfig.user.userID == e2 && (n2.lastLoginExecutor.token = a2, n2.lastLoginExecutor.expireTime = p2, n2.lastLoginExecutor.resolve = t3, n2.lastLoginExecutor.reject = r3);
            });
          if (this.loginState == s.l.Connected)
            return this.engineConfig.user.userID !== e2 ? (c2 = { error: r2 = Object(o.x)(s.t.NetworkModuleUserHasAlreadyLogged), userID: e2, oldUserID: this.engineConfig.user.userID }, this.logger.warn(l, s.X.Login, c2), Promise.reject(r2)) : (this.updateSvrToken(a2, p2), this.emitConnectionStateChanged(s.l.Connected, s.k.ActiveLogin), Promise.resolve());
          this.engineConfig.user.userID = e2, i2 && (this.engineConfig.user.userName = i2), this.lastLoginExecutor.token = a2, this.lastLoginExecutor.expireTime = p2, this.dbMgr.setUserID(e2), this.logger.init(this.engineConfig.appID + "", e2, i2), this.initDataReport(a2);
          var h = { time: /* @__PURE__ */ new Date(), action: "apicall", userID: e2, userName: i2, isOfflineLogin: t2, expireTime: p2 };
          return this.loginState = s.l.Connecting, this.loginConsumeds.length = 0, t2 ? (this.connMgr.create(false), this.lastLoginExecutor.push = false, this.updateLocalToken(a2, p2), this.startCheckTokenExpireTime(p2), this.emitConnectionStateChanged(s.l.Connected, s.k.Success), this.loadDB(false, h)) : this.connMgr.create(false).then(function() {
            return n2.sendLoginRequest(s.j.API, h, true, true);
          }).catch(function(e3) {
            throw h.error = e3, h.url = n2.connMgr.urls[0], n2.logger.warn(l, s.X.Login, h), e3 && e3.code || ((e3 = e3 || Object(o.x)(s.t.NetworkModuleNetworkError, "Login error.")).code = e3.code || s.t.NetworkModuleNetworkError, e3.mesaage = e3.stack || e3.message, n2.dataReport.reportSDKEvent("/sdk/log", { error_message: "API.login:" + e3.mesaage }), n2.logger.upload("login error", true)), n2.lastLoginExecutor.reject && n2.lastLoginExecutor.reject(e3), n2.lastLoginExecutor.reject = null, e3;
          });
        }, p.prototype.logout = function(e2) {
          var t2, r2 = this;
          this.logger && (e2 || this.logger.info(l, s.X.Logout, { state: this.loginState }), t2 = { msg: this.k1SignLogoutBuffer, reason: e2 }, this.connMgr.sendRequest(s.d.sw_logout, t2, e2 ? s.j.SDK : s.j.API), setTimeout(function() {
            return (!r2.engineConfig || !r2.engineConfig.user.userID) && r2.connMgr.close();
          }, 100), this.onLogout(), this.loginState !== s.l.Disconnected && this.emitConnectionStateChanged(s.l.Disconnected, s.k.Success));
        }, p.prototype.renewToken = function(e2) {
          var t2, r2, n2 = this, i2 = (r2 = u(Object(o.m)(e2, this.engineConfig.tokenExpireTime), 2))[0], a2 = r2[1];
          if (i2)
            return t2 = Object(o.x)(i2), this.logger.warn(l, s.X.RenewToken, { error: t2, expireTime: a2, token: e2 }), Promise.reject(t2);
          if ((r2 = Date.now()) - this.lastRenewTokenTime < 500)
            return t2 = Object(o.x)(s.t.CommonModuleTriggerSDKFrequencyLimit), this.logger.warn(l, s.X.RenewToken, t2), Promise.reject(t2);
          var c2 = { time: this.lastRenewTokenTime = r2 };
          i2 = { user_name: Object(o.k)(e2), sdk_duration: a2 - Math.floor(Date.now() / 1e3) };
          return this.connMgr.sendRequest(s.d.sw_renew_token, i2, s.j.API).then(function(t3) {
            return t3.code ? (t3 = Object(o.x)(s.t.NetworkModuleTokenInvalid, t3.message, t3.code), c2.error = t3, n2.logger.warn(l, s.X.RenewToken, c2), Promise.reject(t3)) : (n2.updateLocalToken(e2, a2), n2.startCheckTokenExpireTime(a2), n2.logger.info(l, s.X.RenewToken, c2), { token: e2 });
          });
        }, p.prototype.updateUserName = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), userName: e2 }, n2 = { user_name: Object(o.k)(e2), set_flag: 1 };
          return this.connMgr.sendRequest(s.d.user_modify, n2).then(function(n3) {
            var i2;
            return n3.code ? (i2 = Object(o.x)(s.t.CommonModuleIMServerError, n3.message, n3.code), r2.error = i2, t2.logger.warn(l, s.X.UpdateUserName, r2), Promise.reject(i2)) : (t2.engineConfig.user.userName = e2, t2.updateUserInfoSeq(+n3.conv_list_seq.toString(), true), t2.logger.info(l, s.X.UpdateUserName, r2), { userName: e2 });
          });
        }, p.prototype.updateUserExtendedData = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), extendedData: e2 }, n2 = { user_name: Object(o.k)(e2), set_flag: 10 };
          return this.connMgr.sendRequest(s.d.user_modify, n2).then(function(n3) {
            var i2;
            return n3.code ? (i2 = Object(o.x)(s.t.CommonModuleIMServerError, n3.message, n3.code), r2.error = i2, t2.logger.warn(l, s.X.UpdateUserExtendedData, r2), Promise.reject(i2)) : (t2.engineConfig.user.extendedData = e2, t2.updateUserInfoSeq(+n3.conv_list_seq.toString(), true), t2.logger.info(l, s.X.UpdateUserExtendedData, r2), { extendedData: e2 });
          });
        }, p.prototype.updateUserAvatarUrl = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), userAvatarUrl: e2 }, n2 = { user_name: Object(o.k)(e2), set_flag: 16 };
          return this.connMgr.sendRequest(s.d.user_modify, n2).then(function(n3) {
            var i2;
            return n3.code ? (i2 = Object(o.x)(s.t.CommonModuleIMServerError, n3.message, n3.code), r2.error = i2, t2.logger.warn(l, s.X.UpdateUserAvatarUrl, r2), Promise.reject(i2)) : (t2.engineConfig.user.userAvatarUrl = e2, r2.isUpdSeq = t2.updateUserInfoSeq(+n3.conv_list_seq.toString(), true), t2.logger.info(l, s.X.UpdateUserAvatarUrl, r2), { userAvatarUrl: e2 });
          });
        }, p.prototype.updateUserOfflinePushRule = function(e2) {
          var t2 = this, r2 = { time: /* @__PURE__ */ new Date(), offlinePushRule: e2 }, n2 = (e2.onlinePlatforms = e2.onlinePlatforms ? c([], u(new Set(e2.onlinePlatforms)), false) : [], e2.notToReceiveOfflinePushPlatforms = e2.notToReceiveOfflinePushPlatforms ? c([], u(new Set(e2.notToReceiveOfflinePushPlatforms)), false) : [], { user_rule: { online: e2.onlinePlatforms, disable_push: e2.notToReceiveOfflinePushPlatforms } });
          return r2.reqBody = JSON.stringify(n2), this.connMgr.sendRequest(s.d.user_custom_push, n2, s.j.API).then(function(n3) {
            var i2;
            return n3.code ? (i2 = Object(o.x)(s.t.UserModuleCommonError, n3.message, n3.code), r2.error = i2, t2.logger.warn(l, s.X.UpdateUserOfflinePushRule, r2), Promise.reject(i2)) : (t2.engineConfig.user.userRule = { offlinePushRule: a({}, e2) }, r2.isUpdSeq = t2.updateUserInfoSeq(+n3.conv_list_seq.toString(), true), t2.logger.info(l, s.X.UpdateUserOfflinePushRule, r2), t2.dbMgr.setUser(t2.engineConfig.user), t2.eventBus.emit(s.u.UseRuleUpdated, { userRule: a({}, t2.engineConfig.user.userRule) }), { offlinePushRule: e2 });
          });
        }, p.prototype.querySelfUserInfo = function() {
          var e2 = { userRule: a({}, this.engineConfig.user.userRule), userFullInfo: { baseInfo: { userID: this.engineConfig.user.userID, userName: this.engineConfig.user.userName, userAvatarUrl: this.engineConfig.user.userAvatarUrl }, extendedData: this.engineConfig.user.extendedData } };
          return Promise.resolve({ selfUserInfo: e2 });
        }, p.prototype.reportZPNs = function() {
          var e2 = this.engineConfig.ZPNsPushID;
          e2 && this.loginState == s.l.Connected && this.connMgr.sendRequest(s.d.user_zpns_report, { key: e2 }, s.j.SDK);
        }, p.prototype.onConnected = function(e2) {
          var t2, r2, n2 = this;
          (e2 || this.needRelogin) && (t2 = this.engineConfig.token || this.lastLoginExecutor.token, r2 = this.engineConfig.tokenExpireTime || this.lastLoginExecutor.expireTime, t2 && r2 && (r2 = { time: /* @__PURE__ */ new Date(), isReconnect: e2, action: "onConnected" }, this.needRelogin && (this.needRelogin = false, r2.action += s.d.swp_kickout.cmd), this.loginState = s.l.Reconnecting, this.sendLoginRequest(s.j.SDK, r2).then(function() {
            var r3;
            e2 && (n2.initMailHB().then(function() {
              return n2.eventBus.exec(s.u.IConnected);
            }), r3 = n2.settings.fetchZGLogConfig()[1], n2.dataReport.start(n2.engineConfig.user.userID, t2, r3));
          }).catch(function(e3) {
            n2.lastLoginExecutor.reject && n2.lastLoginExecutor.reject(e3), n2.lastLoginExecutor.reject = null;
          })));
        }, p.prototype.onDisConnected = function(e2) {
          e2 ? (this.stopUserHB(e2), this.stopMailHB(), this.emitConnectionStateChanged(s.l.Disconnected, s.k.LoginTimeout), this.eventBus.emit(s.u.Error, Object(o.x)(s.t.NetworkModuleNetworkError))) : this.emitConnectionStateChanged(s.l.Reconnecting, s.k.LoginInterrupted), this.eventBus.exec(s.u.IDisConnected, e2);
        }, p.prototype.onPushRedirect = function(e2) {
          e2 && e2.length && (this.lastLoginExecutor.push = true, this.createConnection(e2, s.d.swp_redirect.cmd));
        }, p.prototype.onPushKickout = function(e2) {
          var t2, r2;
          1 == e2.seq ? this.needRelogin = true : (t2 = { reason: e2.code, message: e2.key }, r2 = s.k.KickedOut, 2 == e2.code && (r2 = s.k.Unregistered, this.clearDB()), this.closeConnection(r2, JSON.stringify(t2)));
        }, p.prototype.onPushAccesshub = function(e2) {
          var t2, r2 = this;
          19 == e2._type || 20 == e2._type ? (20 == this.PCEstablished._type && this.engineConfig.token && this.engineConfig.tokenExpireTime && (t2 = { time: /* @__PURE__ */ new Date(), action: "MSG_TYPE_PC_BROKEN" }, this.loginState = s.l.Reconnecting, this.connMgr.create(false).then(function() {
            return r2.sendLoginRequest(s.j.SDK, t2);
          }).catch(function(e3) {
            r2.lastLoginExecutor.reject && r2.lastLoginExecutor.reject(e3), r2.lastLoginExecutor.reject = null;
          })), Object.assign(this.PCEstablished, e2)) : 30 == e2._type && 20010 == e2.reason && (this.handleLoginRedirectRequest(true, s.t.CommonModuleUnactivatedIMServer), this.eventBus.emit(s.u.Error, Object(o.x)(s.t.CommonModuleUnactivatedIMServer)));
        }, p.prototype.onPushUpdateUserInfo = function(e2) {
          var t2 = this.engineConfig.user, r2 = (null == (r2 = e2.rule) ? void 0 : r2.user_custom_push) || (null == (r2 = e2.rule) ? void 0 : r2.app_custom_push), n2 = this.isUserRuleUpdate(r2.online, r2.disable_push);
          if (r2 && n2 && (t2.userRule = { offlinePushRule: { notToReceiveOfflinePushPlatforms: r2.disable_push, onlinePlatforms: r2.online } }, this.eventBus.emit(s.u.UseRuleUpdated, { userRule: a({}, t2.userRule) })), e2.set_flag) {
            var i2 = Object(o.h)(e2.value);
            switch (e2.set_flag) {
              case 1:
                t2.userName = i2;
                break;
              case 10:
                t2.extendedData = i2;
                break;
              case 16:
                t2.userAvatarUrl = i2;
            }
            n2 = { baseInfo: { userID: t2.userID, userName: t2.userName, userAvatarUrl: t2.userAvatarUrl }, extendedData: t2.extendedData }, this.eventBus.emit(s.u.UserInfoUpdated, { info: n2 });
          }
          r2 = this.updateUserInfoSeq(e2.user_info_seq), this.dbMgr.setUser(t2), this.logger.info(l, "onPushUpdateUserInfo", { isSeqUpd: r2 });
        }, p.prototype.initDataReport = function(e2, t2) {
          var r2 = (n2 = u(this.settings.fetchZGLogConfig(), 2))[0], n2 = n2[1];
          if (this.logger.setUploadURL(r2), this.dataReport.init(this.engineConfig.appID), this.dataReport.start(this.engineConfig.user.userID, e2, t2 ? n2 : void 0), t2) {
            for (var i2 = [this.loginConsumeds[0] - t2], o2 = this.loginConsumeds.length - 1; 0 < o2; o2--)
              i2[o2] = this.loginConsumeds[o2] - this.loginConsumeds[o2 - 1];
            e2 = (r2 = this.settings.advancedConfig.geoFence).id, n2 = r2.dispatch, r2 = r2.host, e2 = a({ times: i2.join(), id: e2, dispatch: n2, host: r2 }, this.PCEstablished), this.logger.info(s.Y.Connection, "fetchSetting", e2), this.dataReport.reportSDKEvent("/sdk/init", { time_consumed: Date.now() - t2, error_message: e2.times, sdk_config: JSON.stringify(e2) });
          }
        }, p.prototype.createConnection = function(e2, t2, r2) {
          var n2 = this, i2 = { time: /* @__PURE__ */ new Date(), action: t2, serveres: e2 };
          return (t2 = 0 == e2[0].indexOf("wss://")) && (this.connMgr.urls = e2), this.dataReport.reportSDKEvent("/sdk/reconnect", { domain: e2 }), this.handleLoginRedirectRequest(false), this.loginState = s.l.Connecting, this.connMgr.create(t2).then(function() {
            return n2.sendLoginRequest(s.j.SDK, i2, r2);
          }).catch(function(e3) {
            throw n2.handleLoginRedirectRequest(true), n2.lastLoginExecutor.reject && n2.lastLoginExecutor.reject(e3), n2.lastLoginExecutor.reject = null, e3;
          });
        }, p.prototype.sendLoginRequest = function(e2, t2, r2, i2) {
          var u2 = this;
          if (this.lastLoginExecutor.notSendError)
            return Promise.reject(this.lastLoginExecutor.notSendError);
          this.emitConnectionStateChanged(this.loginState, s.k.ActiveLogin), this.engineConfig.serverUserID = n.a.fromNumber(0), this.connMgr.sendRequestWithNoRsp(s.d.sw_handshake.cmd, this.settings.deviceInfo);
          var c2 = this.engineConfig.token || this.lastLoginExecutor.token, d2 = this.engineConfig.tokenExpireTime || this.lastLoginExecutor.expireTime, p2 = (r2 && (i2 && this.reportZPNs(), this.loginConsumeds.push(Date.now()), this.connMgr.sendDispatchRequest(c2), this.settings.startSyncRemoteConfig(this.connMgr, this.engineConfig.handle, c2).then(function(e3) {
            e3 && u2.eventBus.exec(s.u.INetworkChange, "fetchSetting");
          })), a(a({}, this.settings.deviceInfo), { user_name: Object(o.k)(this.engineConfig.user.userName), client_stamp: Object(o.k)(this.crypto.generateNonce()), k1_sign: this.crypto.generateK1Sign(this.engineConfig), login_token: Object(o.k)(c2), sdk_action: t2.action, sdk_duration: d2 - Math.floor(Date.now() / 1e3), sdk_server_ip: this.connMgr.urls[0], sdk_session_timeout: !r2 && this.engineConfig.sessionID ? this.hbMap.timeout : void 0 }));
          !r2 && this.engineConfig.sessionID && this.hbMap.timeout > Date.now() ? p2.old_session_id = this.engineConfig.sessionID : r2 && this.connMgr.sessionID && (p2.old_session_id = n.a.fromString(this.connMgr.sessionID)), this.reloginTokenBuffer && (p2.relogin_token = this.reloginTokenBuffer), this.engineConfig.ZPNsPushID && (p2.zpns_push_id = this.engineConfig.ZPNsPushID), e2 = this.connMgr.sendRequest(s.d.sw_login, p2, e2);
          return i2 && (this.lastLoginExecutor.seq = p2._seq), e2.then(function(e3) {
            var n2 = e3.code;
            if (n2) {
              if ((h = e3.redirect_server) && h.length)
                return u2.createConnection(h, "redirect login error code: " + n2, r2);
              if (50106 == n2 || 50107 == n2)
                return 50106 == n2 && (u2.engineConfig.sessionID = void 0), u2.sendLoginRequest(s.j.SDK, t2, r2, i2);
              if (6000104 == n2 && u2.lastLoginExecutor.push)
                return;
              u2.lastLoginExecutor.push = false;
              var a2 = n2 == s.t.CommonModuleUnactivatedIMServer ? Object(o.x)(s.t.CommonModuleUnactivatedIMServer) : Object(o.x)(s.t.NetworkModuleServerError, e3.message, n2), h = 1e3 * d2;
              return 50111 == n2 && h && h < Date.now() ? u2.closeConnection(s.k.LoginInterrupted, "Token expire") : 102005 == n2 ? u2.closeConnection(s.k.KickedOut, "") : 6000104 !== n2 && (u2.lastLoginExecutor.notSendError = a2, setTimeout(function() {
                return u2.lastLoginExecutor.notSendError = null;
              }, 1e4), u2.emitConnectionStateChanged(s.l.Disconnected, s.k.LoginInterrupted)), t2.error = a2, r2 || u2.logger.warn(l, "login", t2), Promise.reject(a2);
            }
            if (n2 != s.t.Success) {
              if (!r2 && e3.register_time > u2.engineConfig.user.registerTime)
                return u2.clearDB(), u2.closeConnection(s.k.Unregistered, ""), Promise.reject(Object(o.x)(s.t.CommonModuleUserIsNotExist));
              u2.reloginTokenBuffer = e3.relogin_token, u2.k1SignLogoutBuffer = u2.crypto.md5Bytes(p2.k1_sign), u2.engineConfig.sessionID = e3.rspHeader.session_id, u2.engineConfig.serverUserID = e3.rspHeader.user_nid, u2.engineConfig.controls = e3.rspHeader.controls, u2.settings.serverOffsetTime = e3.server_timestamp - Date.now(), u2.engineConfig.user.registerTime = e3.register_time || 0, u2.crypto.decryptK2Sign(e3.k2_sign, u2.engineConfig), u2.lastLoginExecutor.push = false, u2.startUserHB(e3.hb_interval, e3.hb_timeout), u2.startMailHB(), u2.updateLocalToken(c2, d2), u2.startCheckTokenExpireTime(d2);
              try {
                var f = JSON.parse(e3.im_conf_json);
                t2.im_conf_json = f, u2.setMailHBFetchConfig(f);
              } catch (a3) {
              }
              if (u2.emitConnectionStateChanged(s.l.Connected, s.k.Success), t2.seq = u2.handleLoginRedirectRequest(true), r2)
                return u2.loadDB(true, t2);
              u2.loginEnd(false, t2);
            }
          });
        }, p.prototype.updateLocalToken = function(e2, t2) {
          this.engineConfig.token = e2, this.engineConfig.tokenExpireTime = t2, this.dataReport.start(this.engineConfig.user.userID, e2), this.logger.renewToken(e2);
        }, p.prototype.updateSvrToken = function(e2, t2) {
          var r2, n2 = this;
          e2 && this.engineConfig.tokenExpireTime < t2 && (r2 = { user_name: Object(o.k)(e2), sdk_duration: t2 - Math.floor(Date.now() / 1e3) }, this.connMgr.sendRequest(s.d.sw_renew_token, r2, s.j.SDK).then(function(r3) {
            r3.code || (n2.updateLocalToken(e2, t2), n2.startCheckTokenExpireTime(t2));
          }));
        }, p.prototype.startUserHB = function(e2, t2) {
          var r2 = this;
          !e2 || e2 < 0 || (this.hbMap.timeout = 1.5 * t2 + Date.now(), this.stopUserHB(false), this.hbMap.userTimer = setInterval(function() {
            r2.logger && r2.connMgr.sendRequestWithHeartbeat(s.d.sw_hb.cmd, void 0).then(function(e3) {
              return e3.code == s.pb ? r2.stopUserHB(true) : e3.code ? (6000104 == e3.code && r2.hbMap.userTimeoutCount++, e3.timeoutCount = r2.hbMap.userTimeoutCount, (1 == e3.code || 50012 == e3.code || r2.hbMap.userTimeoutCount >= s.m.hbTimeoutMaxCount) && (r2.stopUserHB(false), r2.onConnected(true)), -1 != s.m.needReloginCodeList.indexOf(e3.code) && r2.closeConnection(s.k.LoginInterrupted, "Session id invalid"), void (e3.state = r2.loginState)) : void (e3.server_timestamp && (r2.hbMap.userTimeoutCount = 0, r2.settings.serverOffsetTime = e3.server_timestamp - Date.now(), e3.hb_timeout == t2 && (r2.hbMap.timeout = 1.5 * e3.hb_timeout + Date.now())));
            });
          }, e2));
        }, p.prototype.stopUserHB = function(e2) {
          this.hbMap.userTimer && clearInterval(this.hbMap.userTimer), this.hbMap.userTimeoutCount = 0, this.hbMap.userTimer = 0, e2 && (this.renewTokenTimer && clearTimeout(this.renewTokenTimer), this.expireTokenTimer && clearTimeout(this.expireTokenTimer), this.renewTokenTimer = 0, this.expireTokenTimer = 0);
        }, p.prototype.startMailHB = function() {
          var e2 = this, t2 = this.engineConfig.mailHBConfig.usermail_hb_interval;
          !t2 || t2 < 0 || (this.stopMailHB(), this.hbMap.mailTimer = setInterval(function() {
            var t3;
            e2.logger && (t3 = { conv: (t3 = e2.engineConfig.user).convSeq, group: t3.groupSeq, call: t3.callSeq, pin: t3.convPinnedSeq, c2c_state: t3.c2cMsgStateSeq, extra_msg: t3.msgExtraSeq }, t3 = { conv_sid: e2.engineConfig.user.convSeq || "1", db_seq_json: t3 }, e2.connMgr.sendRequestWithHeartbeat(s.d.conv_hb.cmd, t3).then(function(t4) {
              return t4.code == s.pb ? e2.stopMailHB() : t4.code ? (6000104 == t4.code && e2.hbMap.mailTimeoutCount++, t4.timeoutCount = e2.hbMap.mailTimeoutCount, void ((1 == t4.code || e2.hbMap.mailTimeoutCount >= s.m.hbTimeoutMaxCount || -1 != s.m.needReloginCodeList.indexOf(t4.code)) && e2.stopMailHB())) : (e2.setMailHBFetchConfig(t4, true), e2.onTriggerHB(), void e2.eventBus.exec(s.u.ITriggerHB));
            }));
          }, t2));
        }, p.prototype.onTriggerHB = function() {
          this.fetchSelfUserInfo(s.v.SDKHb);
        }, p.prototype.stopMailHB = function() {
          this.hbMap.mailTimer && clearInterval(this.hbMap.mailTimer), this.hbMap.mailTimeoutCount = 0, this.hbMap.mailTimer = 0;
        }, p.prototype.fetchSelfUserInfo = function(e2, t2) {
          var r2 = this, n2 = this.engineConfig.user.userInfoSeq || 0, i2 = this.engineConfig.mailHBConfig.user_info_seq, u2 = { time: /* @__PURE__ */ new Date(), dbSeq: n2, hbSeq: i2, how: e2, action: t2 };
          (!i2 || i2 <= n2) && e2 !== s.v.SDKLogin || this.connMgr.sendRequest(s.d.user_fetch_rule, null, s.j.SDK).then(function(e3) {
            var t3 = e3.base_info.user_id, n3 = Object(o.h)(e3.base_info.user_name), i3 = Object(o.h)(e3.base_info.avatar), c2 = Object(o.h)(e3.base_info.extra), d2 = (t3 = { userID: t3, userName: n3, userAvatarUrl: i3, extendedData: c2 }, r2.engineConfig.user);
            (t3 = (!d2 || d2.userName === n3 && d2.userAvatarUrl === i3 && d2.extendedData === c2 || (Object(o.w)(t3, r2.engineConfig), d2.userName = n3, d2.userAvatarUrl = i3, d2.extendedData = c2, n3 = { baseInfo: { userID: t3.userID, userName: t3.userName, userAvatarUrl: t3.userAvatarUrl }, extendedData: t3.extendedData }, r2.dbMgr.setUser(d2), r2.eventBus.emit(s.u.UserInfoUpdated, { info: n3 }), u2.isInfoUpd = true), (null == (i3 = e3.rule) ? void 0 : i3.user_custom_push) || (null == (c2 = e3.rule) ? void 0 : c2.app_custom_push))) && ((d2 = r2.isUserRuleUpdate(t3.online, t3.disable_push)) && (r2.engineConfig.user.userRule = { offlinePushRule: { notToReceiveOfflinePushPlatforms: t3.disable_push, onlinePlatforms: t3.online } }, r2.dbMgr.setUser(r2.engineConfig.user), r2.eventBus.emit(s.u.UseRuleUpdated, { userRule: a({}, r2.engineConfig.user.userRule) })), u2.isRuleUpd = d2), u2.isUpdSeq = r2.updateUserInfoSeq(e3.base_info.user_info_seq, true), r2.logger.info(l, "fetchSelfUserInfo", u2);
          });
        }, p.prototype.isUserRuleUpdate = function(e2, t2) {
          var r2, n2 = c([], u((null == (r2 = null == (r2 = this.engineConfig.user.userRule) ? void 0 : r2.offlinePushRule) ? void 0 : r2.onlinePlatforms) || []), false), i2 = c([], u((null == (r2 = null == (r2 = this.engineConfig.user.userRule) ? void 0 : r2.offlinePushRule) ? void 0 : r2.notToReceiveOfflinePushPlatforms) || []), false);
          return !(n2.every(function(t3) {
            return e2.includes(t3);
          }) && e2.every(function(e3) {
            return n2.includes(e3);
          }) && i2.every(function(e3) {
            return t2.includes(e3);
          }) && t2.every(function(e3) {
            return i2.includes(e3);
          }));
        }, p.prototype.startCheckTokenExpireTime = function(e2) {
          var t2 = this, r2 = (this.renewTokenTimer && clearTimeout(this.renewTokenTimer), this.expireTokenTimer && clearTimeout(this.expireTokenTimer), Math.min(2073600, e2 - Math.floor(Date.now() / 1e3)));
          r2 < this.renewTokenTimeout ? (this.logger.info(l, "tokenWillExpire", "token will expire: " + r2), this.eventBus.emit(s.u.TokenExpire, { second: r2 })) : this.renewTokenTimer = setTimeout(function() {
            t2.logger && (t2.logger.info(l, "tokenWillExpire", "token will expire: " + r2), t2.eventBus.emit(s.u.TokenExpire, { second: t2.renewTokenTimeout }));
          }, 1e3 * (r2 - this.renewTokenTimeout)), this.expireTokenTimer = setTimeout(function() {
            return t2.logout("token expire");
          }, 1e3 * (r2 - 2));
        }, p.prototype.emitConnectionStateChanged = function(e2, t2, r2) {
          this.loginState = e2, this.eventBus.emit(s.u.ConnState, { state: e2, event: t2, extendedData: r2 || "" });
        }, p.prototype.handleLoginRedirectRequest = function(e2, t2) {
          void 0 === t2 && (t2 = s.t.Success);
          var r2 = 0;
          return this.lastLoginExecutor.seq && (r2 = this.connMgr.responseRequest(this.lastLoginExecutor.seq, e2, t2)), e2 && (this.lastLoginExecutor.seq = 0), r2;
        }, p.prototype.closeConnection = function(e2, t2) {
          this.onLogout(t2), this.logger.upload(t2), this.connMgr.close(), this.emitConnectionStateChanged(s.l.Disconnected, e2, t2);
        }, p.prototype.onLogout = function(e2) {
          this.lastLoginExecutor.notSendError = null, this.stopUserHB(true), this.stopMailHB(), this.updateLocalToken("", 0), this.settings.unInitEngine(this.engineConfig.handle), this.dbMgr.unloadDB(), this.eventBus.exec(s.u.ILogout, e2);
        }, p.prototype.setMailHBFetchConfig = function(e2, t2) {
          var r2 = e2.c2c_msg_seq, n2 = e2.conv_list_seq, i2 = e2.group_list_seq, o2 = e2.call_list_seq, a2 = e2.friend_list_seq, u2 = e2.friend_apply_list_seq, c2 = e2.black_list_seq, l2 = e2.conv_pinned_list_seq, d2 = e2.c2c_statemsg_seq, p2 = e2.extra_msg_list_seq, h = e2.delete_all_msg_time, f = e2.apply_expired_duration, g = e2.user_info_seq, m = e2.c2c_mute_max_seq, _ = e2.group_apply_list_seq;
          e2 = function(e3, t3) {
            var r3 = {};
            for (i3 in e3)
              Object.prototype.hasOwnProperty.call(e3, i3) && t3.indexOf(i3) < 0 && (r3[i3] = e3[i3]);
            if (null != e3 && "function" == typeof Object.getOwnPropertySymbols)
              for (var n3 = 0, i3 = Object.getOwnPropertySymbols(e3); n3 < i3.length; n3++)
                t3.indexOf(i3[n3]) < 0 && Object.prototype.propertyIsEnumerable.call(e3, i3[n3]) && (r3[i3[n3]] = e3[i3[n3]]);
            return r3;
          }(e2, ["c2c_msg_seq", "conv_list_seq", "group_list_seq", "call_list_seq", "friend_list_seq", "friend_apply_list_seq", "black_list_seq", "conv_pinned_list_seq", "c2c_statemsg_seq", "extra_msg_list_seq", "delete_all_msg_time", "apply_expired_duration", "user_info_seq", "c2c_mute_max_seq", "group_apply_list_seq"]);
          Object.assign(this.engineConfig.mailHBConfig, e2), r2 && (this.engineConfig.mailHBConfig.c2c_msg_seq = r2), n2 && (this.engineConfig.mailHBConfig.conv_list_seq = n2), i2 && (this.engineConfig.mailHBConfig.group_list_seq = i2), o2 && (this.engineConfig.mailHBConfig.call_list_seq = o2), a2 && (this.engineConfig.mailHBConfig.friend_list_seq = a2), u2 && (this.engineConfig.mailHBConfig.friend_apply_list_seq = u2), c2 && (this.engineConfig.mailHBConfig.black_list_seq = c2), l2 && (this.engineConfig.mailHBConfig.conv_pinned_list_seq = l2), d2 && (this.engineConfig.mailHBConfig.c2c_statemsg_seq = d2), p2 && (this.engineConfig.mailHBConfig.extra_msg_list_seq = p2), h && (this.engineConfig.mailHBConfig.delete_all_msg_time = h), f && (this.engineConfig.mailHBConfig.apply_expired_duration = f), m && (this.engineConfig.mailHBConfig.c2c_mute_max_seq = m), g && (this.engineConfig.mailHBConfig.user_info_seq = g), _ && (this.engineConfig.mailHBConfig.group_apply_list_seq = _), t2 && (e2 = null, (r2 = this.engineConfig.user).convSeq && r2.convSeq != n2.toString() && ((e2 = e2 || {}).conv = r2.convSeq + "," + n2.toString()), r2.groupSeq && r2.groupSeq != i2.toString() && ((e2 = e2 || {}).group = r2.groupSeq + "," + i2.toString()), r2.callSeq && r2.callSeq != o2.toString() && ((e2 = e2 || {}).call = r2.callSeq + "," + o2.toString()), r2.c2cMsgStateSeq && r2.c2cMsgStateSeq != d2.toString() && ((e2 = e2 || {}).c2c_state = r2.c2cMsgStateSeq + "," + d2.toString()), r2.msgExtraSeq && r2.msgExtraSeq != p2.toString() && ((e2 = e2 || {}).extra_msg = r2.msgExtraSeq + "," + p2.toString()), r2.friendSeq && r2.friendSeq != a2 && ((e2 = e2 || {}).friend = r2.friendSeq + "," + a2), r2.friendAppSeq && r2.friendAppSeq != u2 && ((e2 = e2 || {}).friendApp = r2.friendAppSeq + "," + u2), r2.blacklistSeq && r2.blacklistSeq != c2 && ((e2 = e2 || {}).blacklist = r2.blacklistSeq + "," + c2), r2.convPinnedSeq && r2.convPinnedSeq != l2 && ((e2 = e2 || {}).pin = r2.convPinnedSeq + "," + l2), r2.userInfoSeq && r2.userInfoSeq != g && ((e2 = e2 || {}).user = r2.userInfoSeq + "," + g), r2.groupAppSeq && r2.groupAppSeq != _ && ((e2 = e2 || {}).groupApp = r2.groupAppSeq + "," + _), e2 && this.logger.info(s.Y.Conversation, "hb", e2));
        }, p.prototype.loginEnd = function(e2, t2) {
          this.logger.info(l, e2 ? s.X.Login : "login", t2), this.lastLoginExecutor.resolve && this.lastLoginExecutor.resolve(), this.lastLoginExecutor.resolve = null, this.updateSvrToken(this.lastLoginExecutor.token, this.lastLoginExecutor.expireTime), this.lastLoginExecutor.token = "";
        }, p.prototype.initSelf = function(e2) {
          var t2 = this, r2 = this.engineConfig.user.userID, n2 = e2.find(function(e3) {
            return e3.userID == r2;
          });
          n2 ? (this.logger.info(l, "getDBUser", n2), n2.userName = this.engineConfig.user.userName || n2.userName) : n2 = { userID: r2, userName: this.engineConfig.user.userName, registerTime: 0, deleteAllMsgTime: 0, userRule: { offlinePushRule: {} }, convSeq: "0", groupSeq: "0", msgExtraSeq: "0", c2cMsgStateSeq: "0", callSeq: "0", convPinnedSeq: 0, friendSeq: 0, friendAppSeq: 0, blacklistSeq: 0, muteSeq: 0, userInfoSeq: 0, groupAppSeq: 0 }, this.engineConfig.user.registerTime && this.engineConfig.user.registerTime > n2.registerTime && (this.clearDB(), n2.registerTime = this.engineConfig.user.registerTime), Object.assign(this.engineConfig.user, n2), e2.forEach(function(e3) {
            return t2.engineConfig.dbUserMap.set(e3.userID, e3);
          }), this.engineConfig.dbUserMap.set(this.engineConfig.user.userID, this.engineConfig.user), this.fetchSelfUserInfo(s.v.SDKLogin);
        }, p.prototype.initMailHB = function() {
          var e2 = this, t2 = { conv: (t2 = this.engineConfig.user).convSeq, group: t2.groupSeq, call: t2.callSeq, pin: t2.convPinnedSeq, c2c_state: t2.c2cMsgStateSeq, extra_msg: t2.msgExtraSeq };
          t2 = { conv_sid: this.engineConfig.user.convSeq || "1", db_seq_json: t2 };
          return this.connMgr.sendRequest(s.d.conv_hb, t2, s.j.SDK).then(function(t3) {
            t3.code || e2.setMailHBFetchConfig(t3);
          });
        }, p.prototype.updateUserInfoSeq = function(e2, t2) {
          var r2 = this.engineConfig.user;
          return !(!e2 || !t2 && r2.userInfoSeq && r2.userInfoSeq + 1 != e2 || r2.userInfoSeq && r2.userInfoSeq > e2 || (r2.userInfoSeq = e2, this.dbMgr.setUser(this.engineConfig.user), 0));
        }, p.prototype.loadDB = function(e2, t2) {
          function r2() {
            return e2 && n2.loginConsumeds.push(Date.now()), Promise.all([n2.dbMgr.getUserList().then(function(e3) {
              return n2.initSelf(e3);
            }), n2.dbMgr.getGroupList(), n2.dbMgr.getConversationList(), n2.dbMgr.getMessageExtraList()]).then(function(r3) {
              n2.loginConsumeds.push(Date.now()), n2.initDataReport(n2.engineConfig.token, t2.time.getTime()), n2.loginEnd(true, t2), e2 && n2.fetchLogReportWhiteList(), r3[1].forEach(function(e3) {
                return n2.engineConfig.dbGroupMap.set(e3.groupID, e3);
              }), r3[2].forEach(function(e3) {
                return n2.engineConfig.dbConvMap.set(e3.id, e3);
              }), r3[3].forEach(function(e3) {
                return n2.engineConfig.msgExtraMap.set(e3.id, e3);
              }), n2.eventBus.exec(s.u.ILogined);
            });
          }
          var n2 = this;
          return e2 ? (this.loginConsumeds.push(Date.now()), this.initMailHB().then(r2)) : r2();
        }, p.prototype.clearDB = function() {
          var e2 = this.engineConfig.user;
          e2.userAvatarUrl = "", e2.extendedData = "", e2.deleteAllMsgTime = 0, e2.userRule = { offlinePushRule: {} }, this.dbMgr.clearDB(a({}, e2)), e2.convSeq = "0", e2.groupSeq = "0", e2.msgExtraSeq = "0", e2.c2cMsgStateSeq = "0", e2.convPinnedSeq = 0, e2.callSeq = "0", e2.friendSeq = 0, e2.friendAppSeq = 0, e2.blacklistSeq = 0, e2.muteSeq = 0, e2.userInfoSeq = 0, e2.groupAppSeq = 0;
        }, p.prototype.fetchLogReportWhiteList = function() {
          var e2, t2 = this, r2 = { product: "zim", biz_type: 1, appid: this.engineConfig.appID + "", uin: encodeURIComponent(this.engineConfig.user.userID), token: encodeURIComponent(this.engineConfig.token), timestamp: Date.now() + "", deviceid: this.settings.deviceInfo.device_id }, n2 = Object.keys(r2).map(function(e3) {
            return e3 + "=" + r2[e3];
          }).join("&"), i2 = this.settings.fetchZGLogWhitelistUrl() + n2;
          o.p ? o.p.request({ url: i2, data: n2, success: function(e3) {
            try {
              var r3 = "string" == typeof e3.data ? JSON.parse(e3.data) : e3.data;
              r3 && 0 == r3.code ? t2.logger.upload("login with whitelist", true) : t2.logger.upload("login with not present in whitelist");
            } catch (e4) {
            }
          }, fail: function() {
            return t2.logger.upload("login with error whitelist");
          } }) : ((e2 = new XMLHttpRequest()).onreadystatechange = function() {
            if (4 == e2.readyState && (200 <= e2.status && e2.status < 300 || 304 == e2.status))
              try {
                var r3 = JSON.parse(e2.responseText);
                r3 && 0 == r3.code ? t2.logger.upload("login with whitelist", true) : t2.logger.upload("login with not present in whitelist");
              } catch (r4) {
                t2.logger.upload("login with error whitelist");
              }
          }, e2.open("GET", i2, true), e2.send());
        }, p);
        function p(e2, t2, r2, n2) {
          this.hbMap = { timeout: 0, userTimer: 0, userTimeoutCount: 0, mailTimer: 0, mailTimeoutCount: 0 }, this.loginState = s.l.Disconnected, this.loginConsumeds = [], this.needRelogin = false, this.lastLoginExecutor = { notSendError: null, seq: 0, push: false, token: "", expireTime: 0, resolve: null, reject: null }, this.lastRenewTokenTime = 0, this.PCEstablished = { _type: 0 }, this.logger = i.a.getInstance().logger, this.dataReport = i.a.getInstance().dataReport, this.settings = i.a.getInstance().settings, this.crypto = i.a.getInstance().crypto, this.engineConfig = e2, this.eventBus = t2, this.connMgr = r2, this.dbMgr = n2;
        }
      }, function(e, t, r) {
        e.exports = function(e2) {
          "use strict";
          var t2 = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
          function r2(e3, t3) {
            var r3 = e3[0], n2 = e3[1], i2 = e3[2], o2 = e3[3];
            n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & i2 | ~n2 & o2) + t3[0] - 680876936 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & i2) + t3[1] - 389564586 | 0) << 12 | o2 >>> 20) + r3 | 0) & r3 | ~o2 & n2) + t3[2] + 606105819 | 0) << 17 | i2 >>> 15) + o2 | 0) & o2 | ~i2 & r3) + t3[3] - 1044525330 | 0) << 22 | n2 >>> 10) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & i2 | ~n2 & o2) + t3[4] - 176418897 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & i2) + t3[5] + 1200080426 | 0) << 12 | o2 >>> 20) + r3 | 0) & r3 | ~o2 & n2) + t3[6] - 1473231341 | 0) << 17 | i2 >>> 15) + o2 | 0) & o2 | ~i2 & r3) + t3[7] - 45705983 | 0) << 22 | n2 >>> 10) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & i2 | ~n2 & o2) + t3[8] + 1770035416 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & i2) + t3[9] - 1958414417 | 0) << 12 | o2 >>> 20) + r3 | 0) & r3 | ~o2 & n2) + t3[10] - 42063 | 0) << 17 | i2 >>> 15) + o2 | 0) & o2 | ~i2 & r3) + t3[11] - 1990404162 | 0) << 22 | n2 >>> 10) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & i2 | ~n2 & o2) + t3[12] + 1804603682 | 0) << 7 | r3 >>> 25) + n2 | 0) & n2 | ~r3 & i2) + t3[13] - 40341101 | 0) << 12 | o2 >>> 20) + r3 | 0) & r3 | ~o2 & n2) + t3[14] - 1502002290 | 0) << 17 | i2 >>> 15) + o2 | 0) & o2 | ~i2 & r3) + t3[15] + 1236535329 | 0) << 22 | n2 >>> 10) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & o2 | i2 & ~o2) + t3[1] - 165796510 | 0) << 5 | r3 >>> 27) + n2 | 0) & i2 | n2 & ~i2) + t3[6] - 1069501632 | 0) << 9 | o2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[11] + 643717713 | 0) << 14 | i2 >>> 18) + o2 | 0) & r3 | o2 & ~r3) + t3[0] - 373897302 | 0) << 20 | n2 >>> 12) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & o2 | i2 & ~o2) + t3[5] - 701558691 | 0) << 5 | r3 >>> 27) + n2 | 0) & i2 | n2 & ~i2) + t3[10] + 38016083 | 0) << 9 | o2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[15] - 660478335 | 0) << 14 | i2 >>> 18) + o2 | 0) & r3 | o2 & ~r3) + t3[4] - 405537848 | 0) << 20 | n2 >>> 12) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & o2 | i2 & ~o2) + t3[9] + 568446438 | 0) << 5 | r3 >>> 27) + n2 | 0) & i2 | n2 & ~i2) + t3[14] - 1019803690 | 0) << 9 | o2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[3] - 187363961 | 0) << 14 | i2 >>> 18) + o2 | 0) & r3 | o2 & ~r3) + t3[8] + 1163531501 | 0) << 20 | n2 >>> 12) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 & o2 | i2 & ~o2) + t3[13] - 1444681467 | 0) << 5 | r3 >>> 27) + n2 | 0) & i2 | n2 & ~i2) + t3[2] - 51403784 | 0) << 9 | o2 >>> 23) + r3 | 0) & n2 | r3 & ~n2) + t3[7] + 1735328473 | 0) << 14 | i2 >>> 18) + o2 | 0) & r3 | o2 & ~r3) + t3[12] - 1926607734 | 0) << 20 | n2 >>> 12) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 ^ i2 ^ o2) + t3[5] - 378558 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ i2) + t3[8] - 2022574463 | 0) << 11 | o2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[11] + 1839030562 | 0) << 16 | i2 >>> 16) + o2 | 0) ^ o2 ^ r3) + t3[14] - 35309556 | 0) << 23 | n2 >>> 9) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 ^ i2 ^ o2) + t3[1] - 1530992060 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ i2) + t3[4] + 1272893353 | 0) << 11 | o2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[7] - 155497632 | 0) << 16 | i2 >>> 16) + o2 | 0) ^ o2 ^ r3) + t3[10] - 1094730640 | 0) << 23 | n2 >>> 9) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 ^ i2 ^ o2) + t3[13] + 681279174 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ i2) + t3[0] - 358537222 | 0) << 11 | o2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[3] - 722521979 | 0) << 16 | i2 >>> 16) + o2 | 0) ^ o2 ^ r3) + t3[6] + 76029189 | 0) << 23 | n2 >>> 9) + i2 | 0, n2 = ((n2 += ((i2 = ((i2 += ((o2 = ((o2 += ((r3 = ((r3 += (n2 ^ i2 ^ o2) + t3[9] - 640364487 | 0) << 4 | r3 >>> 28) + n2 | 0) ^ n2 ^ i2) + t3[12] - 421815835 | 0) << 11 | o2 >>> 21) + r3 | 0) ^ r3 ^ n2) + t3[15] + 530742520 | 0) << 16 | i2 >>> 16) + o2 | 0) ^ o2 ^ r3) + t3[2] - 995338651 | 0) << 23 | n2 >>> 9) + i2 | 0, n2 = ((n2 += ((o2 = ((o2 += (n2 ^ ((r3 = ((r3 += (i2 ^ (n2 | ~o2)) + t3[0] - 198630844 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~i2)) + t3[7] + 1126891415 | 0) << 10 | o2 >>> 22) + r3 | 0) ^ ((i2 = ((i2 += (r3 ^ (o2 | ~n2)) + t3[14] - 1416354905 | 0) << 15 | i2 >>> 17) + o2 | 0) | ~r3)) + t3[5] - 57434055 | 0) << 21 | n2 >>> 11) + i2 | 0, n2 = ((n2 += ((o2 = ((o2 += (n2 ^ ((r3 = ((r3 += (i2 ^ (n2 | ~o2)) + t3[12] + 1700485571 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~i2)) + t3[3] - 1894986606 | 0) << 10 | o2 >>> 22) + r3 | 0) ^ ((i2 = ((i2 += (r3 ^ (o2 | ~n2)) + t3[10] - 1051523 | 0) << 15 | i2 >>> 17) + o2 | 0) | ~r3)) + t3[1] - 2054922799 | 0) << 21 | n2 >>> 11) + i2 | 0, n2 = ((n2 += ((o2 = ((o2 += (n2 ^ ((r3 = ((r3 += (i2 ^ (n2 | ~o2)) + t3[8] + 1873313359 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~i2)) + t3[15] - 30611744 | 0) << 10 | o2 >>> 22) + r3 | 0) ^ ((i2 = ((i2 += (r3 ^ (o2 | ~n2)) + t3[6] - 1560198380 | 0) << 15 | i2 >>> 17) + o2 | 0) | ~r3)) + t3[13] + 1309151649 | 0) << 21 | n2 >>> 11) + i2 | 0, n2 = ((n2 += ((o2 = ((o2 += (n2 ^ ((r3 = ((r3 += (i2 ^ (n2 | ~o2)) + t3[4] - 145523070 | 0) << 6 | r3 >>> 26) + n2 | 0) | ~i2)) + t3[11] - 1120210379 | 0) << 10 | o2 >>> 22) + r3 | 0) ^ ((i2 = ((i2 += (r3 ^ (o2 | ~n2)) + t3[2] + 718787259 | 0) << 15 | i2 >>> 17) + o2 | 0) | ~r3)) + t3[9] - 343485551 | 0) << 21 | n2 >>> 11) + i2 | 0, e3[0] = r3 + e3[0] | 0, e3[1] = n2 + e3[1] | 0, e3[2] = i2 + e3[2] | 0, e3[3] = o2 + e3[3] | 0;
          }
          function n(e3) {
            var t3, r3 = [];
            for (t3 = 0; t3 < 64; t3 += 4)
              r3[t3 >> 2] = e3.charCodeAt(t3) + (e3.charCodeAt(t3 + 1) << 8) + (e3.charCodeAt(t3 + 2) << 16) + (e3.charCodeAt(t3 + 3) << 24);
            return r3;
          }
          function i(e3) {
            var t3, r3 = [];
            for (t3 = 0; t3 < 64; t3 += 4)
              r3[t3 >> 2] = e3[t3] + (e3[t3 + 1] << 8) + (e3[t3 + 2] << 16) + (e3[t3 + 3] << 24);
            return r3;
          }
          function o(e3) {
            var t3, i2, o2, s2, a2, u2, c2 = e3.length, l2 = [1732584193, -271733879, -1732584194, 271733878];
            for (t3 = 64; t3 <= c2; t3 += 64)
              r2(l2, n(e3.substring(t3 - 64, t3)));
            for (i2 = (e3 = e3.substring(t3 - 64)).length, o2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t3 = 0; t3 < i2; t3 += 1)
              o2[t3 >> 2] |= e3.charCodeAt(t3) << (t3 % 4 << 3);
            if (o2[t3 >> 2] |= 128 << (t3 % 4 << 3), t3 > 55)
              for (r2(l2, o2), t3 = 0; t3 < 16; t3 += 1)
                o2[t3] = 0;
            return s2 = (s2 = 8 * c2).toString(16).match(/(.*?)(.{0,8})$/), a2 = parseInt(s2[2], 16), u2 = parseInt(s2[1], 16) || 0, o2[14] = a2, o2[15] = u2, r2(l2, o2), l2;
          }
          function s(e3) {
            var r3, n2 = "";
            for (r3 = 0; r3 < 4; r3 += 1)
              n2 += t2[e3 >> 8 * r3 + 4 & 15] + t2[e3 >> 8 * r3 & 15];
            return n2;
          }
          function a(e3) {
            var t3;
            for (t3 = 0; t3 < e3.length; t3 += 1)
              e3[t3] = s(e3[t3]);
            return e3.join("");
          }
          function u(e3) {
            return /[\u0080-\uFFFF]/.test(e3) && (e3 = unescape(encodeURIComponent(e3))), e3;
          }
          function c(e3) {
            var t3, r3 = [], n2 = e3.length;
            for (t3 = 0; t3 < n2 - 1; t3 += 2)
              r3.push(parseInt(e3.substr(t3, 2), 16));
            return String.fromCharCode.apply(String, r3);
          }
          function l() {
            this.reset();
          }
          return "5d41402abc4b2a76b9719d911017c592" !== a(o("hello")) && function(e3, t3) {
            var r3 = (65535 & e3) + (65535 & t3);
            return (e3 >> 16) + (t3 >> 16) + (r3 >> 16) << 16 | 65535 & r3;
          }, "undefined" == typeof ArrayBuffer || ArrayBuffer.prototype.slice || function() {
            function e3(e4, t3) {
              return (e4 = 0 | e4 || 0) < 0 ? Math.max(e4 + t3, 0) : Math.min(e4, t3);
            }
            ArrayBuffer.prototype.slice = function(t3, r3) {
              var n2, i2, o2, s2, a2 = this.byteLength, u2 = e3(t3, a2), c2 = a2;
              return void 0 !== r3 && (c2 = e3(r3, a2)), u2 > c2 ? new ArrayBuffer(0) : (n2 = c2 - u2, i2 = new ArrayBuffer(n2), o2 = new Uint8Array(i2), s2 = new Uint8Array(this, u2, n2), o2.set(s2), i2);
            };
          }(), l.prototype.append = function(e3) {
            return this.appendBinary(u(e3)), this;
          }, l.prototype.appendBinary = function(e3) {
            this._buff += e3, this._length += e3.length;
            var t3, i2 = this._buff.length;
            for (t3 = 64; t3 <= i2; t3 += 64)
              r2(this._hash, n(this._buff.substring(t3 - 64, t3)));
            return this._buff = this._buff.substring(t3 - 64), this;
          }, l.prototype.end = function(e3) {
            var t3, r3, n2 = this._buff, i2 = n2.length, o2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            for (t3 = 0; t3 < i2; t3 += 1)
              o2[t3 >> 2] |= n2.charCodeAt(t3) << (t3 % 4 << 3);
            return this._finish(o2, i2), r3 = a(this._hash), e3 && (r3 = c(r3)), this.reset(), r3;
          }, l.prototype.reset = function() {
            return this._buff = "", this._length = 0, this._hash = [1732584193, -271733879, -1732584194, 271733878], this;
          }, l.prototype.getState = function() {
            return { buff: this._buff, length: this._length, hash: this._hash.slice() };
          }, l.prototype.setState = function(e3) {
            return this._buff = e3.buff, this._length = e3.length, this._hash = e3.hash, this;
          }, l.prototype.destroy = function() {
            delete this._hash, delete this._buff, delete this._length;
          }, l.prototype._finish = function(e3, t3) {
            var n2, i2, o2, s2 = t3;
            if (e3[s2 >> 2] |= 128 << (s2 % 4 << 3), s2 > 55)
              for (r2(this._hash, e3), s2 = 0; s2 < 16; s2 += 1)
                e3[s2] = 0;
            n2 = (n2 = 8 * this._length).toString(16).match(/(.*?)(.{0,8})$/), i2 = parseInt(n2[2], 16), o2 = parseInt(n2[1], 16) || 0, e3[14] = i2, e3[15] = o2, r2(this._hash, e3);
          }, l.hash = function(e3, t3) {
            return l.hashBinary(u(e3), t3);
          }, l.hashBinary = function(e3, t3) {
            var r3 = a(o(e3));
            return t3 ? c(r3) : r3;
          }, (l.ArrayBuffer = function() {
            this.reset();
          }).prototype.append = function(e3) {
            var t3, n2 = function(e4, t4, r3) {
              var n3 = new Uint8Array(e4.byteLength + t4.byteLength);
              return n3.set(new Uint8Array(e4)), n3.set(new Uint8Array(t4), e4.byteLength), r3 ? n3 : n3.buffer;
            }(this._buff.buffer, e3, true), o2 = n2.length;
            for (this._length += e3.byteLength, t3 = 64; t3 <= o2; t3 += 64)
              r2(this._hash, i(n2.subarray(t3 - 64, t3)));
            return this._buff = t3 - 64 < o2 ? new Uint8Array(n2.buffer.slice(t3 - 64)) : new Uint8Array(0), this;
          }, l.ArrayBuffer.prototype.end = function(e3) {
            var t3, r3, n2 = this._buff, i2 = n2.length, o2 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            for (t3 = 0; t3 < i2; t3 += 1)
              o2[t3 >> 2] |= n2[t3] << (t3 % 4 << 3);
            return this._finish(o2, i2), r3 = a(this._hash), e3 && (r3 = c(r3)), this.reset(), r3;
          }, l.ArrayBuffer.prototype.reset = function() {
            return this._buff = new Uint8Array(0), this._length = 0, this._hash = [1732584193, -271733879, -1732584194, 271733878], this;
          }, l.ArrayBuffer.prototype.getState = function() {
            var e3 = l.prototype.getState.call(this);
            return e3.buff = function(e4) {
              return String.fromCharCode.apply(null, new Uint8Array(e4));
            }(e3.buff), e3;
          }, l.ArrayBuffer.prototype.setState = function(e3) {
            return e3.buff = function(e4, t3) {
              var r3, n2 = e4.length, i2 = new ArrayBuffer(n2), o2 = new Uint8Array(i2);
              for (r3 = 0; r3 < n2; r3 += 1)
                o2[r3] = e4.charCodeAt(r3);
              return t3 ? o2 : i2;
            }(e3.buff, true), l.prototype.setState.call(this, e3);
          }, l.ArrayBuffer.prototype.destroy = l.prototype.destroy, l.ArrayBuffer.prototype._finish = l.prototype._finish, l.ArrayBuffer.hash = function(e3, t3) {
            var n2 = function(e4) {
              var t4, n3, o3, s2, a2, u2, c2 = e4.length, l2 = [1732584193, -271733879, -1732584194, 271733878];
              for (t4 = 64; t4 <= c2; t4 += 64)
                r2(l2, i(e4.subarray(t4 - 64, t4)));
              for (n3 = (e4 = t4 - 64 < c2 ? e4.subarray(t4 - 64) : new Uint8Array(0)).length, o3 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t4 = 0; t4 < n3; t4 += 1)
                o3[t4 >> 2] |= e4[t4] << (t4 % 4 << 3);
              if (o3[t4 >> 2] |= 128 << (t4 % 4 << 3), t4 > 55)
                for (r2(l2, o3), t4 = 0; t4 < 16; t4 += 1)
                  o3[t4] = 0;
              return s2 = (s2 = 8 * c2).toString(16).match(/(.*?)(.{0,8})$/), a2 = parseInt(s2[2], 16), u2 = parseInt(s2[1], 16) || 0, o3[14] = a2, o3[15] = u2, r2(l2, o3), l2;
            }(new Uint8Array(e3)), o2 = a(n2);
            return t3 ? c(o2) : o2;
          }, l;
        }();
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return c;
        });
        var n = r(81), i = r(1), o = r(0), s = function() {
          return (s = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, a = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, u = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, c = (l.prototype.encodeRequest = function(e2, t2, r2, n2) {
          var i2 = ((a2 = e2.cmd != o.d.sw_handshake.cmd && e2.cmd != o.d.sw_login.cmd) || (e2.flags[0] = 0), this.encode(this.protoInstance.proto_zim.Header, e2)), s2 = i2.length, a2 = (t2 = this.encode(this.getProtoBeanInstance(e2.cmd, "req"), t2), (t2 = a2 ? this.crypto.encrypt(t2, n2.cryptoConfig.key2, n2.cryptoConfig.iv2) : t2).length);
          return (n2 = new Uint8Array(7 + s2 + a2))[0] = 33, n2[1] = s2 >> 8, n2[2] = s2 - (n2[1] << 8), n2.set(new Uint8Array(new Int32Array([a2]).buffer).reverse(), 3), n2.set(i2, 7), n2.set(t2, 7 + s2), r2 ? this.encodeAccesshubPCUpwardMessage(r2, e2, n2) : n2;
        }, l.prototype.decodeAccesshubResponse = function(e2, t2) {
          return 21 == e2 ? this.decode(this.protoInstance.proto_accesshub.PCDownwardMessage, t2.slice(13)).payload : (e2 = this.accesshubDecodeTypeMap[e2]) && this.decode(this.protoInstance.proto_accesshub[e2], t2.slice(13));
        }, l.prototype.decodeResponseHeader = function(e2) {
          var t2 = (e2[1] << 8) + e2[2];
          return [this.decode(this.protoInstance.proto_zim.Header, e2.slice(7, 7 + t2)), t2];
        }, l.prototype.decodeResponseBody = function(e2, t2, r2, n2) {
          var i2, s2 = this;
          e2 = e2.slice(7 + r2);
          if (t2 != o.d.sw_login.cmd)
            try {
              e2 = this.crypto.decrypt(e2, n2.cryptoConfig.key2, n2.cryptoConfig.iv2);
            } catch (r3) {
              i2 = true;
            }
          var a2 = [];
          try {
            var u2 = this.decode(this.getProtoBeanInstance(t2, "rsp"), e2);
            return t2 === o.d.swp_list.cmd && u2.push_requests && u2.push_requests.forEach(function(e3) {
              a2.push(e3.sub_cmd), e3.msg_body = s2.decode(s2.getProtoBeanInstance(e3.sub_cmd, "rsp"), e3.msg_body);
            }), u2;
          } catch (r3) {
            return (0, console.warn)("Rsp body decrypt error or Protobuf decode error", { cmd: t2, decryptError: i2, decodeError: true, rspBody: e2 }, r3), { code: 1, message: "Protobuf decode error for " + t2, subCmds: a2 };
          }
        }, l.prototype.encodeMediaMsgBody = function(e2, t2) {
          return e2 = e2 == o.hb.Combine ? "StMsgCombineInfo" : e2 == o.hb.Image ? "PictureMsgBody" : "VideoMsgBody", this.encode(this.protoInstance.proto_zim[e2], t2);
        }, l.prototype.decodeMsgBody = function(e2, t2, r2, n2) {
          var a2 = t2.type;
          if (a2 >= o.hb.Image && a2 <= o.hb.Video) {
            t2.message = "";
            var u2 = null, c2 = a2 == o.hb.Image ? "PictureMsgBody" : "VideoMsgBody";
            if (1 == n2)
              try {
                u2 = this.decode(this.protoInstance.proto_zim[c2], r2);
              } catch (t3) {
                try {
                  u2 = JSON.parse(Object(i.h)(r2));
                } catch (t4) {
                }
              }
            else
              try {
                u2 = JSON.parse(Object(i.h)(r2));
              } catch (t3) {
                try {
                  u2 = this.decode(this.protoInstance.proto_zim[c2], r2);
                } catch (t4) {
                }
              }
            u2 && (n2 = !t2.isServerMessage && u2.file_uid, c2 = this.handleFileProxyHost(n2, u2.file_download_url || ""), (l2 = t2).fileUID = !t2.isServerMessage && u2.file_uid || "", l2.fileName = u2.file_name || "", l2.fileSize = +u2.file_size || 0, l2.fileDownloadUrl = c2, a2 == o.hb.Image ? (d = t2, (p = u2.large_image_download_url) ? d.largeImageDownloadUrl = this.handleFileProxyHost(n2, p) : u2.large && (d.largeImageDownloadUrl = c2 + u2.large), (p = u2.thumbnail_download_url) ? d.thumbnailDownloadUrl = this.handleFileProxyHost(n2, p) : u2.thumbnail && (d.thumbnailDownloadUrl = c2 + u2.thumbnail), d.originalImageWidth = u2.origin_width || 0, d.originalImageHeight = u2.origin_height || 0, d.thumbnailWidth = u2.small_width || 0, d.thumbnailHeight = u2.small_height || 0, d.largeImageWidth = u2.big_width || 0, d.largeImageHeight = u2.big_height || 0) : a2 == o.hb.Audio ? (d = t2).audioDuration = +u2.media_duration || 0 : a2 == o.hb.Video && ((d = t2).videoDuration = +u2.media_duration || 0, (p = u2.video_first_frame_download_url) ? d.videoFirstFrameDownloadUrl = this.handleFileProxyHost(n2, p) : u2.thumbnail && (d.videoFirstFrameDownloadUrl = c2 + u2.thumbnail), d.videoFirstFrameWidth = u2.frame_width || 0, d.videoFirstFrameHeight = u2.frame_height || 0));
          } else if (a2 == o.hb.Revoke) {
            t2.message = "";
            var l2 = Object(i.v)(r2.msg_status).revoke;
            n2 = r2.msg_type;
            Object.assign(t2, { revokeType: r2.revoke_type, revokeStatus: l2, revokeTimestamp: r2.revoke_time, operatedUserID: r2.user_id || "", revokeExtendedData: Object(i.h)(r2.payload), originalMessageType: 200 <= n2 && n2 <= 400 ? o.hb.Custom : n2, originalTextMessageContent: "" });
          } else if (a2 == o.hb.Combine)
            t2.message = "", r2 = this.decode(this.protoInstance.proto_zim.StMsgCombineInfo, r2), Object.assign(t2, { messageList: t2.messageList || [], title: r2.title, summary: r2.summary, aesKey: r2.file_body.media_duration, fileName: r2.file_body.file_name || "", fileSize: +r2.file_body.file_size || 0, fileUID: r2.file_body.file_uid, fileDownloadUrl: this.handleFileProxyHost(!t2.isServerMessage, r2.file_body.file_download_url) }), t2.combineID || (p = this.crypto.generateNonce(), c2 = t2.conversationType, d = t2.localMessageID, u2 = t2.conversationID, t2.combineID = "0-" + c2 + "_" + d + "_" + p + "-" + u2);
          else if (a2 == o.hb.Tips) {
            t2.message = "", t2.direction = o.ab.Receive, l2 = r2;
            try {
              r2 = this.decode(this.protoInstance.proto_zim.StTipsMsgContent, r2);
            } catch (t3) {
              return;
            }
            n2 = r2.type, c2 = r2.op_user_info;
            var d = r2.target_users, p = o.ob.Unknown;
            if (n2 < 10 ? p = n2 : n2 < 30 ? p = o.ob.GroupMemberInfoChanged : n2 < 50 && (p = o.ob.GroupInfoChanged), t2.event = p, t2.operatedUser = s(s({}, Object(i.u)(c2.room_id, e2)), { userName: c2.message, memberRole: c2.reason, memberNickname: c2.sub_room_id }), t2.targetUserList = d.map(function(t3) {
              return s(s({}, Object(i.u)(t3.room_id, e2)), { userName: t3.message, memberRole: t3.reason, memberNickname: t3.sub_room_id });
            }), p == o.ob.GroupInfoChanged) {
              var h = r2.group_data_flag, f = r2.group_notice, g = r2.group_name, m = Object(i.h)(r2.group_avatar), _ = {};
              switch (n2) {
                case 30:
                  switch (h) {
                    case 1:
                      _.type = o.nb.GroupNameChanged, _.groupName = g;
                      break;
                    case 2:
                      _.type = o.nb.GroupNoticeChanged, _.groupNotice = f;
                      break;
                    case 4:
                      _.type = o.nb.GroupAvatarUrlChanged, _.groupAvatarUrl = m;
                      break;
                    default:
                      _.type = o.nb.GroupDataChanged, _.groupDataFlag = h, g && (_.groupName = g), f && (_.groupNotice = f), m && (_.groupAvatarUrl = m);
                  }
                  break;
                case 34:
                  _.type = o.nb.GroupMuteChanged, _.groupMutedInfo = Object(i.f)(r2.forbid, this.settings.getRealClientTimestamp());
              }
              t2.changeInfo = _;
            } else if (p == o.ob.GroupMemberInfoChanged) {
              switch (_ = {}, n2) {
                case 11:
                  _.type = o.nb.GroupOwnerTransferred, _.memberRole = o.R.Owner;
                  break;
                case 12:
                  _.type = o.nb.GroupMemberRoleChanged, _.memberRole = r2.role;
                  break;
                case 13:
                  _.type = o.nb.GroupMemberMuteChanged, _.muteExpiredTime = r2.forbid_expire_time;
              }
              t2.changeInfo = _;
            }
            t2.event == o.ob.Unknown && (t2.message = l2);
          } else
            t2.message = Object(i.h)(r2);
        }, l.prototype.encodeMsgCombineInfo = function(e2, t2) {
          var r2;
          return e2 = this.encode(this.protoInstance.proto_zim.MsgCombineInfo, e2), (r2 = this.crypto).encrypt.apply(r2, u([e2], a(this.crypto.generateKeyIV(t2)), false));
        }, l.prototype.decodeMsgCombineInfo = function(e2, t2) {
          var r2;
          return e2 = (r2 = this.crypto).decrypt.apply(r2, u([e2], a(this.crypto.generateKeyIV(t2)), false)), this.decode(this.protoInstance.proto_zim.MsgCombineInfo, e2);
        }, l.prototype.encodeAccesshubHTTPRequest = function(e2, t2, r2, n2, o2, a2) {
          var u2 = n2.url.replace(/^(https?):\/\/[\w\-\.]+\//, "/"), c2 = (c2 = n2.headers) && Object.keys(c2).map(function(e3) {
            return { name: e3, val: String(c2[e3]) };
          });
          t2 = s({ txid: t2, appid: r2.appID, id_name: r2.user.userID, location: u2, service_no: a2, method_no: "GET" == n2.method ? 1 : 2, headers: c2, body: o2 ? Object(i.k)(JSON.stringify(o2)) : null }, this.accesshubConf), r2 = this.encode(this.protoInstance.proto_accesshub.HTTPRequest, t2);
          return this.createAccesshubBody(4, e2, r2);
        }, l.prototype.encodeAccesshubGetAppConfigRequest = function(e2, t2, r2, n2) {
          return t2 = s(s({ txid: t2, appid: r2.appID, id_name: r2.user.userID, token: n2 || r2.token, config_key: "init" }, this.accesshubConf), { is_special_customer: 0 }), n2 = this.encode(this.protoInstance.proto_accesshub.GetAppConfigRequest, t2), this.createAccesshubBody(23, e2, n2);
        }, l.prototype.encodeAccesshubGetSvraddrRequest = function(e2, t2, r2) {
          return t2 = s({ txid: t2, appid: r2.appID, id_name: r2.user.userID }, this.accesshubConf), this.settings.advancedConfig.geoFence.type && (t2.geofencing_type = this.settings.advancedConfig.geoFence.type, t2.geofencings = this.settings.advancedConfig.geoFence.areas), r2 = this.encode(this.protoInstance.proto_accesshub.GetSvraddrRequest, t2), this.createAccesshubBody(39, e2, r2);
        }, l.prototype.encodeAccesshubDispatchRequest = function(e2, t2, r2) {
          return t2 = s({ txid: t2, appid: r2.appID, id_name: r2.user.userID }, this.accesshubConf), this.settings.advancedConfig.geoFence.type && (t2.geofencing_type = this.settings.advancedConfig.geoFence.type, t2.geofencings = this.settings.advancedConfig.geoFence.areas), r2 = this.encode(this.protoInstance.proto_accesshub.AccesshubDispatchRequest, t2), this.createAccesshubBody(26, e2, r2);
        }, l.prototype.encodeAccesshubPCUpwardMessage = function(e2, t2, r2) {
          return t2 = s({ txid: t2.seq, appid: t2.app_id, id_name: t2.user_id, payload: r2, service_no: 9, wss_message_type: 1, wss_path: "/ws" }, this.accesshubConf), this.settings.advancedConfig.geoFence.type && (t2.geofencing_type = this.settings.advancedConfig.geoFence.type, t2.geofencings = this.settings.advancedConfig.geoFence.areas), r2 = this.encode(this.protoInstance.proto_accesshub.PCUpwardMessage, t2), this.createAccesshubBody(17, e2, r2);
        }, l.prototype.createAccesshubBody = function(e2, t2, r2) {
          var n2 = new Uint8Array(13 + r2.length);
          return n2[0] = 175, n2[1] = 0, n2[2] = e2 >> 8, n2[3] = e2 - (n2[2] << 8), n2.set(new Uint8Array(new Int32Array([r2.length]).buffer).reverse(), 4), n2.set(new Uint8Array(new Int32Array([t2]).buffer).reverse(), 8), n2[12] = 0, n2.set(r2, 13), n2;
        }, l.prototype.encode = function(e2, t2) {
          return e2 ? e2.encode(new e2(t2)).finish() : [];
        }, l.prototype.decode = function(e2, t2) {
          return e2 ? s({}, e2.decode(t2 || [])) : {};
        }, l.prototype.getProtoBeanInstance = function(e2, t2) {
          return t2 = (e2 = this.protoBeanMap[e2]) && e2[t2], t2 = this.protoInstance.proto_zim[t2], e2.ext && Object.assign(t2, e2.ext), t2;
        }, l.prototype.handleFileProxyHost = function(e2, t2) {
          var r2 = this.settings.advancedConfig.geoFence.host.fileproxy;
          return e2 && r2 && t2 ? t2.replace(this.settings.advancedConfig.geoFence.reg, r2 + "$4") : t2;
        }, l);
        function l(e2, t2) {
          this.crypto = e2, this.settings = t2, this.protoInstance = n.a, this.protoBeanMap = Object.values(o.d).reduce(function(e3, t3) {
            return e3[t3.cmd] = t3, e3;
          }, {}), this.accesshubDecodeTypeMap = { 5: "HTTPResponse", 40: "GetSvraddrResponse", 24: "GetAppConfigResponse", 27: "AccesshubDispatchResponse", 3: "CloseConnection", 22: "Redirect", 19: "PCEstablished", 30: "PushException" }, this.accesshubConf = { mode_no: 1, sdk_type: 4, zegoconn_version: 3, zegoconn_run_env: i.p ? 2 : 1 };
        }
      }, function(e, t, r) {
        "use strict";
        function n(e2, t2) {
          if (t2)
            for (let r2 = Object.keys(t2), n2 = 0; n2 < r2.length; ++n2)
              t2[r2[n2]] && (e2[r2[n2]] = t2[r2[n2]]);
        }
        r.d(t, "a", function() {
          return s;
        }), t = r(3), t = r.n(t), (r = r(9)).util.Long = t.a, r.configure();
        const i = r.Reader, o = r.Writer, s = (r.util, r.roots.default || (r.roots.default = {}));
        s.proto_accesshub = (() => {
          const e2 = {};
          function t2(e3) {
            n(this, e3);
          }
          function r2(e3) {
            n(this, e3);
          }
          function a() {
            this.headers = [], this.txid = 0;
          }
          function u(e3) {
            n(this, e3);
          }
          function c() {
          }
          function l() {
          }
          function d() {
            this.groups = [], this.opt_ports = [], this.wss_groups = [];
          }
          function p() {
            this.txid = 0;
          }
          function h() {
          }
          function f(e3) {
            n(this, e3);
          }
          function g() {
            this.txid = 0;
          }
          function m() {
          }
          function _(e3) {
            n(this, e3);
          }
          function b() {
            this.txid = 0;
          }
          function v() {
          }
          function y(e3) {
            n(this, e3);
          }
          function M() {
            this.txid = 0, this.groups = [], this.opt_ports = [], this.wss_groups = [];
          }
          function k() {
          }
          function C() {
            this.quic_nodes = [], this.mtcp_nodes = [], this.wss_nodes = [];
          }
          function I() {
          }
          function S() {
          }
          function D() {
          }
          return e2.HTTPRequest = (t2.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.txid && t3.uint32(8).uint64(e3.txid), e3.appid && t3.uint32(16).uint32(e3.appid), e3.mode && t3.uint32(34).string(e3.mode), e3.id_name && t3.uint32(42).string(e3.id_name), e3.stick && t3.uint32(58).string(e3.stick), e3.service && t3.uint32(66).string(e3.service), e3.location && t3.uint32(74).string(e3.location), e3.method && t3.uint32(82).string(e3.method), e3.headers && e3.headers.length)
              for (let r3 = 0; r3 < e3.headers.length; ++r3)
                s.proto_accesshub.HTTPRequest.HTTPHeader.encode(e3.headers[r3], t3.uint32(90).fork()).ldelim();
            return e3.body && t3.uint32(98).bytes(e3.body), e3.mode_no && t3.uint32(112).int32(e3.mode_no), e3.service_no && t3.uint32(120).int32(e3.service_no), e3.method_no && t3.uint32(128).int32(e3.method_no), e3.sdk_type && t3.uint32(136).int32(e3.sdk_type), e3.zegoconn_run_env && t3.uint32(144).int32(e3.zegoconn_run_env), e3.zegoconn_version && t3.uint32(152).uint32(e3.zegoconn_version), t3;
          }, t2.HTTPHeader = (r2.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.name && t3.uint32(10).string(e3.name), e3.val && t3.uint32(18).string(e3.val), t3;
          }, r2.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.HTTPRequest.HTTPHeader();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.name = e3.string();
                  break;
                case 2:
                  n2.val = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, r2), t2), e2.HTTPResponse = (a.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.HTTPResponse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.txid = +e3.uint64().toString();
                  break;
                case 2:
                  n2.headers.push(s.proto_accesshub.HTTPRequest.HTTPHeader.decode(e3, e3.uint32()));
                  break;
                case 3:
                  n2.status_code = e3.int32();
                  break;
                case 4:
                  n2.body = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, a), e2.PCUpwardMessage = (u.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.txid && t3.uint32(8).uint64(e3.txid), e3.appid && t3.uint32(16).uint32(e3.appid), e3.mode_no && t3.uint32(32).int32(e3.mode_no), e3.id_name && t3.uint32(42).string(e3.id_name), e3.service_no && t3.uint32(48).int32(e3.service_no), e3.payload && t3.uint32(66).bytes(e3.payload), e3.sdk_type && t3.uint32(72).int32(e3.sdk_type), e3.wss_message_type && t3.uint32(80).uint32(e3.wss_message_type), e3.wss_path && t3.uint32(90).string(e3.wss_path), e3.zegoconn_version && t3.uint32(104).uint32(e3.zegoconn_version), e3.zegoconn_run_env && t3.uint32(112).int32(e3.zegoconn_run_env), e3.geofencing_type && t3.uint32(136).uint32(e3.geofencing_type), e3.geofencings && e3.geofencings.length)
              for (let r3 = 0; r3 < e3.geofencings.length; ++r3)
                t3.uint32(144).uint32(e3.geofencings[r3]);
            return t3;
          }, u), e2.PCDownwardMessage = (c.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.PCDownwardMessage();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.payload = e3.bytes();
                  break;
                case 2:
                  n2.wss_message_type = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, c), e2.PCEstablished = (l.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.PCEstablished();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.elapse = e3.uint32();
                  break;
                case 2:
                  n2.from = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, l), e2.Redirect = (d.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.Redirect();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.rand = e3.string();
                  break;
                case 2:
                  n2.secret = e3.string();
                  break;
                case 3:
                  n2.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                case 4:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.opt_ports.push(e3.uint32());
                  else
                    n2.opt_ports.push(e3.uint32());
                  break;
                case 5:
                  n2.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, d), e2.PushException = (p.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.PushException();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.reason = e3.int32();
                  break;
                case 2:
                  n2.msg = e3.string();
                  break;
                case 3:
                  n2.txid = +e3.uint64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, p), e2.CloseConnection = (h.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.CloseConnection();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.reason = e3.int32();
                  break;
                case 2:
                  n2.msg = e3.string();
                  break;
                case 3:
                  n2.action = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, h), e2.GetSvraddrRequest = (f.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.txid && t3.uint32(8).uint64(e3.txid), e3.appid && t3.uint32(16).uint32(e3.appid), e3.mode_no && t3.uint32(32).int32(e3.mode_no), e3.id_name && t3.uint32(42).string(e3.id_name), e3.sdk_type && t3.uint32(48).int32(e3.sdk_type), e3.zegoconn_run_env && t3.uint32(56).int32(e3.zegoconn_run_env), e3.zegoconn_version && t3.uint32(64).uint32(e3.zegoconn_version), e3.geofencing_type && t3.uint32(80).uint32(e3.geofencing_type), e3.geofencings && e3.geofencings.length)
              for (let r3 = 0; r3 < e3.geofencings.length; ++r3)
                t3.uint32(88).uint32(e3.geofencings[r3]);
            return t3;
          }, f), e2.GetSvraddrResponseData = (g.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.GetSvraddrResponseData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.txid = +e3.uint64().toString();
                  break;
                case 2:
                  n2.geofencing_id = e3.uint32();
                  break;
                case 3:
                  n2.svraddr_ver = e3.uint32();
                  break;
                case 5:
                  n2.zegons = e3.string();
                  break;
                case 7:
                  n2.accesshub = e3.string();
                  break;
                case 9:
                  n2.logreport = e3.string();
                  break;
                case 11:
                  n2.detaillog = e3.string();
                  break;
                case 13:
                  n2.stunsvr = e3.string();
                  break;
                case 15:
                  n2.zimfile = e3.string();
                  break;
                case 17:
                  n2.accesshub_sni = e3.string();
                  break;
                case 18:
                  n2.accesshub_web = e3.string();
                  break;
                case 19:
                  n2.logreport_web = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, g), e2.GetSvraddrResponse = (m.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.GetSvraddrResponse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.int32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  Object.assign(n2, s.proto_accesshub.GetSvraddrResponseData.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, m), e2.GetAppConfigRequest = (_.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.txid && t3.uint32(8).uint64(e3.txid), e3.appid && t3.uint32(16).uint32(e3.appid), e3.mode_no && t3.uint32(32).int32(e3.mode_no), e3.id_name && t3.uint32(42).string(e3.id_name), e3.config_key && t3.uint32(50).string(e3.config_key), e3.token && t3.uint32(82).string(e3.token), e3.sdk_type && t3.uint32(88).int32(e3.sdk_type), e3.zegoconn_version && t3.uint32(96).uint32(e3.zegoconn_version), e3.zegoconn_run_env && t3.uint32(104).int32(e3.zegoconn_run_env), e3.is_special_customer && t3.uint32(128).uint32(e3.is_special_customer), t3;
          }, _), e2.GetAppConfigResponseData = (b.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.GetAppConfigResponseData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.txid = +e3.uint64().toString();
                  break;
                case 2:
                  Object.assign(n2, s.proto_accesshub.InitConfig.decode(e3.bytes()));
                  break;
                case 3:
                  n2.ts = e3.uint64();
                  break;
                case 4:
                  n2.etag = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, b), e2.GetAppConfigResponse = (v.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.GetAppConfigResponse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.int32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  Object.assign(n2, s.proto_accesshub.GetAppConfigResponseData.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, v), e2.AccesshubDispatchRequest = (y.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.txid && t3.uint32(8).uint64(e3.txid), e3.appid && t3.uint32(16).uint32(e3.appid), e3.mode_no && t3.uint32(32).int32(e3.mode_no), e3.id_name && t3.uint32(42).string(e3.id_name), e3.sdk_type && t3.uint32(48).int32(e3.sdk_type), e3.zegoconn_version && t3.uint32(56).uint32(e3.zegoconn_version), e3.zegoconn_run_env && t3.uint32(64).int32(e3.zegoconn_run_env), e3.geofencing_type && t3.uint32(88).uint32(e3.geofencing_type), e3.geofencings && e3.geofencings.length)
              for (let r3 = 0; r3 < e3.geofencings.length; ++r3)
                t3.uint32(96).uint32(e3.geofencings[r3]);
            return t3;
          }, y), e2.AccesshubDispatchResponseData = (M.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.AccesshubDispatchResponseData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.txid = +e3.uint64().toString();
                  break;
                case 2:
                  n2.rand = e3.string();
                  break;
                case 3:
                  n2.secret = e3.string();
                  break;
                case 4:
                  n2.groups.push(s.proto_accesshub.AccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                case 5:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.opt_ports.push(e3.uint32());
                  else
                    n2.opt_ports.push(e3.uint32());
                  break;
                case 6:
                  n2.wss_groups.push(s.proto_accesshub.WssAccesshubDispatchGroup.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, M), e2.AccesshubDispatchResponse = (k.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.AccesshubDispatchResponse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.int32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  Object.assign(n2, s.proto_accesshub.AccesshubDispatchResponseData.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, k), e2.AccesshubDispatchGroup = (C.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.AccesshubDispatchGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group = e3.string();
                  break;
                case 2:
                  n2.quic_nodes.push(e3.string());
                  break;
                case 3:
                  n2.mtcp_nodes.push(e3.string());
                  break;
                case 4:
                  n2.wss_nodes.push(e3.string());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, C), e2.WssAccesshubDispatchGroup = (I.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.WssAccesshubDispatchGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group = e3.string();
                  break;
                case 2:
                  n2.host = e3.string();
                  break;
                case 3:
                  n2.main_domain = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, I), e2.AppConfig = (S.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.AppConfig();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.test_id = e3.int32();
                  break;
                case 2:
                  n2.domain = e3.string();
                  break;
                case 3:
                  n2.flexible_domain = e3.string();
                  break;
                case 4:
                  n2.replace_flexible_domain = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, S), e2.InitConfig = (D.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            for (var r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_accesshub.InitConfig(); e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? Object.assign(n2, s.proto_accesshub.AppConfig.decode(e3, e3.uint32())) : e3.skipType(7 & o2);
            }
            return n2;
          }, D), e2;
        })(), s.proto_zim = (() => {
          const e2 = {};
          function t2() {
          }
          function r2(e3) {
            n(this, e3);
          }
          function a() {
            this.server_timestamp = 0;
          }
          function u(e3) {
            n(this, e3);
          }
          function c(e3) {
            n(this, e3);
          }
          function l() {
            this.server_ips = [], this.redirect_server = [], this.server_timestamp = 0, this.register_time = 0;
          }
          function d() {
            this.push_requests = [], this.send_time = 0;
          }
          function p() {
          }
          function h(e3) {
            n(this, e3);
          }
          function f(e3) {
            this.conv_sid = "", this.client_msg_seq = 0, n(this, e3);
          }
          function g(e3) {
            n(this, e3);
          }
          function m(e3) {
            n(this, e3);
          }
          function _(e3) {
            n(this, e3);
          }
          function b(e3) {
            n(this, e3);
          }
          function v(e3) {
            this.send_user_map = {}, this.child = [], n(this, e3);
          }
          function y(e3) {
            this.conv_type = 0, this.msg_time = 0, this.is_server = 0, this.child = [], n(this, e3);
          }
          function M(e3) {
            n(this, e3);
          }
          function k(e3) {
            this.at = [], n(this, e3);
          }
          function C() {
            this.msg_id = "", this.conv_msg_seq = 0, this.msg_time = 0;
          }
          function I() {
          }
          function S(e3) {
            n(this, e3);
          }
          function D() {
            this.msg_id = "", this.msg_time = 0;
          }
          function q() {
          }
          function w() {
            this.msglist_seq = 0;
          }
          function A() {
          }
          function R(e3) {
            n(this, e3);
          }
          function x() {
            this.err_list = [], this.new_err_list = [], this.call_seq = 0, this.call_list_seq = 0, this.create_time = 0;
          }
          function T(e3) {
            n(this, e3);
          }
          function L() {
            this.err_list = [], this.new_err_list = [], this.call_seq = 0, this.call_list_seq = 0, this.call_user_session_id = 0;
          }
          function G() {
            this.user_state = 0, this.accept_time = 0, this.quit_time = 0, this.residue_timeout_time = 0;
          }
          function E() {
            this.user_list = [], this.call_seq = 0, this.now_time = 0;
          }
          function O() {
            this.calls = [], this.cur_list_seq = 0, this.max_list_seq = 0;
          }
          function U() {
            this.call_user_list = [], this.create_time = 0, this.call_list_seq = 0, this.call_status = 0, this.now_time = 0, this.destroy_time = 0, this.accept_time = 0, this.quit_time = 0, this.invite_time = 0;
          }
          function P(e3) {
            n(this, e3);
          }
          function j() {
            this.err_list = [], this.call_seq = 0, this.call_user_session_id = 0;
          }
          function B(e3) {
            n(this, e3);
          }
          function F() {
            this.call_list_seq = 0, this.talk_time = 0, this.quit_time = 0, this.call_seq = 0, this.call_user_session_id = 0;
          }
          function z() {
            this.user_state_list = [], this.accept_time = 0, this.create_time = 0;
          }
          function N() {
            this.user_state_list = [], this.call_seq = 0, this.call_list_seq = 0, this.create_time = 0, this.call_user_session_id = 0;
          }
          function K() {
            this.call_seq = 0, this.call_list_seq = 0, this.accept_time = 0, this.call_user_session_id = 0;
          }
          function X() {
            this.call_seq = 0, this.call_list_seq = 0, this.accept_time = 0, this.call_user_session_id = 0;
          }
          function H() {
            this.user_ids = [], this.call_seq = 0, this.call_list_seq = 0, this.call_user_session_id = 0;
          }
          function Q() {
            this.user_state_list = [], this.create_time = 0, this.call_seq = 0, this.call_list_seq = 0, this.call_user_session_id = 0;
          }
          function V() {
            this.call_seq = 0, this.accept_time = 0, this.quit_time = 0, this.call_user_session_id = 0;
          }
          function Z() {
            this.call_list_seq = 0, this.talk_time = 0, this.destroy_time = 0, this.call_user_session_id = 0;
          }
          function J() {
            this.call_seq = 0, this.call_user_session_id = 0;
          }
          function W() {
            this.user_state_list = [], this.timeout = 0, this.call_seq = 0, this.call_user_session_id = 0;
          }
          function Y(e3) {
            this.invitees = [], this.call_id = "", this.caller = "", this.session_id = 0;
          }
          function $() {
            this.msg_id = "", this.conv_msg_seq = 0;
          }
          function ee() {
            this.conv_type = 0, this.conv_list_seq = 0, this.conv_msg_seq = 0, this.read_seq = 0, this.send_count_after_read = 0, this.last_del_msg_seq = 0, this.statemsg_seq = 0, this.receipt_max_conv_msg_seq = 0, this.at_max_conv_msg_seq = 0, this.at_all_max_conv_msg_seq = 0, this.update_time = 0, this.sub_read_count = 0, this.last_revoke_msg_seq = 0, this.last_msg_time = 0, this.at_info_list = [], this.group_tips_msg_type = 0;
          }
          function te() {
            this.conv_list = [], this.conv_list_seq = 0, this.max_list_seq = 0, this.max_del_conv_list_seq = 0;
          }
          function re(e3) {
            n(this, e3);
          }
          function ne() {
            this.msgs = [], this.max_conv_msg_seq = 0, this.next_conv_msg_seq = 0;
          }
          function ie() {
            this.msgs = [], this.c2c_msg_seq = 0, this.svr_c2c_msg_seq = 0;
          }
          function oe(e3) {
            n(this, e3);
          }
          function se() {
            this.conv_list_seq = 0, this.group_list_seq = 0, this.c2c_msg_seq = 0, this.c2c_statemsg_seq = 0, this.extra_msg_list_seq = 0, this.conv_pinned_list_seq = 0, this.call_list_seq = 0, this.friend_list_seq = 0, this.friend_apply_list_seq = 0, this.black_list_seq = 0, this.delete_all_msg_time = 0, this.apply_expired_duration = 0, this.c2c_mute_max_seq = 0, this.user_info_seq = 0, this.group_apply_list_seq = 0;
          }
          function ae() {
            this.conv_list_seq = 0, this.conv_msg_seq = 0, this.conv_pinned_list_seq = 0;
          }
          function ue(e3) {
            n(this, e3);
          }
          function ce(e3) {
            n(this, e3);
          }
          function le() {
            this.conv_msg_seq2_receipt_seq = {};
          }
          function de() {
            this.read_members = [], this.unread_members = [];
          }
          function pe() {
            this.list = [], this.next_list_seq = 0;
          }
          function he() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.receipt_seq = 0;
          }
          function fe() {
            this.read_count = 0, this.unread_count = 0;
          }
          function ge() {
            this.del_conv_msg_seqs = [];
          }
          function me() {
            this.PushItems = [];
          }
          function _e() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.receipt_seq = 0, this.read_count = 0, this.unread_count = 0;
          }
          function be(e3) {
            n(this, e3);
          }
          function ve() {
            this.statemsg_list = [], this.next_statemsg_seq = 0;
          }
          function ye() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.statemsg_seq = 0, this.reaction_seq = 0;
          }
          function Me() {
            this.reaction_briefs = [];
          }
          function ke(e3) {
            n(this, e3);
          }
          function Ce() {
            this.statemsg_seq = 0, this.revoke_time = 0;
          }
          function Ie() {
            this.revoke_time = 0, this.revoke_type = 0;
          }
          function Se() {
            this.conv_type = 0, this.statemsg_seq = 0;
          }
          function De() {
            this.headers = {}, this.forms = {};
          }
          function qe(e3) {
            n(this, e3);
          }
          function we() {
          }
          function Ae() {
          }
          function Re() {
            this.member_data_seq = 0, this.forbid_expire_time = 0;
          }
          function xe() {
            this.group_create_time = 0;
          }
          function Te() {
            this.conv_msg_seq = 0, this.group_list_seq = 0, this.group_data_seq = 0;
          }
          function Le() {
            this.member_seq = 0, this.group_list_seq = 0;
          }
          function Ge(e3) {
            n(this, e3);
          }
          function Ee() {
            this.members = [], this.error_users = [], this.member_all_seq = 0, this.group_list_seq = 0, this.group_data_seq = 0, this.group_attribute_seq = 0;
          }
          function Oe(e3) {
            this.value = "", this.seq = 0, n(this, e3);
          }
          function Ue(e3) {
            this.attributes = [], n(this, e3);
          }
          function Pe(e3) {
            this.seq = 0, this.attributes = [], n(this, e3);
          }
          function je() {
            this.group_data_seq = 0, this.forbid_expire_time = 0, this.forbid_list = [];
          }
          function Be(e3) {
            n(this, e3);
          }
          function Fe() {
            this.fail_keys = [];
          }
          function ze(e3) {
            n(this, e3);
          }
          function Ne(e3) {
            n(this, e3);
          }
          function Ke(e3) {
            n(this, e3);
          }
          function Xe() {
            this.member_all_seq = 0, this.group_list_seq = 0, this.group_data_seq = 0, this.group_attribute_seq = 0, this.conv_msg_seq = 0;
          }
          function He(e3) {
            n(this, e3);
          }
          function Qe() {
          }
          function Ve(e3) {
            n(this, e3);
          }
          function Ze() {
            this.members = [], this.error_users = [], this.apply_users = [], this.member_all_seq = 0, this.group_data_seq = 0, this.group_attribute_seq = 0;
          }
          function Je() {
            this.list = [];
          }
          function We() {
            this.error_users = [], this.member_all_seq = 0;
          }
          function Ye(e3) {
            n(this, e3);
          }
          function $e() {
            this.event_type = 0;
          }
          function et() {
            this.change_list = [], this.member_all_seq = 0, this.cur_list_seq = 0;
          }
          function tt2() {
            this.members = [], this.deleted_members = [];
          }
          function rt(e3) {
            n(this, e3);
          }
          function nt() {
          }
          function it(e3) {
            n(this, e3);
          }
          function ot() {
          }
          function st() {
            this.group_list_seq = 0, this.group_data_seq = 0, this.all_member_seq = 0, this.attribute_seq = 0, this.member_count = 0;
          }
          function at() {
            this.group_infos = [], this.fail_keys = [];
          }
          function ut() {
            this.groups = [], this.cur_list_seq = 0, this.max_list_seq = 0;
          }
          function ct(e3) {
            n(this, e3);
          }
          function lt() {
          }
          function dt() {
            this.members = [], this.member_all_seq = 0;
          }
          function pt() {
          }
          function ht() {
            this.members = [], this.change_type = 0, this.member_all_seq = 0;
          }
          function ft() {
            this.forbid_expire_time = 0, this.forbid_list = [];
          }
          function gt() {
          }
          function mt(e3) {
            n(this, e3);
          }
          function _t() {
            this.modify_type = 0, this.group_data_seq = 0;
          }
          function bt() {
            this.member_all_seq = 0;
          }
          function vt() {
            this.conv_msg_seq = 0;
          }
          function yt() {
            this.list = [];
          }
          function Mt() {
          }
          function kt() {
            this.conv_msg_seq = [];
          }
          function Ct(e3) {
            n(this, e3);
          }
          function It() {
            this.results = [];
          }
          function St() {
          }
          function Dt() {
            this.msgs = [];
          }
          function qt(e3) {
            n(this, e3);
          }
          function wt() {
            this.send_count_after_read = 0;
          }
          function At(e3) {
            n(this, e3);
          }
          function Rt() {
          }
          function xt(e3) {
            n(this, e3);
          }
          function Tt() {
            this.msg_id = "";
          }
          function Lt(e3) {
            n(this, e3);
          }
          function Gt() {
            this.msgs = [], this.next_conv_msg_seq = 0, this.max_conv_msg_seq = 0;
          }
          function Et(e3) {
            this.msg_id = "", this.msg_time = 0, n(this, e3);
          }
          function Ot(e3) {
            n(this, e3);
          }
          function Ut() {
            this.cur_reaction_seq = 0, this.user_total_count = 0;
          }
          function Pt(e3) {
            n(this, e3);
          }
          function jt() {
            this.succ_list = [], this.error_list = [];
          }
          function Bt(e3) {
            n(this, e3);
          }
          function Ft(e3) {
            n(this, e3);
          }
          function zt() {
            this.reaction_list = [], this.conv_msg_seq = 0, this.msg_next_reaction_seq = 0, this.msg_max_reaction_seq = 0;
          }
          function Nt(e3) {
            n(this, e3);
          }
          function Kt() {
            this.user_reaction = [], this.max_reaction_seq = 0, this.total_user_count = 0;
          }
          function Xt() {
            this.conv_type = 0, this.msg_reactions = [];
          }
          function Ht() {
            this.reaction_infos = [], this.conv_msg_seq = 0, this.start_reaction_seq = 0, this.end_reaction_seq = 0;
          }
          function Qt() {
            this.send_count_after_read = 0, this.receipt_seq = 0;
          }
          function Vt(e3) {
            n(this, e3);
          }
          function Zt() {
            this.msgs = [], this.max_conv_msg_seq = 0, this.next_conv_msg_seq = 0, this.fetch_end = 0;
          }
          function Jt() {
            this.conv_type = 0, this.conv_pinned_list_seq = 0;
          }
          function Wt() {
            this.conv_msg_seq = 0, this.group_list_seq = 0;
          }
          function Yt() {
            this.del_conv_msg_seqs = [], this.conv_type = 0, this.max_del_conv_msg_seq = 0;
          }
          function $t(e3) {
            n(this, e3);
          }
          function er() {
            this.state_list = [], this.next_state_seq = 0;
          }
          function tr() {
            this.conv_type = 0, this.conv_msg_seq = 0, this.state_seq = 0;
          }
          function rr() {
          }
          function nr() {
          }
          function ir() {
          }
          function or() {
          }
          function sr() {
            this.send_count_after_read = 0;
          }
          function ar(e3) {
            n(this, e3);
          }
          function ur() {
            this.conv_msg_seq = 0;
          }
          function cr(e3) {
            n(this, e3);
          }
          function lr() {
            this.conv_msg_seq = 0;
          }
          function dr(e3) {
            n(this, e3);
          }
          function pr(e3) {
            n(this, e3);
          }
          function hr() {
            this.users = [];
          }
          function fr(e3) {
            this.updated_at = 0, this.user_info_seq = 0, n(this, e3);
          }
          function gr(e3) {
            this.online = [], this.disable_push = [], n(this, e3);
          }
          function mr() {
            this.user_info_seq = 0;
          }
          function _r(e3) {
            n(this, e3);
          }
          function br() {
            this.max_conv_msg_seq = 0;
          }
          function vr(e3) {
            n(this, e3);
          }
          function yr() {
          }
          function Mr(e3) {
            this.value = "", n(this, e3);
          }
          function kr(e3) {
            n(this, e3);
          }
          function Cr(e3) {
            this.attributes = [], n(this, e3);
          }
          function Ir(e3) {
            n(this, e3);
          }
          function Sr(e3) {
            n(this, e3);
          }
          function Dr() {
            this.err_list = [];
          }
          function qr(e3) {
            n(this, e3);
          }
          function wr(e3) {
            n(this, e3);
          }
          function Ar() {
            this.user_attributes = [], this.user_err_list = [];
          }
          function Rr(e3) {
            n(this, e3);
          }
          function xr(e3) {
            this.attributes = [], this.err_list = [], n(this, e3);
          }
          function Tr(e3) {
            n(this, e3);
          }
          function Lr(e3) {
            n(this, e3);
          }
          function Gr() {
            this.user_attributes = [];
          }
          function Er() {
          }
          function Or() {
          }
          function Ur() {
            this.attributes = [];
          }
          function Pr() {
            this.push_attributes = [];
          }
          function jr() {
            this.result = [], this.err_list = [];
          }
          function Br(e3) {
            n(this, e3);
          }
          function Fr() {
          }
          function zr() {
            this.reaction_list = [], this.msg_max_reaction_seq = 0;
          }
          function Nr() {
            this.user_reaction = [], this.max_reaction_seq = 0, this.total_user_count = 0;
          }
          function Kr() {
          }
          function Xr() {
            this.user_state = 0, this.user_session_id = 0, this.extended_data = "", this.accept_time = 0, this.quit_time = 0, this.residue_timeout_time = 0, this.call_state_list = [];
          }
          function Hr() {
            this.room_list = [];
          }
          function Qr(e3) {
            n(this, e3);
          }
          function Vr() {
            this.msgs = [], this.fail_list = [];
          }
          function Zr(e3) {
            n(this, e3);
          }
          function Jr() {
            this.apply_list_seq = "0";
          }
          function Wr() {
            this.friend_infos = [], this.apply_status_change_list = [], this.err_list = [];
          }
          function Yr(e3) {
            this.update_time = 0, n(this, e3);
          }
          function $r() {
            this.apply_list_seq = 0, this.apply_status = 0, this.wording = "", this.create_time = 0, this.update_time = 0;
          }
          function en(e3) {
            this.attributes = [], this.friend_list_seq = "0", this.wording = "", this.remark = "", this.create_time = 0, n(this, e3);
          }
          function tn() {
            this.apply_infos = [], this.err_list = [], this.friend_infos = [];
          }
          function rn() {
            this.app_type = 0, this.status = 0, this.attributes = [], this.apply_list_seq = 0, this.create_time = 0, this.update_time = 0, this.user_info_update_time = 0;
          }
          function nn(e3) {
            n(this, e3);
          }
          function on() {
            this.apply_list_seq = "0", this.apply_update_time = 0;
          }
          function sn(e3) {
            this.user_ids = [], this.delete_type = 0, n(this, e3);
          }
          function an(e3) {
            n(this, e3);
          }
          function un() {
            this.friends = [], this.friend_count = 0;
          }
          function cn() {
            this.is_del = false;
          }
          function ln() {
            this.apply_list = [], this.cur_list_seq = 0, this.max_list_seq = 0;
          }
          function dn(e3) {
            n(this, e3);
          }
          function pn() {
            this.succ_keys = [], this.fail_keys = [], this.friend_list_seq = "0";
          }
          function hn() {
            this.successes = [], this.fails = [];
          }
          function fn(e3) {
            this.sub_code = 0, this.relation = 0, n(this, e3);
          }
          function gn() {
            this.black_list = [], this.err_list = [];
          }
          function mn() {
            this.black_list = [], this.err_list = [];
          }
          function _n() {
            this.blacklists = [], this.cur_list_seq = 0, this.max_list_seq = 0;
          }
          function bn() {
          }
          function vn() {
            this.black_list_seq = 0, this.create_time = 0;
          }
          function yn() {
            this.friend_list_seq = "0";
          }
          function Mn() {
            this.friend_infos = [], this.apply_status_changes_list = [];
          }
          function kn() {
            this.apply_list_seq = 0;
          }
          function Cn() {
            this.apply_infos = [], this.friends = [];
          }
          function In() {
            this.friend_list_seq = "0", this.apply_list_seq = "0", this.apply_update_time = 0;
          }
          function Sn() {
            this.user_id = "", this.apply_list_seq = "0", this.update_time = 0;
          }
          function Dn() {
            this.attributes = [], this.action = 0, this.friend_list_seq = "0";
          }
          function qn() {
            this.black_list = [];
          }
          function wn() {
            this.black_list = [];
          }
          function An() {
            this.max_mute_seq = 0, this.user_ids = [];
          }
          function Rn() {
          }
          function xn(e3) {
            n(this, e3);
          }
          function Tn() {
            this.mute_info = [], this.error_user_list = [];
          }
          function Ln(e3) {
            this.mute_info = [], n(this, e3);
          }
          function Gn() {
            this.target_users = [];
          }
          return e2.CommonCodeMessage = (t2.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CommonCodeMessage();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, t2), e2.Header = (r2.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.cmd && t3.uint32(10).string(e3.cmd), e3.seq && t3.uint32(16).uint32(e3.seq), e3.timestamp && t3.uint32(24).int64(e3.timestamp), e3.app_id && t3.uint32(32).uint32(e3.app_id), e3.user_id && t3.uint32(42).string(e3.user_id), e3.session_id && t3.uint32(48).int64(e3.session_id), e3.user_nid && t3.uint32(56).int64(e3.user_nid), e3.controls && t3.uint32(66).bytes(e3.controls), e3.product && t3.uint32(72).int32(e3.product), e3.flags && t3.uint32(82).bytes(e3.flags), e3.caller_type && t3.uint32(88).int32(e3.caller_type), t3;
          }, r2.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.Header();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.cmd = e3.string();
                  break;
                case 2:
                  n2.seq = e3.uint32();
                  break;
                case 3:
                  n2.timestamp = e3.int64();
                  break;
                case 4:
                  n2.app_id = e3.uint32();
                  break;
                case 5:
                  n2.user_id = e3.string();
                  break;
                case 6:
                  n2.session_id = e3.int64();
                  break;
                case 7:
                  n2.user_nid = e3.int64();
                  break;
                case 8:
                  n2.controls = e3.bytes();
                  break;
                case 9:
                  n2.product = e3.int32();
                  break;
                case 10:
                  n2.flags = e3.bytes();
                  break;
                case 11:
                  n2.caller_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, r2), e2.HbRsp = (a.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.HbRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.heartbeat_interval = e3.uint32();
                  break;
                case 4:
                  n2.hb_timeout = e3.uint32();
                  break;
                case 5:
                  n2.server_timestamp = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, a), e2.HandshakeReq = (u.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.term_type && t3.uint32(8).int32(e3.term_type), e3.net_type && t3.uint32(16).int32(e3.net_type), e3.sdk_ver && t3.uint32(24).uint32(e3.sdk_ver), e3.forward_ip && e3.forward_ip.length)
              for (let r3 = 0; r3 < e3.forward_ip.length; ++r3)
                t3.uint32(34).string(e3.forward_ip[r3]);
            return e3.device_id && t3.uint32(42).string(e3.device_id), e3.server_addr && t3.uint32(50).string(e3.server_addr), e3.channel_index && t3.uint32(56).uint32(e3.channel_index), t3;
          }, u), e2.LoginReq = (c.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.sdk_ver && t3.uint32(8).uint32(e3.sdk_ver), e3.user_name && t3.uint32(18).bytes(e3.user_name), e3.term_type && t3.uint32(24).int32(e3.term_type), e3.net_type && t3.uint32(32).int32(e3.net_type), e3.device_id && t3.uint32(42).string(e3.device_id), e3.server_ip && t3.uint32(50).string(e3.server_ip), e3.channel_index && t3.uint32(56).uint32(e3.channel_index), e3.client_stamp && t3.uint32(66).bytes(e3.client_stamp), e3.k1_sign && t3.uint32(74).bytes(e3.k1_sign), e3.login_token && t3.uint32(82).bytes(e3.login_token), e3.relogin_token && t3.uint32(90).bytes(e3.relogin_token), e3.zpns_push_id && t3.uint32(98).string(e3.zpns_push_id), e3.login_sign && t3.uint32(106).bytes(e3.login_sign), e3.old_session_id && t3.uint32(120).int64(e3.old_session_id), t3;
          }, c), e2.LoginRsp = (l.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.LoginRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.k2_sign = e3.bytes();
                  break;
                case 4:
                  n2.hb_interval = e3.uint32();
                  break;
                case 5:
                  n2.hb_timeout = e3.uint32();
                  break;
                case 6:
                  n2.server_timestamp = +e3.int64().toString();
                  break;
                case 7:
                  n2.redirect_server_ip = e3.string();
                  break;
                case 8:
                  n2.server_ips.push(e3.string());
                  break;
                case 9:
                  n2.login_server_ip = e3.string();
                  break;
                case 10:
                  n2.relogin_token = e3.bytes();
                  break;
                case 11:
                  n2.redirect_server.push(e3.string());
                  break;
                case 12:
                  n2.usermail_hb_interval = e3.uint32();
                  break;
                case 13:
                  n2.fetch_c2c_msg_list = e3.int32();
                  break;
                case 14:
                  n2.fetch_conv_list = e3.int32();
                  break;
                case 15:
                  n2.fetch_conv_msg_list = e3.int32();
                  break;
                case 16:
                  n2.fetch_group_list = e3.int32();
                  break;
                case 17:
                  n2.im_conf_json = e3.string();
                  break;
                case 19:
                  n2.register_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, l), e2.PushListRequest = (d.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushListRequest();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.push_requests.push(s.proto_zim.PushRequest.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n2.qos_flag = e3.uint32();
                  break;
                case 3:
                  n2.send_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, d), e2.PushRequest = (p.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushRequest();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.sub_cmd = e3.string();
                  break;
                case 2:
                  n2.msg_body = e3.bytes();
                  break;
                case 3:
                  n2.sender_user_id = e3.string();
                  break;
                case 4:
                  n2.msg_id = e3.string();
                  break;
                case 5:
                  n2.sender_user_nid = e3.uint64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, p), e2.PushListRsp = (h.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.code && t3.uint32(8).uint32(e3.code), e3.message && t3.uint32(18).string(e3.message), e3.push_responses && e3.push_responses.length)
              for (let r3 = 0; r3 < e3.push_responses.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.push_responses[r3], t3.uint32(26).fork()).ldelim();
            return e3.server_send_time && t3.uint32(32).int64(e3.server_send_time), t3;
          }, h), e2.StMsgClientInfo = (f.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new s.proto_zim.StMsgClientInfo(e3)), t3 = t3 || o.create(), e3.conv_sid && t3.uint32(8).int64(e3.conv_sid), e3.client_msg_seq && t3.uint32(16).int64(e3.client_msg_seq), t3;
          }, f.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StMsgClientInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_sid = e3.int64().toString();
                  break;
                case 2:
                  n2.client_msg_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, f), e2.StOfflinePushInfo = (g.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new s.proto_zim.StOfflinePushInfo(e3)), t3 = t3 || o.create(), e3.enable_push && t3.uint32(8).int32(e3.enable_push), e3.title && t3.uint32(18).string(e3.title), e3.content && t3.uint32(26).string(e3.content), e3.payload && t3.uint32(34).string(e3.payload), e3.pushStrategyId && t3.uint32(42).string(e3.pushStrategyId), e3.custom_map)
              for (let n2 = Object.keys(e3.custom_map), i2 = 0; i2 < n2.length; ++i2) {
                var r3 = e3.custom_map[n2[i2]];
                r3 && t3.uint32(50).fork().uint32(10).string(n2[i2]).uint32(18).string(r3).ldelim();
              }
            return e3.enable_force_push && t3.uint32(72).int32(e3.enable_force_push), t3;
          }, g.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3, n2, o2 = void 0 === t3 ? e3.len : e3.pos + t3, a2 = new s.proto_zim.StOfflinePushInfo();
            for (; e3.pos < o2; ) {
              var u2 = e3.uint32();
              switch (u2 >>> 3) {
                case 1:
                  a2.enable_push = e3.int32();
                  break;
                case 2:
                  a2.title = e3.string();
                  break;
                case 3:
                  a2.content = e3.string();
                  break;
                case 4:
                  a2.payload = e3.string();
                  break;
                case 5:
                  a2.pushStrategyId = e3.string();
                  break;
                case 6:
                  a2.custom_map || (a2.custom_map = {});
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = "", n2 = ""; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.string();
                        break;
                      case 2:
                        n2 = e3.string();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  a2.custom_map[r3] = n2;
                  break;
                case 7:
                  a2.priority = e3.int32();
                  break;
                case 9:
                  a2.enable_force_push = e3.int32();
                  break;
                default:
                  e3.skipType(7 & u2);
              }
            }
          }, g), e2.PictureMsgBody = (m.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.version && t3.uint32(10).string(e3.version), e3.file_type && t3.uint32(16).int32(e3.file_type), e3.file_uid && t3.uint32(26).string(e3.file_uid), e3.file_name && t3.uint32(34).string(e3.file_name), e3.file_size && t3.uint32(42).string(e3.file_size), e3.file_download_url && t3.uint32(50).string(e3.file_download_url), e3.large_image_download_url && t3.uint32(58).string(e3.large_image_download_url), e3.thumbnail_download_url && t3.uint32(66).string(e3.thumbnail_download_url), e3.large && t3.uint32(74).string(e3.large), e3.thumbnail && t3.uint32(82).string(e3.thumbnail), e3.origin_width && t3.uint32(88).uint32(e3.origin_width), e3.origin_height && t3.uint32(96).uint32(e3.origin_height), e3.big_width && t3.uint32(104).uint32(e3.big_width), e3.big_height && t3.uint32(112).uint32(e3.big_height), e3.small_width && t3.uint32(120).uint32(e3.small_width), e3.small_height && t3.uint32(128).uint32(e3.small_height), t3;
          }, m.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PictureMsgBody();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.version = e3.string();
                  break;
                case 2:
                  n2.file_type = e3.int32();
                  break;
                case 3:
                  n2.file_uid = e3.string();
                  break;
                case 4:
                  n2.file_name = e3.string();
                  break;
                case 5:
                  n2.file_size = e3.string();
                  break;
                case 6:
                  n2.file_download_url = e3.string();
                  break;
                case 7:
                  n2.large_image_download_url = e3.string();
                  break;
                case 8:
                  n2.thumbnail_download_url = e3.string();
                  break;
                case 9:
                  n2.large = e3.string();
                  break;
                case 10:
                  n2.thumbnail = e3.string();
                  break;
                case 11:
                  n2.origin_width = e3.uint32();
                  break;
                case 12:
                  n2.origin_height = e3.uint32();
                  break;
                case 13:
                  n2.big_width = e3.uint32();
                  break;
                case 14:
                  n2.big_height = e3.uint32();
                  break;
                case 15:
                  n2.small_width = e3.uint32();
                  break;
                case 16:
                  n2.small_height = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, m), e2.VideoMsgBody = (_.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.version && t3.uint32(10).string(e3.version), e3.file_type && t3.uint32(16).int32(e3.file_type), e3.file_uid && t3.uint32(26).string(e3.file_uid), e3.file_name && t3.uint32(34).string(e3.file_name), e3.file_size && t3.uint32(42).string(e3.file_size), e3.file_download_url && t3.uint32(50).string(e3.file_download_url), e3.media_duration && t3.uint32(58).string(e3.media_duration), e3.video_first_frame_download_url && t3.uint32(66).string(e3.video_first_frame_download_url), e3.thumbnail && t3.uint32(74).string(e3.thumbnail), e3.frame_width && t3.uint32(80).uint32(e3.frame_width), e3.frame_height && t3.uint32(88).uint32(e3.frame_height), t3;
          }, _.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.VideoMsgBody();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.version = e3.string();
                  break;
                case 2:
                  n2.file_type = e3.int32();
                  break;
                case 3:
                  n2.file_uid = e3.string();
                  break;
                case 4:
                  n2.file_name = e3.string();
                  break;
                case 5:
                  n2.file_size = e3.string();
                  break;
                case 6:
                  n2.file_download_url = e3.string();
                  break;
                case 7:
                  n2.media_duration = e3.string();
                  break;
                case 8:
                  n2.video_first_frame_download_url = e3.string();
                  break;
                case 9:
                  n2.thumbnail = e3.string();
                  break;
                case 10:
                  n2.frame_width = e3.uint32();
                  break;
                case 11:
                  n2.frame_height = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, _), e2.StMsgCombineInfo = (b.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.title && t3.uint32(10).string(e3.title), e3.summary && t3.uint32(18).string(e3.summary), e3.file_body && s.proto_zim.VideoMsgBody.encode(e3.file_body, t3.uint32(26).fork()).ldelim(), t3;
          }, b.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StMsgCombineInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.title = e3.string();
                  break;
                case 2:
                  n2.summary = e3.string();
                  break;
                case 3:
                  n2.file_body = s.proto_zim.VideoMsgBody.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, b), e2.MsgCombineInfo = (v.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.send_user_map)
              for (let r3 = Object.keys(e3.send_user_map), n2 = 0; n2 < r3.length; ++n2)
                t3.uint32(10).fork().uint32(10).string(r3[n2]), s.proto_zim.SendUserInfo.encode(e3.send_user_map[r3[n2]], t3.uint32(18).fork()).ldelim().ldelim();
            if (e3.child && e3.child.length)
              for (let r3 = 0; r3 < e3.child.length; ++r3)
                s.proto_zim.StConvMsgInfoTree.encode(e3.child[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, v.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3, n2, o2 = void 0 === t3 ? e3.len : e3.pos + t3, a2 = new s.proto_zim.MsgCombineInfo();
            for (; e3.pos < o2; ) {
              var u2 = e3.uint32();
              switch (u2 >>> 3) {
                case 1:
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = "", n2 = null; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.string();
                        break;
                      case 2:
                        n2 = s.proto_zim.SendUserInfo.decode(e3, e3.uint32());
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  a2.send_user_map[r3] = n2;
                  break;
                case 2:
                  a2.child.push(s.proto_zim.StConvMsgInfoTree.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & u2);
              }
            }
            return a2;
          }, v), e2.StConvMsgInfoTree = (y.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.msg_type && t3.uint32(8).int32(e3.msg_type), e3.msg && t3.uint32(18).bytes(e3.msg), e3.sender_user_id && t3.uint32(26).string(e3.sender_user_id), e3.msg_time && t3.uint32(32).int64(e3.msg_time), e3.sub_type && t3.uint32(40).int64(e3.sub_type), e3.searched_content && t3.uint32(50).string(e3.searched_content), e3.extended_data && t3.uint32(58).string(e3.extended_data), e3.cb_id && t3.uint32(66).string(e3.cb_id), e3.root_id && t3.uint32(74).uint32(e3.root_id), e3.parent_id && t3.uint32(82).string(e3.parent_id), e3.is_server && t3.uint32(88).uint32(e3.is_server), e3.root_conv_type && t3.uint32(96).uint32(e3.root_conv_type), e3.root_send_user_id && t3.uint32(106).string(e3.root_send_user_id), t3;
          }, y.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StConvMsgInfoTree();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_type = e3.int32();
                  break;
                case 2:
                  n2.msg = e3.bytes();
                  break;
                case 3:
                  n2.sender_user_id = e3.string();
                  break;
                case 4:
                  n2.msg_time = +e3.int64().toString();
                  break;
                case 5:
                  n2.sub_type = e3.int64();
                  break;
                case 6:
                  n2.searched_content = e3.string();
                  break;
                case 7:
                  n2.extended_data = e3.string();
                  break;
                case 8:
                  n2.cb_id = e3.string();
                  break;
                case 9:
                  n2.root_id = e3.uint32();
                  break;
                case 10:
                  n2.parent_id = e3.string();
                  break;
                case 11:
                  n2.is_server = e3.uint32();
                  break;
                case 12:
                  n2.root_conv_type = e3.uint32();
                  break;
                case 13:
                  n2.root_send_user_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, y), e2.SendUserInfo = (M.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.sender_user_name && t3.uint32(10).bytes(e3.sender_user_name), e3.sender_user_avatar && t3.uint32(18).bytes(e3.sender_user_avatar), e3.update_time && t3.uint32(24).int64(e3.update_time), t3;
          }, M.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.SendUserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.sender_user_name = e3.bytes();
                  break;
                case 2:
                  n2.sender_user_avatar = e3.bytes();
                  break;
                case 3:
                  n2.update_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, M), e2.StConvMsgInfo = (k.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new s.proto_zim.StConvMsgInfo(e3)), t3 = t3 || o.create(), e3.msg_type && t3.uint32(8).int32(e3.msg_type), e3.msg && t3.uint32(18).bytes(e3.msg), e3.priority_type && t3.uint32(24).int32(e3.priority_type), e3.conv_id && t3.uint32(34).string(e3.conv_id), e3.msg_client_info && s.proto_zim.StMsgClientInfo.encode(e3.msg_client_info, t3.uint32(42).fork()).ldelim(), e3.payload && t3.uint32(50).bytes(e3.payload), e3.offline_push && e3.offline_push && s.proto_zim.StOfflinePushInfo.encode(e3.offline_push, t3.uint32(58).fork()).ldelim(), e3.has_receipt && t3.uint32(80).int32(e3.has_receipt), e3.at && e3.at.length)
              for (let r4 = 0; r4 < e3.at.length; ++r4)
                t3.uint32(90).string(e3.at[r4]);
            var r3;
            return e3.at_all && t3.uint32(96).bool(e3.at_all), e3.sub_msg_type && t3.uint32(104).int32(e3.sub_msg_type), e3.searched_content && t3.uint32(122).string(e3.searched_content), e3.reply_info && (r3 = { conv_sid: e3.reply_info.reply_msg_seq, client_msg_seq: e3.reply_info.root_msg_seq }, s.proto_zim.StMsgClientInfo.encode(r3, t3.uint32(146).fork()).ldelim()), t3;
          }, k.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StConvMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_type = e3.int32();
                  break;
                case 2:
                  n2.msg = e3.bytes();
                  break;
                case 3:
                  n2.priority_type = e3.int32();
                  break;
                case 4:
                  n2.conv_id = e3.string();
                  break;
                case 5:
                  n2.msg_client_info = s.proto_zim.StMsgClientInfo.decode(e3, e3.uint32());
                  break;
                case 6:
                  n2.payload = e3.bytes();
                  break;
                case 7:
                  n2.offline_push = s.proto_zim.StOfflinePushInfo.decode(e3, e3.uint32());
                  break;
                case 8:
                  n2.pack_count = e3.int32();
                  break;
                case 9:
                  n2.pack_index = e3.int32();
                  break;
                case 10:
                  n2.has_receipt = e3.int32();
                  break;
                case 11:
                  n2.at.push(e3.string());
                  break;
                case 12:
                  n2.at_all = e3.bool();
                  break;
                case 13:
                  n2.sub_msg_type = e3.int32();
                  break;
                case 14:
                  n2.save = e3.int32();
                  break;
                case 15:
                  n2.searched_content = e3.string();
                  break;
                case 17:
                  n2.sender_unaware = e3.int32();
                  break;
                case 18:
                  n2.reply_info = s.proto_zim.StMsgClientInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return 31 == n2.msg_type && (n2.msg = s.proto_zim.StRevokeContent.decode(n2.msg)), n2;
          }, k), e2.StMsgSvrInfo = (C.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StMsgSvrInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_id = e3.int64().toString();
                  break;
                case 2:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 3:
                  n2.c2c_msg_seq = e3.int64();
                  break;
                case 4:
                  n2.sender_user_id = e3.string();
                  break;
                case 5:
                  n2.sender_user_name = e3.bytes();
                  break;
                case 6:
                  n2.msg_time = +e3.int64().toString();
                  break;
                case 7:
                  n2.has_content = e3.int32();
                  break;
                case 9:
                  n2.msg_rsp = e3.bytes();
                  break;
                case 10:
                  n2.version = e3.uint32();
                  break;
                case 11:
                  n2.is_server = e3.uint32();
                  break;
                case 12:
                  n2.reactions = s.proto_zim.StReactions.decode(e3, e3.uint32());
                  break;
                case 13:
                  n2.reply_info = s.proto_zim.StReplyInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, C), e2.StRecvMsgInfo = (I.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StRecvMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_info = s.proto_zim.StConvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.msg_svr_info = s.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32()), n2.msg_info.reply_info && n2.msg_svr_info.reply_info && (n2.msg_svr_info.reply_info.root_msg_seq = n2.msg_info.reply_info.client_msg_seq, n2.msg_svr_info.reply_info.reply_msg_seq = +n2.msg_info.reply_info.conv_sid, delete n2.msg_info.reply_info);
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, I), e2.StCommandMsgInfo = (S.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new s.proto_zim.StCommandMsgInfo(e3)), t3 = t3 || o.create(), e3.msg_type && t3.uint32(8).int32(e3.msg_type), e3.msg && t3.uint32(18).bytes(e3.msg), e3.priority_type && t3.uint32(24).int32(e3.priority_type), e3.payload && t3.uint32(34).bytes(e3.payload), e3.conv_id && t3.uint32(42).string(e3.conv_id), t3;
          }, S.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StCommandMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_type = e3.int32();
                  break;
                case 2:
                  n2.msg = e3.bytes();
                  break;
                case 3:
                  n2.priority_type = e3.int32();
                  break;
                case 4:
                  n2.payload = e3.bytes();
                  break;
                case 5:
                  n2.conv_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, S), e2.StCommandSvrInfo = (D.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StCommandSvrInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_id = e3.int64().toString();
                  break;
                case 2:
                  n2.sender_user_id = e3.string();
                  break;
                case 3:
                  n2.sender_user_name = e3.bytes();
                  break;
                case 4:
                  n2.msg_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, D), e2.StRecvCommandInfo = (q.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StRecvCommandInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.command_msg_info = s.proto_zim.StCommandMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.command_svr_info = s.proto_zim.StCommandSvrInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, q), e2.FetchMsgInfo = (w.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FetchMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_body = e3.bytes();
                  break;
                case 2:
                  n2.msg_dyn_info = s.proto_zim.MsgDynInfo.decode(e3, e3.uint32());
                  break;
                case 3:
                  n2.msglist_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            const a2 = s.proto_zim.StRecvMsgInfo.decode(n2.msg_body);
            a2.msg_svr_info.conv_msg_seq ? a2.msg_svr_info.c2c_msg_seq = n2.msglist_seq : a2.msg_svr_info.conv_msg_seq = +n2.msglist_seq.toString();
            var { msg_status: t3, has_receipt: u2, reply_count: c2 } = n2.msg_dyn_info;
            return a2.msg_info.msg_status = t3, a2.msg_info.has_receipt = u2, c2 && (a2.msg_svr_info.reply_info ? a2.msg_svr_info.reply_info.reply_count = c2 : a2.msg_svr_info.reply_info = { reply_count: c2, root_msg_seq: a2.msg_svr_info.conv_msg_seq, root_msg_id: a2.msg_svr_info.msg_id }), a2;
          }, w), e2.MsgDynInfo = (A.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.MsgDynInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_status = e3.int32();
                  break;
                case 2:
                  n2.has_receipt = e3.bool() ? 1 : 0;
                  break;
                case 3:
                  n2.reply_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, A), e2.CallReq = (R.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.call_id && t3.uint32(10).string(e3.call_id), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            return e3.timeout && t3.uint32(24).int32(e3.timeout), e3.payload && t3.uint32(34).bytes(e3.payload), e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(42).fork()).ldelim(), e3.call_mode && t3.uint32(48).int32(e3.call_mode), e3.check_ack_timeout && t3.uint32(56).bool(e3.check_ack_timeout), t3;
          }, R), e2.CallRsp = (x.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.timeout = e3.int32();
                  break;
                case 4:
                  n2.call_id = e3.string();
                  break;
                case 5:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.call_seq = e3.int64();
                  break;
                case 7:
                  n2.call_list_seq = e3.int64();
                  break;
                case 8:
                  n2.create_time = e3.int64();
                  break;
                case 9:
                  n2.new_err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, x), e2.CallCancelReq = (T.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.call_id && t3.uint32(10).string(e3.call_id), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            return e3.state && t3.uint32(24).int32(e3.state), e3.extended_data && t3.uint32(34).bytes(e3.extended_data), e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(42).fork()).ldelim(), t3;
          }, T), e2.CallCancelRsp = (L.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallCancelRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.call_seq = e3.int64();
                  break;
                case 5:
                  n2.call_list_seq = e3.int64();
                  break;
                case 6:
                  n2.new_err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, L), e2.CallUserInfo = (G.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallUserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.user_state = e3.uint32();
                  break;
                case 3:
                  n2.extended_data = e3.bytes();
                  break;
                case 4:
                  n2.is_timeout = e3.int64();
                  break;
                case 5:
                  n2.accept_time = e3.int64();
                  break;
                case 6:
                  n2.quit_time = e3.int64();
                  break;
                case 7:
                  n2.residue_timeout_time = e3.int64();
                  break;
                case 8:
                  n2.user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, G), e2.CallInfoRsp = (E.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.user_list.push(s.proto_zim.CallUserInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.call_seq = e3.int64();
                  break;
                case 5:
                  n2.now_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, E), e2.CallListRsp = (O.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.cur_list_seq = e3.int64();
                  break;
                case 4:
                  n2.max_list_seq = e3.int64();
                  break;
                case 5:
                  n2.calls.push(s.proto_zim.CallInfo.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, O), e2.CallInfo = (U.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.caller = e3.string();
                  break;
                case 3:
                  n2.create_time = e3.int64();
                  break;
                case 4:
                  n2.call_list_seq = e3.int64();
                  break;
                case 5:
                  n2.call_status = e3.int64();
                  break;
                case 6:
                  n2.call_user_list.push(s.proto_zim.UserMailCallUserInfo.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n2.now_time = e3.int64();
                  break;
                case 8:
                  n2.call_mode = e3.int32();
                  break;
                case 9:
                  n2.payload = e3.bytes();
                  break;
                case 10:
                  n2.destroy_time = e3.int64();
                  break;
                case 11:
                  n2.accept_time = e3.int64();
                  break;
                case 12:
                  n2.quit_time = e3.int64();
                  break;
                case 13:
                  n2.user_timeout = e3.int32();
                  break;
                case 14:
                  n2.invite_time = e3.int64();
                  break;
                case 15:
                  n2.inviter = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, U), e2.CallInviteReq = (P.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.call_id && t3.uint32(10).string(e3.call_id), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            return e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(26).fork()).ldelim(), t3;
          }, P), e2.CallInviteRsp = (j.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallInviteRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.call_id = e3.string();
                  break;
                case 4:
                  n2.call_seq = e3.int64();
                  break;
                case 5:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.timeout = e3.int32();
                  break;
                case 7:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, j), e2.CallQuitReq = (B.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.call_id && t3.uint32(10).string(e3.call_id), e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(18).fork()).ldelim(), e3.payload && t3.uint32(26).bytes(e3.payload), t3;
          }, B), e2.CallQuitRsp = (F.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallQuitRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.call_list_seq = e3.int64();
                  break;
                case 4:
                  n2.talk_time = e3.int64();
                  break;
                case 5:
                  n2.quit_time = e3.int64();
                  break;
                case 6:
                  n2.call_seq = e3.int64();
                  break;
                case 7:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, F), e2.CallEnterRsp = (z.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallEnterRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.call_seq = e3.int64();
                  break;
                case 4:
                  n2.timeout = e3.int32();
                  break;
                case 5:
                  n2.create_time = +e3.int64().toString();
                  break;
                case 6:
                  n2.call_list_seq = e3.int64();
                  break;
                case 7:
                  n2.caller = e3.string();
                  break;
                case 8:
                  n2.accept_time = +e3.int64().toString();
                  break;
                case 9:
                  n2.extended_data = e3.bytes();
                  break;
                case 10:
                  n2.user_state_list.push(s.proto_zim.CallUserInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, z), e2.PushCallInvited = (N.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallInvited();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.timeout = e3.int32();
                  break;
                case 3:
                  n2.caller = e3.string();
                  break;
                case 4:
                  n2.payload = e3.bytes();
                  break;
                case 5:
                  n2.call_seq = e3.int64();
                  break;
                case 6:
                  n2.call_list_seq = e3.int64();
                  break;
                case 7:
                  n2.user_state_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 8:
                  n2.call_mode = e3.int32();
                  break;
                case 9:
                  n2.create_time = e3.int64();
                  break;
                case 10:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, N), e2.PushCallAccept = (K.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallAccept();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.invitee = e3.string();
                  break;
                case 3:
                  n2.caller = e3.string();
                  break;
                case 4:
                  n2.extended_data = e3.bytes();
                  break;
                case 5:
                  n2.call_seq = e3.int64();
                  break;
                case 6:
                  n2.call_list_seq = e3.int64();
                  break;
                case 7:
                  n2.accept_time = e3.int64();
                  break;
                case 9:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, K), e2.PushCallRefuse = (X.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallRefuse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.invitee = e3.string();
                  break;
                case 3:
                  n2.caller = e3.string();
                  break;
                case 4:
                  n2.call_state = e3.uint32();
                  break;
                case 5:
                  n2.extended_data = e3.bytes();
                  break;
                case 6:
                  n2.call_seq = e3.int64();
                  break;
                case 7:
                  n2.call_list_seq = e3.int64();
                  break;
                case 9:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, X), e2.PushCallCancel = (H.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallCancel();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.caller = e3.string();
                  break;
                case 4:
                  n2.state = e3.int32();
                  break;
                case 5:
                  n2.extended_data = e3.bytes();
                  break;
                case 6:
                  n2.call_seq = e3.int64();
                  break;
                case 7:
                  n2.call_list_seq = e3.int64();
                  break;
                case 9:
                  n2.user_ids.push(e3.string());
                  break;
                case 10:
                  n2.operator = e3.string();
                  break;
                case 11:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, H), e2.PushOnCallInvited = (Q.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushOnCallInvited();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.create_time = e3.int64();
                  break;
                case 3:
                  n2.timeout = e3.int32();
                  break;
                case 4:
                  n2.caller = e3.string();
                  break;
                case 5:
                  n2.invitee = e3.string();
                  break;
                case 6:
                  n2.call_seq = e3.int64();
                  break;
                case 7:
                  n2.call_list_seq = e3.int64();
                  break;
                case 8:
                  n2.payload = e3.bytes();
                  break;
                case 9:
                  n2.user_state_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 11:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Q), e2.PushCallQuit = (V.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallQuit();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.invitee = e3.string();
                  break;
                case 3:
                  n2.caller = e3.string();
                  break;
                case 4:
                  n2.call_seq = e3.int64();
                  break;
                case 5:
                  n2.payload = e3.bytes();
                  break;
                case 6:
                  n2.accept_time = e3.int64();
                  break;
                case 7:
                  n2.quit_time = e3.int64();
                  break;
                case 8:
                  n2.call_user_session_id = e3.int64();
                  break;
                case 9:
                  n2.call_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, V), e2.PushCallDestroy = (Z.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallDestroy();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.caller = e3.string();
                  break;
                case 3:
                  n2.call_list_seq = e3.int64();
                  break;
                case 4:
                  n2.payload = e3.bytes();
                  break;
                case 5:
                  n2.talk_time = e3.int64();
                  break;
                case 6:
                  n2.destroy_time = e3.int64();
                  break;
                case 7:
                  n2.operator = e3.string();
                  break;
                case 8:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Z), e2.PushCallAck = (J.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallAck();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.caller = e3.string();
                  break;
                case 3:
                  n2.invitee = e3.string();
                  break;
                case 4:
                  n2.call_seq = e3.int64();
                  break;
                case 6:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, J), e2.PushCallEnter = (W.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallEnter();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.caller = e3.string();
                  break;
                case 3:
                  n2.create_time = e3.int64();
                  break;
                case 4:
                  n2.enter_time = e3.int64();
                  break;
                case 5:
                  n2.call_list_seq = e3.int64();
                  break;
                case 6:
                  n2.call_payload = e3.bytes();
                  break;
                case 7:
                  n2.call_seq = e3.int64();
                  break;
                case 8:
                  n2.payload = e3.bytes();
                  break;
                case 9:
                  n2.user_id = e3.string();
                  break;
                case 10:
                  n2.user_state_list.push(s.proto_zim.UserMailCallUserInfo.decode(e3, e3.uint32()));
                  break;
                case 11:
                  n2.timeout = e3.int32();
                  break;
                case 12:
                  n2.call_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, W), e2.PushCallAckTimeout = (Y.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCallAckTimeout();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.call_id = e3.string();
                  break;
                case 2:
                  n2.caller = e3.string();
                  break;
                case 3:
                  n2.session_id = e3.int64();
                  break;
                case 4:
                  n2.invitees.push(e3.string());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Y), e2.AtInfo = ($.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.AtInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_id = e3.int64().toString();
                  break;
                case 2:
                  n2.user_id = e3.string();
                  break;
                case 3:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.at_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, $), e2.ConvInfo = (ee.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ConvInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_id = e3.string();
                  break;
                case 2:
                  n2.conv_type = e3.int32();
                  break;
                case 3:
                  n2.conv_list_seq = e3.int64();
                  break;
                case 4:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.read_seq = +e3.int64().toString();
                  break;
                case 6:
                  n2.is_del = e3.bool();
                  break;
                case 7:
                  n2.last_msg = s.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 8:
                  n2.send_count_after_read = +e3.int64().toString();
                  break;
                case 9:
                  n2.last_msg_del = e3.bool();
                  break;
                case 10:
                  n2.last_del_msg_seq = e3.int64();
                  break;
                case 11:
                  n2.statemsg_seq = +e3.int64().toString();
                  break;
                case 12:
                  n2.receipt_max_conv_msg_seq = e3.int64();
                  break;
                case 13:
                  n2.at_max_conv_msg_seq = e3.int64();
                  break;
                case 14:
                  n2.at_all_max_conv_msg_seq = e3.int64();
                  break;
                case 15:
                  n2.update_time = +e3.int64().toString();
                  break;
                case 16:
                  n2.sub_read_count = +e3.int64().toString();
                  break;
                case 17:
                  n2.last_revoke_msg_seq = +e3.int64().toString();
                  break;
                case 18:
                  n2.last_msg_time = +e3.int64().toString();
                  break;
                case 19:
                  n2.at_info_list.push(s.proto_zim.AtInfo.decode(e3, e3.uint32()));
                  break;
                case 20:
                  n2.group_tips_msg_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ee), e2.GetConvListRsp = (te.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetConvListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.conv_list.push(s.proto_zim.ConvInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.conv_list_seq = e3.int64();
                  break;
                case 5:
                  n2.max_list_seq = e3.int64();
                  break;
                case 6:
                  n2.full_list = e3.int32();
                  break;
                case 7:
                  n2.fetch_end = e3.int32();
                  break;
                case 8:
                  n2.max_del_conv_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, te), e2.FetchConvMsgReq = (re.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_type && t3.uint32(16).int32(e3.conv_type), e3.conv_msg_seq && t3.uint32(24).int64(e3.conv_msg_seq), e3.count && t3.uint32(32).int32(e3.count), e3.mode && t3.uint32(40).int32(e3.mode), e3.login_fetch && t3.uint32(48).int32(e3.login_fetch), e3.how && t3.uint32(56).int32(e3.how), e3.degree && t3.uint32(64).uint32(e3.degree), t3;
          }, re), e2.FetchConvMsgRsp = (ne.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FetchConvMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.max_conv_msg_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.next_conv_msg_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.msgs.push(s.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ne), e2.FetchC2CMsgRsp = (ie.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FetchC2CMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.msgs.push(s.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.c2c_msg_seq = e3.int64();
                  break;
                case 5:
                  n2.svr_c2c_msg_seq = e3.int64();
                  break;
                case 6:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ie), e2.UpdateReadSeqReq = (oe.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_type && t3.uint32(16).int32(e3.conv_type), e3.read_seq && t3.uint32(24).int64(e3.read_seq), t3;
          }, oe), e2.UserMailHbRsp = (se.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.UserMailHbRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.conv_list_seq = e3.int64();
                  break;
                case 4:
                  n2.group_list_seq = e3.int64();
                  break;
                case 5:
                  n2.c2c_msg_seq = +e3.int64().toString();
                  break;
                case 7:
                  n2.seq_fallback_timeout = e3.uint32();
                  break;
                case 8:
                  n2.msg_to = e3.uint32();
                  break;
                case 9:
                  n2.msg_itvl = e3.uint32();
                  break;
                case 10:
                  n2.list_to = e3.uint32();
                  break;
                case 11:
                  n2.list_itvl = e3.uint32();
                  break;
                case 12:
                  n2.conv_to = e3.uint32();
                  break;
                case 13:
                  n2.conv_itvl = e3.uint32();
                  break;
                case 14:
                  n2.group_to = e3.uint32();
                  break;
                case 15:
                  n2.group_itvl = e3.uint32();
                  break;
                case 16:
                  n2.c2c_statemsg_seq = e3.int64();
                  break;
                case 17:
                  n2.extra_msg_list_seq = e3.int64();
                  break;
                case 18:
                  n2.conv_pinned_list_seq = +e3.int64().toString();
                  break;
                case 19:
                  n2.call_list_seq = e3.int64();
                  break;
                case 20:
                  n2.friend_list_seq = +e3.int64().toString();
                  break;
                case 21:
                  n2.friend_apply_list_seq = +e3.int64().toString();
                  break;
                case 22:
                  n2.black_list_seq = +e3.int64().toString();
                  break;
                case 23:
                  n2.delete_all_msg_time = +e3.int64().toString();
                  break;
                case 24:
                  n2.apply_expired_duration = +e3.int64().toString();
                  break;
                case 25:
                  n2.c2c_mute_max_seq = +e3.int64().toString();
                  break;
                case 26:
                  n2.user_info_seq = +e3.int64().toString();
                  break;
                case 27:
                  n2.group_apply_list_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, se), e2.ConvDelRsp = (ae.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ConvDelRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.conv_list_seq = e3.int64();
                  break;
                case 4:
                  n2.conv_msg_seq = e3.int64();
                  break;
                case 5:
                  n2.conv_pinned_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ae), e2.ConvDelMsgByMsgIdReq = (ue.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_type && t3.uint32(16).int32(e3.conv_type), e3.msg_ids && e3.msg_ids.length) {
              t3.uint32(26).fork();
              for (let r3 = 0; r3 < e3.msg_ids.length; ++r3)
                t3.int64(e3.msg_ids[r3]);
              t3.ldelim();
            }
            return t3;
          }, ue), e2.C2CReadReceiptReq = (ce.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_msg_seq && e3.conv_msg_seq.length) {
              t3.uint32(18).fork();
              for (let r3 = 0; r3 < e3.conv_msg_seq.length; ++r3)
                t3.int64(e3.conv_msg_seq[r3]);
              t3.ldelim();
            }
            return t3;
          }, ce), e2.C2CReadReceiptRsp = (le.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3, n2, o2 = void 0 === t3 ? e3.len : e3.pos + t3, a2 = new s.proto_zim.C2CReadReceiptRsp();
            for (; e3.pos < o2; ) {
              var u2 = e3.uint32();
              switch (u2 >>> 3) {
                case 1:
                  a2.code = e3.uint32();
                  break;
                case 2:
                  a2.message = e3.string();
                  break;
                case 3:
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = 0, n2 = 0; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.int64();
                        break;
                      case 2:
                        n2 = e3.int64().toString();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  a2.conv_msg_seq2_receipt_seq[r3.toString()] = n2;
                  break;
                default:
                  e3.skipType(7 & u2);
              }
            }
            return a2;
          }, le), e2.GetGroupReadReceiptDetailRsp = (de.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetGroupReadReceiptDetailRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.read_members.push(+e3.int64().toString());
                  else
                    n2.read_members.push(+e3.int64().toString());
                  break;
                case 4:
                  if (2 == (7 & o2))
                    for (var u2 = e3.uint32() + e3.pos; e3.pos < u2; )
                      n2.unread_members.push(+e3.int64().toString());
                  else
                    n2.unread_members.push(+e3.int64().toString());
                  break;
                case 5:
                  n2.next_list_seq = e3.uint32();
                  break;
                case 6:
                  n2.read_count = e3.sint32();
                  break;
                case 7:
                  n2.unread_count = e3.sint32();
                  break;
                case 8:
                  n2.fetch_end = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, de), e2.GetExtraMsgListRsp = (pe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetExtraMsgListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.list.push(s.proto_zim.ExtraMsgContent.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.next_list_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, pe), e2.ExtraMsgContent = (he.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ExtraMsgContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_id = e3.string();
                  break;
                case 2:
                  n2.conv_type = e3.int32();
                  break;
                case 3:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.receipt_seq = e3.int64();
                  break;
                case 5:
                  n2.type = e3.int32();
                  break;
                case 6:
                  Object.assign(n2, s.proto_zim.StReceiptContent.decode(e3, e3.uint32()));
                  break;
                case 7:
                case 8:
                  Object.assign(n2, s.proto_zim.StDeleteContent.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, he), e2.StReceiptContent = (fe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StReceiptContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.read_count = e3.sint32();
                  break;
                case 2:
                  n2.unread_count = e3.sint32();
                  break;
                case 3:
                  n2.is_conv_read = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, fe), e2.StDeleteContent = (ge.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StDeleteContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              if (o2 >>> 3 == 1)
                if (2 == (7 & o2))
                  for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                    n2.del_conv_msg_seqs.push(+e3.int64().toString());
                else
                  n2.del_conv_msg_seqs.push(+e3.int64().toString());
              else
                e3.skipType(7 & o2);
            }
            return n2;
          }, ge), e2.PushReadReceipt = (me.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushReadReceipt();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n2.PushItems.push(s.proto_zim.PushReadReceipt.PushItem.decode(e3, e3.uint32())) : e3.skipType(7 & o2);
            }
            return n2;
          }, me.PushItem = (_e.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushReadReceipt.PushItem();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 2:
                  n2.conv_id = e3.string();
                  break;
                case 3:
                  n2.conv_type = e3.int32();
                  break;
                case 4:
                  n2.read_count = e3.sint32();
                  break;
                case 5:
                  n2.unread_count = e3.sint32();
                  break;
                case 6:
                  n2.receipt_seq = e3.int64();
                  break;
                case 7:
                  n2.is_conv_read = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, _e), me), e2.GetStatemsgListReq = (be.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.statemsg_seq && t3.uint32(16).int64(e3.statemsg_seq), e3.count && t3.uint32(24).sint32(e3.count), e3.degree && t3.uint32(32).uint32(e3.degree), e3.max_msg_seq && t3.uint32(40).int64(e3.max_msg_seq), e3.min_msg_seq && t3.uint32(48).int64(e3.min_msg_seq), t3;
          }, be), e2.GetStatemsgListRsp = (ve.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetStatemsgListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.statemsg_list.push(s.proto_zim.StStatemsgContent.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.next_statemsg_seq = e3.int64();
                  break;
                case 5:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ve), e2.StStatemsgContent = (ye.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3, n2, o2 = void 0 === t3 ? e3.len : e3.pos + t3, a2 = new s.proto_zim.StStatemsgContent();
            for (; e3.pos < o2; ) {
              var u2 = e3.uint32();
              switch (u2 >>> 3) {
                case 1:
                  a2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 2:
                  a2.msg_status = e3.int32();
                  break;
                case 3:
                  a2.statemsg_seq = e3.int64();
                  break;
                case 4:
                  a2.conv_id = e3.string();
                  break;
                case 5:
                  a2.conv_type = e3.int32();
                  break;
                case 6:
                  Object.assign(a2, s.proto_zim.StRevokeContent.decode(e3.bytes()));
                  break;
                case 7:
                  a2.reaction_seq = +e3.int64().toString();
                  break;
                case 8:
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = 0, n2 = []; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.int32();
                        break;
                      case 2:
                        n2 = e3.bytes();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  1 == r3 && Object.assign(a2, s.proto_zim.StStateMsgReactionBrief.decode(n2));
                  break;
                default:
                  e3.skipType(7 & u2);
              }
            }
            return a2;
          }, ye), e2.StStateMsgReactionBrief = (Me.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StStateMsgReactionBrief();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n2.reaction_briefs.push(s.proto_zim.StReactionBrief.decode(e3, e3.uint32())) : e3.skipType(7 & o2);
            }
            return n2;
          }, Me), e2.RevokeMsgReq = (ke.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_msg_seq && t3.uint32(16).int64(e3.conv_msg_seq), e3.offline_push && e3.offline_push && s.proto_zim.StOfflinePushInfo.encode(e3.offline_push, t3.uint32(26).fork()).ldelim(), e3.payload && t3.uint32(34).bytes(e3.payload), t3;
          }, ke), e2.RevokeMsgRsp = (Ce.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.RevokeMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.statemsg_seq = e3.int64();
                  break;
                case 4:
                  n2.msg_status = e3.int32();
                  break;
                case 5:
                  n2.revoke_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ce), e2.StRevokeContent = (Ie.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StRevokeContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.revoke_time = +e3.int64().toString();
                  break;
                case 3:
                  n2.msg_type = e3.int32();
                  break;
                case 4:
                  n2.revoke_type = e3.uint32();
                  break;
                case 5:
                  n2.payload = e3.bytes();
                  break;
                case 6:
                  n2.msg_status = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ie), e2.PushMsgRevoke = (Se.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushMsgRevoke();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.recv_msg_info = s.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.msg_status = e3.int32();
                  break;
                case 3:
                  n2.statemsg_seq = e3.int64();
                  break;
                case 4:
                  n2.conv_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Se), e2.HttpRequest = (De.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3, n2, o2 = void 0 === t3 ? e3.len : e3.pos + t3, a2 = new s.proto_zim.HttpRequest();
            for (; e3.pos < o2; ) {
              var u2 = e3.uint32();
              switch (u2 >>> 3) {
                case 1:
                  a2.url = e3.string();
                  break;
                case 2:
                  a2.method = e3.string();
                  break;
                case 3:
                  var c2 = e3.uint32() + e3.pos;
                  for (r3 = "", n2 = ""; e3.pos < c2; ) {
                    var l2 = e3.uint32();
                    switch (l2 >>> 3) {
                      case 1:
                        r3 = e3.string();
                        break;
                      case 2:
                        n2 = e3.string();
                        break;
                      default:
                        e3.skipType(7 & l2);
                    }
                  }
                  a2.headers[r3] = n2;
                  break;
                case 4:
                  var d2 = e3.uint32() + e3.pos;
                  for (r3 = "", n2 = ""; e3.pos < d2; ) {
                    var p2 = e3.uint32();
                    switch (p2 >>> 3) {
                      case 1:
                        r3 = e3.string();
                        break;
                      case 2:
                        n2 = e3.string();
                        break;
                      default:
                        e3.skipType(7 & p2);
                    }
                  }
                  a2.forms[r3] = n2;
                  break;
                default:
                  e3.skipType(7 & u2);
              }
            }
            return a2;
          }, De), e2.FileUploadReq = (qe.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.md5 && t3.uint32(10).string(e3.md5), e3.file_type && t3.uint32(16).int32(e3.file_type), e3.name && t3.uint32(26).string(e3.name), e3.size && t3.uint32(32).int64(e3.size), e3.duration && t3.uint32(40).int64(e3.duration), t3;
          }, qe), e2.FileUploadRsp = (we.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FileUploadRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.state = e3.uint32();
                  break;
                case 4:
                  n2.upload_req = s.proto_zim.HttpRequest.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, we), e2.FileProcessRsp = (Ae.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FileProcessRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.state = e3.uint32();
                  break;
                case 4:
                  n2.download_url = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ae), e2.StGroupMemberData = (Re.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StGroupMemberData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.member_data_seq = +e3.int64().toString();
                  break;
                case 2:
                  n2.user_name = e3.string();
                  break;
                case 3:
                  n2.group_nick_name = e3.string();
                  break;
                case 4:
                  n2.role = e3.int32();
                  break;
                case 5:
                  n2.mute = e3.int32();
                  break;
                case 6:
                  n2.not_notify = e3.int32();
                  break;
                case 7:
                  n2.not_recv_msg = e3.int32();
                  break;
                case 8:
                  n2.user_avatar = e3.bytes();
                  break;
                case 9:
                  n2.forbid_expire_time = +e3.int64().toString();
                  break;
                case 10:
                  n2.enter_type = e3.int32();
                  break;
                case 11:
                  n2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 12:
                  n2.enter_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Re), e2.GroupData = (xe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.group_name = e3.string();
                  break;
                case 3:
                  n2.group_avatar = e3.bytes();
                  break;
                case 4:
                  n2.group_notice = e3.string();
                  break;
                case 5:
                  n2.group_create_time = +e3.int64().toString();
                  break;
                case 6:
                  n2.member_count = e3.uint32();
                  break;
                case 7:
                  n2.forbid_info = s.proto_zim.GroupForbid.decode(e3, e3.uint32());
                  break;
                case 8:
                  n2.limit_info = s.proto_zim.StGroupLimit.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, xe), e2.FirstJoinGroup = (Te.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FirstJoinGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 2:
                  n2.group_list_seq = e3.int64();
                  break;
                case 3:
                  n2.group_data_seq = +e3.int64().toString();
                  break;
                case 4:
                  Object.assign(n2, s.proto_zim.GroupData.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.member = s.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Te), e2.StGroupMember = (Le.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StGroupMember();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.user_nid = e3.int64();
                  break;
                case 3:
                  n2.member_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.member_data = s.proto_zim.StGroupMemberData.decode(e3, e3.uint32());
                  break;
                case 5:
                  n2.attributes = s.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 6:
                  n2.group_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Le), e2.GroupCreateReq = (Ge.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.group_name && t3.uint32(18).string(e3.group_name), e3.group_notice && t3.uint32(26).string(e3.group_notice), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(34).string(e3.user_ids[r3]);
            if (e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(42).fork()).ldelim();
            return e3.group_avatar && t3.uint32(50).bytes(e3.group_avatar), e3.limit_info && s.proto_zim.StGroupLimit.encode(e3.limit_info, t3.uint32(58).fork()).ldelim(), t3;
          }, Ge), e2.GroupCreateRsp = (Ee.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupCreateRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.group_id = e3.string();
                  break;
                case 4:
                  n2.members.push(s.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                case 6:
                  n2.error_users.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n2.group_list_seq = e3.int64();
                  break;
                case 8:
                  n2.group_data_seq = +e3.int64().toString();
                  break;
                case 9:
                  n2.group_attribute_seq = +e3.int64().toString();
                  break;
                case 10:
                  n2.member_count = e3.uint32();
                  break;
                case 11:
                  n2.group_create_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ee), e2.StGroupAttribute = (Oe.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new s.proto_zim.StGroupAttribute(e3)), t3 = t3 || o.create(), e3.key && t3.uint32(10).string(e3.key), e3.value && t3.uint32(18).string(e3.value), e3.seq && t3.uint32(24).int64(e3.seq), t3;
          }, Oe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StGroupAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.key = e3.string();
                  break;
                case 2:
                  n2.value = e3.string();
                  break;
                case 3:
                  n2.seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Oe), e2.StModifyGroupAttribute = (Ue.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.action && t3.uint32(8).int32(e3.action), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, Ue.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StModifyGroupAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.action = e3.int32();
                  break;
                case 2:
                  n2.attributes.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ue), e2.StGroupAttributes = (Pe.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new s.proto_zim.StGroupAttributes(e3)), t3 = t3 || o.create(), e3.seq && t3.uint32(8).int64(e3.seq), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, Pe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StGroupAttributes();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.seq = +e3.int64().toString();
                  break;
                case 2:
                  n2.attributes.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Pe), e2.GroupDataRsp = (je.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupDataRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.group_name = e3.string();
                  break;
                case 4:
                  n2.group_notice = e3.string();
                  break;
                case 5:
                  n2.group_data_seq = +e3.int64().toString();
                  break;
                case 6:
                  n2.group_avatar = e3.bytes();
                  break;
                case 7:
                  n2.is_all_forbid = e3.bool();
                  break;
                case 8:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.forbid_list.push(e3.int32());
                  else
                    n2.forbid_list.push(e3.int32());
                  break;
                case 9:
                  n2.forbid_expire_time = +e3.int64().toString();
                  break;
                case 10:
                  n2.limit_info = s.proto_zim.StGroupLimit.decode(e3, e3.uint32());
                  break;
                case 11:
                  n2.group_create_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, je), e2.GroupModifyAttributeReq = (Be.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.attributes && s.proto_zim.StModifyGroupAttribute.encode(e3.attributes, t3.uint32(18).fork()).ldelim(), t3;
          }, Be), e2.GroupModifyAttributeRsp = (Fe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupModifyAttributeRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.attributes = s.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 4:
                  n2.fail_keys.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Fe), e2.GroupGetAttributesReq = (ze.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.attributes && s.proto_zim.StGroupAttributes.encode(e3.attributes, t3.uint32(18).fork()).ldelim(), t3;
          }, ze), e2.GroupSetForbidReq = (Ne.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.is_all_forbid && t3.uint32(16).bool(e3.is_all_forbid), e3.forbid_list && e3.forbid_list.length) {
              t3.uint32(26).fork();
              for (let r3 = 0; r3 < e3.forbid_list.length; ++r3)
                t3.int32(e3.forbid_list[r3]);
              t3.ldelim();
            }
            return e3.duration && t3.uint32(32).int32(e3.duration), t3;
          }, Ne), e2.ModifyGroupLimitReq = (Ke.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.set_flag && t3.uint32(16).uint32(e3.set_flag), e3.limit_info && s.proto_zim.StGroupLimit.encode(e3.limit_info, t3.uint32(26).fork()).ldelim(), t3;
          }, Ke), e2.GroupEnterRsp = (Xe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupEnterRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.group_name = e3.string();
                  break;
                case 4:
                  n2.properties = s.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 5:
                  n2.member = s.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                case 6:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                case 7:
                  n2.group_list_seq = e3.int64();
                  break;
                case 8:
                  n2.group_data_seq = +e3.int64().toString();
                  break;
                case 9:
                  n2.group_attribute_seq = +e3.int64().toString();
                  break;
                case 10:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 11:
                  n2.member_count = e3.uint32();
                  break;
                case 12:
                  n2.group_avatar = e3.bytes();
                  break;
                case 13:
                  n2.limit_info = s.proto_zim.StGroupLimit.decode(e3, e3.uint32());
                  break;
                case 14:
                  n2.group_create_time = +e3.int64().toString();
                  break;
                case 15:
                  n2.forbid_info = s.proto_zim.GroupForbid.decode(e3, e3.uint32());
                  break;
                case 16:
                  n2.group_notice = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Xe), e2.GroupApplyAccept = (He.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.user_id && t3.uint32(18).string(e3.user_id), e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(26).fork()).ldelim(), t3;
          }, He), e2.GroupApplyRsp = (Qe.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupApplyRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.apply_group_info = s.proto_zim.StApplyUser.decode(e3, e3.uint32(), s.proto_zim.GroupApplyRsp.isGroup);
                  break;
                case 4:
                  n2.group_info = s.proto_zim.FirstJoinGroup.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Qe), e2.GroupInviteReq = (Ve.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(18).string(e3.user_ids[r3]);
            if (e3.user_infos && e3.user_infos.length)
              for (let r3 = 0; r3 < e3.user_infos.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.user_infos[r3], t3.uint32(26).fork()).ldelim();
            return e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(34).fork()).ldelim(), t3;
          }, Ve), e2.GroupInviteRsp = (Ze.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupInviteRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.members.push(s.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.error_users.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.group_data_seq = +e3.int64().toString();
                  break;
                case 7:
                  n2.group_attribute_seq = +e3.int64().toString();
                  break;
                case 8:
                  n2.member_count = e3.uint32();
                  break;
                case 9:
                  n2.apply_users.push(s.proto_zim.StApplyUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ze), e2.UserApplyListRsp = (Je.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.UserApplyListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.cur_list_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.max_list_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.fetch_end = e3.int32();
                  break;
                case 6:
                  n2.list.push(s.proto_zim.StApplyUser.decode(e3, e3.uint32()), s.proto_zim.UserApplyListRsp.isGroup);
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Je), e2.GroupKickOutRsp = (We.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupKickOutRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.error_users.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, We), e2.GroupGetMembersReq = (Ye.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.cur_list_seq && t3.uint32(16).int64(e3.cur_list_seq), e3.count && t3.uint32(24).uint32(e3.count), e3.full_pull && t3.uint32(32).int32(e3.full_pull), e3.degree && t3.uint32(40).uint32(e3.degree), t3;
          }, Ye), e2.StGroupMemberChangeEvent = ($e.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StGroupMemberChangeEvent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.member = s.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                case 3:
                  n2.event_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, $e), e2.GroupGetMembersRsp = (et.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupGetMembersRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.change_list.push(s.proto_zim.StGroupMemberChangeEvent.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.full_list = e3.int32();
                  break;
                case 6:
                  n2.cur_list_seq = +e3.int64().toString();
                  break;
                case 7:
                  n2.fetch_end = e3.int32();
                  break;
                case 8:
                  n2.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, et), e2.GetGroupMembersByMemberSeqRsp = (tt2.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetGroupMembersByMemberSeqRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.members.push(s.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.deleted_members.push(s.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, tt2), e2.GroupMemberDataReq = (rt.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.user_id && t3.uint32(18).string(e3.user_id), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            return t3;
          }, rt), e2.GroupMemberDataRsp = (nt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupMemberDataRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.member = s.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, nt), e2.GroupSetMemberRoleReq = (it.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.user_id && t3.uint32(18).string(e3.user_id), e3.role && t3.uint32(24).int32(e3.role), t3;
          }, it), e2.GroupUpdate = (ot.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupUpdate();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.type = e3.int32();
                  break;
                case 2:
                  n2.info = s.proto_zim.GroupInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2.info.type = n2.type, n2.info;
          }, ot), e2.GroupInfo = (st.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.group_name = e3.string();
                  break;
                case 3:
                  n2.group_list_seq = e3.int64();
                  break;
                case 4:
                  n2.group_data_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.all_member_seq = +e3.int64().toString();
                  break;
                case 6:
                  n2.attribute_seq = +e3.int64().toString();
                  break;
                case 7:
                  n2.not_notify = e3.bool();
                  break;
                case 8:
                  n2.member_count = e3.uint32();
                  break;
                case 9:
                  n2.group_avatar = e3.bytes();
                  break;
                case 10:
                  n2.user_apply_list_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, st), e2.GroupInfosRsp = (at.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupInfosRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.group_infos.push(s.proto_zim.GroupUpdate.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.fail_keys.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, at), e2.GroupListRsp = (ut.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.cur_list_seq = e3.int64();
                  break;
                case 4:
                  n2.max_list_seq = e3.int64();
                  break;
                case 5:
                  n2.groups.push(s.proto_zim.GroupUpdate.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.full_list = e3.int32();
                  break;
                case 7:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ut), e2.GroupMuteReq = (ct.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.enable && t3.uint32(16).bool(e3.enable), t3;
          }, ct), e2.GroupOperator = (lt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupOperator();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.user_name = e3.bytes();
                  break;
                case 3:
                  n2.group_nick_name = e3.string();
                  break;
                case 4:
                  n2.role = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2.user_id ? n2 : null;
          }, lt), e2.PushCreateGroup = (dt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushCreateGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.group_name = e3.string();
                  break;
                case 3:
                  n2.members.push(s.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.attributes = s.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 6:
                  n2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 7:
                  n2.member_count = e3.uint32();
                  break;
                case 8:
                  n2.group_avatar = e3.bytes();
                  break;
                case 9:
                  n2.group_list_seq = e3.int64();
                  break;
                case 10:
                  n2.limit_info = s.proto_zim.StGroupLimit.decode(e3, e3.uint32());
                  break;
                case 11:
                  n2.group_create_time = +e3.int64().toString();
                  break;
                case 12:
                  n2.group_notice = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, dt), e2.PushModifyGroupAttribute = (pt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushModifyGroupAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.attributes = s.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 3:
                  n2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, pt), e2.PushGroupMemberChange = (ht.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushGroupMemberChange();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                case 3:
                  n2.members.push(s.proto_zim.StGroupMember.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.change_type = e3.int32();
                  break;
                case 5:
                  n2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 6:
                  n2.new_owner_id = e3.string();
                  break;
                case 7:
                  n2.member_count = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ht), e2.GroupForbid = (ft.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupForbid();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.is_all_forbid = e3.bool();
                  break;
                case 2:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.forbid_list.push(e3.int32());
                  else
                    n2.forbid_list.push(e3.int32());
                  break;
                case 3:
                  n2.forbid_expire_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ft), e2.StGroupData = (gt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StGroupData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_avatar = e3.bytes();
                  break;
                case 2:
                  n2.group_name = e3.string();
                  break;
                case 3:
                  n2.group_notice = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, gt), e2.StGroupLimit = (mt.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.maxMemberCount && t3.uint32(8).int32(e3.maxMemberCount), e3.joinMode && t3.uint32(16).int32(e3.joinMode), e3.inviteMode && t3.uint32(24).int32(e3.inviteMode), e3.beInviteMode && t3.uint32(32).int32(e3.beInviteMode), t3;
          }, mt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StGroupLimit();
            for (n2.maxMemberCount = 0, n2.joinMode = 0, n2.inviteMode = 0, n2.beInviteMode = 0; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.maxMemberCount = e3.int32();
                  break;
                case 2:
                  n2.joinMode = e3.int32();
                  break;
                case 3:
                  n2.inviteMode = e3.int32();
                  break;
                case 4:
                  n2.beInviteMode = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, mt), e2.PushModifyGroupData = (_t.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushModifyGroupData();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 3:
                  n2.group_data_seq = +e3.int64().toString();
                  break;
                case 4:
                case 5:
                  n2.value = e3.string();
                  break;
                case 7:
                  n2.value = e3.bytes();
                  break;
                case 8:
                  n2.value = s.proto_zim.GroupForbid.decode(e3, e3.uint32());
                  break;
                case 9:
                  n2.value = s.proto_zim.StGroupLimit.decode(e3, e3.uint32());
                  break;
                case 10:
                  n2.value = s.proto_zim.StGroupData.decode(e3, e3.uint32());
                  break;
                case 6:
                  n2.modify_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, _t), e2.PushGroupOwnerTransfer = (bt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushGroupOwnerTransfer();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.user_id = e3.string();
                  break;
                case 3:
                  n2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 4:
                  n2.member_all_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, bt), e2.PushGroupInvite = (vt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushGroupInvite();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.group_name = e3.string();
                  break;
                case 3:
                  n2.group_notice = e3.string();
                  break;
                case 4:
                  n2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 5:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 6:
                  n2.member_count = e3.uint32();
                  break;
                case 7:
                  n2.group_avatar = e3.bytes();
                  break;
                case 8:
                  n2.group_list_seq = e3.int64();
                  break;
                case 9:
                  n2.limit_info = s.proto_zim.StGroupLimit.decode(e3, e3.uint32());
                  break;
                case 10:
                  n2.forbid_info = s.proto_zim.GroupForbid.decode(e3, e3.uint32());
                  break;
                case 11:
                  n2.group_create_time = +e3.int64().toString();
                  break;
                case 12:
                  n2.member = s.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, vt), e2.PushApplyUserStateChange = (yt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushApplyUserStateChange();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.list.push(s.proto_zim.StApplyUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, yt), e2.PushApplyGroupStateChange = (Mt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushApplyGroupStateChange();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.apply_info = s.proto_zim.StApplyUser.decode(e3, e3.uint32(), true);
                  break;
                case 2:
                  n2.group_info = s.proto_zim.FirstJoinGroup.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Mt), e2.FetchReplyListRsp = (kt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FetchReplyListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.total_count = e3.uint32();
                  break;
                case 4:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.conv_msg_seq.push(+e3.int64().toString());
                  else
                    n2.conv_msg_seq.push(+e3.int64().toString());
                  break;
                case 5:
                  var u2 = s.proto_zim.MuteInfo.decode(e3, e3.uint32());
                  n2.root_info = { sender_user_id: u2.peer_user_id, msg_time: u2.mute_list_seq };
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, kt), e2.BatchFetchConvMsgReq = (Ct.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.how && t3.uint32(16).int32(e3.how), e3.degree && t3.uint32(24).uint32(e3.degree), e3.login_fetch && t3.uint32(32).int32(e3.login_fetch), e3.reqs && e3.reqs.length)
              for (let r3 = 0; r3 < e3.reqs.length; ++r3)
                s.proto_zim.FriendListReq.encode(e3.reqs[r3], t3.uint32(42).fork()).ldelim();
            return t3;
          }, Ct), e2.BatchFetchConvMsgRsp = (It.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.BatchFetchConvMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.max_conv_msg_seq = e3.int64();
                  break;
                case 4:
                  n2.fetch_end = e3.int32();
                  break;
                case 5:
                  n2.results.push(s.proto_zim.StFetchConvMsgResult.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, It), e2.StReplyInfo = (St.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StReplyInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.reply_count = e3.uint32();
                  break;
                case 2:
                  n2.replied_msg_info = s.proto_zim.FetchMsgInfo.decode(e3, e3.uint32());
                  break;
                case 3:
                  var a2 = s.proto_zim.PushFriendRefuse.decode(e3, e3.uint32());
                  n2.root_info = { sender_user_id: a2.user_id, msg_time: a2.apply_list_seq, conv_msg_seq: a2.update_time };
                  break;
                case 4:
                  n2.root_msg_id = e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, St), e2.StFetchConvMsgResult = (Dt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StFetchConvMsgResult();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.msgs.push(s.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.next_conv_msg_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Dt), e2.C2CMsgReq = (qt.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.msg_info && s.proto_zim.StConvMsgInfo.encode(e3.msg_info, t3.uint32(18).fork()).ldelim(), e3.fetch_peer_user_info && t3.uint32(24).int32(e3.fetch_peer_user_info), t3;
          }, qt), e2.C2CMsgRsp = (wt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.C2CMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.msg_svr_info = s.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32());
                  break;
                case 4:
                  n2.peer_user_name = e3.bytes();
                  break;
                case 5:
                  n2.send_count_after_read = +e3.int64().toString();
                  break;
                case 6:
                  n2.conv_disable = e3.bool();
                  break;
                case 7:
                  n2.peer_user_avatar = e3.bytes();
                  break;
                case 8:
                  n2.msg_status = e3.int32();
                  break;
                case 9:
                  n2.audit_info = e3.string();
                  break;
                case 10:
                  var a2 = s.proto_zim.ErrorUser.decode(e3, e3.uint32());
                  n2.audit_message_info = { filtered_text: a2.user_id };
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, wt), e2.C2CCommandReq = (At.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.command_msg_info && s.proto_zim.StCommandMsgInfo.encode(e3.command_msg_info, t3.uint32(18).fork()).ldelim(), t3;
          }, At), e2.C2CCommandReqRsp = (Rt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.C2CCommandReqRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.command_svr_info = s.proto_zim.StCommandSvrInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Rt), e2.RoomMsgReq = (xt.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.msg_info && s.proto_zim.StConvMsgInfo.encode(e3.msg_info, t3.uint32(34).fork()).ldelim(), e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, xt), e2.RoomMsgRsp = (Tt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.RoomMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.msg_id = e3.int64().toString();
                  break;
                case 4:
                  n2.msg_svr_info = s.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32());
                  break;
                case 5:
                  n2.audit_info = e3.string();
                  break;
                case 6:
                  var a2 = s.proto_zim.ErrorUser.decode(e3, e3.uint32());
                  n2.audit_message_info = { filtered_text: a2.user_id };
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Tt), e2.RoomMsglistReq = (Lt.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.conv_msg_seq && t3.uint32(32).int64(e3.conv_msg_seq), e3.count && t3.uint32(40).int32(e3.count), e3.sort_type && t3.uint32(48).int32(e3.sort_type), e3.how && t3.uint32(64).int32(e3.how), e3.degree && t3.uint32(72).uint32(e3.degree), e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Lt), e2.RoomMsglistRsp = (Gt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.RoomMsglistRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.next_conv_msg_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.max_conv_msg_seq = +e3.int64().toString();
                  break;
                case 6:
                  n2.msgs.push(s.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 7:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Gt), e2.StMsgInfo = (Et.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new s.proto_zim.StMsgInfo(e3)), t3 = t3 || o.create(), e3.msg_type && t3.uint32(8).int32(e3.msg_type), e3.msg && t3.uint32(18).bytes(e3.msg), e3.priority_type && t3.uint32(24).int32(e3.priority_type), e3.msg_id && t3.uint32(32).int64(e3.msg_id), e3.sender_user_id && t3.uint32(42).string(e3.sender_user_id), e3.msg_time && t3.uint32(48).int64(e3.msg_time), e3.payload && t3.uint32(58).bytes(e3.payload), t3;
          }, Et.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StMsgInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.msg_type = e3.int32();
                  break;
                case 2:
                  n2.msg = e3.bytes();
                  break;
                case 3:
                  n2.priority_type = e3.int32();
                  break;
                case 4:
                  n2.msg_id = e3.int64().toString();
                  break;
                case 5:
                  n2.sender_user_id = e3.string();
                  break;
                case 6:
                  n2.msg_time = +e3.int64().toString();
                  break;
                case 7:
                  n2.payload = e3.bytes();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Et), e2.RoomCommandMsgReq = (Ot.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.command_msg_info && s.proto_zim.StMsgInfo.encode(e3.command_msg_info, t3.uint32(34).fork()).ldelim(), e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Ot), e2.StReaction = (Ut.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StReaction();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.reaction_key = e3.string();
                  break;
                case 2:
                  n2.cur_reaction_seq = +e3.int64().toString();
                  break;
                case 3:
                  n2.user_total_count = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ut), e2.SetReactionReq = (Pt.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_msg_seq && t3.uint32(16).int64(e3.conv_msg_seq), e3.reaction_into_map)
              for (let r3 = Object.keys(e3.reaction_into_map), n2 = 0; n2 < r3.length; ++n2)
                t3.uint32(26).fork().uint32(10).string(r3[n2]), s.proto_zim.C2CReadReceiptReq.encode(e3.reaction_into_map[r3[n2]], t3.uint32(18).fork()).ldelim().ldelim();
            return e3.operate_type && t3.uint32(32).int32(e3.operate_type), t3;
          }, Pt), e2.SetReactionRsp = (jt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.SetReactionRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.succ_list.push(s.proto_zim.StReaction.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.error_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, jt), e2.DelReactionReq = (Bt.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_msg_seq && t3.uint32(16).int64(e3.conv_msg_seq), e3.reaction_key && e3.reaction_key.length)
              for (let r3 = 0; r3 < e3.reaction_key.length; ++r3)
                t3.uint32(26).string(e3.reaction_key[r3]);
            return t3;
          }, Bt), e2.ReactionListReq = (Ft.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.degree && t3.uint32(16).uint32(e3.degree), e3.conv_msg_seq && t3.uint32(24).int64(e3.conv_msg_seq), e3.start_reaction_seq && t3.uint32(32).int64(e3.start_reaction_seq), t3;
          }, Ft), e2.ReactionListRsp = (zt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ReactionListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.fetch_end = e3.uint32();
                  break;
                case 4:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.msg_next_reaction_seq = +e3.int64().toString();
                  break;
                case 6:
                  n2.msg_max_reaction_seq = +e3.int64().toString();
                  break;
                case 7:
                  n2.reaction_list.push(s.proto_zim.StReactionBrief.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, zt), e2.ReactionInfoReq = (Nt.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.conv_msg_seq && t3.uint32(16).int64(e3.conv_msg_seq), e3.reaction_key && t3.uint32(26).string(e3.reaction_key), e3.max_reaction_seq && t3.uint32(32).int64(e3.max_reaction_seq), e3.is_detail && t3.uint32(40).bool(e3.is_detail), t3;
          }, Nt), e2.ReactionInfoRsp = (Kt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ReactionInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.max_reaction_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.total_user_count = e3.uint32();
                  break;
                case 5:
                  n2.user_reaction.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.include_self = e3.bool();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2.user_reaction = n2.user_reaction.map((e4) => ({ userID: e4.key, seq: +e4.seq.toString() })), n2.user_reaction.sort((e4, t4) => e4.seq - t4.seq), n2;
          }, Kt), e2.PushMsgReaction = (Xt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushMsgReaction();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_id = e3.string();
                  break;
                case 2:
                  n2.conv_type = e3.int32();
                  break;
                case 3:
                  n2.msg_reactions.push(s.proto_zim.StPushMsgReaction.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Xt), e2.StPushMsgReaction = (Ht.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StPushMsgReaction();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 2:
                  n2.start_reaction_seq = +e3.int64().toString();
                  break;
                case 3:
                  n2.end_reaction_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.reaction_infos.push(s.proto_zim.StReactionBrief.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ht), e2.GroupMsgRsp = (Qt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GroupMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.msg_svr_info = s.proto_zim.StMsgSvrInfo.decode(e3, e3.uint32());
                  break;
                case 4:
                  n2.send_count_after_read = +e3.int64().toString();
                  break;
                case 5:
                  n2.msg_status = e3.int32();
                  break;
                case 6:
                  n2.receipt_seq = e3.int64();
                  break;
                case 7:
                  n2.unread_count = e3.sint32();
                  break;
                case 8:
                  n2.audit_info = e3.string();
                  break;
                case 9:
                  var a2 = s.proto_zim.ErrorUser.decode(e3, e3.uint32());
                  n2.audit_message_info = { filtered_text: a2.user_id };
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Qt), e2.FetchGroupMsgList = (Vt.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.group_id && t3.uint32(10).string(e3.group_id), e3.conv_msg_seq && t3.uint32(16).int64(e3.conv_msg_seq), e3.count && t3.uint32(24).int32(e3.count), e3.sort_type && t3.uint32(32).int32(e3.sort_type), e3.max_conv_msg_seq && t3.uint32(40).int64(e3.max_conv_msg_seq), e3.how && t3.uint32(48).int32(e3.how), e3.degree && t3.uint32(56).uint32(e3.degree), t3;
          }, Vt), e2.FetchGroupMsgListRsp = (Zt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FetchGroupMsgListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.max_conv_msg_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.next_conv_msg_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.msgs.push(s.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.fetch_end = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Zt), e2.PushPinnedConvChange = (Jt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushPinnedConvChange();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_id = e3.string();
                  break;
                case 2:
                  n2.conv_type = e3.int32();
                  break;
                case 3:
                  n2.conv_pinned_list_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.pinned_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Jt), e2.PushEnterGroup = (Wt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushEnterGroup();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.group_id = e3.string();
                  break;
                case 2:
                  n2.group_name = e3.string();
                  break;
                case 3:
                  n2.group_notice = e3.string();
                  break;
                case 4:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 5:
                  n2.member_count = e3.uint32();
                  break;
                case 6:
                  n2.group_avatar = e3.bytes();
                  break;
                case 7:
                  n2.group_list_seq = e3.int64();
                  break;
                case 8:
                  n2.user_id = e3.string();
                  break;
                case 9:
                  n2.member = s.proto_zim.StGroupMember.decode(e3, e3.uint32());
                  break;
                case 10:
                  n2.properties = s.proto_zim.StGroupAttributes.decode(e3, e3.uint32());
                  break;
                case 11:
                  n2.group_create_time = e3.int64();
                  break;
                case 12:
                  n2.limit_info = s.proto_zim.StGroupLimit.decode(e3, e3.uint32());
                  break;
                case 13:
                  n2.forbid_info = s.proto_zim.GroupForbid.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Wt), e2.PushDelConvMsg = (Yt.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushDelConvMsg();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_id = e3.string();
                  break;
                case 2:
                  n2.conv_type = e3.int32();
                  break;
                case 3:
                  n2.is_del_all = e3.uint32();
                  break;
                case 4:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.del_conv_msg_seqs.push(+e3.int64().toString());
                  else
                    n2.del_conv_msg_seqs.push(+e3.int64().toString());
                  break;
                case 5:
                  n2.max_del_conv_msg_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Yt), e2.GetMsgStateListReq = ($t.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.conv_id && t3.uint32(10).string(e3.conv_id), e3.state_seq && t3.uint32(16).int64(e3.state_seq), e3.count && t3.uint32(24).sint32(e3.count), e3.degree && t3.uint32(32).uint32(e3.degree), e3.max_msg_seq && t3.uint32(40).int64(e3.max_msg_seq), e3.min_msg_seq && t3.uint32(48).int64(e3.min_msg_seq), t3;
          }, $t), e2.GetMsgStateListRsp = (er.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetMsgStateListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.state_list.push(s.proto_zim.StMsgStateContent.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.next_state_seq = e3.int64();
                  break;
                case 5:
                  n2.fetch_end = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, er), e2.StMsgStateContent = (tr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StMsgStateContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.conv_msg_seq = e3.int64();
                  break;
                case 3:
                  n2.state = e3.int32();
                  break;
                case 4:
                  n2.state_seq = e3.int64();
                  break;
                case 5:
                  n2.conv_id = e3.string();
                  break;
                case 6:
                  n2.conv_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, tr), e2.PushC2CCommand = (rr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushC2CCommand();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n2.recv_command_info = s.proto_zim.StRecvCommandInfo.decode(e3, e3.uint32()) : e3.skipType(7 & o2);
            }
            return n2;
          }, rr), e2.PushRoomMsg = (nr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushRoomMsg();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.room_id = e3.string();
                  break;
                case 2:
                  n2.room_session_id = e3.int64();
                  break;
                case 3:
                  n2.recv_msg_info = s.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, nr), e2.PushRoomCommand = (ir.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushRoomCommand();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.room_id = e3.string();
                  break;
                case 2:
                  n2.room_session_id = e3.int64();
                  break;
                case 3:
                  n2.msg_info = s.proto_zim.StMsgInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ir), e2.PushGroupCommand = (or.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushGroupCommand();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 2 ? n2.recv_command_info = s.proto_zim.StRecvCommandInfo.decode(e3, e3.uint32()) : e3.skipType(7 & o2);
            }
            return n2;
          }, or), e2.PushGroupMsg = (sr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushGroupMsg();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.recv_msg_info = s.proto_zim.StRecvMsgInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.msg_status = e3.int32();
                  break;
                case 3:
                  n2.send_count_after_read = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, sr), e2.RoomCreateReq = (ar.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_name && t3.uint32(18).bytes(e3.room_name), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            return e3.destroy_delay && t3.uint32(32).uint32(e3.destroy_delay), t3;
          }, ar), e2.RoomCreateRsp = (ur.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.RoomCreateRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.room_session_id = e3.int64();
                  break;
                case 4:
                  n2.room_user_session_id = e3.int64();
                  break;
                case 5:
                  n2.room_info_interval = e3.uint32();
                  break;
                case 6:
                  n2.userlist_enable = e3.uint32();
                  break;
                case 7:
                  n2.userlist_merge_timeout = e3.uint32();
                  break;
                case 8:
                  n2.userlist_interval = e3.uint32();
                  break;
                case 9:
                  n2.attributes = s.proto_zim.StRoomAttributes.decode(e3, e3.uint32());
                  break;
                case 10:
                  n2.attributes_pull_interval = e3.uint32();
                  break;
                case 11:
                  n2.attributes_merge_timeout = e3.uint32();
                  break;
                case 13:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 14:
                  n2.enabled_offline_msg = e3.uint32();
                  break;
                case 15:
                  n2.msg_merge_timeout = e3.uint32();
                  break;
                case 16:
                  n2.msg_pull_interval = e3.uint32();
                  break;
                case 17:
                  n2.destroy_delay = e3.uint32();
                  break;
                case 18:
                  n2.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ur), e2.RoomEnterReq = (cr.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_user_session_id && t3.uint32(16).int64(e3.room_user_session_id), e3.room_name && t3.uint32(26).bytes(e3.room_name), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(34).fork()).ldelim();
            return e3.destroy_delay && t3.uint32(40).uint32(e3.destroy_delay), e3.create_if_not_exist && t3.uint32(48).bool(e3.create_if_not_exist), t3;
          }, cr), e2.RoomEnterRsp = (lr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.RoomEnterRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.room_name = e3.bytes();
                  break;
                case 4:
                  n2.room_session_id = e3.int64();
                  break;
                case 5:
                  n2.room_user_session_id = e3.int64();
                  break;
                case 6:
                  n2.userlist_seq = e3.uint32();
                  break;
                case 7:
                  n2.user_count = e3.uint32();
                  break;
                case 8:
                  n2.room_info_interval = e3.uint32();
                  break;
                case 9:
                  n2.userlist_enable = e3.uint32();
                  break;
                case 10:
                  n2.userlist_merge_timeout = e3.uint32();
                  break;
                case 11:
                  n2.userlist_interval = e3.uint32();
                  break;
                case 12:
                  n2.attribute_seq = e3.uint32();
                  break;
                case 13:
                  n2.attributes_pull_interval = e3.uint32();
                  break;
                case 14:
                  n2.attributes_merge_timeout = e3.uint32();
                  break;
                case 15:
                  n2.sub_room_id = e3.string();
                  break;
                case 17:
                  n2.conv_msg_seq = +e3.int64().toString();
                  break;
                case 18:
                  n2.enabled_offline_msg = e3.uint32();
                  break;
                case 19:
                  n2.msg_merge_timeout = e3.uint32();
                  break;
                case 20:
                  n2.msg_pull_interval = e3.uint32();
                  break;
                case 21:
                  n2.destroy_delay = e3.uint32();
                  break;
                case 22:
                  n2.attributes = s.proto_zim.StRoomAttributes.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, lr), e2.QueryRoomUserInfosReq = (dr.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(34).string(e3.user_ids[r3]);
            return e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, dr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.QueryRoomUserInfosReq();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.room_id = e3.string();
                  break;
                case 2:
                  n2.room_session_id = e3.int64();
                  break;
                case 3:
                  n2.room_user_session_id = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, dr), e2.RoomUserlistReq = (pr.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.pos_flag && t3.uint32(26).string(e3.pos_flag), e3.count && t3.uint32(32).int32(e3.count), e3.mode && t3.uint32(40).int32(e3.mode), e3.expect_seq && t3.uint32(48).uint32(e3.expect_seq), e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, pr), e2.RoomUserlistRsp = (hr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.RoomUserlistRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.pos_flag = e3.string();
                  break;
                case 4:
                  n2.userlist_seq = e3.uint32();
                  break;
                case 5:
                  n2.user_count = e3.uint32();
                  break;
                case 6:
                  n2.users.push(s.proto_zim.StUserInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, hr), e2.StUserInfo = (fr.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.user_id && t3.uint32(10).string(e3.user_id), e3.user_name && t3.uint32(18).bytes(e3.user_name), e3.online_state && t3.uint32(24).int32(e3.online_state), e3.extra && t3.uint32(34).bytes(e3.extra), e3.avatar && t3.uint32(42).bytes(e3.avatar), t3;
          }, fr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StUserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.user_name = e3.bytes();
                  break;
                case 3:
                  n2.online_state = e3.int32();
                  break;
                case 4:
                  n2.extra = e3.bytes();
                  break;
                case 5:
                  n2.avatar = e3.bytes();
                  break;
                case 6:
                  n2.updated_at = +e3.uint64().toString();
                  break;
                case 7:
                  n2.user_info_seq = +e3.uint64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, fr), e2.UserRule = (gr.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.online && e3.online.length) {
              t3.uint32(10).fork();
              for (let r3 = 0; r3 < e3.online.length; ++r3)
                t3.int32(e3.online[r3]);
              t3.ldelim();
            }
            if (e3.disable_push && e3.disable_push.length) {
              t3.uint32(18).fork();
              for (let r3 = 0; r3 < e3.disable_push.length; ++r3)
                t3.int32(e3.disable_push[r3]);
              t3.ldelim();
            }
            return t3;
          }, gr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.UserRule();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  if (2 == (7 & o2))
                    for (var a2 = e3.uint32() + e3.pos; e3.pos < a2; )
                      n2.online.push(e3.int32());
                  else
                    n2.online.push(e3.int32());
                  break;
                case 2:
                  if (2 == (7 & o2))
                    for (var u2 = e3.uint32() + e3.pos; e3.pos < u2; )
                      n2.disable_push.push(e3.int32());
                  else
                    n2.disable_push.push(e3.int32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, gr), e2.StUserSelfRule = (mr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StUserSelfRule();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.app_custom_push = s.proto_zim.UserRule.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.user_custom_push = s.proto_zim.UserRule.decode(e3, e3.uint32());
                  break;
                case 3:
                  n2.user_info_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, mr), e2.ErrorUser = (_r.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.user_id && t3.uint32(10).string(e3.user_id), e3.sub_code && t3.uint32(16).uint32(e3.sub_code), t3;
          }, _r.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ErrorUser();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.sub_code = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, _r), e2.RoomInfoRsp = (br.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.RoomInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.userlist_seq = e3.uint32();
                  break;
                case 4:
                  n2.user_count = e3.uint32();
                  break;
                case 5:
                  n2.room_info_interval = e3.uint32();
                  break;
                case 6:
                  n2.attribute_seq = e3.uint32();
                  break;
                case 7:
                  n2.max_conv_msg_seq = +e3.int64().toString();
                  break;
                case 9:
                  n2.ulist_to = e3.uint32();
                  break;
                case 10:
                  n2.ulist_itvl = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, br), e2.ModifyUserCustomPush = (vr.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.user_rule && s.proto_zim.UserRule.encode(e3.user_rule, t3.uint32(10).fork()).ldelim(), t3;
          }, vr), e2.SelfUserInfoRsp = (yr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.SelfUserInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.base_info = s.proto_zim.StUserInfo.decode(e3, e3.uint32());
                  break;
                case 4:
                  n2.rule = s.proto_zim.StUserSelfRule.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, yr), e2.StRoomAttribute = (Mr.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new s.proto_zim.StRoomAttribute(e3)), t3 = t3 || o.create(), e3.key && t3.uint32(10).string(e3.key), e3.value && t3.uint32(18).string(e3.value), e3.seq && t3.uint32(24).uint32(e3.seq), e3.auto_delete && t3.uint32(32).int32(e3.auto_delete), t3;
          }, Mr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StRoomAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.key = e3.string();
                  break;
                case 2:
                  n2.value = e3.string();
                  break;
                case 3:
                  n2.seq = e3.uint32();
                  break;
                case 4:
                  n2.auto_delete = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Mr), e2.StModifyRoomAttribute = (kr.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new s.proto_zim.StModifyRoomAttribute(e3)), t3 = t3 || o.create(), e3.action && t3.uint32(8).int32(e3.action), e3.attribute && s.proto_zim.StRoomAttribute.encode(e3.attribute, t3.uint32(18).fork()).ldelim(), t3;
          }, kr), e2.StRoomAttributes = (Cr.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new s.proto_zim.StRoomAttributes(e3)), t3 = t3 || o.create(), e3.attribute_seq && t3.uint32(8).uint32(e3.attribute_seq), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, Cr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StRoomAttributes();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.attribute_seq = e3.uint32();
                  break;
                case 2:
                  n2.attributes.push(s.proto_zim.StRoomAttribute.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Cr), e2.ModifyRoomAttributesReq = (Ir.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.force_modify && t3.uint32(24).int32(e3.force_modify), e3.set_member && t3.uint32(32).int32(e3.set_member), e3.attribute_seq && t3.uint32(40).uint32(e3.attribute_seq), e3.op_fail_fast && t3.uint32(48).uint32(e3.op_fail_fast), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StModifyRoomAttribute.encode(e3.attributes[r3], t3.uint32(58).fork()).ldelim();
            return e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Ir), e2.ErrList = (Sr.encode = function(e3, t3) {
            return "object" == typeof e3 && (e3 = new s.proto_zim.ErrList(e3)), t3 = t3 || o.create(), e3.code && t3.uint32(8).uint32(e3.code), e3.key && t3.uint32(18).string(e3.key), e3.seq && t3.uint32(24).uint32(e3.seq), t3;
          }, Sr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ErrList();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.key = e3.string();
                  break;
                case 3:
                  n2.seq = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Sr), e2.ModifyRoomAttributesRsp = (Dr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ModifyRoomAttributesRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.attributes = s.proto_zim.StRoomAttributes.decode(e3, e3.uint32());
                  break;
                case 4:
                  n2.err_list.push(s.proto_zim.ErrList.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Dr), e2.GetRoomAttributesReq = (qr.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.attributes && s.proto_zim.StRoomAttributes.encode(e3.attributes, t3.uint32(26).fork()).ldelim(), e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, qr), e2.ModifyRoomUserAttributesReq = (wr.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.force_modify && t3.uint32(32).int32(e3.force_modify), e3.op_fail_fast && t3.uint32(40).uint32(e3.op_fail_fast), e3.attributes && s.proto_zim.StModifyRoomUserAttributes.encode(e3.attributes, t3.uint32(50).fork()).ldelim(), e3.auto_save && t3.uint32(56).int32(e3.auto_save), e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, wr), e2.ModifyRoomUserAttributesRsp = (Ar.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ModifyRoomUserAttributesRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.user_attributes.push(s.proto_zim.StModifyRoomUserAttributeRsp.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.user_err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ar), e2.StModifyRoomUserAttributes = (Rr.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new s.proto_zim.StModifyRoomUserAttributes(e3)), t3 = t3 || o.create(), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(10).string(e3.user_ids[r3]);
            if (e3.modify_attribute && e3.modify_attribute.length)
              for (let r3 = 0; r3 < e3.modify_attribute.length; ++r3)
                s.proto_zim.StModifyRoomAttribute.encode(e3.modify_attribute[r3], t3.uint32(18).fork()).ldelim();
            return t3;
          }, Rr), e2.StModifyRoomUserAttributeRsp = (xr.encode = function(e3, t3) {
            if ("object" == typeof e3 && (e3 = new s.proto_zim.StModifyRoomUserAttributeRsp(e3)), t3 = t3 || o.create(), e3.user_id && t3.uint32(10).string(e3.user_id), e3.user_attributes_seq && t3.uint32(16).uint32(e3.user_attributes_seq), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StRoomAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            if (e3.err_list && e3.err_list.length)
              for (let r3 = 0; r3 < e3.err_list.length; ++r3)
                s.proto_zim.ErrList.encode(e3.err_list[r3], t3.uint32(34).fork()).ldelim();
            return t3;
          }, xr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StModifyRoomUserAttributeRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.user_attributes_seq = e3.uint32();
                  break;
                case 3:
                  n2.attributes.push(s.proto_zim.StRoomAttribute.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.err_list.push(s.proto_zim.ErrList.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, xr), e2.GetRoomUserAttributesReq = (Tr.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.req_attributes && e3.req_attributes.length)
              for (let r3 = 0; r3 < e3.req_attributes.length; ++r3)
                s.proto_zim.StModifyRoomUserAttributeRsp.encode(e3.req_attributes[r3], t3.uint32(34).fork()).ldelim();
            return e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Tr), e2.GetRoomUserAttributeListReq = (Lr.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.pos_flag && t3.uint32(34).string(e3.pos_flag), e3.count && t3.uint32(40).int32(e3.count), e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Lr), e2.GetRoomUserAttributeListRsp = (Gr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetRoomUserAttributeListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.pos_flag = e3.string();
                  break;
                case 4:
                  n2.user_attributes_list_seq = e3.uint32();
                  break;
                case 5:
                  n2.user_count = e3.uint32();
                  break;
                case 6:
                  n2.user_attributes.push(s.proto_zim.StModifyRoomUserAttributeRsp.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Gr), e2.PushRoomEnter = (Er.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushRoomEnter();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.room_id = e3.string();
                  break;
                case 2:
                  n2.room_session_id = e3.int64();
                  break;
                case 3:
                  n2.user_id = e3.string();
                  break;
                case 4:
                  n2.user_name = e3.bytes();
                  break;
                case 5:
                  n2.enter_time = e3.int64();
                  break;
                case 6:
                  n2.userlist_seq = e3.uint32();
                  break;
                case 7:
                  n2.user_count = e3.uint32();
                  break;
                case 8:
                  n2.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Er), e2.PushRoomKickout = (Or.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushRoomKickout();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.room_id = e3.string();
                  break;
                case 2:
                  n2.reason = e3.uint32();
                  break;
                case 3:
                  n2.message = e3.string();
                  break;
                case 4:
                  n2.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Or), e2.PushRoomAttributesModify = (Ur.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushRoomAttributesModify();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.attributes.push(s.proto_zim.StRoomAttribute.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n2.room_id = e3.string();
                  break;
                case 3:
                  n2.room_session_id = e3.int64();
                  break;
                case 4:
                  n2.user_id = e3.string();
                  break;
                case 5:
                  n2.attributes_seq = e3.uint32();
                  break;
                case 6:
                  n2.sub_room_id = e3.string();
                  break;
                case 7:
                  n2.old_attributes_seq = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Ur), e2.PushRoomUserAttributesModify = (Pr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushRoomUserAttributesModify();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.push_attributes.push(s.proto_zim.StModifyRoomUserAttributeRsp.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n2.room_id = e3.string();
                  break;
                case 3:
                  n2.room_session_id = e3.int64();
                  break;
                case 4:
                  n2.user_id = e3.string();
                  break;
                case 6:
                  n2.sub_room_id = e3.string();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Pr), e2.UserInfoRsp = (jr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.UserInfoRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.result.push(s.proto_zim.StUserInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, jr), e2.ModifyUserInfoReq = (Br.encode = function(e3, t3) {
            return t3 = t3 || o.create(), !e3.user_name || e3.set_flag && 1 != e3.set_flag || t3.uint32(10).bytes(e3.user_name), 10 == e3.set_flag && t3.uint32(18).bytes(e3.user_name), e3.set_flag && t3.uint32(24).uint32(e3.set_flag), 16 == e3.set_flag && t3.uint32(34).bytes(e3.user_name), t3;
          }, Br.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ModifyUserInfoReq();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                case 2:
                  n2.value = e3.bytes();
                  break;
                case 3:
                  n2.set_flag = e3.uint32();
                  break;
                case 4:
                  n2.value = e3.bytes();
                  break;
                case 5:
                  n2.rule = s.proto_zim.StUserSelfRule.decode(e3, e3.uint32());
                  break;
                case 6:
                  n2.user_info_seq = +e3.uint64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Br), e2.MsgStatusFail = (Fr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.MsgStatusFail();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.client_info = s.proto_zim.StMsgClientInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.reason = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Fr), e2.StReactions = (zr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StReactions();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.is_detail = e3.bool();
                  break;
                case 2:
                  n2.reaction_list.push(s.proto_zim.StReactionBrief.decode(e3, e3.uint32()));
                  break;
                case 3:
                  n2.msg_max_reaction_seq = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, zr), e2.StReactionBrief = (Nr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StReactionBrief();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.max_reaction_seq = +e3.int64().toString();
                  break;
                case 2:
                  n2.reaction_key = e3.string();
                  break;
                case 3:
                  n2.total_user_count = e3.int32();
                  break;
                case 4:
                  n2.include_self = e3.bool();
                  break;
                case 5:
                  n2.user_reaction.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 6:
                  n2.is_multi = e3.bool();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2.user_reaction = n2.user_reaction.map((e4) => ({ userID: e4.key, seq: +e4.seq.toString() })), n2.user_reaction.sort((e4, t4) => e4.seq - t4.seq), n2;
          }, Nr), e2.CallStateVersion = (Kr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.CallStateVersion();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.state = e3.int32();
                  break;
                case 2:
                  n2.start_version = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Kr), e2.UserMailCallUserInfo = (Xr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.UserMailCallUserInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.user_state = e3.uint32();
                  break;
                case 3:
                  n2.user_session_id = e3.int64();
                  break;
                case 4:
                  n2.extended_data = e3.bytes();
                  break;
                case 5:
                  n2.is_timeout = e3.int64();
                  break;
                case 6:
                  n2.accept_time = e3.int64();
                  break;
                case 7:
                  n2.quit_time = e3.int64();
                  break;
                case 8:
                  n2.residue_timeout_time = e3.int64();
                  break;
                case 9:
                  n2.call_state_list.push(s.proto_zim.CallStateVersion.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Xr), e2.QuitAllRoomRsp = (Hr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.QuitAllRoomRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.room_list.push(s.proto_zim.QueryRoomUserInfosReq.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Hr), e2.QueryRoomMsgReq = (Qr.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.room_id && t3.uint32(10).string(e3.room_id), e3.room_session_id && t3.uint32(16).int64(e3.room_session_id), e3.room_user_session_id && t3.uint32(24).int64(e3.room_user_session_id), e3.client_infos && e3.client_infos.length)
              for (let r3 = 0; r3 < e3.client_infos.length; ++r3)
                s.proto_zim.StMsgClientInfo.encode(e3.client_infos[r3], t3.uint32(34).fork()).ldelim();
            return e3.sub_room_id && t3.uint32(402).string(e3.sub_room_id), t3;
          }, Qr), e2.QueryRoomMsgRsp = (Vr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.QueryRoomMsgRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.msgs.push(s.proto_zim.FetchMsgInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.fail_list.push(s.proto_zim.MsgStatusFail.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Vr), e2.FriendAddReq = (Zr.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.friend_infos && e3.friend_infos.length)
              for (let r3 = 0; r3 < e3.friend_infos.length; ++r3)
                s.proto_zim.StFriendInfo.encode(e3.friend_infos[r3], t3.uint32(10).fork()).ldelim();
            return e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(18).fork()).ldelim(), t3;
          }, Zr), e2.StApplyStatusChange = (Jr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StApplyStatusChange();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.status = e3.int32();
                  break;
                case 3:
                  n2.apply_list_seq = e3.int64();
                  break;
                case 4:
                  n2.apply_update_time = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Jr), e2.FriendAddRsp = (Wr.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendAddRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.friend_infos.push(s.proto_zim.StFriendInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.apply_status_change_list.push(s.proto_zim.StApplyStatusChange.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Wr), e2.StUserBaseInfo = (Yr.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.user_id && t3.uint32(10).string(e3.user_id), e3.user_name && t3.uint32(18).bytes(e3.user_name), e3.avatar && t3.uint32(26).bytes(e3.avatar), e3.update_time && t3.uint32(32).int64(e3.update_time), t3;
          }, Yr.decode = function(e3, t3, r3) {
            e3 instanceof i || (e3 = i.create(e3));
            let n2 = void 0 === t3 ? e3.len : e3.pos + t3, o2 = new s.proto_zim.StUserBaseInfo();
            for (; e3.pos < n2; ) {
              var a2 = e3.uint32();
              switch (a2 >>> 3) {
                case 1:
                  o2.user_id = e3.string();
                  break;
                case 2:
                  o2.user_name = r3 ? e3.string() : e3.bytes();
                  break;
                case 3:
                  o2.avatar = e3.bytes();
                  break;
                case 4:
                  o2.update_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & a2);
              }
            }
            return o2;
          }, Yr), e2.StApplyUser = ($r.decode = function(e3, t3, r3) {
            e3 instanceof i || (e3 = i.create(e3));
            let n2 = void 0 === t3 ? e3.len : e3.pos + t3, o2 = new s.proto_zim.StApplyUser();
            for (; e3.pos < n2; ) {
              var a2 = e3.uint32();
              switch (a2 >>> 3) {
                case 1:
                  o2.base_info = s.proto_zim.StUserBaseInfo.decode(e3, e3.uint32(), r3);
                  break;
                case 2:
                  o2.apply_list_seq = +e3.int64().toString();
                  break;
                case 3:
                  o2.apply_status = e3.int32();
                  break;
                case 4:
                  o2.op_user = s.proto_zim.GroupOperator.decode(e3, e3.uint32());
                  break;
                case 5:
                  o2.wording = e3.string();
                  break;
                case 6:
                  o2.create_time = +e3.int64().toString();
                  break;
                case 7:
                  o2.update_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & a2);
              }
            }
            return o2;
          }, $r), e2.StFriendInfo = (en.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.user_base_info && s.proto_zim.StUserBaseInfo.encode(e3.user_base_info, t3.uint32(10).fork()).ldelim(), e3.wording && t3.uint32(18).string(e3.wording), e3.remark && t3.uint32(26).string(e3.remark), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(34).fork()).ldelim();
            return e3.friend_list_seq && t3.uint32(40).int64(e3.friend_list_seq), e3.create_time && t3.uint32(48).int64(e3.create_time), t3;
          }, en.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StFriendInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_base_info = s.proto_zim.StUserBaseInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.wording = e3.string();
                  break;
                case 3:
                  n2.remark = e3.string();
                  break;
                case 4:
                  n2.attributes.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.friend_list_seq = e3.int64();
                  break;
                case 6:
                  n2.create_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, en), e2.FriendApplyRsp = (tn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendApplyRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.apply_infos.push(s.proto_zim.StFriendApplyInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.friend_infos.push(s.proto_zim.StFriendInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, tn), e2.StFriendApplyInfo = (rn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StFriendApplyInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.user_name = e3.bytes();
                  break;
                case 3:
                  n2.avatar = e3.bytes();
                  break;
                case 4:
                  n2.app_type = e3.int32();
                  break;
                case 5:
                  n2.wording = e3.string();
                  break;
                case 6:
                  n2.status = e3.int32();
                  break;
                case 7:
                  n2.remark = e3.string();
                  break;
                case 8:
                  n2.attributes.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 9:
                  n2.apply_list_seq = e3.int64();
                  break;
                case 10:
                  n2.create_time = +e3.int64().toString();
                  break;
                case 11:
                  n2.update_time = +e3.int64().toString();
                  break;
                case 12:
                  n2.user_info_update_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, rn), e2.FriendAcceptReq = (nn.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.user_id && t3.uint32(10).string(e3.user_id), e3.remark && t3.uint32(18).string(e3.remark), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            return e3.offline_info && s.proto_zim.StOfflinePushInfo.encode(e3.offline_info, t3.uint32(34).fork()).ldelim(), t3;
          }, nn), e2.FriendAcceptRsp = (on.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendAcceptRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.friend = s.proto_zim.StFriendInfo.decode(e3, e3.uint32());
                  break;
                case 4:
                  n2.apply_list_seq = e3.int64();
                  break;
                case 5:
                  n2.apply_update_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, on), e2.FriendDeletedReq = (sn.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.user_ids && e3.user_ids.length)
              for (let r3 = 0; r3 < e3.user_ids.length; ++r3)
                t3.uint32(10).string(e3.user_ids[r3]);
            return e3.delete_type && t3.uint32(16).int32(e3.delete_type), t3;
          }, sn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendDeletedReq();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_ids.push(e3.string());
                  break;
                case 2:
                  n2.delete_type = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, sn), e2.FriendListReq = (an.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.cur_list_seq && t3.uint32(8).int64(e3.cur_list_seq), e3.count && t3.uint32(16).uint32(e3.count), e3.full_pull && t3.uint32(24).int32(e3.full_pull), e3.degree && t3.uint32(32).uint32(e3.degree), t3;
          }, an), e2.FriendListRsp = (un.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.cur_list_seq = e3.int64();
                  break;
                case 4:
                  n2.max_list_seq = e3.int64();
                  break;
                case 5:
                  n2.full_list = e3.int32();
                  break;
                case 6:
                  n2.fetch_end = e3.int32();
                  break;
                case 7:
                  n2.friends.push(s.proto_zim.FriendUpdateInfo.decode(e3, e3.uint32()));
                  break;
                case 8:
                  n2.friend_count = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, un), e2.FriendUpdateInfo = (cn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendUpdateInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.is_del = e3.bool();
                  break;
                case 2:
                  n2.info = s.proto_zim.StFriendInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, cn), e2.FriendApplyListRsp = (ln.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendApplyListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.cur_list_seq = e3.int64();
                  break;
                case 4:
                  n2.max_list_seq = e3.int64();
                  break;
                case 5:
                  n2.fetch_end = e3.int32();
                  break;
                case 6:
                  n2.apply_list.push(s.proto_zim.StFriendApplyInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, ln), e2.ModifyFriendAttributeReq = (dn.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.user_id && t3.uint32(10).string(e3.user_id), e3.action && t3.uint32(16).int32(e3.action), e3.attributes && e3.attributes.length)
              for (let r3 = 0; r3 < e3.attributes.length; ++r3)
                s.proto_zim.StGroupAttribute.encode(e3.attributes[r3], t3.uint32(26).fork()).ldelim();
            return t3;
          }, dn), e2.ModifyFriendAttributeRsp = (pn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.ModifyFriendAttributeRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.succ_keys.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.fail_keys.push(s.proto_zim.StCheckFriendFail.decode(e3, e3.uint32()));
                  break;
                case 5:
                  n2.friend_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, pn), e2.FriendCheckedRsp = (hn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.FriendCheckedRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.successes.push(s.proto_zim.StCheckFriendFail.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.fails.push(s.proto_zim.StCheckFriendFail.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, hn), e2.StCheckFriendFail = (fn.encode = function(e3, t3) {
            return t3 = t3 || o.create(), e3.user_id && t3.uint32(10).string(e3.user_id), e3.sub_code && t3.uint32(16).uint32(e3.sub_code), e3.relation && t3.uint32(24).int32(e3.relation), t3;
          }, fn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StCheckFriendFail();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.sub_code = e3.uint32();
                  break;
                case 3:
                  n2.relation = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, fn), e2.BlacklistAddRsp = (gn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.BlacklistAddRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.black_list.push(s.proto_zim.StBlacklistInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, gn), e2.BlacklistDeleteRsp = (mn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.BlacklistDeleteRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.black_list.push(s.proto_zim.PushFriendRefuse.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.err_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, mn), e2.BlacklistRsp = (_n.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.BlacklistRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.cur_list_seq = e3.int64();
                  break;
                case 4:
                  n2.max_list_seq = e3.int64();
                  break;
                case 5:
                  n2.full_list = e3.int32();
                  break;
                case 6:
                  n2.fetch_end = e3.int32();
                  break;
                case 7:
                  n2.blacklists.push(s.proto_zim.BlacklistUpdateInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, _n), e2.BlacklistUpdateInfo = (bn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.BlacklistUpdateInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.is_del = e3.bool();
                  break;
                case 2:
                  n2.info = s.proto_zim.StBlacklistInfo.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, bn), e2.StBlacklistInfo = (vn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StBlacklistInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_base_info = s.proto_zim.StUserBaseInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.black_list_seq = e3.int64();
                  break;
                case 3:
                  n2.create_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, vn), e2.PushFriendAdd = (yn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushFriendAdd();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.friend_info = s.proto_zim.StFriendInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.friend_list_seq = e3.int64();
                  break;
                case 3:
                  n2.apply_status_change = s.proto_zim.StApplyStatusChange.decode(e3, e3.uint32());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, yn), e2.PushFriendAdd2Self = (Mn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushFriendAdd2Self();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.friend_infos.push(s.proto_zim.StFriendInfo.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n2.apply_status_changes_list.push(s.proto_zim.StApplyStatusChange.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Mn), e2.PushFriendApply = (kn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushFriendApply();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.apply_info = s.proto_zim.StFriendApplyInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.apply_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, kn), e2.PushFriendApply2Self = (Cn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushFriendApply2Self();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.apply_infos.push(s.proto_zim.StFriendApplyInfo.decode(e3, e3.uint32()));
                  break;
                case 2:
                  n2.friends.push(s.proto_zim.StFriendInfo.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Cn), e2.PushFriendAccept = (In.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushFriendAccept();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.friend_info = s.proto_zim.StFriendInfo.decode(e3, e3.uint32());
                  break;
                case 2:
                  n2.friend_list_seq = e3.int64();
                  break;
                case 3:
                  n2.apply_list_seq = e3.int64();
                  break;
                case 4:
                  n2.apply_update_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, In), e2.PushFriendRefuse = (Sn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushFriendRefuse();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.apply_list_seq = +e3.int64().toString();
                  break;
                case 3:
                  n2.update_time = +e3.int64().toString();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Sn), e2.PushModifyFriendAttribute = (Dn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushModifyFriendAttribute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.user_id = e3.string();
                  break;
                case 2:
                  n2.action = e3.int32();
                  break;
                case 3:
                  n2.attributes.push(s.proto_zim.StGroupAttribute.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.friend_list_seq = e3.int64();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Dn), e2.PushBlacklistAdd = (qn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushBlacklistAdd();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n2.black_list.push(s.proto_zim.StBlacklistInfo.decode(e3, e3.uint32())) : e3.skipType(7 & o2);
            }
            return n2;
          }, qn), e2.PushBlacklistDelete = (wn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushBlacklistDelete();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? n2.black_list.push(s.proto_zim.PushFriendRefuse.decode(e3, e3.uint32())) : e3.skipType(7 & o2);
            }
            return n2;
          }, wn), e2.GetMuteInfoListRsp = (An.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.GetMuteInfoListRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.max_mute_seq = +e3.int64().toString();
                  break;
                case 4:
                  n2.user_ids.push(e3.string());
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, An), e2.MuteInfo = (Rn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.MuteInfo();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.peer_user_id = e3.string();
                  break;
                case 2:
                  n2.mute_list_seq = +e3.int64().toString();
                  break;
                case 3:
                  n2.mute = e3.bool();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Rn), e2.C2CMuteReq = (xn.encode = function(e3, t3) {
            if (t3 = t3 || o.create(), e3.c2c_mute_list && e3.c2c_mute_list.length)
              for (let r3 = 0; r3 < e3.c2c_mute_list.length; ++r3)
                s.proto_zim.GroupMuteReq.encode(e3.c2c_mute_list[r3], t3.uint32(10).fork()).ldelim();
            return t3;
          }, xn), e2.C2CMuteRsp = (Tn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.C2CMuteRsp();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.code = e3.uint32();
                  break;
                case 2:
                  n2.message = e3.string();
                  break;
                case 3:
                  n2.mute_info.push(s.proto_zim.MuteInfo.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.error_user_list.push(s.proto_zim.ErrorUser.decode(e3, e3.uint32()));
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Tn), e2.PushC2cMute = (Ln.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.PushC2cMute();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              o2 >>> 3 == 1 ? (n2.mute_info && n2.mute_info.length || (n2.mute_info = []), n2.mute_info.push(s.proto_zim.MuteInfo.decode(e3, e3.uint32()))) : e3.skipType(7 & o2);
            }
            return n2;
          }, Ln), e2.StTipsMsgContent = (Gn.decode = function(e3, t3) {
            e3 instanceof i || (e3 = i.create(e3));
            let r3 = void 0 === t3 ? e3.len : e3.pos + t3, n2 = new s.proto_zim.StTipsMsgContent();
            for (; e3.pos < r3; ) {
              var o2 = e3.uint32();
              switch (o2 >>> 3) {
                case 1:
                  n2.type = e3.int32();
                  break;
                case 2:
                  n2.op_user_info = s.proto_zim.PushRoomKickout.decode(e3, e3.uint32());
                  break;
                case 3:
                  n2.target_users.push(s.proto_zim.PushRoomKickout.decode(e3, e3.uint32()));
                  break;
                case 4:
                  n2.group_data_flag = e3.uint32();
                  break;
                case 5:
                  n2.group_notice = e3.string();
                  break;
                case 6:
                  n2.group_name = e3.string();
                  break;
                case 7:
                  n2.group_avatar = e3.bytes();
                  break;
                case 8:
                  n2.forbid = s.proto_zim.GroupForbid.decode(e3, e3.uint32());
                  break;
                case 9:
                  n2.forbid_expire_time = +e3.int64().toString();
                  break;
                case 10:
                  n2.role = e3.int32();
                  break;
                default:
                  e3.skipType(7 & o2);
              }
            }
            return n2;
          }, Gn), e2;
        })();
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        t = r(3);
        var n = r.n(t), i = r(83), o = r(1), s = r(0), a = function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, u = (c.prototype.setDB = function(e2) {
          this.dataReport.setDB(e2);
        }, c.prototype.clearDB = function() {
          this.dataReport.clearDB();
        }, c.prototype.init = function(e2) {
          this.isInited || (this.isInited = true, this.dataReport.init({ isProd: this.isProd, appID: e2, deviceID: this.settings.deviceInfo.device_id, importantLevel: 0, levels: [0, 10] }));
        }, c.prototype.start = function(e2, t2, r2) {
          var n2;
          t2 ? ((n2 = /* @__PURE__ */ new Map()).set("userID", e2), n2.set("token", t2), r2 && n2.set("serverUrl", r2), this.dataReport.startReport(n2), this.dataReport.resume()) : this.dataReport.pause();
        }, c.prototype.beginNetworkRequest = function(e2, t2, r2, n2) {
          var i2 = this.createDateEvent(e2);
          i2.caller_type = r2, i2._req_ = n2, this.evenDatatMap.set(e2 + t2, i2);
        }, c.prototype.endNetworkRequest = function(e2, t2, r2, n2) {
          var i2 = this.evenDatatMap.get(e2 + t2);
          if (i2 && (!r2 || r2.code != s.pb))
            return r2 && r2.code ? (i2.error = r2.code, i2.error_message = (r2.message || "") + (n2 || "")) : (i2.error_message = n2 || "", i2._rsp_ = r2), i2.time_consumed = Date.now() - i2.event_time, i2.event_time = this.settings.getRealClientTimestamp(i2.event_time), this.upload(i2, true), this.evenDatatMap.delete(e2 + t2), delete i2.error, delete i2.error_message, delete i2.sdk_version, delete i2.term_type, delete i2.net_type, delete i2.event, delete i2.event_time, delete i2.time_consumed, delete i2.time_offset, i2;
        }, c.prototype.reportNetworkRequest = function(e2, t2) {
          (e2 = this.createDateEvent(e2))._rsp_ = t2, this.upload(e2, true);
        }, c.prototype.reportSDKEvent = function(e2, t2) {
          e2 = this.createDateEvent(e2, t2), this.upload(e2, false);
        }, c.prototype.reportPushEvent = function(e2, t2, r2, n2) {
          var i2 = this.createDateEvent("/sdk/push");
          i2.push_cmd = e2, i2.push_id = r2, i2.push_type = this.stringify(n2), i2.time_consumed = t2, this.upload(i2, false), this.isProd;
        }, c.prototype.stringify = function(e2) {
          return JSON.stringify(e2, function(e3, t2) {
            return t2 instanceof Uint8Array ? "b=" + t2.length : t2 instanceof Array && 2 < t2.length ? [r2 = t2.length, t2[0], t2[r2 - 1]] : "string" == typeof t2 && 32 < t2.length ? "s=" + t2.length : t2 instanceof n.a ? t2.toString() : t2;
            var r2;
          }).replace(/\"(\w+)\":/g, "$1:");
        }, c.prototype.createDateEvent = function(e2, t2) {
          return a(a({ event: e2, event_time: Date.now(), time_consumed: 0, time_offset: this.settings.serverOffsetTime }, this.commonFields), t2);
        }, c.prototype.upload = function(e2, t2) {
          if (t2)
            try {
              this.hookCMDEvent(e2);
            } catch (e3) {
            }
          e2.net_type = this.settings.netType, t2 = JSON.stringify(e2, function(e3, t3) {
            return t3 instanceof n.a ? +t3.toString() : t3;
          }), this.dataReport.report(t2, -1 != this.unSaveEvents.indexOf(e2.event));
        }, c.prototype.set_offline_push = function(e2, t2) {
          e2.offline_push_w = t2 ? t2.pushStrategyId || "1" : "0", t2 && t2.custom_map && (e2.offline_push_map = JSON.stringify(t2.custom_map));
        }, c.prototype.hookCMDEvent = function(e2) {
          var t2, r2, n2, i2, a2 = e2._req_, u2 = e2._rsp_;
          switch (delete e2._req_, delete e2._rsp_, e2.event) {
            case s.d.sw_login.cmd:
              e2.os_type = o.j, this.settings.advancedConfig.zim_cross_platform && (e2.cross_platform = this.settings.advancedConfig.zim_cross_platform), this.settings.advancedConfig.zim_product_source && (e2.product_source = this.settings.advancedConfig.zim_product_source), this.settings.advancedConfig.geoFence.id && (t2 = (i2 = this.settings.advancedConfig.geoFence).id, r2 = i2.type, n2 = i2.areas, i2 = i2.dispatch, e2.geo_fence = JSON.stringify({ id: t2, type: r2, areas: n2, dispatch: i2 })), e2.zpns_push_id = a2.zpns_push_id, e2.sdk_action = a2.sdk_action, e2.sdk_duration = a2.sdk_duration, e2.server_ip = a2.sdk_server_ip, u2 && (e2.usernid = u2.rspHeader.user_nid.toString(), e2.hb_interval = u2.hb_interval, e2.hb_timeout = u2.hb_timeout, e2.server_timestamp = u2.server_timestamp, e2.im_conf_json = u2.im_conf_json);
              break;
            case s.d.sw_logout.cmd:
              e2.reason = a2.reason;
              break;
            case s.d.sw_renew_token.cmd:
              e2.sdk_duration = a2.sdk_duration;
              break;
            case s.d.sw_hb.cmd:
              u2 && (e2.heartbeat_interval = u2.heartbeat_interval, e2.hb_timeout = u2.hb_timeout, e2.server_timestamp = u2.server_timestamp);
              break;
            case s.d.swp_kickout.cmd:
              e2.error = u2.code, e2.error_message = u2.key, e2.need_relogin = u2.seq;
              break;
            case s.d.swp_redirect.cmd:
              e2.error_message = u2.user_ids.join();
              break;
            case s.d.user_modify.cmd:
              e2.set_flag = a2.set_flag;
              break;
            case s.d.user_fetch.cmd:
              u2 && (e2.result_len = u2.result.length, e2.err_list_len = u2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(u2.err_list)));
              break;
            case s.d.user_zpns_report.cmd:
              e2.zpns_push_id = a2.key;
              break;
            case s.d.conv_hb.cmd:
              u2 && (e2.conv_list_seq = u2.conv_list_seq, e2.group_list_seq = u2.group_list_seq, e2.c2c_msg_seq = u2.c2c_msg_seq, e2.c2c_statemsg_seq = u2.c2c_statemsg_seq, e2.extra_msg_list_seq = u2.extra_msg_list_seq, e2.conv_pinned_list_seq = u2.conv_pinned_list_seq, e2.call_list_seq = u2.call_list_seq, e2.db_seq_json = JSON.stringify(a2.db_seq_json), e2.im_conf_json = JSON.stringify(Object(o.s)(this.pickCmds.usermail_hb, u2)));
              break;
            case s.d.conv_list.cmd:
              e2.how = a2.how, e2.count = a2.count, e2.full_pull = a2.full_pull, e2.conv_list_seq = a2.cur_list_seq, u2 && (e2.rsp_conv_list_seq = u2.cur, e2.max_list_seq = u2.max, e2.full_list = u2.full_list, e2.fetch_end = u2.fetch_end, e2.conv_list_len = u2.svrCount, e2.degree = u2.degree);
              break;
            case s.d.conv_pinned_list.cmd:
              e2.how = a2.how, e2.count = a2.count, e2.full_pull = a2.full_pull, e2.conv_pinned_list_seq = a2.cur_list_seq, u2 && (e2.rsp_conv_pinned_list_seq = u2.cur, e2.max_pinned_list_seq = u2.max, e2.full_list = u2.full_list, e2.fetch_end = u2.fetch_end, e2.conv_list_len = u2.svrCount, e2.degree = u2.degree);
              break;
            case s.d.conv_del.cmd:
              e2.conv_id = a2.conv_id, e2.conv_type = a2.conv_type, u2 && (e2.conv_list_seq = u2.conv_list_seq, e2.conv_msg_seq = u2.conv_msg_seq);
              break;
            case s.d.conv_pinned.cmd:
              e2.conv_id = a2.user_id, e2.conv_type = a2.sub_code, e2.pinned_type = a2.relation;
              break;
            case s.d.conv_read_seq.cmd:
              e2.conv_id = a2.conv_id, e2.conv_type = a2.conv_type, e2.read_seq = a2.read_seq;
              break;
            case s.d.c2c_msglist.cmd:
              e2.conv_id = a2.conv_id, e2.conv_type = a2.conv_type, e2.how = a2.how, e2.count = a2.count, e2.mode = a2.mode, e2.login_fetch = a2.login_fetch, e2.conv_msg_seq = a2.conv_msg_seq, u2 && (e2.degree = u2.degree, e2.fetch_end = u2.fetch_end, e2.msgs_len = u2.svrCount, e2.dbSeq = u2.dbSeq, e2.next_conv_msg_seq = u2.next_seq, e2.max_conv_msg_seq = u2.maxSeq);
              break;
            case s.d.group_msglist.cmd:
              e2.group_id = a2.group_id, e2.how = a2.how, e2.count = a2.count, e2.sort_type = a2.sort_type, e2.conv_msg_seq = a2.conv_msg_seq, u2 && (e2.degree = u2.degree, e2.fetch_end = u2.fetch_end, e2.msgs_len = u2.svrCount, e2.dbSeq = u2.dbSeq, e2.next_conv_msg_seq = u2.next_seq, e2.max_conv_msg_seq = u2.maxSeq);
              break;
            case s.d.room_msglist.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.how = a2.how, e2.count = a2.count, e2.sort_type = a2.sort_type, e2.conv_msg_seq = a2.conv_msg_seq, u2 && (e2.degree = u2.degree, e2.fetch_end = u2.fetch_end, e2.msgs_len = u2.svrCount, e2.dbSeq = u2.dbSeq, e2.next_conv_msg_seq = u2.next_seq, e2.max_conv_msg_seq = u2.maxSeq);
              break;
            case s.d.c2c_msg.cmd:
              e2.peer_user_id = a2.conv_id, e2.fetch_peer_user_info = a2.fetch_peer_user_info, e2.msg_type = a2.msg_info.msg_type, e2.msg_len = a2.msg_info.msg.length, e2.priority = a2.msg_info.priority_type, this.set_offline_push(e2, a2.msg_info.offline_push), u2 && (e2.conv_disable = u2.conv_disable, e2.send_count_after_read = u2.send_count_after_read, e2.msg_id = u2.msg_svr_info.msg_id, e2.conv_msg_seq = u2.msg_svr_info.conv_msg_seq, e2.c2c_msg_seq = u2.msg_svr_info.c2c_msg_seq, e2.has_content = u2.msg_svr_info.has_content, e2.msg_version = u2.msg_svr_info.version);
              break;
            case s.d.c2c_command.cmd:
              e2.peer_user_id = a2.conv_id, e2.msg_type = a2.command_msg_info.msg_type, e2.msg_len = a2.command_msg_info.msg.length, e2.priority = a2.command_msg_info.priority_type, u2 && (e2.msg_id = u2.command_svr_info.msg_id.toString(), e2.msg_time = u2.command_svr_info.conv_msg_seq);
              break;
            case s.d.c2c_del_msg.cmd:
              e2.conv_id = a2.conv_id, e2.conv_type = a2.conv_type, e2.msg_ids_len = a2.msg_ids.length, 0 < e2.msg_ids_len && e2.msg_ids_len < 6 && (e2.msg_ids = a2.msg_ids.join());
              break;
            case s.d.c2c_del_all_msg.cmd:
              e2.conv_id = a2.conv_id, e2.conv_type = a2.conv_type;
              break;
            case s.d.group_msg.cmd:
              e2.group_id = a2.conv_id, e2.msg_type = a2.msg_info.msg_type, e2.msg_len = a2.msg_info.msg.length, e2.priority = a2.msg_info.priority_type, this.set_offline_push(e2, a2.msg_info.offline_push), u2 && (e2.send_count_after_read = u2.send_count_after_read, e2.msg_id = u2.msg_svr_info.msg_id, e2.conv_msg_seq = u2.msg_svr_info.conv_msg_seq, e2.has_content = u2.msg_svr_info.has_content, e2.msg_version = u2.msg_svr_info.version);
              break;
            case s.d.group_command.cmd:
              e2.group_id = a2.conv_id, e2.msg_type = a2.command_msg_info.msg_type, e2.msg_len = a2.command_msg_info.msg.length, e2.priority = a2.command_msg_info.priority_type, u2 && (e2.msg_id = u2.command_svr_info.msg_id.toString(), e2.msg_time = u2.command_svr_info.conv_msg_seq);
              break;
            case s.d.group_del_msg.cmd:
              e2.group_id = a2.conv_id, e2.conv_msg_seq_len = a2.conv_msg_seq.length, 0 < e2.conv_msg_seq_len && e2.conv_msg_seq_len < 6 && (e2.conv_msg_seqs = a2.conv_msg_seq.join());
              break;
            case s.d.group_del_all_msg.cmd:
              e2.group_id = a2.conv_id;
              break;
            case s.d.room_msg.cmd:
              e2.room_id = a2.conv_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.msg_type = a2.msg_info.msg_type, e2.msg_len = a2.msg_info.msg.length, e2.priority = a2.msg_info.priority_type, u2 && (e2.msg_id = u2.msg_svr_info.msg_id.toString(), e2.conv_msg_seq = u2.msg_svr_info.conv_msg_seq, e2.has_content = u2.msg_svr_info.has_content, e2.msg_version = u2.msg_svr_info.version);
              break;
            case s.d.room_command.cmd:
              e2.room_id = a2.conv_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.msg_type = a2.command_msg_info.msg_type, e2.msg_len = a2.command_msg_info.msg.length, e2.priority = a2.command_msg_info.priority_type, u2 && (e2.msg_id = u2.msg_id.toString());
              break;
            case s.d.file_upload.cmd:
              e2.md5 = a2.md5, e2.file_type = a2.file_type, e2.name = a2.name, e2.size = a2.size, e2.duration = a2.duration, u2 && (e2.state = u2.state, e2.upload_url = u2.upload_req.url, e2.upload_url.indexOf("?") && (e2.upload_url = e2.upload_url.substring(0, e2.upload_url.indexOf("?"))));
              break;
            case s.d.file_process.cmd:
              e2.md5 = a2.md5, e2.file_type = a2.file_type, u2 && (e2.state = u2.state, e2.download_url = u2.download_url, e2.download_url.indexOf("?") && (e2.download_url = e2.download_url.substring(0, e2.download_url.indexOf("?"))));
              break;
            case s.d.c2c_conv_read_receipt.cmd:
              e2.conv_id = a2.group_id, e2.conv_msg_seq = a2.cur_list_seq, u2 && (e2.receipt_seq = u2.conv_list_seq);
              break;
            case s.d.c2c_msg_read_receipt.cmd:
              e2.conv_id = a2.conv_id, e2.conv_msg_seq_len = a2.conv_msg_seq.length, u2 && (e2.receipt_seqs = JSON.stringify(u2.conv_msg_seq2_receipt_seq));
              break;
            case s.d.group_msg_read_receipt.cmd:
              e2.group_id = a2.conv_id, e2.conv_msg_seq_len = a2.conv_msg_seq.length, u2 && (e2.receipt_seqs = JSON.stringify(u2.conv_msg_seq2_receipt_seq));
              break;
            case s.d.msg_read_receipt_detail.cmd:
              e2.group_id = a2.group_id, e2.conv_msg_seq = a2.cur_list_seq, u2 && (e2.list_seq = u2.list_seq, e2.fetch_end = u2.fetch_end, e2.next_list_seq = u2.next_list_seq, e2.read_count = u2.read_count, e2.unread_count = u2.unread_count, e2.read_members_len = u2.read_members_len, e2.unread_members_len = u2.unread_members_len, e2.degree = u2.degree);
              break;
            case s.d.c2c_msg_revoke.cmd:
            case s.d.group_msg_revoke.cmd:
              a2.conv_id && (e2.conv_id = a2.conv_id), e2.conv_msg_seq = a2.conv_msg_seq, e2.extended_data_len = (null == (t2 = a2.payload) ? void 0 : t2.length) || 0, this.set_offline_push(e2, a2.offline_push), u2 && (e2.statemsg_seq = u2.statemsg_seq);
              break;
            case s.d.c2c_add_reaction.cmd:
            case s.d.c2c_del_reaction.cmd:
            case s.d.group_add_reaction.cmd:
            case s.d.group_del_reaction.cmd:
              e2.conv_id = a2.conv_id, e2.conv_msg_seq = a2.conv_msg_seq, e2.reaction_key = Array.isArray(a2.reaction_key) ? a2.reaction_key[0] : a2.reaction_key, u2 && (e2.succ_list_len = u2.succ_list.length, e2.error_list_len = u2.error_list.length);
              break;
            case s.d.c2c_get_reaction.cmd:
            case s.d.group_get_reaction.cmd:
              e2.conv_id = a2.conv_id, e2.conv_msg_seq = a2.conv_msg_seq, e2.reaction_key = a2.reaction_key, e2.max_reaction_seq = a2.max_reaction_seq, e2.is_detail = a2.is_detail, u2 && (e2.rsp_max_reaction_seq = u2.max_reaction_seq, e2.total_user_count = u2.total_user_count, e2.user_reaction_len = u2.user_reaction.length, e2.include_self = u2.include_self);
              break;
            case s.d.c2c_reaction_list.cmd:
            case s.d.group_reaction_list.cmd:
              e2.conv_id = a2.conv_id, e2.conv_msg_seq = a2.conv_msg_seq, e2.start_reaction_seq = a2.start_reaction_seq, u2 && (e2.fetch_end = u2.fetch_end, e2.msg_next_reaction_seq = u2.msg_next_reaction_seq, e2.msg_max_reaction_seq = u2.msg_max_reaction_seq, e2.reaction_list_len = u2.svrCount, e2.degree = u2.degree);
              break;
            case s.d.extra_msglist.cmd:
              e2.how = a2.how, e2.count = a2.count, e2.list_seq = a2.cur_list_seq, u2 && (e2.fetch_end = u2.fetch_end, e2.next_list_seq = u2.next_list_seq, e2.list_len = u2.svrCount, e2.degree = u2.degree);
              break;
            case s.d.c2c_msg_state_list.cmd:
            case s.d.group_msg_state_list.cmd:
              e2.conv_id = a2.conv_id, e2.min_msg_seq = a2.min_msg_seq, e2.max_msg_seq = a2.max_msg_seq, e2.how = a2.how, e2.statemsg_seq = a2.statemsg_seq, e2.count = a2.count, u2 && (e2.fetch_end = u2.fetch_end, e2.next_statemsg_seq = u2.next_statemsg_seq, e2.statemsg_list_len = u2.svrCount, e2.degree = u2.degree);
              break;
            case s.d.c2c_query_msg.cmd:
            case s.d.group_query_msg.cmd:
            case s.d.room_query_msg.cmd:
              e2.event == s.d.c2c_query_msg.cmd ? e2.conv_id = a2.room_id : e2.event == s.d.group_query_msg.cmd ? e2.group_id = a2.room_id : (e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString()), e2.client_infos_len = a2.client_infos.length, u2 && (e2.msgs_len = u2.msgs.length, e2.fail_list_len = u2.fail_list.length);
              break;
            case s.d.room_create.cmd:
              e2.room_id = a2.room_id, u2 && (e2.sub_room_id = u2.sub_room_id, e2.room_session_id = u2.room_session_id.toString(), e2.room_user_session_id = u2.room_user_session_id.toString(), e2.destroy_delay = a2.destroy_delay || u2.destroy_delay, e2.room_info_interval = u2.room_info_interval, e2.userlist_enable = u2.userlist_enable, e2.userlist_merge_timeout = u2.userlist_merge_timeout, e2.userlist_interval = u2.userlist_interval, u2.attributes && (e2.attribute_seq = u2.attributes.attribute_seq, e2.attributes_len = u2.attributes.attributes.length), e2.attributes_pull_interval = u2.attributes_pull_interval, e2.attributes_merge_timeout = u2.attributes_merge_timeout, e2.msg_merge_timeout = u2.msg_merge_timeout, e2.msg_pull_interval = u2.msg_pull_interval, e2.enabled_offline_msg = u2.enabled_offline_msg, e2.conv_msg_seq = u2.conv_msg_seq);
              break;
            case s.d.room_enter.cmd:
              e2.room_id = a2.room_id, e2.create_if_not_exist = a2.create_if_not_exist, u2 && (e2.sub_room_id = u2.sub_room_id, e2.room_session_id = u2.room_session_id.toString(), e2.room_user_session_id = u2.room_user_session_id.toString(), e2.destroy_delay = a2.destroy_delay || u2.destroy_delay, e2.userlist_seq = u2.userlist_seq, e2.user_count = u2.user_count, e2.room_info_interval = u2.room_info_interval, e2.userlist_enable = u2.userlist_enable, e2.userlist_merge_timeout = u2.userlist_merge_timeout, e2.userlist_interval = u2.userlist_interval, u2.attributes && (e2.attribute_seq = u2.attributes.attribute_seq, e2.attributes_len = u2.attributes.attributes.length), e2.attributes_pull_interval = u2.attributes_pull_interval, e2.attributes_merge_timeout = u2.attributes_merge_timeout, e2.msg_merge_timeout = u2.msg_merge_timeout, e2.msg_pull_interval = u2.msg_pull_interval, e2.attribute_seq = u2.attribute_seq, e2.enabled_offline_msg = u2.enabled_offline_msg, e2.conv_msg_seq = u2.conv_msg_seq);
              break;
            case s.d.room_quit.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString();
              break;
            case s.d.room_info.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), u2 && (e2.userlist_seq = u2.userlist_seq, e2.user_count = u2.user_count, e2.room_info_interval = u2.room_info_interval, e2.ulist_to = u2.ulist_to, e2.ulist_itvl = u2.ulist_itvl, e2.attribute_seq = u2.attribute_seq, e2.max_conv_msg_seq = u2.max_conv_msg_seq);
              break;
            case s.d.room_userlist.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.count = a2.count, e2.mode = a2.mode, e2.expect_seq = a2.expect_seq, e2.pos_flag = a2.pos_flag, u2 && (e2.rsp_pos_flag = u2.pos_flag, e2.userlist_seq = u2.userlist_seq, e2.user_count = u2.user_count, e2.users_len = u2.svrCount, e2.degree = u2.degree);
              break;
            case s.d.room_userinfos.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.user_ids_len = a2.user_ids.length, u2 && (e2.user_infos_len = u2.result.length, e2.errlist_len = u2.err_list.length, 0 < e2.errlist_len && e2.errlist_len < 6 && (e2.errlist = JSON.stringify(u2.err_list)));
              break;
            case s.d.room_attr.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.attribute_seq = a2.attributes.attribute_seq, u2 && u2.attributes && (e2.rsp_attribute_seq = u2.attributes.attribute_seq, e2.attributes_len = u2.attributes.attributes.length);
              break;
            case s.d.room_attr_modify.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.force_modify = a2.force_modify, e2.set_member = a2.set_member, e2.op_fail_fast = a2.op_fail_fast, e2.attribute_seq = a2.attribute_seq, e2.attribute_action = null == (r2 = a2.attributes[0]) ? void 0 : r2.action, e2.attributes_len = a2.attributes.length, u2 && (u2.attributes && (e2.rsp_attribute_seq = u2.attributes.attribute_seq, e2.rsp_attributes_len = u2.attributes.attributes.length), e2.err_list_len = u2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(u2.err_list)));
              break;
            case s.d.room_user_attr_modify.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.force_modify = a2.force_modify, e2.auto_save = a2.auto_save, e2.op_fail_fast = a2.op_fail_fast, e2.user_ids_len = a2.attributes.user_ids.length, e2.attributes_len = a2.attributes.modify_attribute.length, u2 && (e2.user_attributes_len = u2.user_attributes.length, e2.user_err_list_len = u2.user_err_list.length, 0 < e2.user_err_list_len && e2.user_err_list_len < 6 && (e2.user_err_list = JSON.stringify(u2.user_err_list)));
              break;
            case s.d.room_user_attr_get.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.req_attributes_len = a2.req_attributes.length, u2 && (e2.user_attributes_len = u2.user_attributes.length);
              break;
            case s.d.room_user_attr_list_get.cmd:
              e2.room_id = a2.room_id, e2.sub_room_id = a2.sub_room_id, e2.room_session_id = a2.room_session_id.toString(), e2.room_user_session_id = a2.room_user_session_id.toString(), e2.pos_flag = a2.pos_flag, e2.count = a2.count, u2 && (e2.user_attributes_len = u2.user_attributes.length, e2.rsp_pos_flag = u2.pos_flag, e2.user_count = u2.user_count, e2.user_attributes_list_seq = u2.user_attributes_list_seq);
              break;
            case s.d.group_create.cmd:
              e2.group_id = a2.group_id, e2.group_name = a2.group_name, e2.group_notice = a2.group_notice, e2.user_ids_len = a2.user_ids.length, e2.attributes_len = (null == (n2 = a2.attributes) ? void 0 : n2.length) || 0, e2.group_avatar_len = (null == (i2 = a2.group_avatar) ? void 0 : i2.length) || 0, u2 && (e2.members_len = u2.members.length, e2.member_count = u2.member_count, e2.group_list_seq = u2.group_list_seq, e2.group_data_seq = u2.group_data_seq, e2.group_attribute_seq = u2.group_attribute_seq, e2.member_all_seq = u2.member_all_seq, e2.error_users_len = u2.error_users.length, 0 < e2.error_users_len && e2.error_users_len < 6 && (e2.error_users = JSON.stringify(u2.error_users)));
              break;
            case s.d.group_enter.cmd:
              e2.group_id = a2.key, u2 && (e2.group_name = u2.group_name, e2.group_avatar_len = (null == (t2 = u2.group_avatar) ? void 0 : t2.length) || 0, u2.properties && (e2.attributes_len = u2.properties.attributes.length), e2.member_count = u2.member_count, e2.group_list_seq = u2.group_list_seq, e2.group_data_seq = u2.group_data_seq, e2.group_attribute_seq = u2.group_attribute_seq, e2.member_all_seq = u2.member_all_seq, e2.conv_msg_seq = u2.conv_msg_seq);
              break;
            case s.d.group_invite.cmd:
              e2.group_id = a2.group_id, e2.user_ids_len = a2.user_infos.length, u2 && (e2.member_count = u2.member_count, e2.members_len = u2.members.length, e2.group_data_seq = u2.group_data_seq, e2.group_attribute_seq = u2.group_attribute_seq, e2.member_all_seq = u2.member_all_seq, e2.error_users_len = u2.error_users.length, 0 < e2.error_users_len && e2.error_users_len < 6 && (e2.error_users = JSON.stringify(u2.error_users)));
              break;
            case s.d.group_kickout.cmd:
              e2.group_id = a2.group_id, e2.user_ids_len = a2.user_ids.length, u2 && (e2.member_count = u2.member_count, e2.member_all_seq = u2.member_all_seq, e2.error_users_len = u2.error_users.length, 0 < e2.error_users_len && e2.error_users_len < 6 && (e2.error_users = JSON.stringify(u2.error_users)));
              break;
            case s.d.group_quit.cmd:
            case s.d.group_destroy.cmd:
              e2.group_id = a2.group_id, u2 && (e2.group_list_seq = u2.conv_list_seq);
              break;
            case s.d.group_list.cmd:
              e2.how = a2.how, e2.full_pull = a2.full_pull, e2.count = a2.count, e2.cur_list_seq = a2.cur_list_seq, u2 && (e2.fetch_end = u2.fetch_end, e2.full_list = u2.full_list, e2.rsp_cur_list_seq = u2.cur, e2.max_list_seq = u2.max, e2.groups_len = u2.svrCount, e2.degree = u2.degree);
              break;
            case s.d.group_infos.cmd:
              e2.group_ids_len = a2.user_ids.length, u2 && (e2.group_infos_len = u2.group_infos.length, e2.fail_keys_len = u2.fail_keys.length);
              break;
            case s.d.group_owner_transfer.cmd:
              e2.group_id = a2.group_id, e2.req_user_id = a2.group_name, u2 && (e2.old_owner_data_seq = u2.conv_list_seq, e2.new_owner_data_seq = u2.conv_msg_seq);
              break;
            case s.d.group_data.cmd:
              e2.group_id = a2.group_id, u2 && (e2.group_name = u2.group_name, e2.group_notice = u2.group_notice, e2.group_avatar_len = (null == (r2 = u2.group_avatar) ? void 0 : r2.length) || 0, e2.group_data_seq = u2.group_data_seq);
              break;
            case s.d.group_attr.cmd:
              e2.group_id = a2.group_id, e2.attributes_len = (null == (n2 = a2.attributes.attributes) ? void 0 : n2.length) || 0, e2.attribute_seq = a2.attributes.seq, u2 && (e2.rsp_attributes_len = u2.attributes.attributes.length, e2.rsp_attribute_seq = u2.attributes.seq);
              break;
            case s.d.conv_group_mute.cmd:
              e2.group_id = a2.conv_id, e2.enable = a2.enable;
              break;
            case s.d.group_modify_name.cmd:
              e2.group_id = a2.group_id, e2.group_name = a2.group_name, u2 && (e2.group_data_seq = u2.conv_list_seq);
              break;
            case s.d.group_modify_avatar.cmd:
              e2.group_id = a2.user_id, e2.group_avatar_len = a2.user_name.length, u2 && (e2.group_data_seq = u2.conv_list_seq);
              break;
            case s.d.group_modify_notice.cmd:
              e2.group_id = a2.group_id, e2.group_notice = a2.group_name, u2 && (e2.group_data_seq = u2.conv_list_seq);
              break;
            case s.d.group_modify_attr.cmd:
              e2.group_id = a2.group_id, e2.attribute_action = a2.attributes.action, e2.attributes_len = a2.attributes.attributes.length, u2 && (e2.attribute_seq = u2.attributes.seq, e2.fail_keys_len = u2.fail_keys.length, 0 < e2.fail_keys_len && e2.fail_keys_len < 6 && (e2.fail_keys = JSON.stringify(u2.fail_keys)));
              break;
            case s.d.group_member_list.cmd:
              e2.how = a2.how, e2.group_id = a2.group_id, e2.count = a2.count, e2.full_pull = a2.full_pull, e2.cur_member_seq = a2.cur_list_seq, u2 && (e2.degree = u2.degree, e2.rsp_cur_member_seq = u2.cur_list_seq, e2.member_all_seq = u2.member_all_seq, e2.full_list = u2.full_list, e2.fetch_end = u2.fetch_end, e2.member_count = u2.member_count, e2.change_list_len = u2.svrCount);
              break;
            case s.d.group_members_by_seq.cmd:
              e2.group_id = a2.conv_id, e2.member_seqs_len = a2.conv_msg_seq.length, u2 && (e2.members_len = u2.members.length);
              break;
            case s.d.group_member_data.cmd:
              e2.group_id = a2.group_id, e2.req_user_id = a2.user_id, u2 && u2.member && u2.member.member_data && (i2 = u2.member.member_data, e2.user_name = i2.user_name, e2.group_nick_name = i2.group_nick_name, e2.role = i2.role, e2.user_avatar_len = (null == (t2 = i2.user_avatar) ? void 0 : t2.length) || 0);
              break;
            case s.d.group_member_nickname_set.cmd:
              e2.group_id = a2.group_id, e2.req_user_id = a2.group_name, e2.member_nickname = a2.group_notice, u2 && (e2.member_data_seq = u2.conv_list_seq);
              break;
            case s.d.group_member_role_set.cmd:
              e2.group_id = a2.group_id, e2.req_user_id = a2.user_id, e2.role = a2.role, u2 && (e2.member_data_seq = u2.conv_list_seq);
              break;
            case s.d.call_create.cmd:
              e2.call_id = a2.call_id, e2.user_ids_len = a2.user_ids.length, e2.extended_data_len = (null == (r2 = a2.payload) ? void 0 : r2.length) || 0, e2.call_mode = a2.call_mode, this.set_offline_push(e2, a2.offline_info), u2 && (e2.timeout = a2.timeout || u2.timeout, e2.call_seq = u2.call_seq, e2.call_list_seq = u2.call_list_seq, e2.create_time = u2.create_time, e2.err_list_len = u2.new_err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(u2.new_err_list)));
              break;
            case s.d.call_cancel.cmd:
              e2.call_id = a2.call_id, e2.state = a2.timeout, e2.user_ids_len = a2.user_ids.length, e2.extended_data_len = (null == (n2 = a2.payload) ? void 0 : n2.length) || 0, this.set_offline_push(e2, a2.offline_info), u2 && (e2.call_seq = u2.call_seq, e2.call_list_seq = u2.now_time, e2.err_list_len = u2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(u2.err_list)));
              break;
            case s.d.call_accept.cmd:
            case s.d.call_enter.cmd:
              e2.call_id = a2.user_id, e2.extended_data_len = (null == (i2 = a2.user_name) ? void 0 : i2.length) || 0, u2 && (e2.call_seq = u2.call_list_seq, e2.call_list_seq = u2.talk_time, e2.accept_time = u2.quit_time || u2.accept_time);
              break;
            case s.d.call_refuse.cmd:
              e2.call_id = a2.call_id, e2.extended_data_len = (null == (t2 = a2.extended_data) ? void 0 : t2.length) || 0, u2 && (e2.call_seq = u2.call_list_seq, e2.call_list_seq = u2.talk_time);
              break;
            case s.d.call_ack.cmd:
              e2.call_id = a2.call_id;
              break;
            case s.d.call_info.cmd:
              e2.call_id = a2.call_id, u2 && (e2.user_list_len = u2.user_list.length, e2.call_seq = u2.call_seq);
              break;
            case s.d.call_invite.cmd:
              e2.call_id = a2.call_id, e2.user_ids_len = a2.user_ids.length, this.set_offline_push(e2, a2.offline_info), u2 && (e2.call_seq = u2.call_seq, e2.timeout = u2.timeout, e2.err_list_len = u2.err_list.length, 0 < e2.err_list_len && e2.err_list_len < 6 && (e2.err_list = JSON.stringify(u2.err_list)));
              break;
            case s.d.call_quit.cmd:
              e2.call_id = a2.call_id, e2.extended_data_len = (null == (r2 = a2.payload) ? void 0 : r2.length) || 0, this.set_offline_push(e2, a2.offline_info), u2 && (e2.call_list_seq = u2.call_list_seq, e2.talk_time = u2.talk_time, e2.quit_time = u2.quit_time, e2.call_seq = u2.call_seq);
              break;
            case s.d.call_destroy.cmd:
              e2.call_id = a2.call_id, e2.extended_data_len = (null == (n2 = a2.payload) ? void 0 : n2.length) || 0, this.set_offline_push(e2, a2.offline_info), u2 && (e2.call_list_seq = u2.call_list_seq, e2.destroy_time = u2.talk_time);
              break;
            case s.d.call_list.cmd:
              e2.how = a2.how, e2.count = a2.count, e2.cur_list_seq = a2.cur_list_seq, u2 && (e2.rsp_cur_list_seq = u2.cur, e2.max_list_seq = u2.max, e2.fetch_end = u2.fetch_end, e2.calls_len = u2.svrCount, e2.degree = u2.degree);
          }
        }, c);
        function c(e2) {
          this.settings = e2, this.dataReport = new i.a("zim", o.p), this.evenDatatMap = /* @__PURE__ */ new Map(), this.isProd = true, this.isInited = false, this.commonFields = { error: 0, error_message: "", sdk_version: "2.15.0.0", term_type: o.p ? "miniprogram" : "web", net_type: "" }, this.unSaveEvents = [s.d.sw_hb.cmd, s.d.conv_hb.cmd, s.d.room_info.cmd], this.pickCmds = { usermail_hb: ["msg_to", "msg_itvl", "list_to", "list_itvl", "conv_to", "conv_itvl", "group_to", "group_itvl"] };
        }
      }, function(e, t, r) {
        "use strict";
        var n = r(45);
        r.d(t, "a", function() {
          return n.a;
        });
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        var n = r(85), i = r(88), o = r(4), s = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, a = function(e2, t2, r2) {
          if (r2 || 2 === arguments.length)
            for (var n2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
              !n2 && i2 in t2 || ((n2 = n2 || Array.prototype.slice.call(t2, 0, i2))[i2] = t2[i2]);
          return e2.concat(n2 || Array.prototype.slice.call(t2));
        }, u = (c.prototype.setLogServer = function(e2) {
          this.openWebSocketLogServer(e2);
        }, c.prototype.setLogUrlParams = function(e2) {
          this.logParams = e2;
        }, c.prototype.openWebSocketLogServer = function(e2) {
          var t2, r2 = this;
          e2 && this.logParams.id_name && (this.url = e2, this.stopWebSocketServer(), t2 = { product: this.logParams.product, appid: this.logParams.appid, id_name: this.logParams.id_name, deviceid: this.logParams.deviceid, token: encodeURIComponent(this.logParams.signature) }, this.service.createSocket(e2, t2), this.service.openHandler(function() {
            r2.service.onPush(), r2.service.startCheck(), r2.openHandler();
          }), this.service.closeHandler(function() {
            r2.service.closeSocket();
          }));
        }, c.prototype.stopWebSocketServer = function() {
          this.service.closeSocket();
        }, c.prototype.openHandler = function() {
          this.startReport();
        }, c.prototype.setPostSucCallback = function(e2) {
          this.postSucCallback = e2;
        }, c.prototype.setPostFailCallback = function(e2) {
          this.postFailCallback = e2;
        }, c.prototype.reportAllowed = function() {
          return this.packageLen < this.PACKAGE_MAX_LEN;
        }, c.prototype.report = function(e2) {
          this.packageLen++, this.reportQueue.enqueue(e2), this.netWorkFail = false, this.failCount = 0, this.failStartTime = 0, this.startReport();
        }, c.prototype.startReport = function() {
          var e2, t2, r2 = this;
          this.reportQueue.size() < 1 || (e2 = this.reportQueue.dequeue(), t2 = 0, e2.forEach(function(e3) {
            return t2 += e3.value.length;
          }), this.tokenBucket.removeTokens(t2, function() {
            r2.reportData(e2, function() {
              r2.failCount = 0, r2.failStartTime = 0, r2.packageLen--, r2.postSucCallback && r2.postSucCallback(e2);
            }, function(t3) {
              r2.reportQueue.enqueue(e2), r2.failCount++, 0 == r2.failCount && (r2.failStartTime = Date.now());
              var n2 = (Date.now() - r2.failStartTime) / 1e3;
              if (10 <= r2.failCount && 60 < n2)
                return r2.netWorkFail = true, n2 = r2.decodeReportQueue(), void r2.postFailCallback(n2);
              t3 !== o.e && r2.startReport();
            });
          }));
        }, c.prototype.reportData = function(e2, t2, r2) {
          var n2 = this;
          e2 = e2.map(function(e3) {
            return e3.value;
          });
          this.service.sendMessage(e2, t2, function(e3) {
            e3 === o.e && n2.setLogServer(n2.url), r2 && r2(e3);
          });
        }, c.prototype.decodeReportQueue = function() {
          for (var e2 = []; this.reportQueue.size(); ) {
            var t2 = this.reportQueue.dequeue();
            e2.push.apply(e2, a([], s(t2), false));
          }
          return e2;
        }, c);
        function c(e2) {
          this.packageLen = 0, this.PACKAGE_MAX_LEN = 5, this.msgID = 0, this.logUploadTimer = null, this.logUploadInterval = 1e4, this.logCacheSend = [], this.logCacheMax = 100, this.failCount = 0, this.failStartTime = 0, this.netWorkFail = false, this.service = new n.a(e2), this.reportQueue = new o.d(), this.tokenBucket = new i.a(1e4, 2e3, "sec");
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n = r(86), i = r(4), o = (s.prototype.handleSendCommandMsgRsp = function(e2) {
          var t2, r2 = this, n2 = this.service.sendCommandMap[e2.messageId];
          null != n2 && (t2 = n2._data, delete this.service.sendCommandMap[e2.messageId], this.service.sendCommandList.remove(n2), 0 === e2.code ? setTimeout(function() {
            t2 && null != t2.success && t2.success(e2, r2.cmdSeq);
          }, 0) : setTimeout(function() {
            t2 && null != t2.error && t2.error(e2, r2.cmdSeq);
          }, 0));
        }, s.prototype.onPush = function() {
          var e2 = this;
          this.service.onMessage = function(t2) {
            e2.handleSendCommandMsgRsp(t2);
          };
        }, s.prototype.closeHandler = function(e2) {
          this.service.closeHandler(e2);
        }, s.prototype.openHandler = function(e2) {
          this.service.openHandler(e2);
        }, s.prototype.errorHandler = function(e2) {
          this.service.errorHandler(e2);
        }, s.prototype.startCheck = function() {
          this.service.startCheck();
        }, s.prototype.stopCheck = function() {
          this.service.stopCheck();
        }, s.prototype.createSocket = function(e2, t2) {
          this.service.createSocket(e2, t2);
        }, s.prototype.closeSocket = function() {
          this.service.closeSocket();
        }, s.prototype.sendMessage = function(e2, t2, r2) {
          var n2 = this;
          this.service.isDisConnect() ? setTimeout(function() {
            n2.service.isDisConnect() ? r2 && r2(i.e) : n2.service.sendMessage(++n2.cmdSeq, e2, t2, r2);
          }, 100) : this.service.sendMessage(++this.cmdSeq, e2, t2, r2);
        }, s);
        function s(e2) {
          this.cmdSeq = 0, this.service = new n.a(e2);
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return o;
        });
        var n = r(87), i = r(4), o = (s.prototype.createSocket = function(e2, t2) {
          var n2 = this;
          try {
            this.closeSocket();
            var i2 = this.miniProgram ? "zego.impl.wx" : "zego.impl.web", o2 = r(46)("./" + i2).createZegoWebSocket;
            this.socket = o2(e2, t2, this.miniProgram), this.socket.onerror = function() {
              n2.closeSocket();
              var r2 = n2.recreateTime.shift();
              r2 && setTimeout(function() {
                return n2.createSocket(e2, t2);
              }, r2);
            };
          } catch (i3) {
          }
        }, s.prototype.closeSocket = function() {
          this.socket && (this.socket.onclose = null, this.socket.onerror = null, this.socket.close(), this.socket = null);
        }, s.prototype.isDisConnect = function() {
          return !this.socket;
        }, s.prototype.sendMessage = function(e2, t2, r2, i2) {
          if (void 0 === r2 && (r2 = null), void 0 === i2 && (i2 = null), this.socket) {
            r2 = { data: t2 = { message_id: e2, s: '{"speed_detail":['.concat(t2.join(), "]}") }, seq: e2, deleted: false, sendTime: Date.now(), timeOut: 6e3, success: r2, error: i2 }, r2 = this.sendCommandList.push(r2), this.sendCommandMap[e2] = r2;
            try {
              this.socket.send(Object(n.a)(JSON.stringify(t2)));
            } catch (i3) {
            }
          }
        }, s.prototype.checkSendMessageList = function(e2) {
          for (var t2 = e2.getFirst(); null != t2; )
            e2.remove(t2), t2._data && t2._data.error && setTimeout(function() {
              t2 && t2._data && t2._data.error && t2._data.error(i.f.TIMEOUT, t2._data.data.message_id, t2._data.data.s);
            }, 0), t2 = e2.getFirst();
        }, s.prototype.checkMessageListTimeout = function(e2, t2) {
          for (var r2 = e2.getFirst(), n2 = Date.now(), o2 = 0; !(null == r2 || r2._data && r2._data.sendTime + r2._data.timeOut > n2 || (r2._data && delete t2[r2._data.data.message_id], e2.remove(r2), r2._data && null == r2._data.error || r2._data && r2._data.sendTime + this.sendDataDropTimeout < n2 || r2 && r2._data && r2._data.error && r2._data.error(i.f.TIMEOUT, r2._data.data.message_id, r2._data.data.s), ++o2 >= this.sendDataCheckOnceCount)); )
            r2 = e2.getFirst();
        }, s.prototype.startCheck = function() {
          var e2 = this;
          this.checkMessageListTimeout(this.sendCommandList, this.sendCommandMap), this.sendDataCheckTimer = setTimeout(function() {
            e2.startCheck();
          }, this.sendDataCheckInterval);
        }, s.prototype.stopCheck = function() {
          this.checkSendMessageList(this.sendCommandList), clearTimeout(this.sendDataCheckTimer);
        }, s.prototype.openHandler = function(e2) {
          var t2 = this;
          this.socket && (this.socket.onopen = function(r2) {
            t2.responseHandler(), e2(r2);
          });
        }, s.prototype.responseHandler = function() {
          var e2 = this;
          this.socket && (this.socket.onmessage = function(t2) {
            t2 = "string" == typeof t2.data ? JSON.parse(t2.data) : JSON.parse(String.fromCharCode.apply(null, new Uint8Array(t2.data))), e2.onMessage(t2);
          });
        }, s.prototype.closeHandler = function(e2) {
          this.socket && (this.socket.onclose = function(t2) {
            e2(t2);
          });
        }, s.prototype.errorHandler = function(e2) {
          this.socket && (this.socket.onerror = e2);
        }, s.prototype.onMessage = function(e2) {
        }, s);
        function s(e2) {
          this.miniProgram = e2, this.socket = null, this.sendCommandList = new i.c(), this.sendCommandMap = {}, this.sendDataCheckOnceCount = 100, this.sendDataDropTimeout = 1e4, this.sendDataCheckInterval = 2e3, this.recreateTime = [2e3, 4e3, 8e3];
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return dt;
        });
        function n(e2) {
          let t2 = e2.length;
          for (; 0 <= --t2; )
            e2[t2] = 0;
        }
        const i = 256, o = 286, s = 30, a = 15, u = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]), c = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]), l = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]), d = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), p = new Array(576), h = (n(p), new Array(60)), f = (n(h), new Array(512)), g = (n(f), new Array(256)), m = (n(g), new Array(29)), _ = (n(m), new Array(s));
        function b(e2, t2, r2, n2, i2) {
          this.static_tree = e2, this.extra_bits = t2, this.extra_base = r2, this.elems = n2, this.max_length = i2, this.has_stree = e2 && e2.length;
        }
        let v, y, M;
        function k(e2, t2) {
          this.dyn_tree = e2, this.max_code = 0, this.stat_desc = t2;
        }
        n(_);
        const C = (e2) => e2 < 256 ? f[e2] : f[256 + (e2 >>> 7)], I = (e2, t2) => {
          e2.pending_buf[e2.pending++] = 255 & t2, e2.pending_buf[e2.pending++] = t2 >>> 8 & 255;
        }, S = (e2, t2, r2) => {
          e2.bi_valid > 16 - r2 ? (e2.bi_buf |= t2 << e2.bi_valid & 65535, I(e2, e2.bi_buf), e2.bi_buf = t2 >> 16 - e2.bi_valid, e2.bi_valid += r2 - 16) : (e2.bi_buf |= t2 << e2.bi_valid & 65535, e2.bi_valid += r2);
        }, D = (e2, t2, r2) => {
          S(e2, r2[2 * t2], r2[2 * t2 + 1]);
        }, q = (e2, t2) => {
          let r2 = 0;
          for (; r2 |= 1 & e2, e2 >>>= 1, r2 <<= 1, 0 < --t2; )
            ;
          return r2 >>> 1;
        }, w = (e2, t2, r2) => {
          const n2 = new Array(16);
          let i2, o2, s2 = 0;
          for (i2 = 1; i2 <= a; i2++)
            n2[i2] = s2 = s2 + r2[i2 - 1] << 1;
          for (o2 = 0; o2 <= t2; o2++) {
            var u2 = e2[2 * o2 + 1];
            0 !== u2 && (e2[2 * o2] = q(n2[u2]++, u2));
          }
        }, A = (e2) => {
          let t2;
          for (t2 = 0; t2 < o; t2++)
            e2.dyn_ltree[2 * t2] = 0;
          for (t2 = 0; t2 < s; t2++)
            e2.dyn_dtree[2 * t2] = 0;
          for (t2 = 0; t2 < 19; t2++)
            e2.bl_tree[2 * t2] = 0;
          e2.dyn_ltree[512] = 1, e2.opt_len = e2.static_len = 0, e2.last_lit = e2.matches = 0;
        }, R = (e2) => {
          8 < e2.bi_valid ? I(e2, e2.bi_buf) : 0 < e2.bi_valid && (e2.pending_buf[e2.pending++] = e2.bi_buf), e2.bi_buf = 0, e2.bi_valid = 0;
        }, x = (e2, t2, r2, n2) => {
          var i2 = 2 * t2, o2 = 2 * r2;
          return e2[i2] < e2[o2] || e2[i2] === e2[o2] && n2[t2] <= n2[r2];
        }, T = (e2, t2, r2) => {
          var n2 = e2.heap[r2];
          let i2 = r2 << 1;
          for (; i2 <= e2.heap_len && (i2 < e2.heap_len && x(t2, e2.heap[i2 + 1], e2.heap[i2], e2.depth) && i2++, !x(t2, n2, e2.heap[i2], e2.depth)); )
            e2.heap[r2] = e2.heap[i2], r2 = i2, i2 <<= 1;
          e2.heap[r2] = n2;
        }, L = (e2, t2, r2) => {
          var n2;
          let o2, s2, a2, l2 = 0;
          if (0 !== e2.last_lit)
            for (; n2 = e2.pending_buf[e2.d_buf + 2 * l2] << 8 | e2.pending_buf[e2.d_buf + 2 * l2 + 1], o2 = e2.pending_buf[e2.l_buf + l2], l2++, 0 == n2 ? D(e2, o2, t2) : (s2 = g[o2], D(e2, s2 + i + 1, t2), 0 !== (a2 = u[s2]) && (o2 -= m[s2], S(e2, o2, a2)), n2--, s2 = C(n2), D(e2, s2, r2), 0 !== (a2 = c[s2]) && (n2 -= _[s2], S(e2, n2, a2))), l2 < e2.last_lit; )
              ;
          D(e2, 256, t2);
        }, G = (e2, t2) => {
          const r2 = t2.dyn_tree;
          var n2 = t2.stat_desc.static_tree, i2 = t2.stat_desc.has_stree, o2 = t2.stat_desc.elems;
          let s2, u2, c2, l2 = -1;
          for (e2.heap_len = 0, e2.heap_max = 573, s2 = 0; s2 < o2; s2++)
            0 !== r2[2 * s2] ? (e2.heap[++e2.heap_len] = l2 = s2, e2.depth[s2] = 0) : r2[2 * s2 + 1] = 0;
          for (; e2.heap_len < 2; )
            c2 = e2.heap[++e2.heap_len] = l2 < 2 ? ++l2 : 0, r2[2 * c2] = 1, e2.depth[c2] = 0, e2.opt_len--, i2 && (e2.static_len -= n2[2 * c2 + 1]);
          for (t2.max_code = l2, s2 = e2.heap_len >> 1; 1 <= s2; s2--)
            T(e2, r2, s2);
          for (c2 = o2; s2 = e2.heap[1], e2.heap[1] = e2.heap[e2.heap_len--], T(e2, r2, 1), u2 = e2.heap[1], e2.heap[--e2.heap_max] = s2, e2.heap[--e2.heap_max] = u2, r2[2 * c2] = r2[2 * s2] + r2[2 * u2], e2.depth[c2] = (e2.depth[s2] >= e2.depth[u2] ? e2.depth[s2] : e2.depth[u2]) + 1, r2[2 * s2 + 1] = r2[2 * u2 + 1] = c2, e2.heap[1] = c2++, T(e2, r2, 1), 2 <= e2.heap_len; )
            ;
          e2.heap[--e2.heap_max] = e2.heap[1], ((e3, t3) => {
            const r3 = t3.dyn_tree;
            var n3, i3 = t3.max_code, o3 = t3.stat_desc.static_tree, s3 = t3.stat_desc.has_stree, u3 = t3.stat_desc.extra_bits, c3 = t3.stat_desc.extra_base, l3 = t3.stat_desc.max_length;
            let d2, p2, h2, f2, g2, m2 = 0;
            for (f2 = 0; f2 <= a; f2++)
              e3.bl_count[f2] = 0;
            for (r3[2 * e3.heap[e3.heap_max] + 1] = 0, d2 = e3.heap_max + 1; d2 < 573; d2++)
              p2 = e3.heap[d2], (f2 = r3[2 * r3[2 * p2 + 1] + 1] + 1) > l3 && (f2 = l3, m2++), r3[2 * p2 + 1] = f2, p2 > i3 || (e3.bl_count[f2]++, g2 = 0, p2 >= c3 && (g2 = u3[p2 - c3]), n3 = r3[2 * p2], e3.opt_len += n3 * (f2 + g2), s3 && (e3.static_len += n3 * (o3[2 * p2 + 1] + g2)));
            if (0 !== m2) {
              do {
                for (f2 = l3 - 1; 0 === e3.bl_count[f2]; )
                  f2--;
              } while (e3.bl_count[f2]--, e3.bl_count[f2 + 1] += 2, e3.bl_count[l3]--, 0 < (m2 -= 2));
              for (f2 = l3; 0 !== f2; f2--)
                for (p2 = e3.bl_count[f2]; 0 !== p2; )
                  i3 < (h2 = e3.heap[--d2]) || (r3[2 * h2 + 1] !== f2 && (e3.opt_len += (f2 - r3[2 * h2 + 1]) * r3[2 * h2], r3[2 * h2 + 1] = f2), p2--);
            }
          })(e2, t2), w(r2, l2, e2.bl_count);
        }, E = (e2, t2, r2) => {
          let n2, i2 = -1;
          var o2;
          let s2 = t2[1], a2 = 0, u2 = 7, c2 = 4;
          for (0 === s2 && (u2 = 138, c2 = 3), t2[2 * (r2 + 1) + 1] = 65535, n2 = 0; n2 <= r2; n2++)
            o2 = s2, s2 = t2[2 * (n2 + 1) + 1], ++a2 < u2 && o2 === s2 || (a2 < c2 ? e2.bl_tree[2 * o2] += a2 : 0 !== o2 ? (o2 !== i2 && e2.bl_tree[2 * o2]++, e2.bl_tree[32]++) : a2 <= 10 ? e2.bl_tree[34]++ : e2.bl_tree[36]++, a2 = 0, i2 = o2, c2 = 0 === s2 ? (u2 = 138, 3) : o2 === s2 ? (u2 = 6, 3) : (u2 = 7, 4));
        }, O = (e2, t2, r2) => {
          let n2, i2 = -1;
          var o2;
          let s2 = t2[1], a2 = 0, u2 = 7, c2 = 4;
          for (0 === s2 && (u2 = 138, c2 = 3), n2 = 0; n2 <= r2; n2++)
            if (o2 = s2, s2 = t2[2 * (n2 + 1) + 1], !(++a2 < u2 && o2 === s2)) {
              if (a2 < c2)
                for (; D(e2, o2, e2.bl_tree), 0 != --a2; )
                  ;
              else
                0 !== o2 ? (o2 !== i2 && (D(e2, o2, e2.bl_tree), a2--), D(e2, 16, e2.bl_tree), S(e2, a2 - 3, 2)) : a2 <= 10 ? (D(e2, 17, e2.bl_tree), S(e2, a2 - 3, 3)) : (D(e2, 18, e2.bl_tree), S(e2, a2 - 11, 7));
              a2 = 0, i2 = o2, c2 = 0 === s2 ? (u2 = 138, 3) : o2 === s2 ? (u2 = 6, 3) : (u2 = 7, 4);
            }
        };
        let U = false;
        const P = (e2, t2, r2, n2) => {
          S(e2, 0 + (n2 ? 1 : 0), 3), n2 = e2, e2 = t2, t2 = r2, r2 = true, R(n2), r2 && (I(n2, t2), I(n2, ~t2)), n2.pending_buf.set(n2.window.subarray(e2, e2 + t2), n2.pending), n2.pending += t2;
        };
        r = { _tr_init: (e2) => {
          if (!U) {
            {
              let e3, t2, r2, n2, i2;
              const d2 = new Array(16);
              for (r2 = 0, n2 = 0; n2 < 28; n2++)
                for (m[n2] = r2, e3 = 0; e3 < 1 << u[n2]; e3++)
                  g[r2++] = n2;
              for (g[r2 - 1] = n2, i2 = 0, n2 = 0; n2 < 16; n2++)
                for (_[n2] = i2, e3 = 0; e3 < 1 << c[n2]; e3++)
                  f[i2++] = n2;
              for (i2 >>= 7; n2 < s; n2++)
                for (_[n2] = i2 << 7, e3 = 0; e3 < 1 << c[n2] - 7; e3++)
                  f[256 + i2++] = n2;
              for (t2 = 0; t2 <= a; t2++)
                d2[t2] = 0;
              for (e3 = 0; e3 <= 143; )
                p[2 * e3 + 1] = 8, e3++, d2[8]++;
              for (; e3 <= 255; )
                p[2 * e3 + 1] = 9, e3++, d2[9]++;
              for (; e3 <= 279; )
                p[2 * e3 + 1] = 7, e3++, d2[7]++;
              for (; e3 <= 287; )
                p[2 * e3 + 1] = 8, e3++, d2[8]++;
              for (w(p, 287, d2), e3 = 0; e3 < s; e3++)
                h[2 * e3 + 1] = 5, h[2 * e3] = q(e3, 5);
              v = new b(p, u, 257, o, a), y = new b(h, c, 0, s, a), M = new b(new Array(0), l, 0, 19, 7);
            }
            U = true;
          }
          e2.l_desc = new k(e2.dyn_ltree, v), e2.d_desc = new k(e2.dyn_dtree, y), e2.bl_desc = new k(e2.bl_tree, M), e2.bi_buf = 0, e2.bi_valid = 0, A(e2);
        }, _tr_stored_block: P, _tr_flush_block: (e2, t2, r2, n2) => {
          let o2, s2, a2 = 0;
          if (0 < e2.level ? (2 === e2.strm.data_type && (e2.strm.data_type = ((e3) => {
            let t3, r3 = 4093624447;
            for (t3 = 0; t3 <= 31; t3++, r3 >>>= 1)
              if (1 & r3 && 0 !== e3.dyn_ltree[2 * t3])
                return 0;
            if (0 !== e3.dyn_ltree[18] || 0 !== e3.dyn_ltree[20] || 0 !== e3.dyn_ltree[26])
              return 1;
            for (t3 = 32; t3 < i; t3++)
              if (0 !== e3.dyn_ltree[2 * t3])
                return 1;
            return 0;
          })(e2)), G(e2, e2.l_desc), G(e2, e2.d_desc), a2 = ((e3) => {
            let t3;
            for (E(e3, e3.dyn_ltree, e3.l_desc.max_code), E(e3, e3.dyn_dtree, e3.d_desc.max_code), G(e3, e3.bl_desc), t3 = 18; 3 <= t3 && 0 === e3.bl_tree[2 * d[t3] + 1]; t3--)
              ;
            return e3.opt_len += 3 * (t3 + 1) + 5 + 5 + 4, t3;
          })(e2), o2 = e2.opt_len + 3 + 7 >>> 3, (s2 = e2.static_len + 3 + 7 >>> 3) <= o2 && (o2 = s2)) : o2 = s2 = r2 + 5, r2 + 4 <= o2 && -1 !== t2)
            P(e2, t2, r2, n2);
          else if (4 === e2.strategy || s2 === o2)
            S(e2, 2 + (n2 ? 1 : 0), 3), L(e2, p, h);
          else {
            S(e2, 4 + (n2 ? 1 : 0), 3);
            {
              var u2 = e2;
              t2 = e2.l_desc.max_code + 1, r2 = e2.d_desc.max_code + 1;
              var c2 = a2 + 1;
              let n3;
              for (S(u2, t2 - 257, 5), S(u2, r2 - 1, 5), S(u2, c2 - 4, 4), n3 = 0; n3 < c2; n3++)
                S(u2, u2.bl_tree[2 * d[n3] + 1], 3);
              O(u2, u2.dyn_ltree, t2 - 1), O(u2, u2.dyn_dtree, r2 - 1);
            }
            L(e2, e2.dyn_ltree, e2.dyn_dtree);
          }
          A(e2), n2 && R(e2);
        }, _tr_tally: (e2, t2, r2) => (e2.pending_buf[e2.d_buf + 2 * e2.last_lit] = t2 >>> 8 & 255, e2.pending_buf[e2.d_buf + 2 * e2.last_lit + 1] = 255 & t2, e2.pending_buf[e2.l_buf + e2.last_lit] = 255 & r2, e2.last_lit++, 0 === t2 ? e2.dyn_ltree[2 * r2]++ : (e2.matches++, t2--, e2.dyn_ltree[2 * (g[r2] + i + 1)]++, e2.dyn_dtree[2 * C(t2)]++), e2.last_lit === e2.lit_bufsize - 1), _tr_align: (e2) => {
          S(e2, 2, 3), D(e2, 256, p), 16 === (e2 = e2).bi_valid ? (I(e2, e2.bi_buf), e2.bi_buf = 0, e2.bi_valid = 0) : 8 <= e2.bi_valid && (e2.pending_buf[e2.pending++] = 255 & e2.bi_buf, e2.bi_buf >>= 8, e2.bi_valid -= 8);
        } };
        var j = (e2, t2, r2, n2) => {
          let i2 = 65535 & e2 | 0, o2 = e2 >>> 16 & 65535 | 0, s2 = 0;
          for (; 0 !== r2; ) {
            for (r2 -= s2 = 2e3 < r2 ? 2e3 : r2; i2 = i2 + t2[n2++] | 0, o2 = o2 + i2 | 0, --s2; )
              ;
            i2 %= 65521, o2 %= 65521;
          }
          return i2 | o2 << 16 | 0;
        };
        const B = new Uint32Array((() => {
          let e2, t2 = [];
          for (var r2 = 0; r2 < 256; r2++) {
            e2 = r2;
            for (var n2 = 0; n2 < 8; n2++)
              e2 = 1 & e2 ? 3988292384 ^ e2 >>> 1 : e2 >>> 1;
            t2[r2] = e2;
          }
          return t2;
        })());
        var F = (e2, t2, r2, n2) => {
          var i2 = B, o2 = n2 + r2;
          e2 ^= -1;
          for (let r3 = n2; r3 < o2; r3++)
            e2 = e2 >>> 8 ^ i2[255 & (e2 ^ t2[r3])];
          return -1 ^ e2;
        }, z = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" };
        t = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_MEM_ERROR: -4, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
        const { _tr_init: N, _tr_stored_block: K, _tr_flush_block: X, _tr_tally: H, _tr_align: Q } = r, { Z_NO_FLUSH: V, Z_PARTIAL_FLUSH: Z, Z_FULL_FLUSH: J, Z_FINISH: W, Z_BLOCK: Y, Z_OK: $, Z_STREAM_END: ee, Z_STREAM_ERROR: te, Z_DATA_ERROR: re, Z_BUF_ERROR: ne, Z_DEFAULT_COMPRESSION: ie, Z_FILTERED: oe, Z_HUFFMAN_ONLY: se, Z_RLE: ae, Z_FIXED: ue, Z_DEFAULT_STRATEGY: ce, Z_UNKNOWN: le, Z_DEFLATED: de } = t, pe = 258, he = 262, fe = 113, ge = (e2, t2) => (e2.msg = z[t2], t2), me = (e2) => (e2 << 1) - (4 < e2 ? 9 : 0), _e = (e2) => {
          let t2 = e2.length;
          for (; 0 <= --t2; )
            e2[t2] = 0;
        };
        let be = (e2, t2, r2) => (t2 << e2.hash_shift ^ r2) & e2.hash_mask;
        const ve = (e2) => {
          const t2 = e2.state;
          let r2 = t2.pending;
          0 !== (r2 = r2 > e2.avail_out ? e2.avail_out : r2) && (e2.output.set(t2.pending_buf.subarray(t2.pending_out, t2.pending_out + r2), e2.next_out), e2.next_out += r2, t2.pending_out += r2, e2.total_out += r2, e2.avail_out -= r2, t2.pending -= r2, 0 === t2.pending && (t2.pending_out = 0));
        }, ye = (e2, t2) => {
          X(e2, 0 <= e2.block_start ? e2.block_start : -1, e2.strstart - e2.block_start, t2), e2.block_start = e2.strstart, ve(e2.strm);
        }, Me = (e2, t2) => {
          e2.pending_buf[e2.pending++] = t2;
        }, ke = (e2, t2) => {
          e2.pending_buf[e2.pending++] = t2 >>> 8 & 255, e2.pending_buf[e2.pending++] = 255 & t2;
        }, Ce = (e2, t2, r2, n2) => {
          let i2 = e2.avail_in;
          return 0 === (i2 = i2 > n2 ? n2 : i2) ? 0 : (e2.avail_in -= i2, t2.set(e2.input.subarray(e2.next_in, e2.next_in + i2), r2), 1 === e2.state.wrap ? e2.adler = j(e2.adler, t2, i2, r2) : 2 === e2.state.wrap && (e2.adler = F(e2.adler, t2, i2, r2)), e2.next_in += i2, e2.total_in += i2, i2);
        }, Ie = (e2, t2) => {
          let r2, n2 = e2.max_chain_length, i2 = e2.strstart;
          var o2;
          let s2 = e2.prev_length, a2 = e2.nice_match;
          var u2 = e2.strstart > e2.w_size - he ? e2.strstart - (e2.w_size - he) : 0, c2 = e2.window, l2 = e2.w_mask, d2 = e2.prev, p2 = e2.strstart + pe;
          let h2 = c2[i2 + s2 - 1], f2 = c2[i2 + s2];
          e2.prev_length >= e2.good_match && (n2 >>= 2), a2 > e2.lookahead && (a2 = e2.lookahead);
          do {
            if (c2[(r2 = t2) + s2] === f2 && c2[r2 + s2 - 1] === h2 && c2[r2] === c2[i2] && c2[++r2] === c2[i2 + 1]) {
              for (i2 += 2, r2++; c2[++i2] === c2[++r2] && c2[++i2] === c2[++r2] && c2[++i2] === c2[++r2] && c2[++i2] === c2[++r2] && c2[++i2] === c2[++r2] && c2[++i2] === c2[++r2] && c2[++i2] === c2[++r2] && c2[++i2] === c2[++r2] && i2 < p2; )
                ;
              if (o2 = pe - (p2 - i2), i2 = p2 - pe, o2 > s2) {
                if (e2.match_start = t2, (s2 = o2) >= a2)
                  break;
                h2 = c2[i2 + s2 - 1], f2 = c2[i2 + s2];
              }
            }
          } while ((t2 = d2[t2 & l2]) > u2 && 0 != --n2);
          return s2 <= e2.lookahead ? s2 : e2.lookahead;
        }, Se = (e2) => {
          var t2 = e2.w_size;
          let r2, n2, i2, o2, s2;
          do {
            if (o2 = e2.window_size - e2.lookahead - e2.strstart, e2.strstart >= t2 + (t2 - he)) {
              for (e2.window.set(e2.window.subarray(t2, t2 + t2), 0), e2.match_start -= t2, e2.strstart -= t2, e2.block_start -= t2, n2 = e2.hash_size, r2 = n2; i2 = e2.head[--r2], e2.head[r2] = i2 >= t2 ? i2 - t2 : 0, --n2; )
                ;
              for (n2 = t2, r2 = n2; i2 = e2.prev[--r2], e2.prev[r2] = i2 >= t2 ? i2 - t2 : 0, --n2; )
                ;
              o2 += t2;
            }
            if (0 === e2.strm.avail_in)
              break;
            if (n2 = Ce(e2.strm, e2.window, e2.strstart + e2.lookahead, o2), e2.lookahead += n2, e2.lookahead + e2.insert >= 3)
              for (s2 = e2.strstart - e2.insert, e2.ins_h = e2.window[s2], e2.ins_h = be(e2, e2.ins_h, e2.window[s2 + 1]); e2.insert && (e2.ins_h = be(e2, e2.ins_h, e2.window[s2 + 3 - 1]), e2.prev[s2 & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = s2, s2++, e2.insert--, !(e2.lookahead + e2.insert < 3)); )
                ;
          } while (e2.lookahead < he && 0 !== e2.strm.avail_in);
        };
        r = (e2, t2) => {
          let r2, n2;
          for (; ; ) {
            if (e2.lookahead < he) {
              if (Se(e2), e2.lookahead < he && t2 === V)
                return 1;
              if (0 === e2.lookahead)
                break;
            }
            if (r2 = 0, e2.lookahead >= 3 && (e2.ins_h = be(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 !== r2 && e2.strstart - r2 <= e2.w_size - he && (e2.match_length = Ie(e2, r2)), e2.match_length >= 3)
              if (n2 = H(e2, e2.strstart - e2.match_start, e2.match_length - 3), e2.lookahead -= e2.match_length, e2.match_length <= e2.max_lazy_match && e2.lookahead >= 3) {
                for (e2.match_length--; e2.strstart++, e2.ins_h = be(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart, 0 != --e2.match_length; )
                  ;
                e2.strstart++;
              } else
                e2.strstart += e2.match_length, e2.match_length = 0, e2.ins_h = e2.window[e2.strstart], e2.ins_h = be(e2, e2.ins_h, e2.window[e2.strstart + 1]);
            else
              n2 = H(e2, 0, e2.window[e2.strstart]), e2.lookahead--, e2.strstart++;
            if (n2 && (ye(e2, false), 0 === e2.strm.avail_out))
              return 1;
          }
          return e2.insert = e2.strstart < 2 ? e2.strstart : 2, t2 === W ? (ye(e2, true), 0 === e2.strm.avail_out ? 3 : 4) : e2.last_lit && (ye(e2, false), 0 === e2.strm.avail_out) ? 1 : 2;
        };
        var De = (e2, t2) => {
          let r2, n2;
          for (var i2; ; ) {
            if (e2.lookahead < he) {
              if (Se(e2), e2.lookahead < he && t2 === V)
                return 1;
              if (0 === e2.lookahead)
                break;
            }
            if (r2 = 0, e2.lookahead >= 3 && (e2.ins_h = be(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), e2.prev_length = e2.match_length, e2.prev_match = e2.match_start, e2.match_length = 2, 0 !== r2 && e2.prev_length < e2.max_lazy_match && e2.strstart - r2 <= e2.w_size - he && (e2.match_length = Ie(e2, r2), e2.match_length <= 5 && (e2.strategy === oe || 3 === e2.match_length && 4096 < e2.strstart - e2.match_start) && (e2.match_length = 2)), e2.prev_length >= 3 && e2.match_length <= e2.prev_length) {
              for (i2 = e2.strstart + e2.lookahead - 3, n2 = H(e2, e2.strstart - 1 - e2.prev_match, e2.prev_length - 3), e2.lookahead -= e2.prev_length - 1, e2.prev_length -= 2; ++e2.strstart <= i2 && (e2.ins_h = be(e2, e2.ins_h, e2.window[e2.strstart + 3 - 1]), r2 = e2.prev[e2.strstart & e2.w_mask] = e2.head[e2.ins_h], e2.head[e2.ins_h] = e2.strstart), 0 != --e2.prev_length; )
                ;
              if (e2.match_available = 0, e2.match_length = 2, e2.strstart++, n2 && (ye(e2, false), 0 === e2.strm.avail_out))
                return 1;
            } else if (e2.match_available) {
              if ((n2 = H(e2, 0, e2.window[e2.strstart - 1])) && ye(e2, false), e2.strstart++, e2.lookahead--, 0 === e2.strm.avail_out)
                return 1;
            } else
              e2.match_available = 1, e2.strstart++, e2.lookahead--;
          }
          return e2.match_available && (n2 = H(e2, 0, e2.window[e2.strstart - 1]), e2.match_available = 0), e2.insert = e2.strstart < 2 ? e2.strstart : 2, t2 === W ? (ye(e2, true), 0 === e2.strm.avail_out ? 3 : 4) : e2.last_lit && (ye(e2, false), 0 === e2.strm.avail_out) ? 1 : 2;
        };
        function qe(e2, t2, r2, n2, i2) {
          this.good_length = e2, this.max_lazy = t2, this.nice_length = r2, this.max_chain = n2, this.func = i2;
        }
        const we = [new qe(0, 0, 0, 0, (e2, t2) => {
          let r2 = 65535;
          for (r2 > e2.pending_buf_size - 5 && (r2 = e2.pending_buf_size - 5); ; ) {
            if (e2.lookahead <= 1) {
              if (Se(e2), 0 === e2.lookahead && t2 === V)
                return 1;
              if (0 === e2.lookahead)
                break;
            }
            e2.strstart += e2.lookahead, e2.lookahead = 0;
            var n2 = e2.block_start + r2;
            if ((0 === e2.strstart || e2.strstart >= n2) && (e2.lookahead = e2.strstart - n2, e2.strstart = n2, ye(e2, false), 0 === e2.strm.avail_out))
              return 1;
            if (e2.strstart - e2.block_start >= e2.w_size - he && (ye(e2, false), 0 === e2.strm.avail_out))
              return 1;
          }
          return e2.insert = 0, t2 === W ? (ye(e2, true), 0 === e2.strm.avail_out ? 3 : 4) : (e2.strstart > e2.block_start && (ye(e2, false), e2.strm.avail_out), 1);
        }), new qe(4, 4, 8, 4, r), new qe(4, 5, 16, 8, r), new qe(4, 6, 32, 32, r), new qe(4, 4, 16, 16, De), new qe(8, 16, 32, 32, De), new qe(8, 16, 128, 128, De), new qe(8, 32, 128, 256, De), new qe(32, 128, 258, 1024, De), new qe(32, 258, 258, 4096, De)];
        function Ae() {
          this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = de, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), _e(this.dyn_ltree), _e(this.dyn_dtree), _e(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), _e(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), _e(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
        }
        const Re = (e2) => {
          if (!e2 || !e2.state)
            return ge(e2, te);
          e2.total_in = e2.total_out = 0, e2.data_type = le;
          const t2 = e2.state;
          return t2.pending = 0, t2.pending_out = 0, t2.wrap < 0 && (t2.wrap = -t2.wrap), t2.status = t2.wrap ? 42 : fe, e2.adler = 2 === t2.wrap ? 0 : 1, t2.last_flush = V, N(t2), $;
        }, xe = (e2) => {
          var t2 = Re(e2);
          return t2 === $ && ((e2 = e2.state).window_size = 2 * e2.w_size, _e(e2.head), e2.max_lazy_match = we[e2.level].max_lazy, e2.good_match = we[e2.level].good_length, e2.nice_match = we[e2.level].nice_length, e2.max_chain_length = we[e2.level].max_chain, e2.strstart = 0, e2.block_start = 0, e2.lookahead = 0, e2.insert = 0, e2.match_length = e2.prev_length = 2, e2.match_available = 0, e2.ins_h = 0), t2;
        }, Te = (e2, t2, r2, n2, i2, o2) => {
          if (!e2)
            return te;
          let s2 = 1;
          if (t2 === ie && (t2 = 6), n2 < 0 ? (s2 = 0, n2 = -n2) : 15 < n2 && (s2 = 2, n2 -= 16), i2 < 1 || i2 > 9 || r2 !== de || n2 < 8 || 15 < n2 || t2 < 0 || 9 < t2 || o2 < 0 || o2 > ue)
            return ge(e2, te);
          8 === n2 && (n2 = 9);
          const a2 = new Ae();
          return (e2.state = a2).strm = e2, a2.wrap = s2, a2.gzhead = null, a2.w_bits = n2, a2.w_size = 1 << a2.w_bits, a2.w_mask = a2.w_size - 1, a2.hash_bits = i2 + 7, a2.hash_size = 1 << a2.hash_bits, a2.hash_mask = a2.hash_size - 1, a2.hash_shift = ~~((a2.hash_bits + 3 - 1) / 3), a2.window = new Uint8Array(2 * a2.w_size), a2.head = new Uint16Array(a2.hash_size), a2.prev = new Uint16Array(a2.w_size), a2.lit_bufsize = 1 << i2 + 6, a2.pending_buf_size = 4 * a2.lit_bufsize, a2.pending_buf = new Uint8Array(a2.pending_buf_size), a2.d_buf = +a2.lit_bufsize, a2.l_buf = 3 * a2.lit_bufsize, a2.level = t2, a2.strategy = o2, a2.method = r2, xe(e2);
        };
        var Le = Te, Ge = (e2, t2) => e2 && e2.state && 2 === e2.state.wrap ? (e2.state.gzhead = t2, $) : te, Ee = (e2, t2) => {
          let r2, n2;
          if (!e2 || !e2.state || t2 > Y || t2 < 0)
            return e2 ? ge(e2, te) : te;
          const i2 = e2.state;
          if (!e2.output || !e2.input && 0 !== e2.avail_in || 666 === i2.status && t2 !== W)
            return ge(e2, 0 === e2.avail_out ? ne : te);
          i2.strm = e2;
          var o2 = i2.last_flush;
          if (i2.last_flush = t2, 42 === i2.status)
            if (2 === i2.wrap)
              e2.adler = 0, Me(i2, 31), Me(i2, 139), Me(i2, 8), i2.gzhead ? (Me(i2, (i2.gzhead.text ? 1 : 0) + (i2.gzhead.hcrc ? 2 : 0) + (i2.gzhead.extra ? 4 : 0) + (i2.gzhead.name ? 8 : 0) + (i2.gzhead.comment ? 16 : 0)), Me(i2, 255 & i2.gzhead.time), Me(i2, i2.gzhead.time >> 8 & 255), Me(i2, i2.gzhead.time >> 16 & 255), Me(i2, i2.gzhead.time >> 24 & 255), Me(i2, 9 === i2.level ? 2 : i2.strategy >= se || i2.level < 2 ? 4 : 0), Me(i2, 255 & i2.gzhead.os), i2.gzhead.extra && i2.gzhead.extra.length && (Me(i2, 255 & i2.gzhead.extra.length), Me(i2, i2.gzhead.extra.length >> 8 & 255)), i2.gzhead.hcrc && (e2.adler = F(e2.adler, i2.pending_buf, i2.pending, 0)), i2.gzindex = 0, i2.status = 69) : (Me(i2, 0), Me(i2, 0), Me(i2, 0), Me(i2, 0), Me(i2, 0), Me(i2, 9 === i2.level ? 2 : i2.strategy >= se || i2.level < 2 ? 4 : 0), Me(i2, 3), i2.status = fe);
            else {
              let t3 = de + (i2.w_bits - 8 << 4) << 8, r3 = -1;
              r3 = i2.strategy >= se || i2.level < 2 ? 0 : i2.level < 6 ? 1 : 6 === i2.level ? 2 : 3, t3 |= r3 << 6, 0 !== i2.strstart && (t3 |= 32), t3 += 31 - t3 % 31, i2.status = fe, ke(i2, t3), 0 !== i2.strstart && (ke(i2, e2.adler >>> 16), ke(i2, 65535 & e2.adler)), e2.adler = 1;
            }
          if (69 === i2.status)
            if (i2.gzhead.extra) {
              for (r2 = i2.pending; i2.gzindex < (65535 & i2.gzhead.extra.length) && (i2.pending !== i2.pending_buf_size || (i2.gzhead.hcrc && i2.pending > r2 && (e2.adler = F(e2.adler, i2.pending_buf, i2.pending - r2, r2)), ve(e2), r2 = i2.pending, i2.pending !== i2.pending_buf_size)); )
                Me(i2, 255 & i2.gzhead.extra[i2.gzindex]), i2.gzindex++;
              i2.gzhead.hcrc && i2.pending > r2 && (e2.adler = F(e2.adler, i2.pending_buf, i2.pending - r2, r2)), i2.gzindex === i2.gzhead.extra.length && (i2.gzindex = 0, i2.status = 73);
            } else
              i2.status = 73;
          if (73 === i2.status)
            if (i2.gzhead.name) {
              r2 = i2.pending;
              do {
                if (i2.pending === i2.pending_buf_size && (i2.gzhead.hcrc && i2.pending > r2 && (e2.adler = F(e2.adler, i2.pending_buf, i2.pending - r2, r2)), ve(e2), r2 = i2.pending, i2.pending === i2.pending_buf_size)) {
                  n2 = 1;
                  break;
                }
              } while (n2 = i2.gzindex < i2.gzhead.name.length ? 255 & i2.gzhead.name.charCodeAt(i2.gzindex++) : 0, Me(i2, n2), 0 !== n2);
              i2.gzhead.hcrc && i2.pending > r2 && (e2.adler = F(e2.adler, i2.pending_buf, i2.pending - r2, r2)), 0 === n2 && (i2.gzindex = 0, i2.status = 91);
            } else
              i2.status = 91;
          if (91 === i2.status)
            if (i2.gzhead.comment) {
              r2 = i2.pending;
              do {
                if (i2.pending === i2.pending_buf_size && (i2.gzhead.hcrc && i2.pending > r2 && (e2.adler = F(e2.adler, i2.pending_buf, i2.pending - r2, r2)), ve(e2), r2 = i2.pending, i2.pending === i2.pending_buf_size)) {
                  n2 = 1;
                  break;
                }
              } while (n2 = i2.gzindex < i2.gzhead.comment.length ? 255 & i2.gzhead.comment.charCodeAt(i2.gzindex++) : 0, Me(i2, n2), 0 !== n2);
              i2.gzhead.hcrc && i2.pending > r2 && (e2.adler = F(e2.adler, i2.pending_buf, i2.pending - r2, r2)), 0 === n2 && (i2.status = 103);
            } else
              i2.status = 103;
          if (103 === i2.status && (i2.gzhead.hcrc ? (i2.pending + 2 > i2.pending_buf_size && ve(e2), i2.pending + 2 <= i2.pending_buf_size && (Me(i2, 255 & e2.adler), Me(i2, e2.adler >> 8 & 255), e2.adler = 0, i2.status = fe)) : i2.status = fe), 0 !== i2.pending) {
            if (ve(e2), 0 === e2.avail_out)
              return i2.last_flush = -1, $;
          } else if (0 === e2.avail_in && me(t2) <= me(o2) && t2 !== W)
            return ge(e2, ne);
          if (666 === i2.status && 0 !== e2.avail_in)
            return ge(e2, ne);
          if (0 !== e2.avail_in || 0 !== i2.lookahead || t2 !== V && 666 !== i2.status) {
            if (3 !== (o2 = i2.strategy === se ? ((e3, t3) => {
              for (var r3; ; ) {
                if (0 === e3.lookahead && (Se(e3), 0 === e3.lookahead)) {
                  if (t3 === V)
                    return 1;
                  break;
                }
                if (e3.match_length = 0, r3 = H(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++, r3 && (ye(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = 0, t3 === W ? (ye(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (ye(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            })(i2, t2) : i2.strategy === ae ? ((e3, t3) => {
              let r3;
              var n3;
              let i3, o3;
              for (var s2 = e3.window; ; ) {
                if (e3.lookahead <= pe) {
                  if (Se(e3), e3.lookahead <= pe && t3 === V)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                if (e3.match_length = 0, e3.lookahead >= 3 && 0 < e3.strstart && (n3 = s2[i3 = e3.strstart - 1]) === s2[++i3] && n3 === s2[++i3] && n3 === s2[++i3]) {
                  for (o3 = e3.strstart + pe; n3 === s2[++i3] && n3 === s2[++i3] && n3 === s2[++i3] && n3 === s2[++i3] && n3 === s2[++i3] && n3 === s2[++i3] && n3 === s2[++i3] && n3 === s2[++i3] && i3 < o3; )
                    ;
                  e3.match_length = pe - (o3 - i3), e3.match_length > e3.lookahead && (e3.match_length = e3.lookahead);
                }
                if (e3.match_length >= 3 ? (r3 = H(e3, 1, e3.match_length - 3), e3.lookahead -= e3.match_length, e3.strstart += e3.match_length, e3.match_length = 0) : (r3 = H(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++), r3 && (ye(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = 0, t3 === W ? (ye(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (ye(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            })(i2, t2) : we[i2.level].func(i2, t2)) && 4 !== o2 || (i2.status = 666), 1 === o2 || 3 === o2)
              return 0 === e2.avail_out && (i2.last_flush = -1), $;
            if (2 === o2 && (t2 === Z ? Q(i2) : t2 !== Y && (K(i2, 0, 0, false), t2 === J && (_e(i2.head), 0 === i2.lookahead && (i2.strstart = 0, i2.block_start = 0, i2.insert = 0))), ve(e2), 0 === e2.avail_out))
              return i2.last_flush = -1, $;
          }
          return t2 !== W ? $ : i2.wrap <= 0 ? ee : (2 === i2.wrap ? (Me(i2, 255 & e2.adler), Me(i2, e2.adler >> 8 & 255), Me(i2, e2.adler >> 16 & 255), Me(i2, e2.adler >> 24 & 255), Me(i2, 255 & e2.total_in), Me(i2, e2.total_in >> 8 & 255), Me(i2, e2.total_in >> 16 & 255), Me(i2, e2.total_in >> 24 & 255)) : (ke(i2, e2.adler >>> 16), ke(i2, 65535 & e2.adler)), ve(e2), 0 < i2.wrap && (i2.wrap = -i2.wrap), 0 !== i2.pending ? $ : ee);
        }, Oe = (e2) => {
          if (!e2 || !e2.state)
            return te;
          var t2 = e2.state.status;
          return 42 !== t2 && 69 !== t2 && 73 !== t2 && 91 !== t2 && 103 !== t2 && t2 !== fe && 666 !== t2 ? ge(e2, te) : (e2.state = null, t2 === fe ? ge(e2, re) : $);
        }, Ue = (e2, t2) => {
          let r2 = t2.length;
          if (!e2 || !e2.state)
            return te;
          const n2 = e2.state;
          var i2 = n2.wrap;
          if (2 === i2 || 1 === i2 && 42 !== n2.status || n2.lookahead)
            return te;
          if (1 === i2 && (e2.adler = j(e2.adler, t2, r2, 0)), n2.wrap = 0, r2 >= n2.w_size) {
            0 === i2 && (_e(n2.head), n2.strstart = 0, n2.block_start = 0, n2.insert = 0);
            let e3 = new Uint8Array(n2.w_size);
            e3.set(t2.subarray(r2 - n2.w_size, r2), 0), t2 = e3, r2 = n2.w_size;
          }
          var o2 = e2.avail_in, s2 = e2.next_in, a2 = e2.input;
          for (e2.avail_in = r2, e2.next_in = 0, e2.input = t2, Se(n2); n2.lookahead >= 3; ) {
            let e3 = n2.strstart, t3 = n2.lookahead - 2;
            for (; n2.ins_h = be(n2, n2.ins_h, n2.window[e3 + 3 - 1]), n2.prev[e3 & n2.w_mask] = n2.head[n2.ins_h], n2.head[n2.ins_h] = e3, e3++, --t3; )
              ;
            n2.strstart = e3, n2.lookahead = 2, Se(n2);
          }
          return n2.strstart += n2.lookahead, n2.block_start = n2.strstart, n2.insert = n2.lookahead, n2.lookahead = 0, n2.match_length = n2.prev_length = 2, n2.match_available = 0, e2.next_in = s2, e2.input = a2, e2.avail_in = o2, n2.wrap = i2, $;
        };
        let Pe = true;
        try {
          String.fromCharCode.apply(null, new Uint8Array(1));
        } catch (t2) {
          Pe = false;
        }
        const je = new Uint8Array(256);
        for (let e2 = 0; e2 < 256; e2++)
          je[e2] = 252 <= e2 ? 6 : 248 <= e2 ? 5 : 240 <= e2 ? 4 : 224 <= e2 ? 3 : 192 <= e2 ? 2 : 1;
        je[254] = je[254] = 1;
        var Be = (e2) => {
          if ("function" == typeof TextEncoder && TextEncoder.prototype.encode)
            return new TextEncoder().encode(e2);
          let t2, r2, n2, i2, o2, s2 = e2.length, a2 = 0;
          for (i2 = 0; i2 < s2; i2++)
            55296 == (64512 & (r2 = e2.charCodeAt(i2))) && i2 + 1 < s2 && 56320 == (64512 & (n2 = e2.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), a2 += r2 < 128 ? 1 : r2 < 2048 ? 2 : r2 < 65536 ? 3 : 4;
          for (t2 = new Uint8Array(a2), o2 = 0, i2 = 0; o2 < a2; i2++)
            55296 == (64512 & (r2 = e2.charCodeAt(i2))) && i2 + 1 < s2 && 56320 == (64512 & (n2 = e2.charCodeAt(i2 + 1))) && (r2 = 65536 + (r2 - 55296 << 10) + (n2 - 56320), i2++), r2 < 128 ? t2[o2++] = r2 : (r2 < 2048 ? t2[o2++] = 192 | r2 >>> 6 : (r2 < 65536 ? t2[o2++] = 224 | r2 >>> 12 : (t2[o2++] = 240 | r2 >>> 18, t2[o2++] = 128 | r2 >>> 12 & 63), t2[o2++] = 128 | r2 >>> 6 & 63), t2[o2++] = 128 | 63 & r2);
          return t2;
        }, Fe = function() {
          this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
        };
        const ze = Object.prototype.toString, { Z_NO_FLUSH: Ne, Z_SYNC_FLUSH: Ke, Z_FULL_FLUSH: Xe, Z_FINISH: He, Z_OK: Qe, Z_STREAM_END: Ve, Z_DEFAULT_COMPRESSION: Ze, Z_DEFAULT_STRATEGY: Je, Z_DEFLATED: We } = t;
        function Ye(e2) {
          this.options = function(e3) {
            const t3 = Array.prototype.slice.call(arguments, 1);
            for (; t3.length; ) {
              var r3 = t3.shift();
              if (r3) {
                if ("object" != typeof r3)
                  throw new TypeError(r3 + "must be non-object");
                for (const t4 in r3)
                  n2 = r3, i2 = t4, Object.prototype.hasOwnProperty.call(n2, i2) && (e3[t4] = r3[t4]);
              }
            }
            var n2, i2;
            return e3;
          }({ level: Ze, method: We, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: Je }, e2 || {});
          let t2 = this.options, r2 = (t2.raw && 0 < t2.windowBits ? t2.windowBits = -t2.windowBits : t2.gzip && 0 < t2.windowBits && t2.windowBits < 16 && (t2.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new Fe(), this.strm.avail_out = 0, Le(this.strm, t2.level, t2.method, t2.windowBits, t2.memLevel, t2.strategy));
          if (r2 !== Qe)
            throw new Error(z[r2]);
          if (t2.header && Ge(this.strm, t2.header), t2.dictionary) {
            let e3;
            if (e3 = "string" == typeof t2.dictionary ? Be(t2.dictionary) : "[object ArrayBuffer]" === ze.call(t2.dictionary) ? new Uint8Array(t2.dictionary) : t2.dictionary, (r2 = Ue(this.strm, e3)) !== Qe)
              throw new Error(z[r2]);
            this._dict_set = true;
          }
        }
        function $e(e2, t2) {
          const r2 = new Ye(t2);
          if (r2.push(e2, true), r2.err)
            throw r2.msg || z[r2.err];
          return r2.result;
        }
        Ye.prototype.push = function(e2, t2) {
          const r2 = this.strm;
          var n2 = this.options.chunkSize;
          let i2, o2;
          if (this.ended)
            return false;
          for (o2 = t2 === ~~t2 ? t2 : true === t2 ? He : Ne, "string" == typeof e2 ? r2.input = Be(e2) : "[object ArrayBuffer]" === ze.call(e2) ? r2.input = new Uint8Array(e2) : r2.input = e2, r2.next_in = 0, r2.avail_in = r2.input.length; ; )
            if (0 === r2.avail_out && (r2.output = new Uint8Array(n2), r2.next_out = 0, r2.avail_out = n2), (o2 === Ke || o2 === Xe) && r2.avail_out <= 6)
              this.onData(r2.output.subarray(0, r2.next_out)), r2.avail_out = 0;
            else {
              if (Ee(r2, o2) === Ve)
                return 0 < r2.next_out && this.onData(r2.output.subarray(0, r2.next_out)), i2 = Oe(this.strm), this.onEnd(i2), this.ended = true, i2 === Qe;
              if (0 === r2.avail_out)
                this.onData(r2.output);
              else if (0 < o2 && 0 < r2.next_out)
                this.onData(r2.output.subarray(0, r2.next_out)), r2.avail_out = 0;
              else if (0 === r2.avail_in)
                break;
            }
          return true;
        }, Ye.prototype.onData = function(e2) {
          this.chunks.push(e2);
        }, Ye.prototype.onEnd = function(e2) {
          e2 === Qe && (this.result = ((e3) => {
            let t2 = 0;
            for (let r3 = 0, n3 = e3.length; r3 < n3; r3++)
              t2 += e3[r3].length;
            const r2 = new Uint8Array(t2);
            for (let t3 = 0, i2 = 0, o2 = e3.length; t3 < o2; t3++) {
              var n2 = e3[t3];
              r2.set(n2, i2), i2 += n2.length;
            }
            return r2;
          })(this.chunks)), this.chunks = [], this.err = e2, this.msg = this.strm.msg;
        }, r = { Deflate: Ye, deflate: $e, deflateRaw: function(e2, t2) {
          return (t2 = t2 || {}).raw = true, $e(e2, t2);
        }, gzip: function(e2, t2) {
          return (t2 = t2 || {}).gzip = true, $e(e2, t2);
        }, constants: t };
        new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]), new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]), new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]), new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]);
        const { Z_FINISH: et, Z_BLOCK: tt2, Z_TREES: rt, Z_OK: nt, Z_STREAM_END: it, Z_NEED_DICT: ot, Z_STREAM_ERROR: st, Z_DATA_ERROR: at, Z_MEM_ERROR: ut, Z_BUF_ERROR: ct, Z_DEFLATED: lt } = t;
        Object.prototype.toString;
        const {} = t;
        var dt = De = r.deflate;
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        }), i.prototype.removeTokens = function(e2, t2) {
          var r2 = this;
          return this.bucketSize ? e2 > this.bucketSize ? (setTimeout(t2.bind(null, "Requested tokens " + e2 + " exceeds bucket size " + this.bucketSize, null), 0), false) : (this.drip(), e2 > this.content ? n2() : this.parentBucket ? this.parentBucket.removeTokens(e2, function(i2, o) {
            return i2 ? t2(i2, null) : e2 > r2.content ? n2() : (r2.content -= e2, void t2(null, Math.min(o, r2.content)));
          }) : (this.content -= e2, setTimeout(t2.bind(null, null, this.content), 0), true)) : (setTimeout(t2.bind(null, null, e2, Number.POSITIVE_INFINITY), 0), true);
          function n2() {
            var n3 = Math.ceil((e2 - r2.content) * (r2.interval / r2.tokensPerInterval));
            return setTimeout(function() {
              r2.removeTokens(e2, t2);
            }, n3), false;
          }
        }, i.prototype.tryRemoveTokens = function(e2) {
          return !(this.bucketSize && (e2 > this.bucketSize || (this.drip(), e2 > this.content || this.parentBucket && !this.parentBucket.tryRemoveTokens(e2) || (this.content -= e2, 0))));
        }, i.prototype.drip = function() {
          var e2, t2;
          this.tokensPerInterval ? (t2 = +/* @__PURE__ */ new Date(), e2 = Math.max(t2 - this.lastDrip, 0), this.lastDrip = t2, t2 = e2 * (this.tokensPerInterval / this.interval), this.content = Math.min(this.content + t2, this.bucketSize)) : this.content = this.bucketSize;
        };
        var n = i;
        function i(e2, t2, r2, n2) {
          if (this.bucketSize = 1, this.tokensPerInterval = 1, this.interval = 1e3, this.parentBucket = null, this.content = 0, this.lastDrip = 0, this.bucketSize = e2, this.tokensPerInterval = t2, "string" == typeof r2)
            switch (r2) {
              case "sec":
              case "second":
                this.interval = 1e3;
                break;
              case "min":
              case "minute":
                this.interval = 6e4;
                break;
              case "hr":
              case "hour":
                this.interval = 36e5;
                break;
              case "day":
                this.interval = 864e5;
                break;
              default:
                throw new Error("Invaid interval " + r2);
            }
          else
            this.interval = r2;
          this.parentBucket = n2, this.content = 0, this.lastDrip = +/* @__PURE__ */ new Date();
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return i;
        });
        var n = r(4), i = (o.prototype.enqueue = function(e2) {
          this.queue.enqueue(e2), e2 = e2.value.length, this.pendingDataSize += e2, this.size++, n.a.totalAvailCache -= e2, this.enCallback && this.enCallback(this.byteLength, this.size, this.pendingDataSize);
        }, o.prototype.dequeue = function() {
          var e2 = this.queue.dequeue();
          return this.size--, this.deCallback && this.deCallback(), e2;
        }, o.prototype.readReportData = function(e2) {
          return e2 = this.readData(e2), this.reset(), { totalLen: e2.totalLen, reportDataArr: e2.resArr };
        }, o.prototype.readStoreData = function(e2) {
          return e2 = Math.ceil(this.pendingDataSize * e2), e2 = this.readData(e2), this.refresh(e2.totalLen), e2.resArr;
        }, o.prototype.readData = function(e2) {
          for (var t2 = [], r2 = 0; this.queue.size(); ) {
            var n2 = this.dequeue();
            if (n2 && (t2.push(n2), r2 += n2.value.length), e2 < r2)
              break;
          }
          return { totalLen: r2, resArr: t2 };
        }, o.prototype.decodeReportData = function(e2) {
          var t2 = this;
          e2.forEach(function(e3) {
            t2.enqueue(e3);
          });
        }, o.prototype.setListener = function(e2) {
          this.enCallback = e2.enCallback, this.deCallback = e2.deCallback;
        }, o.prototype.getPendingDataInfo = function() {
          return { pendingDataSize: this.pendingDataSize, size: this.size };
        }, o.prototype.refresh = function(e2) {
          this.pendingDataSize -= e2, n.a.totalAvailCache += e2;
        }, o.prototype.reset = function() {
          this.byteLength = 0;
        }, o.prototype.clear = function() {
          this.queue.clear();
        }, o);
        function o() {
          this.queue = new n.d(), this.byteLength = 0, this.size = 0, this.pendingDataSize = 0;
        }
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return u;
        });
        t = r(3);
        var n = r.n(t), i = r(91), o = r(1), s = r(0), a = function() {
          return (a = Object.assign || function(e2) {
            for (var t2, r2 = 1, n2 = arguments.length; r2 < n2; r2++)
              for (var i2 in t2 = arguments[r2])
                Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
            return e2;
          }).apply(this, arguments);
        }, u = (c.prototype.setLogConfig = function(e2) {
          this.logger.setLogLevel(e2.logLevel);
        }, c.prototype.setDB = function(e2) {
          this.logger.setDB(e2);
        }, c.prototype.init = function(e2, t2, r2) {
          this.config.appID = e2, this.config.userID = t2, this.config.deviceID = o.i, t2 = { version: this.config.version, appID: e2, deviceID: this.config.deviceID, userID: this.config.userID, userName: r2, origin: o.p ? "" : location.origin, device: o.j }, this.logger.setCommonField(/* @__PURE__ */ new Map([["userID", this.config.userID]])), this.logger.setHeaderInfo(JSON.stringify(t2));
        }, c.prototype.renewToken = function(e2) {
          this.config.token = e2;
        }, c.prototype.setUploadURL = function(e2) {
          this.config.uploadURL = e2;
        }, c.prototype.upload = function(e2, t2) {
          return this.config.uploadURL && this.config.token && this.config.userID ? this.isProd ? this.logger.upload(a({}, this.config), e2, t2) : Promise.resolve() : Promise.reject(Object(o.x)(s.t.NetworkModuleUserIsNotLogged));
        }, c.prototype.info = function(e2, t2, r2) {
          this.emitLog(e2, t2, "info", r2);
        }, c.prototype.warn = function(e2, t2, r2) {
          this.emitLog(e2, t2, "warn", r2);
        }, c.prototype.emitLog = function(e2, t2, r2, n2) {
          var i2;
          this.isProd ? (i2 = n2 && "object" == typeof n2 ? this.stringify(n2) : n2 || "", this.proxyLog ? this.proxyLog(i2, t2) : this.logger.write(e2, r2, t2, i2)) : (e2 = void 0, n2 && "object" == typeof n2 && (n2.cmd && (t2 += n2.cmd), n2.time instanceof Date && (e2 = n2.time, n2.time = "".concat(Date.now() - e2.getTime(), ",").concat(this.formatTime(e2)))), e2 = e2 || /* @__PURE__ */ new Date());
        }, c.prototype.formatTime = function(e2) {
          return e2.toLocaleTimeString("zh-CN") + "." + e2.getMilliseconds();
        }, c.prototype.stringify = function(e2) {
          e2.time instanceof Date && (t2 = e2.time, e2.time = Date.now() - t2.getTime() + "," + this.formatTime(t2));
          var t2, r2 = null;
          return JSON.stringify(e2, function(e3, t3) {
            if (t3 instanceof Uint8Array)
              return t3.length ? "b=" + t3.length : "";
            var i2;
            if (t3 instanceof Array && 2 < t3.length)
              return [i2 = t3.length, t3[0], t3[i2 - 1]];
            if (t3 && "object" == typeof t3 && t3.type && t3.message && (r2 = t3), "string" == typeof t3 && t3) {
              if (100 < t3.length)
                return "s=" + t3.length;
              if ("message" == e3 && r2 && r2.type)
                return r2 = null, "s=" + t3.length;
            }
            return t3 instanceof n.a ? t3.toString() : t3;
          }).replace(/\"(\w+)\":/g, "$1:").replace(/(https?:\/\/)|(wss?:\/\/)/g, "");
        }, c);
        function c(e2) {
          this.isProd = true, this.config = { product: "zim", appID: "", userID: "", token: "", uploadURL: "", deviceID: o.i, version: "" }, this.logger = new i.a("zim", o.p), this.config.version = e2;
        }
      }, function(e, t, r) {
        "use strict";
        var n = r(49);
        r.d(t, "a", function() {
          return n.a;
        });
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return n;
        }), i.getInstance = function() {
          return i.instance || (i.instance = new i()).init(), i.instance;
        }, i.prototype.init = function() {
        }, Object.defineProperty(i.prototype, "testEnvironment", { get: function() {
          return this._testEnvironment;
        }, set: function(e2) {
          this._testEnvironment = e2;
        }, enumerable: false, configurable: true }), Object.defineProperty(i.prototype, "ENV", { get: function() {
          return this._ENV;
        }, set: function(e2) {
          this._ENV = e2;
        }, enumerable: false, configurable: true }), i.instance = new i();
        var n = i;
        function i() {
          this._testEnvironment = true, this._ENV = 0;
        }
      }, function(e, t, r) {
        (function(t2, r2, n, i) {
          e.exports = function e2(t3, r3, n2) {
            function i2(s2, a) {
              if (!r3[s2]) {
                if (!t3[s2]) {
                  if (o)
                    return o(s2, true);
                  var u = new Error("Cannot find module '" + s2 + "'");
                  throw u.code = "MODULE_NOT_FOUND", u;
                }
                u = r3[s2] = { exports: {} }, t3[s2][0].call(u.exports, function(e3) {
                  return i2(t3[s2][1][e3] || e3);
                }, u, u.exports, e2, t3, r3, n2);
              }
              return r3[s2].exports;
            }
            for (var o = false, s = 0; s < n2.length; s++)
              i2(n2[s]);
            return i2;
          }({ 1: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./utils"), i2 = e2("./support"), o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
            r3.encode = function(e3) {
              for (var t4, r4, i3, s, a, u, c = [], l = 0, d = e3.length, p = "string" !== n2.getTypeOf(e3); l < e3.length; )
                u = d - l, i3 = p ? (t4 = e3[l++], r4 = l < d ? e3[l++] : 0, l < d ? e3[l++] : 0) : (t4 = e3.charCodeAt(l++), r4 = l < d ? e3.charCodeAt(l++) : 0, l < d ? e3.charCodeAt(l++) : 0), s = (3 & t4) << 4 | r4 >> 4, a = 1 < u ? (15 & r4) << 2 | i3 >> 6 : 64, u = 2 < u ? 63 & i3 : 64, c.push(o.charAt(t4 >> 2) + o.charAt(s) + o.charAt(a) + o.charAt(u));
              return c.join("");
            }, r3.decode = function(e3) {
              var t4, r4, n3, s, a, u = 0, c = 0;
              if ("data:" === e3.substr(0, "data:".length))
                throw new Error("Invalid base64 input, it looks like a data url.");
              var l, d = 3 * (e3 = e3.replace(/[^A-Za-z0-9\+\/\=]/g, "")).length / 4;
              if (e3.charAt(e3.length - 1) === o.charAt(64) && d--, e3.charAt(e3.length - 2) === o.charAt(64) && d--, d % 1 != 0)
                throw new Error("Invalid base64 input, bad content length.");
              for (l = new (i2.uint8array ? Uint8Array : Array)(0 | d); u < e3.length; )
                t4 = o.indexOf(e3.charAt(u++)) << 2 | (s = o.indexOf(e3.charAt(u++))) >> 4, r4 = (15 & s) << 4 | (s = o.indexOf(e3.charAt(u++))) >> 2, n3 = (3 & s) << 6 | (a = o.indexOf(e3.charAt(u++))), l[c++] = t4, 64 !== s && (l[c++] = r4), 64 !== a && (l[c++] = n3);
              return l;
            };
          }, { "./support": 30, "./utils": 32 }], 2: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./external"), i2 = e2("./stream/DataWorker"), o = e2("./stream/Crc32Probe"), s = e2("./stream/DataLengthProbe");
            function a(e3, t4, r4, n3, i3) {
              this.compressedSize = e3, this.uncompressedSize = t4, this.crc32 = r4, this.compression = n3, this.compressedContent = i3;
            }
            a.prototype = { getContentWorker: function() {
              var e3 = new i2(n2.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")), t4 = this;
              return e3.on("end", function() {
                if (this.streamInfo.data_length !== t4.uncompressedSize)
                  throw new Error("Bug : uncompressed data size mismatch");
              }), e3;
            }, getCompressedWorker: function() {
              return new i2(n2.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize", this.compressedSize).withStreamInfo("uncompressedSize", this.uncompressedSize).withStreamInfo("crc32", this.crc32).withStreamInfo("compression", this.compression);
            } }, a.createWorkerFrom = function(e3, t4, r4) {
              return e3.pipe(new o()).pipe(new s("uncompressedSize")).pipe(t4.compressWorker(r4)).pipe(new s("compressedSize")).withStreamInfo("compression", t4);
            }, t3.exports = a;
          }, { "./external": 6, "./stream/Crc32Probe": 25, "./stream/DataLengthProbe": 26, "./stream/DataWorker": 27 }], 3: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./stream/GenericWorker");
            r3.STORE = { magic: "\0\0", compressWorker: function(e3) {
              return new n2("STORE compression");
            }, uncompressWorker: function() {
              return new n2("STORE decompression");
            } }, r3.DEFLATE = e2("./flate");
          }, { "./flate": 7, "./stream/GenericWorker": 28 }], 4: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./utils"), i2 = function() {
              for (var e3 = [], t4 = 0; t4 < 256; t4++) {
                for (var r4 = t4, n3 = 0; n3 < 8; n3++)
                  r4 = 1 & r4 ? 3988292384 ^ r4 >>> 1 : r4 >>> 1;
                e3[t4] = r4;
              }
              return e3;
            }();
            t3.exports = function(e3, t4) {
              return void 0 !== e3 && e3.length ? ("string" !== n2.getTypeOf(e3) ? function(e4, t5, r4) {
                var n3 = i2, o = 0 + r4;
                e4 ^= -1;
                for (var s = 0; s < o; s++)
                  e4 = e4 >>> 8 ^ n3[255 & (e4 ^ t5[s])];
                return -1 ^ e4;
              } : function(e4, t5, r4) {
                var n3 = i2, o = 0 + r4;
                e4 ^= -1;
                for (var s = 0; s < o; s++)
                  e4 = e4 >>> 8 ^ n3[255 & (e4 ^ t5.charCodeAt(s))];
                return -1 ^ e4;
              })(0 | t4, e3, e3.length) : 0;
            };
          }, { "./utils": 32 }], 5: [function(e2, t3, r3) {
            "use strict";
            r3.base64 = false, r3.binary = false, r3.dir = false, r3.createFolders = true, r3.date = null, r3.compression = null, r3.compressionOptions = null, r3.comment = null, r3.unixPermissions = null, r3.dosPermissions = null;
          }, {}], 6: [function(e2, t3, r3) {
            "use strict";
            e2 = "undefined" != typeof Promise ? Promise : e2("lie"), t3.exports = { Promise: e2 };
          }, { lie: 37 }], 7: [function(e2, t3, r3) {
            "use strict";
            var n2 = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array, i2 = e2("pako"), o = e2("./utils"), s = e2("./stream/GenericWorker"), a = n2 ? "uint8array" : "array";
            function u(e3, t4) {
              s.call(this, "FlateWorker/" + e3), this._pako = null, this._pakoAction = e3, this._pakoOptions = t4, this.meta = {};
            }
            r3.magic = "\b\0", o.inherits(u, s), u.prototype.processChunk = function(e3) {
              this.meta = e3.meta, null === this._pako && this._createPako(), this._pako.push(o.transformTo(a, e3.data), false);
            }, u.prototype.flush = function() {
              s.prototype.flush.call(this), null === this._pako && this._createPako(), this._pako.push([], true);
            }, u.prototype.cleanUp = function() {
              s.prototype.cleanUp.call(this), this._pako = null;
            }, u.prototype._createPako = function() {
              this._pako = new i2[this._pakoAction]({ raw: true, level: this._pakoOptions.level || -1 });
              var e3 = this;
              this._pako.onData = function(t4) {
                e3.push({ data: t4, meta: e3.meta });
              };
            }, r3.compressWorker = function(e3) {
              return new u("Deflate", e3);
            }, r3.uncompressWorker = function() {
              return new u("Inflate", {});
            };
          }, { "./stream/GenericWorker": 28, "./utils": 32, pako: 38 }], 8: [function(e2, t3, r3) {
            "use strict";
            function n2(e3, t4) {
              for (var r4 = "", n3 = 0; n3 < t4; n3++)
                r4 += String.fromCharCode(255 & e3), e3 >>>= 8;
              return r4;
            }
            function i2(e3, t4, r4, i3, s2, l2) {
              var d = e3.file, p = e3.compression, h = l2 !== a.utf8encode, f = o.transformTo("string", l2(d.name)), g = o.transformTo("string", a.utf8encode(d.name)), m = d.comment, _ = (l2 = o.transformTo("string", l2(m)), o.transformTo("string", a.utf8encode(m))), b = g.length !== d.name.length, v = (m = _.length !== m.length, ""), y = d.dir, M = d.date, k = { crc32: 0, compressedSize: 0, uncompressedSize: 0 };
              t4 && !r4 || (k.crc32 = e3.crc32, k.compressedSize = e3.compressedSize, k.uncompressedSize = e3.uncompressedSize), r4 = 0, t4 && (r4 |= 8), h || !b && !m || (r4 |= 2048), e3 = 0, t4 = 0, y && (e3 |= 16), "UNIX" === s2 ? (t4 = 798, e3 |= (65535 & ((h = d.unixPermissions) ? h : y ? 16893 : 33204)) << 16) : (t4 = 20, e3 |= 63 & (d.dosPermissions || 0)), s2 = M.getUTCHours(), s2 = (s2 = ((s2 <<= 6) | M.getUTCMinutes()) << 5) | M.getUTCSeconds() / 2, h = M.getUTCFullYear() - 1980, h = (h = ((h <<= 4) | M.getUTCMonth() + 1) << 5) | M.getUTCDate(), b && (y = n2(1, 1) + n2(u(f), 4) + g, v += "up" + n2(y.length, 2) + y), m && (d = n2(1, 1) + n2(u(l2), 4) + _, v += "uc" + n2(d.length, 2) + d), M = "", M = (M = (M = (M = (M = (M = (M = (M = (M = (M += "\n\0") + n2(r4, 2)) + p.magic) + n2(s2, 2)) + n2(h, 2)) + n2(k.crc32, 4)) + n2(k.compressedSize, 4)) + n2(k.uncompressedSize, 4)) + n2(f.length, 2)) + n2(v.length, 2);
              return { fileRecord: c.LOCAL_FILE_HEADER + M + f + v, dirRecord: c.CENTRAL_FILE_HEADER + n2(t4, 2) + M + n2(l2.length, 2) + "\0\0\0\0" + n2(e3, 4) + n2(i3, 4) + f + v + l2 };
            }
            var o = e2("../utils"), s = e2("../stream/GenericWorker"), a = e2("../utf8"), u = e2("../crc32"), c = e2("../signature");
            function l(e3, t4, r4, n3) {
              s.call(this, "ZipFileWorker"), this.bytesWritten = 0, this.zipComment = t4, this.zipPlatform = r4, this.encodeFileName = n3, this.streamFiles = e3, this.accumulate = false, this.contentBuffer = [], this.dirRecords = [], this.currentSourceOffset = 0, this.entriesCount = 0, this.currentFile = null, this._sources = [];
            }
            o.inherits(l, s), l.prototype.push = function(e3) {
              var t4 = e3.meta.percent || 0, r4 = this.entriesCount, n3 = this._sources.length;
              this.accumulate ? this.contentBuffer.push(e3) : (this.bytesWritten += e3.data.length, s.prototype.push.call(this, { data: e3.data, meta: { currentFile: this.currentFile, percent: r4 ? (t4 + 100 * (r4 - n3 - 1)) / r4 : 100 } }));
            }, l.prototype.openedSource = function(e3) {
              this.currentSourceOffset = this.bytesWritten, this.currentFile = e3.file.name;
              var t4 = this.streamFiles && !e3.file.dir;
              t4 ? (e3 = i2(e3, t4, false, this.currentSourceOffset, this.zipPlatform, this.encodeFileName), this.push({ data: e3.fileRecord, meta: { percent: 0 } })) : this.accumulate = true;
            }, l.prototype.closedSource = function(e3) {
              this.accumulate = false;
              var t4 = this.streamFiles && !e3.file.dir, r4 = i2(e3, t4, true, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);
              if (this.dirRecords.push(r4.dirRecord), t4)
                this.push({ data: (t4 = e3, c.DATA_DESCRIPTOR + n2(t4.crc32, 4) + n2(t4.compressedSize, 4) + n2(t4.uncompressedSize, 4)), meta: { percent: 100 } });
              else
                for (this.push({ data: r4.fileRecord, meta: { percent: 0 } }); this.contentBuffer.length; )
                  this.push(this.contentBuffer.shift());
              this.currentFile = null;
            }, l.prototype.flush = function() {
              for (var e3 = this.bytesWritten, t4 = 0; t4 < this.dirRecords.length; t4++)
                this.push({ data: this.dirRecords[t4], meta: { percent: 100 } });
              var r4 = this.bytesWritten - e3;
              r4 = function(e4, t5, r5, i3, s2) {
                return s2 = o.transformTo("string", s2(i3)), c.CENTRAL_DIRECTORY_END + "\0\0\0\0" + n2(e4, 2) + n2(e4, 2) + n2(t5, 4) + n2(r5, 4) + n2(s2.length, 2) + s2;
              }(this.dirRecords.length, r4, e3, this.zipComment, this.encodeFileName);
              this.push({ data: r4, meta: { percent: 100 } });
            }, l.prototype.prepareNextSource = function() {
              this.previous = this._sources.shift(), this.openedSource(this.previous.streamInfo), this.isPaused ? this.previous.pause() : this.previous.resume();
            }, l.prototype.registerPrevious = function(e3) {
              this._sources.push(e3);
              var t4 = this;
              return e3.on("data", function(e4) {
                t4.processChunk(e4);
              }), e3.on("end", function() {
                t4.closedSource(t4.previous.streamInfo), t4._sources.length ? t4.prepareNextSource() : t4.end();
              }), e3.on("error", function(e4) {
                t4.error(e4);
              }), this;
            }, l.prototype.resume = function() {
              return !!s.prototype.resume.call(this) && (!this.previous && this._sources.length ? (this.prepareNextSource(), true) : this.previous || this._sources.length || this.generatedError ? void 0 : (this.end(), true));
            }, l.prototype.error = function(e3) {
              var t4 = this._sources;
              if (!s.prototype.error.call(this, e3))
                return false;
              for (var r4 = 0; r4 < t4.length; r4++)
                try {
                  t4[r4].error(e3);
                } catch (e4) {
                }
              return true;
            }, l.prototype.lock = function() {
              s.prototype.lock.call(this);
              for (var e3 = this._sources, t4 = 0; t4 < e3.length; t4++)
                e3[t4].lock();
            }, t3.exports = l;
          }, { "../crc32": 4, "../signature": 23, "../stream/GenericWorker": 28, "../utf8": 31, "../utils": 32 }], 9: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../compressions"), i2 = e2("./ZipFileWorker");
            r3.generateWorker = function(e3, t4, r4) {
              var o = new i2(t4.streamFiles, r4, t4.platform, t4.encodeFileName), s = 0;
              try {
                e3.forEach(function(e4, r5) {
                  s++;
                  var i3 = function(e5, t5) {
                    if (t5 = n2[e5 = e5 || t5])
                      return t5;
                    throw new Error(e5 + " is not a valid compression method !");
                  }(r5.options.compression, t4.compression), a = r5.options.compressionOptions || t4.compressionOptions || {}, u = r5.dir, c = r5.date;
                  r5._compressWorker(i3, a).withStreamInfo("file", { name: e4, dir: u, date: c, comment: r5.comment || "", unixPermissions: r5.unixPermissions, dosPermissions: r5.dosPermissions }).pipe(o);
                }), o.entriesCount = s;
              } catch (e4) {
                o.error(e4);
              }
              return o;
            };
          }, { "../compressions": 3, "./ZipFileWorker": 8 }], 10: [function(e2, t3, r3) {
            "use strict";
            function n2() {
              if (!(this instanceof n2))
                return new n2();
              if (arguments.length)
                throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");
              this.files = /* @__PURE__ */ Object.create(null), this.comment = null, this.root = "", this.clone = function() {
                var e3, t4 = new n2();
                for (e3 in this)
                  "function" != typeof this[e3] && (t4[e3] = this[e3]);
                return t4;
              };
            }
            (n2.prototype = e2("./object")).loadAsync = e2("./load"), n2.support = e2("./support"), n2.defaults = e2("./defaults"), n2.version = "3.10.0", n2.loadAsync = function(e3, t4) {
              return new n2().loadAsync(e3, t4);
            }, n2.external = e2("./external"), t3.exports = n2;
          }, { "./defaults": 5, "./external": 6, "./load": 11, "./object": 15, "./support": 30 }], 11: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./utils"), i2 = e2("./external"), o = e2("./utf8"), s = e2("./zipEntries"), a = e2("./stream/Crc32Probe"), u = e2("./nodejsUtils");
            t3.exports = function(e3, t4) {
              var r4 = this;
              return t4 = n2.extend(t4 || {}, { base64: false, checkCRC32: false, optimizedBinaryString: false, createFolders: false, decodeFileName: o.utf8decode }), u.isNode && u.isStream(e3) ? i2.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")) : n2.prepareContent("the loaded zip file", e3, true, t4.optimizedBinaryString, t4.base64).then(function(e4) {
                var r5 = new s(t4);
                return r5.load(e4), r5;
              }).then(function(e4) {
                var r5 = [i2.Promise.resolve(e4)], n3 = e4.files;
                if (t4.checkCRC32)
                  for (var o2 = 0; o2 < n3.length; o2++)
                    r5.push(function(e5) {
                      return new i2.Promise(function(t5, r6) {
                        var n4 = e5.decompressed.getContentWorker().pipe(new a());
                        n4.on("error", function(e6) {
                          r6(e6);
                        }).on("end", function() {
                          n4.streamInfo.crc32 !== e5.decompressed.crc32 ? r6(new Error("Corrupted zip : CRC32 mismatch")) : t5();
                        }).resume();
                      });
                    }(n3[o2]));
                return i2.Promise.all(r5);
              }).then(function(e4) {
                for (var i3 = (e4 = e4.shift()).files, o2 = 0; o2 < i3.length; o2++) {
                  var s2 = i3[o2], a2 = s2.fileNameStr, u2 = n2.resolve(s2.fileNameStr);
                  r4.file(u2, s2.decompressed, { binary: true, optimizedBinaryString: true, date: s2.date, dir: s2.dir, comment: s2.fileCommentStr.length ? s2.fileCommentStr : null, unixPermissions: s2.unixPermissions, dosPermissions: s2.dosPermissions, createFolders: t4.createFolders }), s2.dir || (r4.file(u2).unsafeOriginalName = a2);
                }
                return e4.zipComment.length && (r4.comment = e4.zipComment), r4;
              });
            };
          }, { "./external": 6, "./nodejsUtils": 14, "./stream/Crc32Probe": 25, "./utf8": 31, "./utils": 32, "./zipEntries": 33 }], 12: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), i2 = e2("../stream/GenericWorker");
            function o(e3, t4) {
              i2.call(this, "Nodejs stream input adapter for " + e3), this._upstreamEnded = false, this._bindStream(t4);
            }
            n2.inherits(o, i2), o.prototype._bindStream = function(e3) {
              var t4 = this;
              (this._stream = e3).pause(), e3.on("data", function(e4) {
                t4.push({ data: e4, meta: { percent: 0 } });
              }).on("error", function(e4) {
                t4.isPaused ? this.generatedError = e4 : t4.error(e4);
              }).on("end", function() {
                t4.isPaused ? t4._upstreamEnded = true : t4.end();
              });
            }, o.prototype.pause = function() {
              return !!i2.prototype.pause.call(this) && (this._stream.pause(), true);
            }, o.prototype.resume = function() {
              return !!i2.prototype.resume.call(this) && (this._upstreamEnded ? this.end() : this._stream.resume(), true);
            }, t3.exports = o;
          }, { "../stream/GenericWorker": 28, "../utils": 32 }], 13: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("readable-stream").Readable;
            function i2(e3, t4, r4) {
              n2.call(this, t4), this._helper = e3;
              var i3 = this;
              e3.on("data", function(e4, t5) {
                i3.push(e4) || i3._helper.pause(), r4 && r4(t5);
              }).on("error", function(e4) {
                i3.emit("error", e4);
              }).on("end", function() {
                i3.push(null);
              });
            }
            e2("../utils").inherits(i2, n2), i2.prototype._read = function() {
              this._helper.resume();
            }, t3.exports = i2;
          }, { "../utils": 32, "readable-stream": 16 }], 14: [function(e2, r3, n2) {
            "use strict";
            r3.exports = { isNode: void 0 !== t2, newBufferFrom: function(e3, r4) {
              if (t2.from && t2.from !== Uint8Array.from)
                return t2.from(e3, r4);
              if ("number" == typeof e3)
                throw new Error('The "data" argument must not be a number');
              return new t2(e3, r4);
            }, allocBuffer: function(e3) {
              return t2.alloc ? t2.alloc(e3) : ((e3 = new t2(e3)).fill(0), e3);
            }, isBuffer: function(e3) {
              return t2.isBuffer(e3);
            }, isStream: function(e3) {
              return e3 && "function" == typeof e3.on && "function" == typeof e3.pause && "function" == typeof e3.resume;
            } };
          }, {}], 15: [function(e2, t3, r3) {
            "use strict";
            function n2(e3, t4, r4) {
              var n3 = s.getTypeOf(t4), o2 = s.extend(r4 || {}, c), u2 = (o2.date = o2.date || /* @__PURE__ */ new Date(), null !== o2.compression && (o2.compression = o2.compression.toUpperCase()), "string" == typeof o2.unixPermissions && (o2.unixPermissions = parseInt(o2.unixPermissions, 8)), o2.unixPermissions && 16384 & o2.unixPermissions && (o2.dir = true), o2.dosPermissions && 16 & o2.dosPermissions && (o2.dir = true), o2.dir && (e3 = g(e3)), o2.createFolders && (u2 = function(e4) {
                var t5 = (e4 = "/" === e4.slice(-1) ? e4.substring(0, e4.length - 1) : e4).lastIndexOf("/");
                return 0 < t5 ? e4.substring(0, t5) : "";
              }(e3)) && i2.call(this, u2, true), "string" === n3 && false === o2.binary && false === o2.base64);
              r4 && void 0 !== r4.binary || (o2.binary = !u2), (t4 instanceof l && 0 === t4.uncompressedSize || o2.dir || !t4 || 0 === t4.length) && (o2.base64 = false, o2.binary = true, t4 = "", o2.compression = "STORE"), n3 = t4 instanceof l || t4 instanceof a ? t4 : h.isNode && h.isStream(t4) ? new f(e3, t4) : s.prepareContent(e3, t4, o2.binary, o2.optimizedBinaryString, o2.base64), r4 = new d(e3, n3, o2);
              this.files[e3] = r4;
            }
            function i2(e3, t4) {
              return t4 = void 0 !== t4 ? t4 : c.createFolders, e3 = g(e3), this.files[e3] || n2.call(this, e3, null, { dir: true, createFolders: t4 }), this.files[e3];
            }
            var o = e2("./utf8"), s = e2("./utils"), a = e2("./stream/GenericWorker"), u = e2("./stream/StreamHelper"), c = e2("./defaults"), l = e2("./compressedObject"), d = e2("./zipObject"), p = e2("./generate"), h = e2("./nodejsUtils"), f = e2("./nodejs/NodejsStreamInputAdapter"), g = function(e3) {
              return "/" !== e3.slice(-1) && (e3 += "/"), e3;
            };
            function m(e3) {
              return "[object RegExp]" === Object.prototype.toString.call(e3);
            }
            t3.exports = { load: function() {
              throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
            }, forEach: function(e3) {
              var t4, r4, n3;
              for (t4 in this.files)
                n3 = this.files[t4], (r4 = t4.slice(this.root.length, t4.length)) && t4.slice(0, this.root.length) === this.root && e3(r4, n3);
            }, filter: function(e3) {
              var t4 = [];
              return this.forEach(function(r4, n3) {
                e3(r4, n3) && t4.push(n3);
              }), t4;
            }, file: function(e3, t4, r4) {
              return 1 !== arguments.length ? (e3 = this.root + e3, n2.call(this, e3, t4, r4), this) : m(e3) ? (i3 = e3, this.filter(function(e4, t5) {
                return !t5.dir && i3.test(e4);
              })) : (t4 = this.files[this.root + e3]) && !t4.dir ? t4 : null;
              var i3;
            }, folder: function(e3) {
              if (!e3)
                return this;
              if (m(e3))
                return this.filter(function(t5, r5) {
                  return r5.dir && e3.test(t5);
                });
              var t4 = this.root + e3, r4 = (t4 = i2.call(this, t4), this.clone());
              return r4.root = t4.name, r4;
            }, remove: function(e3) {
              e3 = this.root + e3;
              var t4 = this.files[e3];
              if (t4 || ("/" !== e3.slice(-1) && (e3 += "/"), t4 = this.files[e3]), t4 && !t4.dir)
                delete this.files[e3];
              else
                for (var r4 = this.filter(function(t5, r5) {
                  return r5.name.slice(0, e3.length) === e3;
                }), n3 = 0; n3 < r4.length; n3++)
                  delete this.files[r4[n3].name];
              return this;
            }, generate: function(e3) {
              throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
            }, generateInternalStream: function(e3) {
              var t4 = {};
              try {
                if ((t4 = s.extend(e3 || {}, { streamFiles: false, compression: "STORE", compressionOptions: null, type: "", platform: "DOS", comment: null, mimeType: "application/zip", encodeFileName: o.utf8encode })).type = t4.type.toLowerCase(), t4.compression = t4.compression.toUpperCase(), "binarystring" === t4.type && (t4.type = "string"), !t4.type)
                  throw new Error("No output type specified.");
                s.checkSupport(t4.type), "darwin" !== t4.platform && "freebsd" !== t4.platform && "linux" !== t4.platform && "sunos" !== t4.platform || (t4.platform = "UNIX"), "win32" === t4.platform && (t4.platform = "DOS");
                var r4 = t4.comment || this.comment || "", n3 = p.generateWorker(this, t4, r4);
              } catch (e4) {
                (n3 = new a("error")).error(e4);
              }
              return new u(n3, t4.type || "string", t4.mimeType);
            }, generateAsync: function(e3, t4) {
              return this.generateInternalStream(e3).accumulate(t4);
            }, generateNodeStream: function(e3, t4) {
              return (e3 = e3 || {}).type || (e3.type = "nodebuffer"), this.generateInternalStream(e3).toNodejsStream(t4);
            } };
          }, { "./compressedObject": 2, "./defaults": 5, "./generate": 9, "./nodejs/NodejsStreamInputAdapter": 12, "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31, "./utils": 32, "./zipObject": 35 }], 16: [function(e2, t3, r3) {
            t3.exports = e2("stream");
          }, { stream: void 0 }], 17: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./DataReader");
            function i2(e3) {
              n2.call(this, e3);
              for (var t4 = 0; t4 < this.data.length; t4++)
                e3[t4] = 255 & e3[t4];
            }
            e2("../utils").inherits(i2, n2), i2.prototype.byteAt = function(e3) {
              return this.data[this.zero + e3];
            }, i2.prototype.lastIndexOfSignature = function(e3) {
              for (var t4 = e3.charCodeAt(0), r4 = e3.charCodeAt(1), n3 = e3.charCodeAt(2), i3 = e3.charCodeAt(3), o = this.length - 4; 0 <= o; --o)
                if (this.data[o] === t4 && this.data[o + 1] === r4 && this.data[o + 2] === n3 && this.data[o + 3] === i3)
                  return o - this.zero;
              return -1;
            }, i2.prototype.readAndCheckSignature = function(e3) {
              var t4 = e3.charCodeAt(0), r4 = e3.charCodeAt(1), n3 = e3.charCodeAt(2), i3 = (e3 = e3.charCodeAt(3), this.readData(4));
              return t4 === i3[0] && r4 === i3[1] && n3 === i3[2] && e3 === i3[3];
            }, i2.prototype.readData = function(e3) {
              if (this.checkOffset(e3), 0 === e3)
                return [];
              var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = i2;
          }, { "../utils": 32, "./DataReader": 18 }], 18: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils");
            function i2(e3) {
              this.data = e3, this.length = e3.length, this.index = 0, this.zero = 0;
            }
            i2.prototype = { checkOffset: function(e3) {
              this.checkIndex(this.index + e3);
            }, checkIndex: function(e3) {
              if (this.length < this.zero + e3 || e3 < 0)
                throw new Error("End of data reached (data length = " + this.length + ", asked index = " + e3 + "). Corrupted zip ?");
            }, setIndex: function(e3) {
              this.checkIndex(e3), this.index = e3;
            }, skip: function(e3) {
              this.setIndex(this.index + e3);
            }, byteAt: function(e3) {
            }, readInt: function(e3) {
              var t4, r4 = 0;
              for (this.checkOffset(e3), t4 = this.index + e3 - 1; t4 >= this.index; t4--)
                r4 = (r4 << 8) + this.byteAt(t4);
              return this.index += e3, r4;
            }, readString: function(e3) {
              return n2.transformTo("string", this.readData(e3));
            }, readData: function(e3) {
            }, lastIndexOfSignature: function(e3) {
            }, readAndCheckSignature: function(e3) {
            }, readDate: function() {
              var e3 = this.readInt(4);
              return new Date(Date.UTC(1980 + (e3 >> 25 & 127), (e3 >> 21 & 15) - 1, e3 >> 16 & 31, e3 >> 11 & 31, e3 >> 5 & 63, (31 & e3) << 1));
            } }, t3.exports = i2;
          }, { "../utils": 32 }], 19: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./Uint8ArrayReader");
            function i2(e3) {
              n2.call(this, e3);
            }
            e2("../utils").inherits(i2, n2), i2.prototype.readData = function(e3) {
              this.checkOffset(e3);
              var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = i2;
          }, { "../utils": 32, "./Uint8ArrayReader": 21 }], 20: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./DataReader");
            function i2(e3) {
              n2.call(this, e3);
            }
            e2("../utils").inherits(i2, n2), i2.prototype.byteAt = function(e3) {
              return this.data.charCodeAt(this.zero + e3);
            }, i2.prototype.lastIndexOfSignature = function(e3) {
              return this.data.lastIndexOf(e3) - this.zero;
            }, i2.prototype.readAndCheckSignature = function(e3) {
              return e3 === this.readData(4);
            }, i2.prototype.readData = function(e3) {
              this.checkOffset(e3);
              var t4 = this.data.slice(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = i2;
          }, { "../utils": 32, "./DataReader": 18 }], 21: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./ArrayReader");
            function i2(e3) {
              n2.call(this, e3);
            }
            e2("../utils").inherits(i2, n2), i2.prototype.readData = function(e3) {
              if (this.checkOffset(e3), 0 === e3)
                return new Uint8Array(0);
              var t4 = this.data.subarray(this.zero + this.index, this.zero + this.index + e3);
              return this.index += e3, t4;
            }, t3.exports = i2;
          }, { "../utils": 32, "./ArrayReader": 17 }], 22: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), i2 = e2("../support"), o = e2("./ArrayReader"), s = e2("./StringReader"), a = e2("./NodeBufferReader"), u = e2("./Uint8ArrayReader");
            t3.exports = function(e3) {
              var t4 = n2.getTypeOf(e3);
              return n2.checkSupport(t4), "string" !== t4 || i2.uint8array ? "nodebuffer" === t4 ? new a(e3) : i2.uint8array ? new u(n2.transformTo("uint8array", e3)) : new o(n2.transformTo("array", e3)) : new s(e3);
            };
          }, { "../support": 30, "../utils": 32, "./ArrayReader": 17, "./NodeBufferReader": 19, "./StringReader": 20, "./Uint8ArrayReader": 21 }], 23: [function(e2, t3, r3) {
            "use strict";
            r3.LOCAL_FILE_HEADER = "PK", r3.CENTRAL_FILE_HEADER = "PK", r3.CENTRAL_DIRECTORY_END = "PK", r3.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK\x07", r3.ZIP64_CENTRAL_DIRECTORY_END = "PK", r3.DATA_DESCRIPTOR = "PK\x07\b";
          }, {}], 24: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./GenericWorker"), i2 = e2("../utils");
            function o(e3) {
              n2.call(this, "ConvertWorker to " + e3), this.destType = e3;
            }
            i2.inherits(o, n2), o.prototype.processChunk = function(e3) {
              this.push({ data: i2.transformTo(this.destType, e3.data), meta: e3.meta });
            }, t3.exports = o;
          }, { "../utils": 32, "./GenericWorker": 28 }], 25: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./GenericWorker"), i2 = e2("../crc32");
            function o() {
              n2.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
            }
            e2("../utils").inherits(o, n2), o.prototype.processChunk = function(e3) {
              this.streamInfo.crc32 = i2(e3.data, this.streamInfo.crc32 || 0), this.push(e3);
            }, t3.exports = o;
          }, { "../crc32": 4, "../utils": 32, "./GenericWorker": 28 }], 26: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), i2 = e2("./GenericWorker");
            function o(e3) {
              i2.call(this, "DataLengthProbe for " + e3), this.propName = e3, this.withStreamInfo(e3, 0);
            }
            n2.inherits(o, i2), o.prototype.processChunk = function(e3) {
              var t4;
              e3 && (t4 = this.streamInfo[this.propName] || 0, this.streamInfo[this.propName] = t4 + e3.data.length), i2.prototype.processChunk.call(this, e3);
            }, t3.exports = o;
          }, { "../utils": 32, "./GenericWorker": 28 }], 27: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils"), i2 = e2("./GenericWorker");
            function o(e3) {
              i2.call(this, "DataWorker");
              var t4 = this;
              this.dataIsReady = false, this.index = 0, this.max = 0, this.data = null, this.type = "", this._tickScheduled = false, e3.then(function(e4) {
                t4.dataIsReady = true, t4.data = e4, t4.max = e4 && e4.length || 0, t4.type = n2.getTypeOf(e4), t4.isPaused || t4._tickAndRepeat();
              }, function(e4) {
                t4.error(e4);
              });
            }
            n2.inherits(o, i2), o.prototype.cleanUp = function() {
              i2.prototype.cleanUp.call(this), this.data = null;
            }, o.prototype.resume = function() {
              return !!i2.prototype.resume.call(this) && (!this._tickScheduled && this.dataIsReady && (this._tickScheduled = true, n2.delay(this._tickAndRepeat, [], this)), true);
            }, o.prototype._tickAndRepeat = function() {
              this._tickScheduled = false, this.isPaused || this.isFinished || (this._tick(), this.isFinished || (n2.delay(this._tickAndRepeat, [], this), this._tickScheduled = true));
            }, o.prototype._tick = function() {
              if (this.isPaused || this.isFinished)
                return false;
              var e3 = null, t4 = Math.min(this.max, this.index + 16384);
              if (this.index >= this.max)
                return this.end();
              switch (this.type) {
                case "string":
                  e3 = this.data.substring(this.index, t4);
                  break;
                case "uint8array":
                  e3 = this.data.subarray(this.index, t4);
                  break;
                case "array":
                case "nodebuffer":
                  e3 = this.data.slice(this.index, t4);
              }
              return this.index = t4, this.push({ data: e3, meta: { percent: this.max ? this.index / this.max * 100 : 0 } });
            }, t3.exports = o;
          }, { "../utils": 32, "./GenericWorker": 28 }], 28: [function(e2, t3, r3) {
            "use strict";
            function n2(e3) {
              this.name = e3 || "default", this.streamInfo = {}, this.generatedError = null, this.extraStreamInfo = {}, this.isPaused = true, this.isFinished = false, this.isLocked = false, this._listeners = { data: [], end: [], error: [] }, this.previous = null;
            }
            n2.prototype = { push: function(e3) {
              this.emit("data", e3);
            }, end: function() {
              if (this.isFinished)
                return false;
              this.flush();
              try {
                this.emit("end"), this.cleanUp(), this.isFinished = true;
              } catch (e3) {
                this.emit("error", e3);
              }
              return true;
            }, error: function(e3) {
              return !this.isFinished && (this.isPaused ? this.generatedError = e3 : (this.isFinished = true, this.emit("error", e3), this.previous && this.previous.error(e3), this.cleanUp()), true);
            }, on: function(e3, t4) {
              return this._listeners[e3].push(t4), this;
            }, cleanUp: function() {
              this.streamInfo = this.generatedError = this.extraStreamInfo = null, this._listeners = [];
            }, emit: function(e3, t4) {
              if (this._listeners[e3])
                for (var r4 = 0; r4 < this._listeners[e3].length; r4++)
                  this._listeners[e3][r4].call(this, t4);
            }, pipe: function(e3) {
              return e3.registerPrevious(this);
            }, registerPrevious: function(e3) {
              if (this.isLocked)
                throw new Error("The stream '" + this + "' has already been used.");
              this.streamInfo = e3.streamInfo, this.mergeStreamInfo(), this.previous = e3;
              var t4 = this;
              return e3.on("data", function(e4) {
                t4.processChunk(e4);
              }), e3.on("end", function() {
                t4.end();
              }), e3.on("error", function(e4) {
                t4.error(e4);
              }), this;
            }, pause: function() {
              return !this.isPaused && !this.isFinished && (this.isPaused = true, this.previous && this.previous.pause(), true);
            }, resume: function() {
              if (!this.isPaused || this.isFinished)
                return false;
              var e3 = this.isPaused = false;
              return this.generatedError && (this.error(this.generatedError), e3 = true), this.previous && this.previous.resume(), !e3;
            }, flush: function() {
            }, processChunk: function(e3) {
              this.push(e3);
            }, withStreamInfo: function(e3, t4) {
              return this.extraStreamInfo[e3] = t4, this.mergeStreamInfo(), this;
            }, mergeStreamInfo: function() {
              for (var e3 in this.extraStreamInfo)
                this.extraStreamInfo.hasOwnProperty(e3) && (this.streamInfo[e3] = this.extraStreamInfo[e3]);
            }, lock: function() {
              if (this.isLocked)
                throw new Error("The stream '" + this + "' has already been used.");
              this.isLocked = true, this.previous && this.previous.lock();
            }, toString: function() {
              var e3 = "Worker " + this.name;
              return this.previous ? this.previous + " -> " + e3 : e3;
            } }, t3.exports = n2;
          }, {}], 29: [function(e2, r3, n2) {
            "use strict";
            var i2 = e2("../utils"), o = e2("./ConvertWorker"), s = e2("./GenericWorker"), a = e2("../base64"), u = e2("../support"), c = e2("../external"), l = null;
            if (u.nodestream)
              try {
                l = e2("../nodejs/NodejsStreamOutputAdapter");
              } catch (e3) {
              }
            function d(e3, t3, r4) {
              var n3 = t3;
              switch (t3) {
                case "blob":
                case "arraybuffer":
                  n3 = "uint8array";
                  break;
                case "base64":
                  n3 = "string";
              }
              try {
                this._internalType = n3, this._outputType = t3, this._mimeType = r4, i2.checkSupport(n3), this._worker = e3.pipe(new o(n3)), e3.lock();
              } catch (e4) {
                this._worker = new s("error"), this._worker.error(e4);
              }
            }
            d.prototype = { accumulate: function(e3) {
              return r4 = this, n3 = e3, new c.Promise(function(e4, o2) {
                var s2 = [], u2 = r4._internalType, c2 = r4._outputType, l2 = r4._mimeType;
                r4.on("data", function(e5, t3) {
                  s2.push(e5), n3 && n3(t3);
                }).on("error", function(e5) {
                  s2 = [], o2(e5);
                }).on("end", function() {
                  try {
                    var r5 = function(e5, t3, r6) {
                      switch (e5) {
                        case "blob":
                          return i2.newBlob(i2.transformTo("arraybuffer", t3), r6);
                        case "base64":
                          return a.encode(t3);
                        default:
                          return i2.transformTo(e5, t3);
                      }
                    }(c2, function(e5, r6) {
                      for (var n4 = 0, i3 = null, o3 = 0, s3 = 0; s3 < r6.length; s3++)
                        o3 += r6[s3].length;
                      switch (e5) {
                        case "string":
                          return r6.join("");
                        case "array":
                          return Array.prototype.concat.apply([], r6);
                        case "uint8array":
                          for (i3 = new Uint8Array(o3), s3 = 0; s3 < r6.length; s3++)
                            i3.set(r6[s3], n4), n4 += r6[s3].length;
                          return i3;
                        case "nodebuffer":
                          return t2.concat(r6);
                        default:
                          throw new Error("concat : unsupported type '" + e5 + "'");
                      }
                    }(u2, s2), l2);
                    e4(r5);
                  } catch (r6) {
                    o2(r6);
                  }
                  s2 = [];
                }).resume();
              });
              var r4, n3;
            }, on: function(e3, t3) {
              var r4 = this;
              return "data" === e3 ? this._worker.on(e3, function(e4) {
                t3.call(r4, e4.data, e4.meta);
              }) : this._worker.on(e3, function() {
                i2.delay(t3, arguments, r4);
              }), this;
            }, resume: function() {
              return i2.delay(this._worker.resume, [], this._worker), this;
            }, pause: function() {
              return this._worker.pause(), this;
            }, toNodejsStream: function(e3) {
              if (i2.checkSupport("nodestream"), "nodebuffer" !== this._outputType)
                throw new Error(this._outputType + " is not supported by this method");
              return new l(this, { objectMode: "nodebuffer" !== this._outputType }, e3);
            } }, r3.exports = d;
          }, { "../base64": 1, "../external": 6, "../nodejs/NodejsStreamOutputAdapter": 13, "../support": 30, "../utils": 32, "./ConvertWorker": 24, "./GenericWorker": 28 }], 30: [function(e2, r3, n2) {
            "use strict";
            if (n2.base64 = true, n2.array = true, n2.string = true, n2.arraybuffer = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array, n2.nodebuffer = void 0 !== t2, n2.uint8array = "undefined" != typeof Uint8Array, "undefined" == typeof ArrayBuffer)
              n2.blob = false;
            else {
              var i2 = new ArrayBuffer(0);
              try {
                n2.blob = 0 === new Blob([i2], { type: "application/zip" }).size;
              } catch (e3) {
                try {
                  var o = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
                  o.append(i2), n2.blob = 0 === o.getBlob("application/zip").size;
                } catch (e4) {
                  n2.blob = false;
                }
              }
            }
            try {
              n2.nodestream = !!e2("readable-stream").Readable;
            } catch (e3) {
              n2.nodestream = false;
            }
          }, { "readable-stream": 16 }], 31: [function(e2, t3, r3) {
            "use strict";
            for (var n2 = e2("./utils"), i2 = e2("./support"), o = e2("./nodejsUtils"), s = e2("./stream/GenericWorker"), a = new Array(256), u = 0; u < 256; u++)
              a[u] = 252 <= u ? 6 : 248 <= u ? 5 : 240 <= u ? 4 : 224 <= u ? 3 : 192 <= u ? 2 : 1;
            function c() {
              s.call(this, "utf-8 decode"), this.leftOver = null;
            }
            function l() {
              s.call(this, "utf-8 encode");
            }
            a[254] = a[254] = 1, r3.utf8encode = function(e3) {
              if (i2.nodebuffer)
                return o.newBufferFrom(e3, "utf-8");
              for (var t4, r4, n3, s2, a2 = e3, u2 = a2.length, c2 = 0, l2 = 0; l2 < u2; l2++)
                55296 == (64512 & (r4 = a2.charCodeAt(l2))) && l2 + 1 < u2 && 56320 == (64512 & (n3 = a2.charCodeAt(l2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (n3 - 56320), l2++), c2 += r4 < 128 ? 1 : r4 < 2048 ? 2 : r4 < 65536 ? 3 : 4;
              for (t4 = new (i2.uint8array ? Uint8Array : Array)(c2), l2 = s2 = 0; s2 < c2; l2++)
                55296 == (64512 & (r4 = a2.charCodeAt(l2))) && l2 + 1 < u2 && 56320 == (64512 & (n3 = a2.charCodeAt(l2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (n3 - 56320), l2++), r4 < 128 ? t4[s2++] = r4 : (r4 < 2048 ? t4[s2++] = 192 | r4 >>> 6 : (r4 < 65536 ? t4[s2++] = 224 | r4 >>> 12 : (t4[s2++] = 240 | r4 >>> 18, t4[s2++] = 128 | r4 >>> 12 & 63), t4[s2++] = 128 | r4 >>> 6 & 63), t4[s2++] = 128 | 63 & r4);
              return t4;
            }, r3.utf8decode = function(e3) {
              if (i2.nodebuffer)
                return n2.transformTo("nodebuffer", e3).toString("utf-8");
              for (var t4, r4, o2, s2 = e3 = n2.transformTo(i2.uint8array ? "uint8array" : "array", e3), u2 = s2.length, c2 = new Array(2 * u2), l2 = t4 = 0; l2 < u2; )
                if ((r4 = s2[l2++]) < 128)
                  c2[t4++] = r4;
                else if (4 < (o2 = a[r4]))
                  c2[t4++] = 65533, l2 += o2 - 1;
                else {
                  for (r4 &= 2 === o2 ? 31 : 3 === o2 ? 15 : 7; 1 < o2 && l2 < u2; )
                    r4 = r4 << 6 | 63 & s2[l2++], o2--;
                  1 < o2 ? c2[t4++] = 65533 : r4 < 65536 ? c2[t4++] = r4 : (r4 -= 65536, c2[t4++] = 55296 | r4 >> 10 & 1023, c2[t4++] = 56320 | 1023 & r4);
                }
              return c2.length !== t4 && (c2.subarray ? c2 = c2.subarray(0, t4) : c2.length = t4), n2.applyFromCharCode(c2);
            }, n2.inherits(c, s), c.prototype.processChunk = function(e3) {
              var t4 = n2.transformTo(i2.uint8array ? "uint8array" : "array", e3.data), o2 = (this.leftOver && this.leftOver.length && (i2.uint8array ? (o2 = t4, (t4 = new Uint8Array(o2.length + this.leftOver.length)).set(this.leftOver, 0), t4.set(o2, this.leftOver.length)) : t4 = this.leftOver.concat(t4), this.leftOver = null), function(e4, t5) {
                for (var r4 = (t5 = (t5 = t5 || e4.length) > e4.length ? e4.length : t5) - 1; 0 <= r4 && 128 == (192 & e4[r4]); )
                  r4--;
                return !(r4 < 0) && 0 !== r4 && r4 + a[e4[r4]] > t5 ? r4 : t5;
              }(t4)), s2 = t4;
              o2 !== t4.length && (i2.uint8array ? (s2 = t4.subarray(0, o2), this.leftOver = t4.subarray(o2, t4.length)) : (s2 = t4.slice(0, o2), this.leftOver = t4.slice(o2, t4.length))), this.push({ data: r3.utf8decode(s2), meta: e3.meta });
            }, c.prototype.flush = function() {
              this.leftOver && this.leftOver.length && (this.push({ data: r3.utf8decode(this.leftOver), meta: {} }), this.leftOver = null);
            }, r3.Utf8DecodeWorker = c, n2.inherits(l, s), l.prototype.processChunk = function(e3) {
              this.push({ data: r3.utf8encode(e3.data), meta: e3.meta });
            }, r3.Utf8EncodeWorker = l;
          }, { "./nodejsUtils": 14, "./stream/GenericWorker": 28, "./support": 30, "./utils": 32 }], 32: [function(e2, t3, n2) {
            "use strict";
            var i2 = e2("./support"), o = e2("./base64"), s = e2("./nodejsUtils"), a = e2("./external");
            function u(e3) {
              return e3;
            }
            function c(e3, t4) {
              for (var r3 = 0; r3 < e3.length; ++r3)
                t4[r3] = 255 & e3.charCodeAt(r3);
              return t4;
            }
            e2("setimmediate"), n2.newBlob = function(e3, t4) {
              n2.checkSupport("blob");
              try {
                return new Blob([e3], { type: t4 });
              } catch (n3) {
                try {
                  var r3 = new (self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder)();
                  return r3.append(e3), r3.getBlob(t4);
                } catch (e4) {
                  throw new Error("Bug : can't construct the Blob.");
                }
              }
            };
            var l = { stringifyByChunk: function(e3, t4, r3) {
              var n3 = [], i3 = 0, o2 = e3.length;
              if (o2 <= r3)
                return String.fromCharCode.apply(null, e3);
              for (; i3 < o2; )
                "array" === t4 || "nodebuffer" === t4 ? n3.push(String.fromCharCode.apply(null, e3.slice(i3, Math.min(i3 + r3, o2)))) : n3.push(String.fromCharCode.apply(null, e3.subarray(i3, Math.min(i3 + r3, o2)))), i3 += r3;
              return n3.join("");
            }, stringifyByChar: function(e3) {
              for (var t4 = "", r3 = 0; r3 < e3.length; r3++)
                t4 += String.fromCharCode(e3[r3]);
              return t4;
            }, applyCanBeUsed: { uint8array: function() {
              try {
                return i2.uint8array && 1 === String.fromCharCode.apply(null, new Uint8Array(1)).length;
              } catch (e3) {
                return false;
              }
            }(), nodebuffer: function() {
              try {
                return i2.nodebuffer && 1 === String.fromCharCode.apply(null, s.allocBuffer(1)).length;
              } catch (e3) {
                return false;
              }
            }() } };
            function d(e3) {
              var t4 = 65536, r3 = n2.getTypeOf(e3), i3 = true;
              if ("uint8array" === r3 ? i3 = l.applyCanBeUsed.uint8array : "nodebuffer" === r3 && (i3 = l.applyCanBeUsed.nodebuffer), i3)
                for (; 1 < t4; )
                  try {
                    return l.stringifyByChunk(e3, r3, t4);
                  } catch (e4) {
                    t4 = Math.floor(t4 / 2);
                  }
              return l.stringifyByChar(e3);
            }
            function p(e3, t4) {
              for (var r3 = 0; r3 < e3.length; r3++)
                t4[r3] = e3[r3];
              return t4;
            }
            n2.applyFromCharCode = d;
            var h = {};
            h.string = { string: u, array: function(e3) {
              return c(e3, new Array(e3.length));
            }, arraybuffer: function(e3) {
              return h.string.uint8array(e3).buffer;
            }, uint8array: function(e3) {
              return c(e3, new Uint8Array(e3.length));
            }, nodebuffer: function(e3) {
              return c(e3, s.allocBuffer(e3.length));
            } }, h.array = { string: d, array: u, arraybuffer: function(e3) {
              return new Uint8Array(e3).buffer;
            }, uint8array: function(e3) {
              return new Uint8Array(e3);
            }, nodebuffer: function(e3) {
              return s.newBufferFrom(e3);
            } }, h.arraybuffer = { string: function(e3) {
              return d(new Uint8Array(e3));
            }, array: function(e3) {
              return p(new Uint8Array(e3), new Array(e3.byteLength));
            }, arraybuffer: u, uint8array: function(e3) {
              return new Uint8Array(e3);
            }, nodebuffer: function(e3) {
              return s.newBufferFrom(new Uint8Array(e3));
            } }, h.uint8array = { string: d, array: function(e3) {
              return p(e3, new Array(e3.length));
            }, arraybuffer: function(e3) {
              return e3.buffer;
            }, uint8array: u, nodebuffer: function(e3) {
              return s.newBufferFrom(e3);
            } }, h.nodebuffer = { string: d, array: function(e3) {
              return p(e3, new Array(e3.length));
            }, arraybuffer: function(e3) {
              return h.nodebuffer.uint8array(e3).buffer;
            }, uint8array: function(e3) {
              return p(e3, new Uint8Array(e3.length));
            }, nodebuffer: u }, n2.transformTo = function(e3, t4) {
              if (t4 = t4 || "", !e3)
                return t4;
              n2.checkSupport(e3);
              var r3 = n2.getTypeOf(t4);
              return h[r3][e3](t4);
            }, n2.resolve = function(e3) {
              for (var t4 = e3.split("/"), r3 = [], n3 = 0; n3 < t4.length; n3++) {
                var i3 = t4[n3];
                "." === i3 || "" === i3 && 0 !== n3 && n3 !== t4.length - 1 || (".." === i3 ? r3.pop() : r3.push(i3));
              }
              return r3.join("/");
            }, n2.getTypeOf = function(e3) {
              return "string" == typeof e3 ? "string" : "[object Array]" === Object.prototype.toString.call(e3) ? "array" : i2.nodebuffer && s.isBuffer(e3) ? "nodebuffer" : i2.uint8array && e3 instanceof Uint8Array ? "uint8array" : i2.arraybuffer && e3 instanceof ArrayBuffer ? "arraybuffer" : void 0;
            }, n2.checkSupport = function(e3) {
              if (!i2[e3.toLowerCase()])
                throw new Error(e3 + " is not supported by this platform");
            }, n2.MAX_VALUE_16BITS = 65535, n2.MAX_VALUE_32BITS = -1, n2.pretty = function(e3) {
              for (var t4, r3 = "", n3 = 0; n3 < (e3 || "").length; n3++)
                r3 += "\\x" + ((t4 = e3.charCodeAt(n3)) < 16 ? "0" : "") + t4.toString(16).toUpperCase();
              return r3;
            }, n2.delay = function(e3, t4, n3) {
              r2(function() {
                e3.apply(n3 || null, t4 || []);
              });
            }, n2.inherits = function(e3, t4) {
              function r3() {
              }
              r3.prototype = t4.prototype, e3.prototype = new r3();
            }, n2.extend = function() {
              for (var e3, t4 = {}, r3 = 0; r3 < arguments.length; r3++)
                for (e3 in arguments[r3])
                  arguments[r3].hasOwnProperty(e3) && void 0 === t4[e3] && (t4[e3] = arguments[r3][e3]);
              return t4;
            }, n2.prepareContent = function(e3, t4, r3, s2, u2) {
              return a.Promise.resolve(t4).then(function(e4) {
                return i2.blob && (e4 instanceof Blob || -1 !== ["[object File]", "[object Blob]"].indexOf(Object.prototype.toString.call(e4))) && "undefined" != typeof FileReader ? new a.Promise(function(t5, r4) {
                  var n3 = new FileReader();
                  n3.onload = function(e5) {
                    t5(e5.target.result);
                  }, n3.onerror = function(e5) {
                    r4(e5.target.error);
                  }, n3.readAsArrayBuffer(e4);
                }) : e4;
              }).then(function(t5) {
                var l2 = n2.getTypeOf(t5);
                return l2 ? ("arraybuffer" === l2 ? t5 = n2.transformTo("uint8array", t5) : "string" === l2 && (u2 ? t5 = o.decode(t5) : r3 && true !== s2 && (t5 = c(l2 = t5, new (i2.uint8array ? Uint8Array : Array)(l2.length)))), t5) : a.Promise.reject(new Error("Can't read the data of '" + e3 + "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));
              });
            };
          }, { "./base64": 1, "./external": 6, "./nodejsUtils": 14, "./support": 30, setimmediate: 54 }], 33: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./reader/readerFor"), i2 = e2("./utils"), o = e2("./signature"), s = e2("./zipEntry"), a = (e2("./utf8"), e2("./support"));
            function u(e3) {
              this.files = [], this.loadOptions = e3;
            }
            u.prototype = { checkSignature: function(e3) {
              var t4;
              if (!this.reader.readAndCheckSignature(e3))
                throw this.reader.index -= 4, t4 = this.reader.readString(4), new Error("Corrupted zip or bug: unexpected signature (" + i2.pretty(t4) + ", expected " + i2.pretty(e3) + ")");
            }, isSignature: function(e3, t4) {
              var r4 = this.reader.index;
              this.reader.setIndex(e3), e3 = this.reader.readString(4) === t4;
              return this.reader.setIndex(r4), e3;
            }, readBlockEndOfCentral: function() {
              this.diskNumber = this.reader.readInt(2), this.diskWithCentralDirStart = this.reader.readInt(2), this.centralDirRecordsOnThisDisk = this.reader.readInt(2), this.centralDirRecords = this.reader.readInt(2), this.centralDirSize = this.reader.readInt(4), this.centralDirOffset = this.reader.readInt(4), this.zipCommentLength = this.reader.readInt(2);
              var e3 = this.reader.readData(this.zipCommentLength), t4 = a.uint8array ? "uint8array" : "array";
              t4 = i2.transformTo(t4, e3);
              this.zipComment = this.loadOptions.decodeFileName(t4);
            }, readBlockZip64EndOfCentral: function() {
              this.zip64EndOfCentralSize = this.reader.readInt(8), this.reader.skip(4), this.diskNumber = this.reader.readInt(4), this.diskWithCentralDirStart = this.reader.readInt(4), this.centralDirRecordsOnThisDisk = this.reader.readInt(8), this.centralDirRecords = this.reader.readInt(8), this.centralDirSize = this.reader.readInt(8), this.centralDirOffset = this.reader.readInt(8), this.zip64ExtensibleData = {};
              for (var e3, t4, r4, n3 = this.zip64EndOfCentralSize - 44; 0 < n3; )
                e3 = this.reader.readInt(2), t4 = this.reader.readInt(4), r4 = this.reader.readData(t4), this.zip64ExtensibleData[e3] = { id: e3, length: t4, value: r4 };
            }, readBlockZip64EndOfCentralLocator: function() {
              if (this.diskWithZip64CentralDirStart = this.reader.readInt(4), this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8), this.disksCount = this.reader.readInt(4), 1 < this.disksCount)
                throw new Error("Multi-volumes zip are not supported");
            }, readLocalFiles: function() {
              for (var e3, t4 = 0; t4 < this.files.length; t4++)
                e3 = this.files[t4], this.reader.setIndex(e3.localHeaderOffset), this.checkSignature(o.LOCAL_FILE_HEADER), e3.readLocalPart(this.reader), e3.handleUTF8(), e3.processAttributes();
            }, readCentralDir: function() {
              var e3;
              for (this.reader.setIndex(this.centralDirOffset); this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER); )
                (e3 = new s({ zip64: this.zip64 }, this.loadOptions)).readCentralPart(this.reader), this.files.push(e3);
              if (this.centralDirRecords !== this.files.length && 0 !== this.centralDirRecords && 0 === this.files.length)
                throw new Error("Corrupted zip or bug: expected " + this.centralDirRecords + " records in central dir, got " + this.files.length);
            }, readEndOfCentral: function() {
              var e3 = this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);
              if (e3 < 0)
                throw this.isSignature(0, o.LOCAL_FILE_HEADER) ? new Error("Corrupted zip: can't find end of central directory") : new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");
              this.reader.setIndex(e3);
              var t4 = e3;
              if (this.checkSignature(o.CENTRAL_DIRECTORY_END), this.readBlockEndOfCentral(), this.diskNumber === i2.MAX_VALUE_16BITS || this.diskWithCentralDirStart === i2.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === i2.MAX_VALUE_16BITS || this.centralDirRecords === i2.MAX_VALUE_16BITS || this.centralDirSize === i2.MAX_VALUE_32BITS || this.centralDirOffset === i2.MAX_VALUE_32BITS) {
                if (this.zip64 = true, (e3 = this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR)) < 0)
                  throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");
                if (this.reader.setIndex(e3), this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR), this.readBlockZip64EndOfCentralLocator(), !this.isSignature(this.relativeOffsetEndOfZip64CentralDir, o.ZIP64_CENTRAL_DIRECTORY_END) && (this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END), this.relativeOffsetEndOfZip64CentralDir < 0))
                  throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");
                this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir), this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END), this.readBlockZip64EndOfCentral();
              }
              if (e3 = this.centralDirOffset + this.centralDirSize, 0 < (e3 = t4 - (e3 = this.zip64 ? e3 + 20 + (12 + this.zip64EndOfCentralSize) : e3)))
                this.isSignature(t4, o.CENTRAL_FILE_HEADER) || (this.reader.zero = e3);
              else if (e3 < 0)
                throw new Error("Corrupted zip: missing " + Math.abs(e3) + " bytes.");
            }, prepareReader: function(e3) {
              this.reader = n2(e3);
            }, load: function(e3) {
              this.prepareReader(e3), this.readEndOfCentral(), this.readCentralDir(), this.readLocalFiles();
            } }, t3.exports = u;
          }, { "./reader/readerFor": 22, "./signature": 23, "./support": 30, "./utf8": 31, "./utils": 32, "./zipEntry": 34 }], 34: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./reader/readerFor"), i2 = e2("./utils"), o = e2("./compressedObject"), s = e2("./crc32"), a = e2("./utf8"), u = e2("./compressions"), c = e2("./support");
            function l(e3, t4) {
              this.options = e3, this.loadOptions = t4;
            }
            l.prototype = { isEncrypted: function() {
              return 1 == (1 & this.bitFlag);
            }, useUTF8: function() {
              return 2048 == (2048 & this.bitFlag);
            }, readLocalPart: function(e3) {
              var t4;
              if (e3.skip(22), this.fileNameLength = e3.readInt(2), t4 = e3.readInt(2), this.fileName = e3.readData(this.fileNameLength), e3.skip(t4), -1 === this.compressedSize || -1 === this.uncompressedSize)
                throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");
              if (null === (t4 = function(e4) {
                for (var t5 in u)
                  if (u.hasOwnProperty(t5) && u[t5].magic === e4)
                    return u[t5];
                return null;
              }(this.compressionMethod)))
                throw new Error("Corrupted zip : compression " + i2.pretty(this.compressionMethod) + " unknown (inner file : " + i2.transformTo("string", this.fileName) + ")");
              this.decompressed = new o(this.compressedSize, this.uncompressedSize, this.crc32, t4, e3.readData(this.compressedSize));
            }, readCentralPart: function(e3) {
              this.versionMadeBy = e3.readInt(2), e3.skip(2), this.bitFlag = e3.readInt(2), this.compressionMethod = e3.readString(2), this.date = e3.readDate(), this.crc32 = e3.readInt(4), this.compressedSize = e3.readInt(4), this.uncompressedSize = e3.readInt(4);
              var t4 = e3.readInt(2);
              if (this.extraFieldsLength = e3.readInt(2), this.fileCommentLength = e3.readInt(2), this.diskNumberStart = e3.readInt(2), this.internalFileAttributes = e3.readInt(2), this.externalFileAttributes = e3.readInt(4), this.localHeaderOffset = e3.readInt(4), this.isEncrypted())
                throw new Error("Encrypted zip are not supported");
              e3.skip(t4), this.readExtraFields(e3), this.parseZIP64ExtraField(e3), this.fileComment = e3.readData(this.fileCommentLength);
            }, processAttributes: function() {
              this.unixPermissions = null, this.dosPermissions = null;
              var e3 = this.versionMadeBy >> 8;
              this.dir = !!(16 & this.externalFileAttributes), 0 == e3 && (this.dosPermissions = 63 & this.externalFileAttributes), 3 == e3 && (this.unixPermissions = this.externalFileAttributes >> 16 & 65535), this.dir || "/" !== this.fileNameStr.slice(-1) || (this.dir = true);
            }, parseZIP64ExtraField: function(e3) {
              var t4;
              this.extraFields[1] && (t4 = n2(this.extraFields[1].value), this.uncompressedSize === i2.MAX_VALUE_32BITS && (this.uncompressedSize = t4.readInt(8)), this.compressedSize === i2.MAX_VALUE_32BITS && (this.compressedSize = t4.readInt(8)), this.localHeaderOffset === i2.MAX_VALUE_32BITS && (this.localHeaderOffset = t4.readInt(8)), this.diskNumberStart === i2.MAX_VALUE_32BITS && (this.diskNumberStart = t4.readInt(4)));
            }, readExtraFields: function(e3) {
              var t4, r4, n3, i3 = e3.index + this.extraFieldsLength;
              for (this.extraFields || (this.extraFields = {}); e3.index + 4 < i3; )
                t4 = e3.readInt(2), r4 = e3.readInt(2), n3 = e3.readData(r4), this.extraFields[t4] = { id: t4, length: r4, value: n3 };
              e3.setIndex(i3);
            }, handleUTF8: function() {
              var e3, t4 = c.uint8array ? "uint8array" : "array";
              this.useUTF8() ? (this.fileNameStr = a.utf8decode(this.fileName), this.fileCommentStr = a.utf8decode(this.fileComment)) : (null !== (e3 = this.findExtraFieldUnicodePath()) ? this.fileNameStr = e3 : (e3 = i2.transformTo(t4, this.fileName), this.fileNameStr = this.loadOptions.decodeFileName(e3)), null !== (e3 = this.findExtraFieldUnicodeComment()) ? this.fileCommentStr = e3 : (e3 = i2.transformTo(t4, this.fileComment), this.fileCommentStr = this.loadOptions.decodeFileName(e3)));
            }, findExtraFieldUnicodePath: function() {
              var e3, t4 = this.extraFields[28789];
              return t4 && 1 === (e3 = n2(t4.value)).readInt(1) && s(this.fileName) === e3.readInt(4) ? a.utf8decode(e3.readData(t4.length - 5)) : null;
            }, findExtraFieldUnicodeComment: function() {
              var e3, t4 = this.extraFields[25461];
              return t4 && 1 === (e3 = n2(t4.value)).readInt(1) && s(this.fileComment) === e3.readInt(4) ? a.utf8decode(e3.readData(t4.length - 5)) : null;
            } }, t3.exports = l;
          }, { "./compressedObject": 2, "./compressions": 3, "./crc32": 4, "./reader/readerFor": 22, "./support": 30, "./utf8": 31, "./utils": 32 }], 35: [function(e2, t3, r3) {
            "use strict";
            function n2(e3, t4, r4) {
              this.name = e3, this.dir = r4.dir, this.date = r4.date, this.comment = r4.comment, this.unixPermissions = r4.unixPermissions, this.dosPermissions = r4.dosPermissions, this._data = t4, this._dataBinary = r4.binary, this.options = { compression: r4.compression, compressionOptions: r4.compressionOptions };
            }
            var i2 = e2("./stream/StreamHelper"), o = e2("./stream/DataWorker"), s = e2("./utf8"), a = e2("./compressedObject"), u = e2("./stream/GenericWorker");
            n2.prototype = { internalStream: function(e3) {
              var t4 = null, r4 = "string";
              try {
                if (!e3)
                  throw new Error("No output type specified.");
                var n3 = "string" === (r4 = e3.toLowerCase()) || "text" === r4, o2 = ("binarystring" !== r4 && "text" !== r4 || (r4 = "string"), t4 = this._decompressWorker(), !this._dataBinary);
                o2 && !n3 && (t4 = t4.pipe(new s.Utf8EncodeWorker())), !o2 && n3 && (t4 = t4.pipe(new s.Utf8DecodeWorker()));
              } catch (e4) {
                (t4 = new u("error")).error(e4);
              }
              return new i2(t4, r4, "");
            }, async: function(e3, t4) {
              return this.internalStream(e3).accumulate(t4);
            }, nodeStream: function(e3, t4) {
              return this.internalStream(e3 || "nodebuffer").toNodejsStream(t4);
            }, _compressWorker: function(e3, t4) {
              if (this._data instanceof a && this._data.compression.magic === e3.magic)
                return this._data.getCompressedWorker();
              var r4 = this._decompressWorker();
              return this._dataBinary || (r4 = r4.pipe(new s.Utf8EncodeWorker())), a.createWorkerFrom(r4, e3, t4);
            }, _decompressWorker: function() {
              return this._data instanceof a ? this._data.getContentWorker() : this._data instanceof u ? this._data : new o(this._data);
            } };
            for (var c = ["asText", "asBinary", "asNodeBuffer", "asUint8Array", "asArrayBuffer"], l = function() {
              throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.");
            }, d = 0; d < c.length; d++)
              n2.prototype[c[d]] = l;
            t3.exports = n2;
          }, { "./compressedObject": 2, "./stream/DataWorker": 27, "./stream/GenericWorker": 28, "./stream/StreamHelper": 29, "./utf8": 31 }], 36: [function(e2, t3, r3) {
            (function(e3) {
              "use strict";
              var r4, n2, i2, o, s = e3.MutationObserver || e3.WebKitMutationObserver, a = s ? (n2 = 0, s = new s(c), i2 = e3.document.createTextNode(""), s.observe(i2, { characterData: true }), function() {
                i2.data = n2 = ++n2 % 2;
              }) : e3.setImmediate || void 0 === e3.MessageChannel ? "document" in e3 && "onreadystatechange" in e3.document.createElement("script") ? function() {
                var t4 = e3.document.createElement("script");
                t4.onreadystatechange = function() {
                  c(), t4.onreadystatechange = null, t4.parentNode.removeChild(t4), t4 = null;
                }, e3.document.documentElement.appendChild(t4);
              } : function() {
                setTimeout(c, 0);
              } : ((o = new e3.MessageChannel()).port1.onmessage = c, function() {
                o.port2.postMessage(0);
              }), u = [];
              function c() {
                var e4, t4;
                r4 = true;
                for (var n3 = u.length; n3; ) {
                  for (t4 = u, u = [], e4 = -1; ++e4 < n3; )
                    t4[e4]();
                  n3 = u.length;
                }
                r4 = false;
              }
              t3.exports = function(e4) {
                1 !== u.push(e4) || r4 || a();
              };
            }).call(this, void 0 !== n ? n : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
          }, {}], 37: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("immediate");
            function i2() {
            }
            var o = {}, s = ["REJECTED"], a = ["FULFILLED"], u = ["PENDING"];
            function c(e3) {
              if ("function" != typeof e3)
                throw new TypeError("resolver must be a function");
              this.state = u, this.queue = [], this.outcome = void 0, e3 !== i2 && h(this, e3);
            }
            function l(e3, t4, r4) {
              this.promise = e3, "function" == typeof t4 && (this.onFulfilled = t4, this.callFulfilled = this.otherCallFulfilled), "function" == typeof r4 && (this.onRejected = r4, this.callRejected = this.otherCallRejected);
            }
            function d(e3, t4, r4) {
              n2(function() {
                var n3;
                try {
                  n3 = t4(r4);
                } catch (n4) {
                  return o.reject(e3, n4);
                }
                n3 === e3 ? o.reject(e3, new TypeError("Cannot resolve promise with itself")) : o.resolve(e3, n3);
              });
            }
            function p(e3) {
              var t4 = e3 && e3.then;
              if (e3 && ("object" == typeof e3 || "function" == typeof e3) && "function" == typeof t4)
                return function() {
                  t4.apply(e3, arguments);
                };
            }
            function h(e3, t4) {
              var r4 = false;
              function n3(t5) {
                r4 || (r4 = true, o.reject(e3, t5));
              }
              function i3(t5) {
                r4 || (r4 = true, o.resolve(e3, t5));
              }
              var s2 = f(function() {
                t4(i3, n3);
              });
              "error" === s2.status && n3(s2.value);
            }
            function f(e3, t4) {
              var r4 = {};
              try {
                r4.value = e3(t4), r4.status = "success";
              } catch (e4) {
                r4.status = "error", r4.value = e4;
              }
              return r4;
            }
            (t3.exports = c).prototype.finally = function(e3) {
              if ("function" != typeof e3)
                return this;
              var t4 = this.constructor;
              return this.then(function(r4) {
                return t4.resolve(e3()).then(function() {
                  return r4;
                });
              }, function(r4) {
                return t4.resolve(e3()).then(function() {
                  throw r4;
                });
              });
            }, c.prototype.catch = function(e3) {
              return this.then(null, e3);
            }, c.prototype.then = function(e3, t4) {
              if ("function" != typeof e3 && this.state === a || "function" != typeof t4 && this.state === s)
                return this;
              var r4 = new this.constructor(i2);
              return this.state !== u ? d(r4, this.state === a ? e3 : t4, this.outcome) : this.queue.push(new l(r4, e3, t4)), r4;
            }, l.prototype.callFulfilled = function(e3) {
              o.resolve(this.promise, e3);
            }, l.prototype.otherCallFulfilled = function(e3) {
              d(this.promise, this.onFulfilled, e3);
            }, l.prototype.callRejected = function(e3) {
              o.reject(this.promise, e3);
            }, l.prototype.otherCallRejected = function(e3) {
              d(this.promise, this.onRejected, e3);
            }, o.resolve = function(e3, t4) {
              var r4 = f(p, t4);
              if ("error" === r4.status)
                return o.reject(e3, r4.value);
              if (r4 = r4.value)
                h(e3, r4);
              else {
                e3.state = a, e3.outcome = t4;
                for (var n3 = -1, i3 = e3.queue.length; ++n3 < i3; )
                  e3.queue[n3].callFulfilled(t4);
              }
              return e3;
            }, o.reject = function(e3, t4) {
              e3.state = s, e3.outcome = t4;
              for (var r4 = -1, n3 = e3.queue.length; ++r4 < n3; )
                e3.queue[r4].callRejected(t4);
              return e3;
            }, c.resolve = function(e3) {
              return e3 instanceof this ? e3 : o.resolve(new this(i2), e3);
            }, c.reject = function(e3) {
              var t4 = new this(i2);
              return o.reject(t4, e3);
            }, c.all = function(e3) {
              var t4 = this;
              if ("[object Array]" !== Object.prototype.toString.call(e3))
                return this.reject(new TypeError("must be an array"));
              var r4 = e3.length, n3 = false;
              if (!r4)
                return this.resolve([]);
              for (var s2 = new Array(r4), a2 = 0, u2 = -1, c2 = new this(i2); ++u2 < r4; )
                !function(e4, i3) {
                  t4.resolve(e4).then(function(e5) {
                    s2[i3] = e5, ++a2 !== r4 || n3 || (n3 = true, o.resolve(c2, s2));
                  }, function(e5) {
                    n3 || (n3 = true, o.reject(c2, e5));
                  });
                }(e3[u2], u2);
              return c2;
            }, c.race = function(e3) {
              if ("[object Array]" !== Object.prototype.toString.call(e3))
                return this.reject(new TypeError("must be an array"));
              var t4 = e3.length, r4 = false;
              if (!t4)
                return this.resolve([]);
              for (var n3, s2 = -1, a2 = new this(i2); ++s2 < t4; )
                n3 = e3[s2], this.resolve(n3).then(function(e4) {
                  r4 || (r4 = true, o.resolve(a2, e4));
                }, function(e4) {
                  r4 || (r4 = true, o.reject(a2, e4));
                });
              return a2;
            };
          }, { immediate: 36 }], 38: [function(e2, t3, r3) {
            "use strict";
            var n2 = {};
            (0, e2("./lib/utils/common").assign)(n2, e2("./lib/deflate"), e2("./lib/inflate"), e2("./lib/zlib/constants")), t3.exports = n2;
          }, { "./lib/deflate": 39, "./lib/inflate": 40, "./lib/utils/common": 41, "./lib/zlib/constants": 44 }], 39: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./zlib/deflate"), i2 = e2("./utils/common"), o = e2("./utils/strings"), s = e2("./zlib/messages"), a = e2("./zlib/zstream"), u = Object.prototype.toString;
            function c(e3) {
              if (!(this instanceof c))
                return new c(e3);
              this.options = i2.assign({ level: -1, method: 8, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: 0, to: "" }, e3 || {});
              var t4 = ((e3 = this.options).raw && 0 < e3.windowBits ? e3.windowBits = -e3.windowBits : e3.gzip && 0 < e3.windowBits && e3.windowBits < 16 && (e3.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new a(), this.strm.avail_out = 0, n2.deflateInit2(this.strm, e3.level, e3.method, e3.windowBits, e3.memLevel, e3.strategy));
              if (0 !== t4)
                throw new Error(s[t4]);
              if (e3.header && n2.deflateSetHeader(this.strm, e3.header), e3.dictionary) {
                if (e3 = "string" == typeof e3.dictionary ? o.string2buf(e3.dictionary) : "[object ArrayBuffer]" === u.call(e3.dictionary) ? new Uint8Array(e3.dictionary) : e3.dictionary, 0 !== (t4 = n2.deflateSetDictionary(this.strm, e3)))
                  throw new Error(s[t4]);
                this._dict_set = true;
              }
            }
            function l(e3, t4) {
              if ((t4 = new c(t4)).push(e3, true), t4.err)
                throw t4.msg || s[t4.err];
              return t4.result;
            }
            c.prototype.push = function(e3, t4) {
              var r4, s2, a2 = this.strm, c2 = this.options.chunkSize;
              if (this.ended)
                return false;
              s2 = t4 === ~~t4 ? t4 : true === t4 ? 4 : 0, "string" == typeof e3 ? a2.input = o.string2buf(e3) : "[object ArrayBuffer]" === u.call(e3) ? a2.input = new Uint8Array(e3) : a2.input = e3, a2.next_in = 0, a2.avail_in = a2.input.length;
              do {
                if (0 === a2.avail_out && (a2.output = new i2.Buf8(c2), a2.next_out = 0, a2.avail_out = c2), 1 !== (r4 = n2.deflate(a2, s2)) && 0 !== r4)
                  return this.onEnd(r4), !(this.ended = true);
              } while (0 !== a2.avail_out && (0 !== a2.avail_in || 4 !== s2 && 2 !== s2) || ("string" === this.options.to ? this.onData(o.buf2binstring(i2.shrinkBuf(a2.output, a2.next_out))) : this.onData(i2.shrinkBuf(a2.output, a2.next_out))), (0 < a2.avail_in || 0 === a2.avail_out) && 1 !== r4);
              return 4 === s2 ? (r4 = n2.deflateEnd(this.strm), this.onEnd(r4), this.ended = true, 0 === r4) : 2 !== s2 || (this.onEnd(0), !(a2.avail_out = 0));
            }, c.prototype.onData = function(e3) {
              this.chunks.push(e3);
            }, c.prototype.onEnd = function(e3) {
              0 === e3 && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = i2.flattenChunks(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;
            }, r3.Deflate = c, r3.deflate = l, r3.deflateRaw = function(e3, t4) {
              return (t4 = t4 || {}).raw = true, l(e3, t4);
            }, r3.gzip = function(e3, t4) {
              return (t4 = t4 || {}).gzip = true, l(e3, t4);
            };
          }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/deflate": 46, "./zlib/messages": 51, "./zlib/zstream": 53 }], 40: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./zlib/inflate"), i2 = e2("./utils/common"), o = e2("./utils/strings"), s = e2("./zlib/constants"), a = e2("./zlib/messages"), u = e2("./zlib/zstream"), c = e2("./zlib/gzheader"), l = Object.prototype.toString;
            function d(e3) {
              if (!(this instanceof d))
                return new d(e3);
              this.options = i2.assign({ chunkSize: 16384, windowBits: 0, to: "" }, e3 || {});
              var t4 = this.options;
              if ((e3 = (t4.raw && 0 <= t4.windowBits && t4.windowBits < 16 && (t4.windowBits = -t4.windowBits, 0 === t4.windowBits && (t4.windowBits = -15)), !(0 <= t4.windowBits && t4.windowBits < 16) || e3 && e3.windowBits || (t4.windowBits += 32), 15 < t4.windowBits && t4.windowBits < 48 && 0 == (15 & t4.windowBits) && (t4.windowBits |= 15), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new u(), this.strm.avail_out = 0, n2.inflateInit2(this.strm, t4.windowBits))) !== s.Z_OK)
                throw new Error(a[e3]);
              this.header = new c(), n2.inflateGetHeader(this.strm, this.header);
            }
            function p(e3, t4) {
              if ((t4 = new d(t4)).push(e3, true), t4.err)
                throw t4.msg || a[t4.err];
              return t4.result;
            }
            d.prototype.push = function(e3, t4) {
              var r4, a2, u2, c2, d2, p2 = this.strm, h = this.options.chunkSize, f = this.options.dictionary, g = false;
              if (this.ended)
                return false;
              a2 = t4 === ~~t4 ? t4 : true === t4 ? s.Z_FINISH : s.Z_NO_FLUSH, "string" == typeof e3 ? p2.input = o.binstring2buf(e3) : "[object ArrayBuffer]" === l.call(e3) ? p2.input = new Uint8Array(e3) : p2.input = e3, p2.next_in = 0, p2.avail_in = p2.input.length;
              do {
                if (0 === p2.avail_out && (p2.output = new i2.Buf8(h), p2.next_out = 0, p2.avail_out = h), (r4 = n2.inflate(p2, s.Z_NO_FLUSH)) === s.Z_NEED_DICT && f && (d2 = "string" == typeof f ? o.string2buf(f) : "[object ArrayBuffer]" === l.call(f) ? new Uint8Array(f) : f, r4 = n2.inflateSetDictionary(this.strm, d2)), r4 === s.Z_BUF_ERROR && true === g && (r4 = s.Z_OK, g = false), r4 !== s.Z_STREAM_END && r4 !== s.Z_OK)
                  return this.onEnd(r4), !(this.ended = true);
              } while (!p2.next_out || 0 !== p2.avail_out && r4 !== s.Z_STREAM_END && (0 !== p2.avail_in || a2 !== s.Z_FINISH && a2 !== s.Z_SYNC_FLUSH) || ("string" === this.options.to ? (d2 = o.utf8border(p2.output, p2.next_out), u2 = p2.next_out - d2, c2 = o.buf2string(p2.output, d2), p2.next_out = u2, p2.avail_out = h - u2, u2 && i2.arraySet(p2.output, p2.output, d2, u2, 0), this.onData(c2)) : this.onData(i2.shrinkBuf(p2.output, p2.next_out))), 0 === p2.avail_in && 0 === p2.avail_out && (g = true), (0 < p2.avail_in || 0 === p2.avail_out) && r4 !== s.Z_STREAM_END);
              return (a2 = r4 === s.Z_STREAM_END ? s.Z_FINISH : a2) === s.Z_FINISH ? (r4 = n2.inflateEnd(this.strm), this.onEnd(r4), this.ended = true, r4 === s.Z_OK) : a2 !== s.Z_SYNC_FLUSH || (this.onEnd(s.Z_OK), !(p2.avail_out = 0));
            }, d.prototype.onData = function(e3) {
              this.chunks.push(e3);
            }, d.prototype.onEnd = function(e3) {
              e3 === s.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = i2.flattenChunks(this.chunks)), this.chunks = [], this.err = e3, this.msg = this.strm.msg;
            }, r3.Inflate = d, r3.inflate = p, r3.inflateRaw = function(e3, t4) {
              return (t4 = t4 || {}).raw = true, p(e3, t4);
            }, r3.ungzip = p;
          }, { "./utils/common": 41, "./utils/strings": 42, "./zlib/constants": 44, "./zlib/gzheader": 47, "./zlib/inflate": 49, "./zlib/messages": 51, "./zlib/zstream": 53 }], 41: [function(e2, t3, r3) {
            "use strict";
            var n2 = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array, i2 = (r3.assign = function(e3) {
              for (var t4 = Array.prototype.slice.call(arguments, 1); t4.length; ) {
                var r4 = t4.shift();
                if (r4) {
                  if ("object" != typeof r4)
                    throw new TypeError(r4 + "must be non-object");
                  for (var n3 in r4)
                    r4.hasOwnProperty(n3) && (e3[n3] = r4[n3]);
                }
              }
              return e3;
            }, r3.shrinkBuf = function(e3, t4) {
              return e3.length === t4 ? e3 : e3.subarray ? e3.subarray(0, t4) : (e3.length = t4, e3);
            }, { arraySet: function(e3, t4, r4, n3, i3) {
              if (t4.subarray && e3.subarray)
                e3.set(t4.subarray(r4, r4 + n3), i3);
              else
                for (var o2 = 0; o2 < n3; o2++)
                  e3[i3 + o2] = t4[r4 + o2];
            }, flattenChunks: function(e3) {
              for (var t4, r4, n3, i3, o2 = t4 = 0, s = e3.length; o2 < s; o2++)
                t4 += e3[o2].length;
              for (i3 = new Uint8Array(t4), o2 = r4 = 0, s = e3.length; o2 < s; o2++)
                n3 = e3[o2], i3.set(n3, r4), r4 += n3.length;
              return i3;
            } }), o = { arraySet: function(e3, t4, r4, n3, i3) {
              for (var o2 = 0; o2 < n3; o2++)
                e3[i3 + o2] = t4[r4 + o2];
            }, flattenChunks: function(e3) {
              return [].concat.apply([], e3);
            } };
            r3.setTyped = function(e3) {
              e3 ? (r3.Buf8 = Uint8Array, r3.Buf16 = Uint16Array, r3.Buf32 = Int32Array, r3.assign(r3, i2)) : (r3.Buf8 = Array, r3.Buf16 = Array, r3.Buf32 = Array, r3.assign(r3, o));
            }, r3.setTyped(n2);
          }, {}], 42: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("./common"), i2 = true, o = true;
            try {
              String.fromCharCode.apply(null, [0]);
            } catch (e3) {
              i2 = false;
            }
            try {
              String.fromCharCode.apply(null, new Uint8Array(1));
            } catch (e3) {
              o = false;
            }
            for (var s = new n2.Buf8(256), a = 0; a < 256; a++)
              s[a] = 252 <= a ? 6 : 248 <= a ? 5 : 240 <= a ? 4 : 224 <= a ? 3 : 192 <= a ? 2 : 1;
            function u(e3, t4) {
              if (t4 < 65537 && (e3.subarray && o || !e3.subarray && i2))
                return String.fromCharCode.apply(null, n2.shrinkBuf(e3, t4));
              for (var r4 = "", s2 = 0; s2 < t4; s2++)
                r4 += String.fromCharCode(e3[s2]);
              return r4;
            }
            s[254] = s[254] = 1, r3.string2buf = function(e3) {
              for (var t4, r4, i3, o2, s2 = e3.length, a2 = 0, u2 = 0; u2 < s2; u2++)
                55296 == (64512 & (r4 = e3.charCodeAt(u2))) && u2 + 1 < s2 && 56320 == (64512 & (i3 = e3.charCodeAt(u2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (i3 - 56320), u2++), a2 += r4 < 128 ? 1 : r4 < 2048 ? 2 : r4 < 65536 ? 3 : 4;
              for (t4 = new n2.Buf8(a2), u2 = o2 = 0; o2 < a2; u2++)
                55296 == (64512 & (r4 = e3.charCodeAt(u2))) && u2 + 1 < s2 && 56320 == (64512 & (i3 = e3.charCodeAt(u2 + 1))) && (r4 = 65536 + (r4 - 55296 << 10) + (i3 - 56320), u2++), r4 < 128 ? t4[o2++] = r4 : (r4 < 2048 ? t4[o2++] = 192 | r4 >>> 6 : (r4 < 65536 ? t4[o2++] = 224 | r4 >>> 12 : (t4[o2++] = 240 | r4 >>> 18, t4[o2++] = 128 | r4 >>> 12 & 63), t4[o2++] = 128 | r4 >>> 6 & 63), t4[o2++] = 128 | 63 & r4);
              return t4;
            }, r3.buf2binstring = function(e3) {
              return u(e3, e3.length);
            }, r3.binstring2buf = function(e3) {
              for (var t4 = new n2.Buf8(e3.length), r4 = 0, i3 = t4.length; r4 < i3; r4++)
                t4[r4] = e3.charCodeAt(r4);
              return t4;
            }, r3.buf2string = function(e3, t4) {
              for (var r4, n3, i3, o2 = t4 || e3.length, a2 = new Array(2 * o2), c = r4 = 0; c < o2; )
                if ((n3 = e3[c++]) < 128)
                  a2[r4++] = n3;
                else if (4 < (i3 = s[n3]))
                  a2[r4++] = 65533, c += i3 - 1;
                else {
                  for (n3 &= 2 === i3 ? 31 : 3 === i3 ? 15 : 7; 1 < i3 && c < o2; )
                    n3 = n3 << 6 | 63 & e3[c++], i3--;
                  1 < i3 ? a2[r4++] = 65533 : n3 < 65536 ? a2[r4++] = n3 : (n3 -= 65536, a2[r4++] = 55296 | n3 >> 10 & 1023, a2[r4++] = 56320 | 1023 & n3);
                }
              return u(a2, r4);
            }, r3.utf8border = function(e3, t4) {
              for (var r4 = (t4 = (t4 = t4 || e3.length) > e3.length ? e3.length : t4) - 1; 0 <= r4 && 128 == (192 & e3[r4]); )
                r4--;
              return !(r4 < 0) && 0 !== r4 && r4 + s[e3[r4]] > t4 ? r4 : t4;
            };
          }, { "./common": 41 }], 43: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function(e3, t4, r4, n2) {
              for (var i2 = 65535 & e3 | 0, o = e3 >>> 16 & 65535 | 0, s = 0; 0 !== r4; ) {
                for (r4 -= s = 2e3 < r4 ? 2e3 : r4; o = o + (i2 = i2 + t4[n2++] | 0) | 0, --s; )
                  ;
                i2 %= 65521, o %= 65521;
              }
              return i2 | o << 16 | 0;
            };
          }, {}], 44: [function(e2, t3, r3) {
            "use strict";
            t3.exports = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
          }, {}], 45: [function(e2, t3, r3) {
            "use strict";
            var n2 = function() {
              for (var e3 = [], t4 = 0; t4 < 256; t4++) {
                for (var r4 = t4, n3 = 0; n3 < 8; n3++)
                  r4 = 1 & r4 ? 3988292384 ^ r4 >>> 1 : r4 >>> 1;
                e3[t4] = r4;
              }
              return e3;
            }();
            t3.exports = function(e3, t4, r4, i2) {
              var o = n2, s = i2 + r4;
              e3 ^= -1;
              for (var a = i2; a < s; a++)
                e3 = e3 >>> 8 ^ o[255 & (e3 ^ t4[a])];
              return -1 ^ e3;
            };
          }, {}], 46: [function(e2, t3, r3) {
            "use strict";
            var n2, i2 = e2("../utils/common"), o = e2("./trees"), s = e2("./adler32"), a = e2("./crc32"), u = e2("./messages"), c = -2, l = 258, d = 262, p = 113;
            function h(e3, t4) {
              return e3.msg = u[t4], t4;
            }
            function f(e3) {
              return (e3 << 1) - (4 < e3 ? 9 : 0);
            }
            function g(e3) {
              for (var t4 = e3.length; 0 <= --t4; )
                e3[t4] = 0;
            }
            function m(e3) {
              var t4 = e3.state, r4 = t4.pending;
              0 !== (r4 = r4 > e3.avail_out ? e3.avail_out : r4) && (i2.arraySet(e3.output, t4.pending_buf, t4.pending_out, r4, e3.next_out), e3.next_out += r4, t4.pending_out += r4, e3.total_out += r4, e3.avail_out -= r4, t4.pending -= r4, 0 === t4.pending && (t4.pending_out = 0));
            }
            function _(e3, t4) {
              o._tr_flush_block(e3, 0 <= e3.block_start ? e3.block_start : -1, e3.strstart - e3.block_start, t4), e3.block_start = e3.strstart, m(e3.strm);
            }
            function b(e3, t4) {
              e3.pending_buf[e3.pending++] = t4;
            }
            function v(e3, t4) {
              e3.pending_buf[e3.pending++] = t4 >>> 8 & 255, e3.pending_buf[e3.pending++] = 255 & t4;
            }
            function y(e3, t4) {
              var r4, n3, i3 = e3.max_chain_length, o2 = e3.strstart, s2 = e3.prev_length, a2 = e3.nice_match, u2 = e3.strstart > e3.w_size - d ? e3.strstart - (e3.w_size - d) : 0, c2 = e3.window, p2 = e3.w_mask, h2 = e3.prev, f2 = e3.strstart + l, g2 = c2[o2 + s2 - 1], m2 = c2[o2 + s2];
              e3.prev_length >= e3.good_match && (i3 >>= 2), a2 > e3.lookahead && (a2 = e3.lookahead);
              do {
                if (c2[(r4 = t4) + s2] === m2 && c2[r4 + s2 - 1] === g2 && c2[r4] === c2[o2] && c2[++r4] === c2[o2 + 1]) {
                  for (o2 += 2, r4++; c2[++o2] === c2[++r4] && c2[++o2] === c2[++r4] && c2[++o2] === c2[++r4] && c2[++o2] === c2[++r4] && c2[++o2] === c2[++r4] && c2[++o2] === c2[++r4] && c2[++o2] === c2[++r4] && c2[++o2] === c2[++r4] && o2 < f2; )
                    ;
                  if (n3 = l - (f2 - o2), o2 = f2 - l, s2 < n3) {
                    if (e3.match_start = t4, a2 <= (s2 = n3))
                      break;
                    g2 = c2[o2 + s2 - 1], m2 = c2[o2 + s2];
                  }
                }
              } while ((t4 = h2[t4 & p2]) > u2 && 0 != --i3);
              return s2 <= e3.lookahead ? s2 : e3.lookahead;
            }
            function M(e3) {
              var t4, r4, n3, o2, u2, c2, l2, p2, h2, f2 = e3.w_size;
              do {
                if (p2 = e3.window_size - e3.lookahead - e3.strstart, e3.strstart >= f2 + (f2 - d)) {
                  for (i2.arraySet(e3.window, e3.window, f2, f2, 0), e3.match_start -= f2, e3.strstart -= f2, e3.block_start -= f2, t4 = r4 = e3.hash_size; n3 = e3.head[--t4], e3.head[t4] = f2 <= n3 ? n3 - f2 : 0, --r4; )
                    ;
                  for (t4 = r4 = f2; n3 = e3.prev[--t4], e3.prev[t4] = f2 <= n3 ? n3 - f2 : 0, --r4; )
                    ;
                  p2 += f2;
                }
                if (0 === e3.strm.avail_in)
                  break;
                if (u2 = e3.strm, c2 = e3.window, l2 = e3.strstart + e3.lookahead, h2 = void 0, r4 = 0 === (h2 = (p2 = p2) < (h2 = u2.avail_in) ? p2 : h2) ? 0 : (u2.avail_in -= h2, i2.arraySet(c2, u2.input, u2.next_in, h2, l2), 1 === u2.state.wrap ? u2.adler = s(u2.adler, c2, h2, l2) : 2 === u2.state.wrap && (u2.adler = a(u2.adler, c2, h2, l2)), u2.next_in += h2, u2.total_in += h2, h2), e3.lookahead += r4, e3.lookahead + e3.insert >= 3)
                  for (o2 = e3.strstart - e3.insert, e3.ins_h = e3.window[o2], e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[o2 + 1]) & e3.hash_mask; e3.insert && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[o2 + 3 - 1]) & e3.hash_mask, e3.prev[o2 & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = o2, o2++, e3.insert--, !(e3.lookahead + e3.insert < 3)); )
                    ;
              } while (e3.lookahead < d && 0 !== e3.strm.avail_in);
            }
            function k(e3, t4) {
              for (var r4, n3; ; ) {
                if (e3.lookahead < d) {
                  if (M(e3), e3.lookahead < d && 0 === t4)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                if (r4 = 0, e3.lookahead >= 3 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), 0 !== r4 && e3.strstart - r4 <= e3.w_size - d && (e3.match_length = y(e3, r4)), e3.match_length >= 3)
                  if (n3 = o._tr_tally(e3, e3.strstart - e3.match_start, e3.match_length - 3), e3.lookahead -= e3.match_length, e3.match_length <= e3.max_lazy_match && e3.lookahead >= 3) {
                    for (e3.match_length--; e3.strstart++, e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart, 0 != --e3.match_length; )
                      ;
                    e3.strstart++;
                  } else
                    e3.strstart += e3.match_length, e3.match_length = 0, e3.ins_h = e3.window[e3.strstart], e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 1]) & e3.hash_mask;
                else
                  n3 = o._tr_tally(e3, 0, e3.window[e3.strstart]), e3.lookahead--, e3.strstart++;
                if (n3 && (_(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = e3.strstart < 2 ? e3.strstart : 2, 4 === t4 ? (_(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (_(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            }
            function C(e3, t4) {
              for (var r4, n3, i3; ; ) {
                if (e3.lookahead < d) {
                  if (M(e3), e3.lookahead < d && 0 === t4)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                if (r4 = 0, e3.lookahead >= 3 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), e3.prev_length = e3.match_length, e3.prev_match = e3.match_start, e3.match_length = 2, 0 !== r4 && e3.prev_length < e3.max_lazy_match && e3.strstart - r4 <= e3.w_size - d && (e3.match_length = y(e3, r4), e3.match_length <= 5 && (1 === e3.strategy || 3 === e3.match_length && 4096 < e3.strstart - e3.match_start) && (e3.match_length = 2)), e3.prev_length >= 3 && e3.match_length <= e3.prev_length) {
                  for (i3 = e3.strstart + e3.lookahead - 3, n3 = o._tr_tally(e3, e3.strstart - 1 - e3.prev_match, e3.prev_length - 3), e3.lookahead -= e3.prev_length - 1, e3.prev_length -= 2; ++e3.strstart <= i3 && (e3.ins_h = (e3.ins_h << e3.hash_shift ^ e3.window[e3.strstart + 3 - 1]) & e3.hash_mask, r4 = e3.prev[e3.strstart & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = e3.strstart), 0 != --e3.prev_length; )
                    ;
                  if (e3.match_available = 0, e3.match_length = 2, e3.strstart++, n3 && (_(e3, false), 0 === e3.strm.avail_out))
                    return 1;
                } else if (e3.match_available) {
                  if ((n3 = o._tr_tally(e3, 0, e3.window[e3.strstart - 1])) && _(e3, false), e3.strstart++, e3.lookahead--, 0 === e3.strm.avail_out)
                    return 1;
                } else
                  e3.match_available = 1, e3.strstart++, e3.lookahead--;
              }
              return e3.match_available && (n3 = o._tr_tally(e3, 0, e3.window[e3.strstart - 1]), e3.match_available = 0), e3.insert = e3.strstart < 2 ? e3.strstart : 2, 4 === t4 ? (_(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : e3.last_lit && (_(e3, false), 0 === e3.strm.avail_out) ? 1 : 2;
            }
            function I(e3, t4, r4, n3, i3) {
              this.good_length = e3, this.max_lazy = t4, this.nice_length = r4, this.max_chain = n3, this.func = i3;
            }
            function S() {
              this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = 8, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new i2.Buf16(1146), this.dyn_dtree = new i2.Buf16(122), this.bl_tree = new i2.Buf16(78), g(this.dyn_ltree), g(this.dyn_dtree), g(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new i2.Buf16(16), this.heap = new i2.Buf16(573), g(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new i2.Buf16(573), g(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
            }
            function D(e3) {
              var t4;
              return e3 && e3.state ? (e3.total_in = e3.total_out = 0, e3.data_type = 2, (t4 = e3.state).pending = 0, t4.pending_out = 0, t4.wrap < 0 && (t4.wrap = -t4.wrap), t4.status = t4.wrap ? 42 : p, e3.adler = 2 === t4.wrap ? 0 : 1, t4.last_flush = 0, o._tr_init(t4), 0) : h(e3, c);
            }
            function q(e3) {
              var t4 = D(e3);
              return 0 === t4 && ((e3 = e3.state).window_size = 2 * e3.w_size, g(e3.head), e3.max_lazy_match = n2[e3.level].max_lazy, e3.good_match = n2[e3.level].good_length, e3.nice_match = n2[e3.level].nice_length, e3.max_chain_length = n2[e3.level].max_chain, e3.strstart = 0, e3.block_start = 0, e3.lookahead = 0, e3.insert = 0, e3.match_length = e3.prev_length = 2, e3.match_available = 0, e3.ins_h = 0), t4;
            }
            function w(e3, t4, r4, n3, o2, s2) {
              if (!e3)
                return c;
              var a2 = 1;
              if (-1 === t4 && (t4 = 6), n3 < 0 ? (a2 = 0, n3 = -n3) : 15 < n3 && (a2 = 2, n3 -= 16), o2 < 1 || 9 < o2 || 8 !== r4 || n3 < 8 || 15 < n3 || t4 < 0 || 9 < t4 || s2 < 0 || 4 < s2)
                return h(e3, c);
              8 === n3 && (n3 = 9);
              var u2 = new S();
              return (e3.state = u2).strm = e3, u2.wrap = a2, u2.gzhead = null, u2.w_bits = n3, u2.w_size = 1 << u2.w_bits, u2.w_mask = u2.w_size - 1, u2.hash_bits = o2 + 7, u2.hash_size = 1 << u2.hash_bits, u2.hash_mask = u2.hash_size - 1, u2.hash_shift = ~~((u2.hash_bits + 3 - 1) / 3), u2.window = new i2.Buf8(2 * u2.w_size), u2.head = new i2.Buf16(u2.hash_size), u2.prev = new i2.Buf16(u2.w_size), u2.lit_bufsize = 1 << o2 + 6, u2.pending_buf_size = 4 * u2.lit_bufsize, u2.pending_buf = new i2.Buf8(u2.pending_buf_size), u2.d_buf = +u2.lit_bufsize, u2.l_buf = 3 * u2.lit_bufsize, u2.level = t4, u2.strategy = s2, u2.method = r4, q(e3);
            }
            n2 = [new I(0, 0, 0, 0, function(e3, t4) {
              var r4 = 65535;
              for (r4 > e3.pending_buf_size - 5 && (r4 = e3.pending_buf_size - 5); ; ) {
                if (e3.lookahead <= 1) {
                  if (M(e3), 0 === e3.lookahead && 0 === t4)
                    return 1;
                  if (0 === e3.lookahead)
                    break;
                }
                e3.strstart += e3.lookahead, e3.lookahead = 0;
                var n3 = e3.block_start + r4;
                if ((0 === e3.strstart || e3.strstart >= n3) && (e3.lookahead = e3.strstart - n3, e3.strstart = n3, _(e3, false), 0 === e3.strm.avail_out))
                  return 1;
                if (e3.strstart - e3.block_start >= e3.w_size - d && (_(e3, false), 0 === e3.strm.avail_out))
                  return 1;
              }
              return e3.insert = 0, 4 === t4 ? (_(e3, true), 0 === e3.strm.avail_out ? 3 : 4) : (e3.strstart > e3.block_start && (_(e3, false), e3.strm.avail_out), 1);
            }), new I(4, 4, 8, 4, k), new I(4, 5, 16, 8, k), new I(4, 6, 32, 32, k), new I(4, 4, 16, 16, C), new I(8, 16, 32, 32, C), new I(8, 16, 128, 128, C), new I(8, 32, 128, 256, C), new I(32, 128, 258, 1024, C), new I(32, 258, 258, 4096, C)], r3.deflateInit = function(e3, t4) {
              return w(e3, t4, 8, 15, 8, 0);
            }, r3.deflateInit2 = w, r3.deflateReset = q, r3.deflateResetKeep = D, r3.deflateSetHeader = function(e3, t4) {
              return e3 && e3.state && 2 === e3.state.wrap ? (e3.state.gzhead = t4, 0) : c;
            }, r3.deflate = function(e3, t4) {
              var r4, i3, s2, u2;
              if (!e3 || !e3.state || 5 < t4 || t4 < 0)
                return e3 ? h(e3, c) : c;
              if (i3 = e3.state, !e3.output || !e3.input && 0 !== e3.avail_in || 666 === i3.status && 4 !== t4)
                return h(e3, 0 === e3.avail_out ? -5 : c);
              if (i3.strm = e3, r4 = i3.last_flush, i3.last_flush = t4, 42 === i3.status && (2 === i3.wrap ? (e3.adler = 0, b(i3, 31), b(i3, 139), b(i3, 8), i3.gzhead ? (b(i3, (i3.gzhead.text ? 1 : 0) + (i3.gzhead.hcrc ? 2 : 0) + (i3.gzhead.extra ? 4 : 0) + (i3.gzhead.name ? 8 : 0) + (i3.gzhead.comment ? 16 : 0)), b(i3, 255 & i3.gzhead.time), b(i3, i3.gzhead.time >> 8 & 255), b(i3, i3.gzhead.time >> 16 & 255), b(i3, i3.gzhead.time >> 24 & 255), b(i3, 9 === i3.level ? 2 : 2 <= i3.strategy || i3.level < 2 ? 4 : 0), b(i3, 255 & i3.gzhead.os), i3.gzhead.extra && i3.gzhead.extra.length && (b(i3, 255 & i3.gzhead.extra.length), b(i3, i3.gzhead.extra.length >> 8 & 255)), i3.gzhead.hcrc && (e3.adler = a(e3.adler, i3.pending_buf, i3.pending, 0)), i3.gzindex = 0, i3.status = 69) : (b(i3, 0), b(i3, 0), b(i3, 0), b(i3, 0), b(i3, 0), b(i3, 9 === i3.level ? 2 : 2 <= i3.strategy || i3.level < 2 ? 4 : 0), b(i3, 3), i3.status = p)) : (d2 = 8 + (i3.w_bits - 8 << 4) << 8, d2 |= (2 <= i3.strategy || i3.level < 2 ? 0 : i3.level < 6 ? 1 : 6 === i3.level ? 2 : 3) << 6, 0 !== i3.strstart && (d2 |= 32), d2 += 31 - d2 % 31, i3.status = p, v(i3, d2), 0 !== i3.strstart && (v(i3, e3.adler >>> 16), v(i3, 65535 & e3.adler)), e3.adler = 1)), 69 === i3.status)
                if (i3.gzhead.extra) {
                  for (s2 = i3.pending; i3.gzindex < (65535 & i3.gzhead.extra.length) && (i3.pending !== i3.pending_buf_size || (i3.gzhead.hcrc && i3.pending > s2 && (e3.adler = a(e3.adler, i3.pending_buf, i3.pending - s2, s2)), m(e3), s2 = i3.pending, i3.pending !== i3.pending_buf_size)); )
                    b(i3, 255 & i3.gzhead.extra[i3.gzindex]), i3.gzindex++;
                  i3.gzhead.hcrc && i3.pending > s2 && (e3.adler = a(e3.adler, i3.pending_buf, i3.pending - s2, s2)), i3.gzindex === i3.gzhead.extra.length && (i3.gzindex = 0, i3.status = 73);
                } else
                  i3.status = 73;
              if (73 === i3.status)
                if (i3.gzhead.name) {
                  s2 = i3.pending;
                  do {
                    if (i3.pending === i3.pending_buf_size && (i3.gzhead.hcrc && i3.pending > s2 && (e3.adler = a(e3.adler, i3.pending_buf, i3.pending - s2, s2)), m(e3), s2 = i3.pending, i3.pending === i3.pending_buf_size)) {
                      u2 = 1;
                      break;
                    }
                  } while (u2 = i3.gzindex < i3.gzhead.name.length ? 255 & i3.gzhead.name.charCodeAt(i3.gzindex++) : 0, b(i3, u2), 0 !== u2);
                  i3.gzhead.hcrc && i3.pending > s2 && (e3.adler = a(e3.adler, i3.pending_buf, i3.pending - s2, s2)), 0 === u2 && (i3.gzindex = 0, i3.status = 91);
                } else
                  i3.status = 91;
              if (91 === i3.status)
                if (i3.gzhead.comment) {
                  s2 = i3.pending;
                  do {
                    if (i3.pending === i3.pending_buf_size && (i3.gzhead.hcrc && i3.pending > s2 && (e3.adler = a(e3.adler, i3.pending_buf, i3.pending - s2, s2)), m(e3), s2 = i3.pending, i3.pending === i3.pending_buf_size)) {
                      u2 = 1;
                      break;
                    }
                  } while (u2 = i3.gzindex < i3.gzhead.comment.length ? 255 & i3.gzhead.comment.charCodeAt(i3.gzindex++) : 0, b(i3, u2), 0 !== u2);
                  i3.gzhead.hcrc && i3.pending > s2 && (e3.adler = a(e3.adler, i3.pending_buf, i3.pending - s2, s2)), 0 === u2 && (i3.status = 103);
                } else
                  i3.status = 103;
              if (103 === i3.status && (i3.gzhead.hcrc ? (i3.pending + 2 > i3.pending_buf_size && m(e3), i3.pending + 2 <= i3.pending_buf_size && (b(i3, 255 & e3.adler), b(i3, e3.adler >> 8 & 255), e3.adler = 0, i3.status = p)) : i3.status = p), 0 !== i3.pending) {
                if (m(e3), 0 === e3.avail_out)
                  return i3.last_flush = -1, 0;
              } else if (0 === e3.avail_in && f(t4) <= f(r4) && 4 !== t4)
                return h(e3, -5);
              if (666 === i3.status && 0 !== e3.avail_in)
                return h(e3, -5);
              if (0 !== e3.avail_in || 0 !== i3.lookahead || 0 !== t4 && 666 !== i3.status) {
                var d2 = 2 === i3.strategy ? function(e4, t5) {
                  for (var r5; ; ) {
                    if (0 === e4.lookahead && (M(e4), 0 === e4.lookahead)) {
                      if (0 === t5)
                        return 1;
                      break;
                    }
                    if (e4.match_length = 0, r5 = o._tr_tally(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++, r5 && (_(e4, false), 0 === e4.strm.avail_out))
                      return 1;
                  }
                  return e4.insert = 0, 4 === t5 ? (_(e4, true), 0 === e4.strm.avail_out ? 3 : 4) : e4.last_lit && (_(e4, false), 0 === e4.strm.avail_out) ? 1 : 2;
                }(i3, t4) : 3 === i3.strategy ? function(e4, t5) {
                  for (var r5, n3, i4, s3, a2 = e4.window; ; ) {
                    if (e4.lookahead <= l) {
                      if (M(e4), e4.lookahead <= l && 0 === t5)
                        return 1;
                      if (0 === e4.lookahead)
                        break;
                    }
                    if (e4.match_length = 0, e4.lookahead >= 3 && 0 < e4.strstart && (n3 = a2[i4 = e4.strstart - 1]) === a2[++i4] && n3 === a2[++i4] && n3 === a2[++i4]) {
                      for (s3 = e4.strstart + l; n3 === a2[++i4] && n3 === a2[++i4] && n3 === a2[++i4] && n3 === a2[++i4] && n3 === a2[++i4] && n3 === a2[++i4] && n3 === a2[++i4] && n3 === a2[++i4] && i4 < s3; )
                        ;
                      e4.match_length = l - (s3 - i4), e4.match_length > e4.lookahead && (e4.match_length = e4.lookahead);
                    }
                    if (e4.match_length >= 3 ? (r5 = o._tr_tally(e4, 1, e4.match_length - 3), e4.lookahead -= e4.match_length, e4.strstart += e4.match_length, e4.match_length = 0) : (r5 = o._tr_tally(e4, 0, e4.window[e4.strstart]), e4.lookahead--, e4.strstart++), r5 && (_(e4, false), 0 === e4.strm.avail_out))
                      return 1;
                  }
                  return e4.insert = 0, 4 === t5 ? (_(e4, true), 0 === e4.strm.avail_out ? 3 : 4) : e4.last_lit && (_(e4, false), 0 === e4.strm.avail_out) ? 1 : 2;
                }(i3, t4) : n2[i3.level].func(i3, t4);
                if (3 !== d2 && 4 !== d2 || (i3.status = 666), 1 === d2 || 3 === d2)
                  return 0 === e3.avail_out && (i3.last_flush = -1), 0;
                if (2 === d2 && (1 === t4 ? o._tr_align(i3) : 5 !== t4 && (o._tr_stored_block(i3, 0, 0, false), 3 === t4 && (g(i3.head), 0 === i3.lookahead && (i3.strstart = 0, i3.block_start = 0, i3.insert = 0))), m(e3), 0 === e3.avail_out))
                  return i3.last_flush = -1, 0;
              }
              return 4 !== t4 ? 0 : i3.wrap <= 0 ? 1 : (2 === i3.wrap ? (b(i3, 255 & e3.adler), b(i3, e3.adler >> 8 & 255), b(i3, e3.adler >> 16 & 255), b(i3, e3.adler >> 24 & 255), b(i3, 255 & e3.total_in), b(i3, e3.total_in >> 8 & 255), b(i3, e3.total_in >> 16 & 255), b(i3, e3.total_in >> 24 & 255)) : (v(i3, e3.adler >>> 16), v(i3, 65535 & e3.adler)), m(e3), 0 < i3.wrap && (i3.wrap = -i3.wrap), 0 !== i3.pending ? 0 : 1);
            }, r3.deflateEnd = function(e3) {
              var t4;
              return e3 && e3.state ? 42 !== (t4 = e3.state.status) && 69 !== t4 && 73 !== t4 && 91 !== t4 && 103 !== t4 && t4 !== p && 666 !== t4 ? h(e3, c) : (e3.state = null, t4 === p ? h(e3, -3) : 0) : c;
            }, r3.deflateSetDictionary = function(e3, t4) {
              var r4, n3, o2, a2, u2, l2, d2, p2 = t4.length;
              if (!e3 || !e3.state)
                return c;
              if (2 === (a2 = (r4 = e3.state).wrap) || 1 === a2 && 42 !== r4.status || r4.lookahead)
                return c;
              for (1 === a2 && (e3.adler = s(e3.adler, t4, p2, 0)), r4.wrap = 0, p2 >= r4.w_size && (0 === a2 && (g(r4.head), r4.strstart = 0, r4.block_start = 0, r4.insert = 0), d2 = new i2.Buf8(r4.w_size), i2.arraySet(d2, t4, p2 - r4.w_size, r4.w_size, 0), t4 = d2, p2 = r4.w_size), d2 = e3.avail_in, u2 = e3.next_in, l2 = e3.input, e3.avail_in = p2, e3.next_in = 0, e3.input = t4, M(r4); r4.lookahead >= 3; ) {
                for (n3 = r4.strstart, o2 = r4.lookahead - 2; r4.ins_h = (r4.ins_h << r4.hash_shift ^ r4.window[n3 + 3 - 1]) & r4.hash_mask, r4.prev[n3 & r4.w_mask] = r4.head[r4.ins_h], r4.head[r4.ins_h] = n3, n3++, --o2; )
                  ;
                r4.strstart = n3, r4.lookahead = 2, M(r4);
              }
              return r4.strstart += r4.lookahead, r4.block_start = r4.strstart, r4.insert = r4.lookahead, r4.lookahead = 0, r4.match_length = r4.prev_length = 2, r4.match_available = 0, e3.next_in = u2, e3.input = l2, e3.avail_in = d2, r4.wrap = a2, 0;
            }, r3.deflateInfo = "pako deflate (from Nodeca project)";
          }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./messages": 51, "./trees": 52 }], 47: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function() {
              this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = false;
            };
          }, {}], 48: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function(e3, t4) {
              var r4, n2, i2, o, s, a, u = e3.state, c = e3.next_in, l = e3.input, d = c + (e3.avail_in - 5), p = e3.next_out, h = e3.output, f = p - (t4 - e3.avail_out), g = p + (e3.avail_out - 257), m = u.dmax, _ = u.wsize, b = u.whave, v = u.wnext, y = u.window, M = u.hold, k = u.bits, C = u.lencode, I = u.distcode, S = (1 << u.lenbits) - 1, D = (1 << u.distbits) - 1;
              e:
                do {
                  for (k < 15 && (M += l[c++] << k, k += 8, M += l[c++] << k, k += 8), r4 = C[M & S]; ; ) {
                    if (M >>>= n2 = r4 >>> 24, k -= n2, 0 == (n2 = r4 >>> 16 & 255))
                      h[p++] = 65535 & r4;
                    else {
                      if (!(16 & n2)) {
                        if (0 == (64 & n2)) {
                          r4 = C[(65535 & r4) + (M & (1 << n2) - 1)];
                          continue;
                        }
                        if (32 & n2) {
                          u.mode = 12;
                          break e;
                        }
                        e3.msg = "invalid literal/length code", u.mode = 30;
                        break e;
                      }
                      for (i2 = 65535 & r4, (n2 &= 15) && (k < n2 && (M += l[c++] << k, k += 8), i2 += M & (1 << n2) - 1, M >>>= n2, k -= n2), k < 15 && (M += l[c++] << k, k += 8, M += l[c++] << k, k += 8), r4 = I[M & D]; ; ) {
                        if (M >>>= n2 = r4 >>> 24, k -= n2, !(16 & (n2 = r4 >>> 16 & 255))) {
                          if (0 == (64 & n2)) {
                            r4 = I[(65535 & r4) + (M & (1 << n2) - 1)];
                            continue;
                          }
                          e3.msg = "invalid distance code", u.mode = 30;
                          break e;
                        }
                        if (o = 65535 & r4, k < (n2 &= 15) && (M += l[c++] << k, (k += 8) < n2 && (M += l[c++] << k, k += 8)), m < (o += M & (1 << n2) - 1)) {
                          e3.msg = "invalid distance too far back", u.mode = 30;
                          break e;
                        }
                        if (M >>>= n2, k -= n2, (n2 = p - f) < o) {
                          if (b < (n2 = o - n2) && u.sane) {
                            e3.msg = "invalid distance too far back", u.mode = 30;
                            break e;
                          }
                          if (a = y, (s = 0) === v) {
                            if (s += _ - n2, n2 < i2) {
                              for (i2 -= n2; h[p++] = y[s++], --n2; )
                                ;
                              s = p - o, a = h;
                            }
                          } else if (v < n2) {
                            if (s += _ + v - n2, (n2 -= v) < i2) {
                              for (i2 -= n2; h[p++] = y[s++], --n2; )
                                ;
                              if (s = 0, v < i2) {
                                for (i2 -= n2 = v; h[p++] = y[s++], --n2; )
                                  ;
                                s = p - o, a = h;
                              }
                            }
                          } else if (s += v - n2, n2 < i2) {
                            for (i2 -= n2; h[p++] = y[s++], --n2; )
                              ;
                            s = p - o, a = h;
                          }
                          for (; 2 < i2; )
                            h[p++] = a[s++], h[p++] = a[s++], h[p++] = a[s++], i2 -= 3;
                          i2 && (h[p++] = a[s++], 1 < i2 && (h[p++] = a[s++]));
                        } else {
                          for (s = p - o; h[p++] = h[s++], h[p++] = h[s++], h[p++] = h[s++], 2 < (i2 -= 3); )
                            ;
                          i2 && (h[p++] = h[s++], 1 < i2 && (h[p++] = h[s++]));
                        }
                        break;
                      }
                    }
                    break;
                  }
                } while (c < d && p < g);
              c -= i2 = k >> 3, M &= (1 << (k -= i2 << 3)) - 1, e3.next_in = c, e3.next_out = p, e3.avail_in = c < d ? d - c + 5 : 5 - (c - d), e3.avail_out = p < g ? g - p + 257 : 257 - (p - g), u.hold = M, u.bits = k;
            };
          }, {}], 49: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils/common"), i2 = e2("./adler32"), o = e2("./crc32"), s = e2("./inffast"), a = e2("./inftrees"), u = -2;
            function c(e3) {
              return (e3 >>> 24 & 255) + (e3 >>> 8 & 65280) + ((65280 & e3) << 8) + ((255 & e3) << 24);
            }
            function l() {
              this.mode = 0, this.last = false, this.wrap = 0, this.havedict = false, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new n2.Buf16(320), this.work = new n2.Buf16(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
            }
            function d(e3) {
              var t4;
              return e3 && e3.state ? (t4 = e3.state, e3.total_in = e3.total_out = t4.total = 0, e3.msg = "", t4.wrap && (e3.adler = 1 & t4.wrap), t4.mode = 1, t4.last = 0, t4.havedict = 0, t4.dmax = 32768, t4.head = null, t4.hold = 0, t4.bits = 0, t4.lencode = t4.lendyn = new n2.Buf32(852), t4.distcode = t4.distdyn = new n2.Buf32(592), t4.sane = 1, t4.back = -1, 0) : u;
            }
            function p(e3) {
              var t4;
              return e3 && e3.state ? ((t4 = e3.state).wsize = 0, t4.whave = 0, t4.wnext = 0, d(e3)) : u;
            }
            function h(e3, t4) {
              var r4, n3;
              return e3 && e3.state ? (n3 = e3.state, t4 < 0 ? (r4 = 0, t4 = -t4) : (r4 = 1 + (t4 >> 4), t4 < 48 && (t4 &= 15)), t4 && (t4 < 8 || 15 < t4) ? u : (null !== n3.window && n3.wbits !== t4 && (n3.window = null), n3.wrap = r4, n3.wbits = t4, p(e3))) : u;
            }
            function f(e3, t4) {
              var r4;
              return e3 ? (r4 = new l(), (e3.state = r4).window = null, 0 !== (r4 = h(e3, t4)) && (e3.state = null), r4) : u;
            }
            var g, m, _ = true;
            function b(e3, t4, r4, i3) {
              var o2;
              return null === (e3 = e3.state).window && (e3.wsize = 1 << e3.wbits, e3.wnext = 0, e3.whave = 0, e3.window = new n2.Buf8(e3.wsize)), i3 >= e3.wsize ? (n2.arraySet(e3.window, t4, r4 - e3.wsize, e3.wsize, 0), e3.wnext = 0, e3.whave = e3.wsize) : (i3 < (o2 = e3.wsize - e3.wnext) && (o2 = i3), n2.arraySet(e3.window, t4, r4 - i3, o2, e3.wnext), (i3 -= o2) ? (n2.arraySet(e3.window, t4, r4 - i3, i3, 0), e3.wnext = i3, e3.whave = e3.wsize) : (e3.wnext += o2, e3.wnext === e3.wsize && (e3.wnext = 0), e3.whave < e3.wsize && (e3.whave += o2))), 0;
            }
            r3.inflateReset = p, r3.inflateReset2 = h, r3.inflateResetKeep = d, r3.inflateInit = function(e3) {
              return f(e3, 15);
            }, r3.inflateInit2 = f, r3.inflate = function(e3, t4) {
              var r4, l2, d2, p2, h2, f2, v, y, M, k, C, I, S, D, q, w, A, R, x, T, L, G, E, O, U = 0, P = new n2.Buf8(4), j = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
              if (!e3 || !e3.state || !e3.output || !e3.input && 0 !== e3.avail_in)
                return u;
              12 === (r4 = e3.state).mode && (r4.mode = 13), h2 = e3.next_out, d2 = e3.output, v = e3.avail_out, p2 = e3.next_in, l2 = e3.input, f2 = e3.avail_in, y = r4.hold, M = r4.bits, k = f2, C = v, G = 0;
              e:
                for (; ; )
                  switch (r4.mode) {
                    case 1:
                      if (0 === r4.wrap) {
                        r4.mode = 13;
                        break;
                      }
                      for (; M < 16; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      if (2 & r4.wrap && 35615 === y) {
                        P[r4.check = 0] = 255 & y, P[1] = y >>> 8 & 255, r4.check = o(r4.check, P, 2, 0), M = y = 0, r4.mode = 2;
                        break;
                      }
                      if (r4.flags = 0, r4.head && (r4.head.done = false), !(1 & r4.wrap) || (((255 & y) << 8) + (y >> 8)) % 31) {
                        e3.msg = "incorrect header check", r4.mode = 30;
                        break;
                      }
                      if (8 != (15 & y)) {
                        e3.msg = "unknown compression method", r4.mode = 30;
                        break;
                      }
                      if (M -= 4, L = 8 + (15 & (y >>>= 4)), 0 === r4.wbits)
                        r4.wbits = L;
                      else if (L > r4.wbits) {
                        e3.msg = "invalid window size", r4.mode = 30;
                        break;
                      }
                      r4.dmax = 1 << L, e3.adler = r4.check = 1, r4.mode = 512 & y ? 10 : 12, M = y = 0;
                      break;
                    case 2:
                      for (; M < 16; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      if (r4.flags = y, 8 != (255 & r4.flags)) {
                        e3.msg = "unknown compression method", r4.mode = 30;
                        break;
                      }
                      if (57344 & r4.flags) {
                        e3.msg = "unknown header flags set", r4.mode = 30;
                        break;
                      }
                      r4.head && (r4.head.text = y >> 8 & 1), 512 & r4.flags && (P[0] = 255 & y, P[1] = y >>> 8 & 255, r4.check = o(r4.check, P, 2, 0)), M = y = 0, r4.mode = 3;
                    case 3:
                      for (; M < 32; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      r4.head && (r4.head.time = y), 512 & r4.flags && (P[0] = 255 & y, P[1] = y >>> 8 & 255, P[2] = y >>> 16 & 255, P[3] = y >>> 24 & 255, r4.check = o(r4.check, P, 4, 0)), M = y = 0, r4.mode = 4;
                    case 4:
                      for (; M < 16; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      r4.head && (r4.head.xflags = 255 & y, r4.head.os = y >> 8), 512 & r4.flags && (P[0] = 255 & y, P[1] = y >>> 8 & 255, r4.check = o(r4.check, P, 2, 0)), M = y = 0, r4.mode = 5;
                    case 5:
                      if (1024 & r4.flags) {
                        for (; M < 16; ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.length = y, r4.head && (r4.head.extra_len = y), 512 & r4.flags && (P[0] = 255 & y, P[1] = y >>> 8 & 255, r4.check = o(r4.check, P, 2, 0)), M = y = 0;
                      } else
                        r4.head && (r4.head.extra = null);
                      r4.mode = 6;
                    case 6:
                      if (1024 & r4.flags && ((I = f2 < (I = r4.length) ? f2 : I) && (r4.head && (L = r4.head.extra_len - r4.length, r4.head.extra || (r4.head.extra = new Array(r4.head.extra_len)), n2.arraySet(r4.head.extra, l2, p2, I, L)), 512 & r4.flags && (r4.check = o(r4.check, l2, I, p2)), f2 -= I, p2 += I, r4.length -= I), r4.length))
                        break e;
                      r4.length = 0, r4.mode = 7;
                    case 7:
                      if (2048 & r4.flags) {
                        if (0 === f2)
                          break e;
                        for (I = 0; L = l2[p2 + I++], r4.head && L && r4.length < 65536 && (r4.head.name += String.fromCharCode(L)), L && I < f2; )
                          ;
                        if (512 & r4.flags && (r4.check = o(r4.check, l2, I, p2)), f2 -= I, p2 += I, L)
                          break e;
                      } else
                        r4.head && (r4.head.name = null);
                      r4.length = 0, r4.mode = 8;
                    case 8:
                      if (4096 & r4.flags) {
                        if (0 === f2)
                          break e;
                        for (I = 0; L = l2[p2 + I++], r4.head && L && r4.length < 65536 && (r4.head.comment += String.fromCharCode(L)), L && I < f2; )
                          ;
                        if (512 & r4.flags && (r4.check = o(r4.check, l2, I, p2)), f2 -= I, p2 += I, L)
                          break e;
                      } else
                        r4.head && (r4.head.comment = null);
                      r4.mode = 9;
                    case 9:
                      if (512 & r4.flags) {
                        for (; M < 16; ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        if (y !== (65535 & r4.check)) {
                          e3.msg = "header crc mismatch", r4.mode = 30;
                          break;
                        }
                        M = y = 0;
                      }
                      r4.head && (r4.head.hcrc = r4.flags >> 9 & 1, r4.head.done = true), e3.adler = r4.check = 0, r4.mode = 12;
                      break;
                    case 10:
                      for (; M < 32; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      e3.adler = r4.check = c(y), M = y = 0, r4.mode = 11;
                    case 11:
                      if (0 === r4.havedict)
                        return e3.next_out = h2, e3.avail_out = v, e3.next_in = p2, e3.avail_in = f2, r4.hold = y, r4.bits = M, 2;
                      e3.adler = r4.check = 1, r4.mode = 12;
                    case 12:
                      if (5 === t4 || 6 === t4)
                        break e;
                    case 13:
                      if (r4.last) {
                        y >>>= 7 & M, M -= 7 & M, r4.mode = 27;
                        break;
                      }
                      for (; M < 3; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      switch (r4.last = 1 & y, --M, 3 & (y >>>= 1)) {
                        case 0:
                          r4.mode = 14;
                          break;
                        case 1:
                          B = F = void 0;
                          var B, F = r4;
                          if (_) {
                            for (g = new n2.Buf32(512), m = new n2.Buf32(32), B = 0; B < 144; )
                              F.lens[B++] = 8;
                            for (; B < 256; )
                              F.lens[B++] = 9;
                            for (; B < 280; )
                              F.lens[B++] = 7;
                            for (; B < 288; )
                              F.lens[B++] = 8;
                            for (a(1, F.lens, 0, 288, g, 0, F.work, { bits: 9 }), B = 0; B < 32; )
                              F.lens[B++] = 5;
                            a(2, F.lens, 0, 32, m, 0, F.work, { bits: 5 }), _ = false;
                          }
                          if (F.lencode = g, F.lenbits = 9, F.distcode = m, F.distbits = 5, r4.mode = 20, 6 !== t4)
                            break;
                          y >>>= 2, M -= 2;
                          break e;
                        case 2:
                          r4.mode = 17;
                          break;
                        case 3:
                          e3.msg = "invalid block type", r4.mode = 30;
                      }
                      y >>>= 2, M -= 2;
                      break;
                    case 14:
                      for (y >>>= 7 & M, M -= 7 & M; M < 32; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      if ((65535 & y) != (y >>> 16 ^ 65535)) {
                        e3.msg = "invalid stored block lengths", r4.mode = 30;
                        break;
                      }
                      if (r4.length = 65535 & y, M = y = 0, r4.mode = 15, 6 === t4)
                        break e;
                    case 15:
                      r4.mode = 16;
                    case 16:
                      if (I = r4.length) {
                        if (0 === (I = v < (I = f2 < I ? f2 : I) ? v : I))
                          break e;
                        n2.arraySet(d2, l2, p2, I, h2), f2 -= I, p2 += I, v -= I, h2 += I, r4.length -= I;
                        break;
                      }
                      r4.mode = 12;
                      break;
                    case 17:
                      for (; M < 14; ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      if (r4.nlen = 257 + (31 & y), y >>>= 5, M -= 5, r4.ndist = 1 + (31 & y), y >>>= 5, M -= 5, r4.ncode = 4 + (15 & y), y >>>= 4, M -= 4, 286 < r4.nlen || 30 < r4.ndist) {
                        e3.msg = "too many length or distance symbols", r4.mode = 30;
                        break;
                      }
                      r4.have = 0, r4.mode = 18;
                    case 18:
                      for (; r4.have < r4.ncode; ) {
                        for (; M < 3; ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.lens[j[r4.have++]] = 7 & y, y >>>= 3, M -= 3;
                      }
                      for (; r4.have < 19; )
                        r4.lens[j[r4.have++]] = 0;
                      if (r4.lencode = r4.lendyn, r4.lenbits = 7, E = { bits: r4.lenbits }, G = a(0, r4.lens, 0, 19, r4.lencode, 0, r4.work, E), r4.lenbits = E.bits, G) {
                        e3.msg = "invalid code lengths set", r4.mode = 30;
                        break;
                      }
                      r4.have = 0, r4.mode = 19;
                    case 19:
                      for (; r4.have < r4.nlen + r4.ndist; ) {
                        for (; w = (U = r4.lencode[y & (1 << r4.lenbits) - 1]) >>> 16 & 255, A = 65535 & U, !((q = U >>> 24) <= M); ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        if (A < 16)
                          y >>>= q, M -= q, r4.lens[r4.have++] = A;
                        else {
                          if (16 === A) {
                            for (O = q + 2; M < O; ) {
                              if (0 === f2)
                                break e;
                              f2--, y += l2[p2++] << M, M += 8;
                            }
                            if (y >>>= q, M -= q, 0 === r4.have) {
                              e3.msg = "invalid bit length repeat", r4.mode = 30;
                              break;
                            }
                            L = r4.lens[r4.have - 1], I = 3 + (3 & y), y >>>= 2, M -= 2;
                          } else if (17 === A) {
                            for (O = q + 3; M < O; ) {
                              if (0 === f2)
                                break e;
                              f2--, y += l2[p2++] << M, M += 8;
                            }
                            L = 0, I = 3 + (7 & (y >>>= q)), y >>>= 3, M = M - q - 3;
                          } else {
                            for (O = q + 7; M < O; ) {
                              if (0 === f2)
                                break e;
                              f2--, y += l2[p2++] << M, M += 8;
                            }
                            L = 0, I = 11 + (127 & (y >>>= q)), y >>>= 7, M = M - q - 7;
                          }
                          if (r4.have + I > r4.nlen + r4.ndist) {
                            e3.msg = "invalid bit length repeat", r4.mode = 30;
                            break;
                          }
                          for (; I--; )
                            r4.lens[r4.have++] = L;
                        }
                      }
                      if (30 === r4.mode)
                        break;
                      if (0 === r4.lens[256]) {
                        e3.msg = "invalid code -- missing end-of-block", r4.mode = 30;
                        break;
                      }
                      if (r4.lenbits = 9, E = { bits: r4.lenbits }, G = a(1, r4.lens, 0, r4.nlen, r4.lencode, 0, r4.work, E), r4.lenbits = E.bits, G) {
                        e3.msg = "invalid literal/lengths set", r4.mode = 30;
                        break;
                      }
                      if (r4.distbits = 6, r4.distcode = r4.distdyn, E = { bits: r4.distbits }, G = a(2, r4.lens, r4.nlen, r4.ndist, r4.distcode, 0, r4.work, E), r4.distbits = E.bits, G) {
                        e3.msg = "invalid distances set", r4.mode = 30;
                        break;
                      }
                      if (r4.mode = 20, 6 === t4)
                        break e;
                    case 20:
                      r4.mode = 21;
                    case 21:
                      if (6 <= f2 && 258 <= v) {
                        e3.next_out = h2, e3.avail_out = v, e3.next_in = p2, e3.avail_in = f2, r4.hold = y, r4.bits = M, s(e3, C), h2 = e3.next_out, d2 = e3.output, v = e3.avail_out, p2 = e3.next_in, l2 = e3.input, f2 = e3.avail_in, y = r4.hold, M = r4.bits, 12 === r4.mode && (r4.back = -1);
                        break;
                      }
                      for (r4.back = 0; w = (U = r4.lencode[y & (1 << r4.lenbits) - 1]) >>> 16 & 255, A = 65535 & U, !((q = U >>> 24) <= M); ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      if (w && 0 == (240 & w)) {
                        for (R = q, x = w, T = A; w = (U = r4.lencode[T + ((y & (1 << R + x) - 1) >> R)]) >>> 16 & 255, A = 65535 & U, !(R + (q = U >>> 24) <= M); ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        y >>>= R, M -= R, r4.back += R;
                      }
                      if (y >>>= q, M -= q, r4.back += q, r4.length = A, 0 === w) {
                        r4.mode = 26;
                        break;
                      }
                      if (32 & w) {
                        r4.back = -1, r4.mode = 12;
                        break;
                      }
                      if (64 & w) {
                        e3.msg = "invalid literal/length code", r4.mode = 30;
                        break;
                      }
                      r4.extra = 15 & w, r4.mode = 22;
                    case 22:
                      if (r4.extra) {
                        for (O = r4.extra; M < O; ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.length += y & (1 << r4.extra) - 1, y >>>= r4.extra, M -= r4.extra, r4.back += r4.extra;
                      }
                      r4.was = r4.length, r4.mode = 23;
                    case 23:
                      for (; w = (U = r4.distcode[y & (1 << r4.distbits) - 1]) >>> 16 & 255, A = 65535 & U, !((q = U >>> 24) <= M); ) {
                        if (0 === f2)
                          break e;
                        f2--, y += l2[p2++] << M, M += 8;
                      }
                      if (0 == (240 & w)) {
                        for (R = q, x = w, T = A; w = (U = r4.distcode[T + ((y & (1 << R + x) - 1) >> R)]) >>> 16 & 255, A = 65535 & U, !(R + (q = U >>> 24) <= M); ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        y >>>= R, M -= R, r4.back += R;
                      }
                      if (y >>>= q, M -= q, r4.back += q, 64 & w) {
                        e3.msg = "invalid distance code", r4.mode = 30;
                        break;
                      }
                      r4.offset = A, r4.extra = 15 & w, r4.mode = 24;
                    case 24:
                      if (r4.extra) {
                        for (O = r4.extra; M < O; ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        r4.offset += y & (1 << r4.extra) - 1, y >>>= r4.extra, M -= r4.extra, r4.back += r4.extra;
                      }
                      if (r4.offset > r4.dmax) {
                        e3.msg = "invalid distance too far back", r4.mode = 30;
                        break;
                      }
                      r4.mode = 25;
                    case 25:
                      if (0 === v)
                        break e;
                      if (r4.offset > (I = C - v)) {
                        if ((I = r4.offset - I) > r4.whave && r4.sane) {
                          e3.msg = "invalid distance too far back", r4.mode = 30;
                          break;
                        }
                        S = I > r4.wnext ? (I -= r4.wnext, r4.wsize - I) : r4.wnext - I, I > r4.length && (I = r4.length), D = r4.window;
                      } else
                        D = d2, S = h2 - r4.offset, I = r4.length;
                      for (v -= I = v < I ? v : I, r4.length -= I; d2[h2++] = D[S++], --I; )
                        ;
                      0 === r4.length && (r4.mode = 21);
                      break;
                    case 26:
                      if (0 === v)
                        break e;
                      d2[h2++] = r4.length, v--, r4.mode = 21;
                      break;
                    case 27:
                      if (r4.wrap) {
                        for (; M < 32; ) {
                          if (0 === f2)
                            break e;
                          f2--, y |= l2[p2++] << M, M += 8;
                        }
                        if (C -= v, e3.total_out += C, r4.total += C, C && (e3.adler = r4.check = (r4.flags ? o : i2)(r4.check, d2, C, h2 - C)), C = v, (r4.flags ? y : c(y)) !== r4.check) {
                          e3.msg = "incorrect data check", r4.mode = 30;
                          break;
                        }
                        M = y = 0;
                      }
                      r4.mode = 28;
                    case 28:
                      if (r4.wrap && r4.flags) {
                        for (; M < 32; ) {
                          if (0 === f2)
                            break e;
                          f2--, y += l2[p2++] << M, M += 8;
                        }
                        if (y !== (4294967295 & r4.total)) {
                          e3.msg = "incorrect length check", r4.mode = 30;
                          break;
                        }
                        M = y = 0;
                      }
                      r4.mode = 29;
                    case 29:
                      G = 1;
                      break e;
                    case 30:
                      G = -3;
                      break e;
                    case 31:
                      return -4;
                    default:
                      return u;
                  }
              return e3.next_out = h2, e3.avail_out = v, e3.next_in = p2, e3.avail_in = f2, r4.hold = y, r4.bits = M, (r4.wsize || C !== e3.avail_out && r4.mode < 30 && (r4.mode < 27 || 4 !== t4)) && b(e3, e3.output, e3.next_out, C - e3.avail_out) ? (r4.mode = 31, -4) : (k -= e3.avail_in, C -= e3.avail_out, e3.total_in += k, e3.total_out += C, r4.total += C, r4.wrap && C && (e3.adler = r4.check = (r4.flags ? o : i2)(r4.check, d2, C, e3.next_out - C)), e3.data_type = r4.bits + (r4.last ? 64 : 0) + (12 === r4.mode ? 128 : 0) + (20 === r4.mode || 15 === r4.mode ? 256 : 0), G = (0 == k && 0 === C || 4 === t4) && 0 === G ? -5 : G);
            }, r3.inflateEnd = function(e3) {
              if (!e3 || !e3.state)
                return u;
              var t4 = e3.state;
              return t4.window && (t4.window = null), e3.state = null, 0;
            }, r3.inflateGetHeader = function(e3, t4) {
              return e3 && e3.state && 0 != (2 & (e3 = e3.state).wrap) ? ((e3.head = t4).done = false, 0) : u;
            }, r3.inflateSetDictionary = function(e3, t4) {
              var r4, n3 = t4.length;
              return !e3 || !e3.state || 0 !== (r4 = e3.state).wrap && 11 !== r4.mode ? u : 11 === r4.mode && i2(1, t4, n3, 0) !== r4.check ? -3 : b(e3, t4, n3, n3) ? (r4.mode = 31, -4) : (r4.havedict = 1, 0);
            }, r3.inflateInfo = "pako inflate (from Nodeca project)";
          }, { "../utils/common": 41, "./adler32": 43, "./crc32": 45, "./inffast": 48, "./inftrees": 50 }], 50: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils/common"), i2 = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0], o = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78], s = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0], a = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
            t3.exports = function(e3, t4, r4, u, c, l, d, p) {
              var h, f, g, m, _, b, v, y, M, k = p.bits, C = 0, I = 0, S = 0, D = 0, q = 0, w = 0, A = 0, R = 0, x = 0, T = 0, L = null, G = 0, E = new n2.Buf16(16), O = new n2.Buf16(16), U = null, P = 0;
              for (C = 0; C <= 15; C++)
                E[C] = 0;
              for (I = 0; I < u; I++)
                E[t4[r4 + I]]++;
              for (q = k, D = 15; 1 <= D && 0 === E[D]; D--)
                ;
              if (D < q && (q = D), 0 === D)
                return c[l++] = 20971520, c[l++] = 20971520, p.bits = 1, 0;
              for (S = 1; S < D && 0 === E[S]; S++)
                ;
              for (q < S && (q = S), C = R = 1; C <= 15; C++)
                if ((R = (R << 1) - E[C]) < 0)
                  return -1;
              if (0 < R && (0 === e3 || 1 !== D))
                return -1;
              for (O[1] = 0, C = 1; C < 15; C++)
                O[C + 1] = O[C] + E[C];
              for (I = 0; I < u; I++)
                0 !== t4[r4 + I] && (d[O[t4[r4 + I]]++] = I);
              if (b = 0 === e3 ? (L = U = d, 19) : 1 === e3 ? (L = i2, G -= 257, U = o, P -= 257, 256) : (L = s, U = a, -1), C = S, _ = l, A = I = T = 0, g = -1, m = (x = 1 << (w = q)) - 1, 1 === e3 && 852 < x || 2 === e3 && 592 < x)
                return 1;
              for (; ; ) {
                for (M = d[I] < b ? (y = 0, d[I]) : d[I] > b ? (y = U[P + d[I]], L[G + d[I]]) : (y = 96, 0), h = 1 << (v = C - A), S = f = 1 << w; c[_ + (T >> A) + (f -= h)] = v << 24 | y << 16 | M | 0, 0 !== f; )
                  ;
                for (h = 1 << C - 1; T & h; )
                  h >>= 1;
                if (T = 0 !== h ? (T & h - 1) + h : 0, I++, 0 == --E[C]) {
                  if (C === D)
                    break;
                  C = t4[r4 + d[I]];
                }
                if (q < C && (T & m) !== g) {
                  for (_ += S, R = 1 << (w = C - (A = 0 === A ? q : A)); w + A < D && !((R -= E[w + A]) <= 0); )
                    w++, R <<= 1;
                  if (x += 1 << w, 1 === e3 && 852 < x || 2 === e3 && 592 < x)
                    return 1;
                  c[g = T & m] = q << 24 | w << 16 | _ - l | 0;
                }
              }
              return 0 !== T && (c[_ + T] = C - A << 24 | 64 << 16 | 0), p.bits = q, 0;
            };
          }, { "../utils/common": 41 }], 51: [function(e2, t3, r3) {
            "use strict";
            t3.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" };
          }, {}], 52: [function(e2, t3, r3) {
            "use strict";
            var n2 = e2("../utils/common");
            function i2(e3) {
              for (var t4 = e3.length; 0 <= --t4; )
                e3[t4] = 0;
            }
            var o = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], s = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], a = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], u = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], c = new Array(576), l = (i2(c), new Array(60)), d = (i2(l), new Array(512)), p = (i2(d), new Array(256)), h = (i2(p), new Array(29));
            i2(h);
            var f, g, m, _ = new Array(30);
            function b(e3, t4, r4, n3, i3) {
              this.static_tree = e3, this.extra_bits = t4, this.extra_base = r4, this.elems = n3, this.max_length = i3, this.has_stree = e3 && e3.length;
            }
            function v(e3, t4) {
              this.dyn_tree = e3, this.max_code = 0, this.stat_desc = t4;
            }
            function y(e3) {
              return e3 < 256 ? d[e3] : d[256 + (e3 >>> 7)];
            }
            function M(e3, t4) {
              e3.pending_buf[e3.pending++] = 255 & t4, e3.pending_buf[e3.pending++] = t4 >>> 8 & 255;
            }
            function k(e3, t4, r4) {
              e3.bi_valid > 16 - r4 ? (e3.bi_buf |= t4 << e3.bi_valid & 65535, M(e3, e3.bi_buf), e3.bi_buf = t4 >> 16 - e3.bi_valid, e3.bi_valid += r4 - 16) : (e3.bi_buf |= t4 << e3.bi_valid & 65535, e3.bi_valid += r4);
            }
            function C(e3, t4, r4) {
              k(e3, r4[2 * t4], r4[2 * t4 + 1]);
            }
            function I(e3, t4) {
              for (var r4 = 0; r4 |= 1 & e3, e3 >>>= 1, r4 <<= 1, 0 < --t4; )
                ;
              return r4 >>> 1;
            }
            function S(e3, t4, r4) {
              for (var n3, i3 = new Array(16), o2 = 0, s2 = 1; s2 <= 15; s2++)
                i3[s2] = o2 = o2 + r4[s2 - 1] << 1;
              for (n3 = 0; n3 <= t4; n3++) {
                var a2 = e3[2 * n3 + 1];
                0 !== a2 && (e3[2 * n3] = I(i3[a2]++, a2));
              }
            }
            function D(e3) {
              for (var t4 = 0; t4 < 286; t4++)
                e3.dyn_ltree[2 * t4] = 0;
              for (t4 = 0; t4 < 30; t4++)
                e3.dyn_dtree[2 * t4] = 0;
              for (t4 = 0; t4 < 19; t4++)
                e3.bl_tree[2 * t4] = 0;
              e3.dyn_ltree[512] = 1, e3.opt_len = e3.static_len = 0, e3.last_lit = e3.matches = 0;
            }
            function q(e3) {
              8 < e3.bi_valid ? M(e3, e3.bi_buf) : 0 < e3.bi_valid && (e3.pending_buf[e3.pending++] = e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0;
            }
            function w(e3, t4, r4, n3) {
              var i3 = 2 * t4, o2 = 2 * r4;
              return e3[i3] < e3[o2] || e3[i3] === e3[o2] && n3[t4] <= n3[r4];
            }
            function A(e3, t4, r4) {
              for (var n3 = e3.heap[r4], i3 = r4 << 1; i3 <= e3.heap_len && (i3 < e3.heap_len && w(t4, e3.heap[i3 + 1], e3.heap[i3], e3.depth) && i3++, !w(t4, n3, e3.heap[i3], e3.depth)); )
                e3.heap[r4] = e3.heap[i3], r4 = i3, i3 <<= 1;
              e3.heap[r4] = n3;
            }
            function R(e3, t4, r4) {
              var n3, i3, a2, u2, c2 = 0;
              if (0 !== e3.last_lit)
                for (; n3 = e3.pending_buf[e3.d_buf + 2 * c2] << 8 | e3.pending_buf[e3.d_buf + 2 * c2 + 1], i3 = e3.pending_buf[e3.l_buf + c2], c2++, 0 == n3 ? C(e3, i3, t4) : (C(e3, (a2 = p[i3]) + 256 + 1, t4), 0 !== (u2 = o[a2]) && k(e3, i3 -= h[a2], u2), C(e3, a2 = y(--n3), r4), 0 !== (u2 = s[a2]) && k(e3, n3 -= _[a2], u2)), c2 < e3.last_lit; )
                  ;
              C(e3, 256, t4);
            }
            function x(e3, t4) {
              var r4, n3, i3, o2 = t4.dyn_tree, s2 = t4.stat_desc.static_tree, a2 = t4.stat_desc.has_stree, u2 = t4.stat_desc.elems, c2 = -1;
              for (e3.heap_len = 0, e3.heap_max = 573, r4 = 0; r4 < u2; r4++)
                0 !== o2[2 * r4] ? (e3.heap[++e3.heap_len] = c2 = r4, e3.depth[r4] = 0) : o2[2 * r4 + 1] = 0;
              for (; e3.heap_len < 2; )
                o2[2 * (i3 = e3.heap[++e3.heap_len] = c2 < 2 ? ++c2 : 0)] = 1, e3.depth[i3] = 0, e3.opt_len--, a2 && (e3.static_len -= s2[2 * i3 + 1]);
              for (t4.max_code = c2, r4 = e3.heap_len >> 1; 1 <= r4; r4--)
                A(e3, o2, r4);
              for (i3 = u2; r4 = e3.heap[1], e3.heap[1] = e3.heap[e3.heap_len--], A(e3, o2, 1), n3 = e3.heap[1], e3.heap[--e3.heap_max] = r4, e3.heap[--e3.heap_max] = n3, o2[2 * i3] = o2[2 * r4] + o2[2 * n3], e3.depth[i3] = (e3.depth[r4] >= e3.depth[n3] ? e3.depth[r4] : e3.depth[n3]) + 1, o2[2 * r4 + 1] = o2[2 * n3 + 1] = i3, e3.heap[1] = i3++, A(e3, o2, 1), 2 <= e3.heap_len; )
                ;
              e3.heap[--e3.heap_max] = e3.heap[1];
              for (var l2, d2, p2, h2, f2, g2 = e3, m2 = t4.dyn_tree, _2 = t4.max_code, b2 = t4.stat_desc.static_tree, v2 = t4.stat_desc.has_stree, y2 = t4.stat_desc.extra_bits, M2 = t4.stat_desc.extra_base, k2 = t4.stat_desc.max_length, C2 = 0, I2 = 0; I2 <= 15; I2++)
                g2.bl_count[I2] = 0;
              for (m2[2 * g2.heap[g2.heap_max] + 1] = 0, l2 = g2.heap_max + 1; l2 < 573; l2++)
                k2 < (I2 = m2[2 * m2[2 * (d2 = g2.heap[l2]) + 1] + 1] + 1) && (I2 = k2, C2++), m2[2 * d2 + 1] = I2, _2 < d2 || (g2.bl_count[I2]++, h2 = 0, M2 <= d2 && (h2 = y2[d2 - M2]), f2 = m2[2 * d2], g2.opt_len += f2 * (I2 + h2), v2 && (g2.static_len += f2 * (b2[2 * d2 + 1] + h2)));
              if (0 !== C2) {
                do {
                  for (I2 = k2 - 1; 0 === g2.bl_count[I2]; )
                    I2--;
                } while (g2.bl_count[I2]--, g2.bl_count[I2 + 1] += 2, g2.bl_count[k2]--, 0 < (C2 -= 2));
                for (I2 = k2; 0 !== I2; I2--)
                  for (d2 = g2.bl_count[I2]; 0 !== d2; )
                    _2 < (p2 = g2.heap[--l2]) || (m2[2 * p2 + 1] !== I2 && (g2.opt_len += (I2 - m2[2 * p2 + 1]) * m2[2 * p2], m2[2 * p2 + 1] = I2), d2--);
              }
              S(o2, c2, e3.bl_count);
            }
            function T(e3, t4, r4) {
              var n3, i3, o2 = -1, s2 = t4[1], a2 = 0, u2 = 7, c2 = 4;
              for (0 === s2 && (u2 = 138, c2 = 3), t4[2 * (r4 + 1) + 1] = 65535, n3 = 0; n3 <= r4; n3++)
                i3 = s2, s2 = t4[2 * (n3 + 1) + 1], ++a2 < u2 && i3 === s2 || (a2 < c2 ? e3.bl_tree[2 * i3] += a2 : 0 !== i3 ? (i3 !== o2 && e3.bl_tree[2 * i3]++, e3.bl_tree[32]++) : a2 <= 10 ? e3.bl_tree[34]++ : e3.bl_tree[36]++, o2 = i3, c2 = (a2 = 0) === s2 ? (u2 = 138, 3) : i3 === s2 ? (u2 = 6, 3) : (u2 = 7, 4));
            }
            function L(e3, t4, r4) {
              var n3, i3, o2 = -1, s2 = t4[1], a2 = 0, u2 = 7, c2 = 4;
              for (0 === s2 && (u2 = 138, c2 = 3), n3 = 0; n3 <= r4; n3++)
                if (i3 = s2, s2 = t4[2 * (n3 + 1) + 1], !(++a2 < u2 && i3 === s2)) {
                  if (a2 < c2)
                    for (; C(e3, i3, e3.bl_tree), 0 != --a2; )
                      ;
                  else
                    0 !== i3 ? (i3 !== o2 && (C(e3, i3, e3.bl_tree), a2--), C(e3, 16, e3.bl_tree), k(e3, a2 - 3, 2)) : a2 <= 10 ? (C(e3, 17, e3.bl_tree), k(e3, a2 - 3, 3)) : (C(e3, 18, e3.bl_tree), k(e3, a2 - 11, 7));
                  o2 = i3, c2 = (a2 = 0) === s2 ? (u2 = 138, 3) : i3 === s2 ? (u2 = 6, 3) : (u2 = 7, 4);
                }
            }
            i2(_);
            var G = false;
            function E(e3, t4, r4, i3) {
              k(e3, 0 + (i3 ? 1 : 0), 3), i3 = t4, t4 = r4, q(r4 = e3), M(r4, t4), M(r4, ~t4), n2.arraySet(r4.pending_buf, r4.window, i3, t4, r4.pending), r4.pending += t4;
            }
            r3._tr_init = function(e3) {
              if (!G) {
                for (var t4, r4, n3, i3, u2 = new Array(16), y2 = n3 = 0; y2 < 28; y2++)
                  for (h[y2] = n3, t4 = 0; t4 < 1 << o[y2]; t4++)
                    p[n3++] = y2;
                for (p[n3 - 1] = y2, y2 = i3 = 0; y2 < 16; y2++)
                  for (_[y2] = i3, t4 = 0; t4 < 1 << s[y2]; t4++)
                    d[i3++] = y2;
                for (i3 >>= 7; y2 < 30; y2++)
                  for (_[y2] = i3 << 7, t4 = 0; t4 < 1 << s[y2] - 7; t4++)
                    d[256 + i3++] = y2;
                for (r4 = 0; r4 <= 15; r4++)
                  u2[r4] = 0;
                for (t4 = 0; t4 <= 143; )
                  c[2 * t4 + 1] = 8, t4++, u2[8]++;
                for (; t4 <= 255; )
                  c[2 * t4 + 1] = 9, t4++, u2[9]++;
                for (; t4 <= 279; )
                  c[2 * t4 + 1] = 7, t4++, u2[7]++;
                for (; t4 <= 287; )
                  c[2 * t4 + 1] = 8, t4++, u2[8]++;
                for (S(c, 287, u2), t4 = 0; t4 < 30; t4++)
                  l[2 * t4 + 1] = 5, l[2 * t4] = I(t4, 5);
                f = new b(c, o, 257, 286, 15), g = new b(l, s, 0, 30, 15), m = new b(new Array(0), a, 0, 19, 7), G = true;
              }
              e3.l_desc = new v(e3.dyn_ltree, f), e3.d_desc = new v(e3.dyn_dtree, g), e3.bl_desc = new v(e3.bl_tree, m), e3.bi_buf = 0, e3.bi_valid = 0, D(e3);
            }, r3._tr_stored_block = E, r3._tr_flush_block = function(e3, t4, r4, n3) {
              var i3, o2, s2, a2 = 0;
              if (0 < e3.level ? (2 === e3.strm.data_type && (e3.strm.data_type = function(e4) {
                for (var t5 = 4093624447, r5 = 0; r5 <= 31; r5++, t5 >>>= 1)
                  if (1 & t5 && 0 !== e4.dyn_ltree[2 * r5])
                    return 0;
                if (0 !== e4.dyn_ltree[18] || 0 !== e4.dyn_ltree[20] || 0 !== e4.dyn_ltree[26])
                  return 1;
                for (r5 = 32; r5 < 256; r5++)
                  if (0 !== e4.dyn_ltree[2 * r5])
                    return 1;
                return 0;
              }(e3)), x(e3, e3.l_desc), x(e3, e3.d_desc), a2 = function(e4) {
                var t5;
                for (T(e4, e4.dyn_ltree, e4.l_desc.max_code), T(e4, e4.dyn_dtree, e4.d_desc.max_code), x(e4, e4.bl_desc), t5 = 18; 3 <= t5 && 0 === e4.bl_tree[2 * u[t5] + 1]; t5--)
                  ;
                return e4.opt_len += 3 * (t5 + 1) + 5 + 5 + 4, t5;
              }(e3), i3 = e3.opt_len + 3 + 7 >>> 3, (o2 = e3.static_len + 3 + 7 >>> 3) <= i3 && (i3 = o2)) : i3 = o2 = r4 + 5, r4 + 4 <= i3 && -1 !== t4)
                E(e3, t4, r4, n3);
              else if (4 === e3.strategy || o2 === i3)
                k(e3, 2 + (n3 ? 1 : 0), 3), R(e3, c, l);
              else {
                k(e3, 4 + (n3 ? 1 : 0), 3);
                var d2 = e3, p2 = (t4 = e3.l_desc.max_code + 1, r4 = e3.d_desc.max_code + 1, a2 + 1);
                for (k(d2, t4 - 257, 5), k(d2, r4 - 1, 5), k(d2, p2 - 4, 4), s2 = 0; s2 < p2; s2++)
                  k(d2, d2.bl_tree[2 * u[s2] + 1], 3);
                L(d2, d2.dyn_ltree, t4 - 1), L(d2, d2.dyn_dtree, r4 - 1), R(e3, e3.dyn_ltree, e3.dyn_dtree);
              }
              D(e3), n3 && q(e3);
            }, r3._tr_tally = function(e3, t4, r4) {
              return e3.pending_buf[e3.d_buf + 2 * e3.last_lit] = t4 >>> 8 & 255, e3.pending_buf[e3.d_buf + 2 * e3.last_lit + 1] = 255 & t4, e3.pending_buf[e3.l_buf + e3.last_lit] = 255 & r4, e3.last_lit++, 0 === t4 ? e3.dyn_ltree[2 * r4]++ : (e3.matches++, t4--, e3.dyn_ltree[2 * (p[r4] + 256 + 1)]++, e3.dyn_dtree[2 * y(t4)]++), e3.last_lit === e3.lit_bufsize - 1;
            }, r3._tr_align = function(e3) {
              k(e3, 2, 3), C(e3, 256, c), 16 === (e3 = e3).bi_valid ? (M(e3, e3.bi_buf), e3.bi_buf = 0, e3.bi_valid = 0) : 8 <= e3.bi_valid && (e3.pending_buf[e3.pending++] = 255 & e3.bi_buf, e3.bi_buf >>= 8, e3.bi_valid -= 8);
            };
          }, { "../utils/common": 41 }], 53: [function(e2, t3, r3) {
            "use strict";
            t3.exports = function() {
              this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
            };
          }, {}], 54: [function(e2, t3, r3) {
            (function(e3) {
              !function(e4, t4) {
                "use strict";
                var r4, n2, o, s, a, u, c, l, d;
                function p(e5) {
                  delete a[e5];
                }
                function h(e5) {
                  if (u)
                    setTimeout(h, 0, e5);
                  else {
                    var t5 = a[e5];
                    if (t5) {
                      u = true;
                      try {
                        var r5 = t5.callback, n3 = t5.args;
                        switch (n3.length) {
                          case 0:
                            r5();
                            break;
                          case 1:
                            r5(n3[0]);
                            break;
                          case 2:
                            r5(n3[0], n3[1]);
                            break;
                          case 3:
                            r5(n3[0], n3[1], n3[2]);
                            break;
                          default:
                            r5.apply(void 0, n3);
                        }
                      } finally {
                        p(e5), u = false;
                      }
                    }
                  }
                }
                function f(t5) {
                  t5.source === e4 && "string" == typeof t5.data && 0 === t5.data.indexOf(o) && h(+t5.data.slice(o.length));
                }
                e4.setImmediate || (s = 1, u = !(a = {}), c = e4.document, l = (l = Object.getPrototypeOf && Object.getPrototypeOf(e4)) && l.setTimeout ? l : e4, d = "[object process]" === {}.toString.call(e4.process) ? function(e5) {
                  i.nextTick(function() {
                    h(e5);
                  });
                } : function() {
                  var t5, r5;
                  if (e4.postMessage && !e4.importScripts)
                    return t5 = true, r5 = e4.onmessage, e4.onmessage = function() {
                      t5 = false;
                    }, e4.postMessage("", "*"), e4.onmessage = r5, t5;
                }() ? (o = "setImmediate$" + Math.random() + "$", e4.addEventListener ? e4.addEventListener("message", f, false) : e4.attachEvent("onmessage", f), function(t5) {
                  e4.postMessage(o + t5, "*");
                }) : e4.MessageChannel ? ((n2 = new MessageChannel()).port1.onmessage = function(e5) {
                  h(e5.data);
                }, function(e5) {
                  n2.port2.postMessage(e5);
                }) : c && "onreadystatechange" in c.createElement("script") ? (r4 = c.documentElement, function(e5) {
                  var t5 = c.createElement("script");
                  t5.onreadystatechange = function() {
                    h(e5), t5.onreadystatechange = null, r4.removeChild(t5), t5 = null;
                  }, r4.appendChild(t5);
                }) : function(e5) {
                  setTimeout(h, 0, e5);
                }, l.setImmediate = function(e5) {
                  "function" != typeof e5 && (e5 = new Function("" + e5));
                  for (var t5 = new Array(arguments.length - 1), r5 = 0; r5 < t5.length; r5++)
                    t5[r5] = arguments[r5 + 1];
                  return a[s] = { callback: e5, args: t5 }, d(s), s++;
                }, l.clearImmediate = p);
              }("undefined" == typeof self ? void 0 === e3 ? this : e3 : self);
            }).call(this, void 0 !== n ? n : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
          }, {}] }, {}, [10])(10);
        }).call(this, r(116).Buffer, r(120).setImmediate, r(11), r(53));
      }, function(e, t, r) {
        "use strict";
        r.d(t, "a", function() {
          return a;
        });
        t = r(3);
        var n = r.n(t), i = r(1), o = r(0), s = function(e2, t2) {
          var r2 = "function" == typeof Symbol && e2[Symbol.iterator];
          if (!r2)
            return e2;
          var n2, i2, o2 = r2.call(e2), s2 = [];
          try {
            for (; (void 0 === t2 || 0 < t2--) && !(n2 = o2.next()).done; )
              s2.push(n2.value);
          } catch (e3) {
            i2 = { error: e3 };
          } finally {
            try {
              n2 && !n2.done && (r2 = o2.return) && r2.call(o2);
            } finally {
              if (i2)
                throw i2.error;
            }
          }
          return s2;
        }, a = (u.prototype.getRealClientTimestamp = function(e2) {
          return this.serverOffsetTime + (e2 || Date.now());
        }, u.prototype.initEngine = function(e2, t2, r2) {
          return this.eventBusMap.set(e2, r2), r2 = { handle: e2, appID: t2, token: "", tokenExpireTime: 0, user: {}, syncUserTask: /* @__PURE__ */ new Set(), dbUserMap: /* @__PURE__ */ new Map(), dbGroupMap: /* @__PURE__ */ new Map(), dbConvMap: /* @__PURE__ */ new Map(), msgExtraMap: /* @__PURE__ */ new Map(), cloudSetting: { qps: { get_room_user_attrs: "5/30", send_msg: 100, send_barrage_msg: 100, default_token: 30, max_token: 100, interval_add_token: 5, max_handle_req: 10 }, req_to: { def: 3e3, send_msg: 1e4 }, retry: { login_max_itvl: 300 }, scale: { cb_msg_title_len: 20, cb_msg_summary_len: 100 } }, cryptoConfig: {}, mailHBConfig: { conv_list_seq: n.a.fromString("0"), group_list_seq: n.a.fromString("0"), call_list_seq: n.a.fromString("0"), c2c_statemsg_seq: n.a.fromString("0"), extra_msg_list_seq: n.a.fromString("0"), friend_list_seq: 0, friend_apply_list_seq: 0, black_list_seq: 0, conv_pinned_list_seq: 0, c2c_mute_max_seq: 0, user_info_seq: 0, group_apply_list_seq: 0, fetch_c2c_msg_count: 0, fetch_group_msg_count: 0, fetch_room_msg_count: 0, fetch_conv_list: 0, fetch_group_list: 0, usermail_hb_interval: 1e4, msg_to: 1e4, msg_itvl: 3e4, list_to: 1e4, list_itvl: 3e4, reaction_brief_len: 5, state_seq_reduce_num: -1, delete_all_msg_time: 0, apply_expired_duration: 0, group_tips: 0 } }, this.engineConfigMap.set(e2, r2), r2;
        }, u.prototype.unInitEngine = function(e2, t2) {
          var r2 = this.engineConfigMap.get(e2);
          r2 && (r2.cloudTimer && clearInterval(r2.cloudTimer), r2.cloudTimer = 0, r2.user = {}, r2.syncUserTask.clear(), r2.dbUserMap.clear(), r2.dbConvMap.clear(), r2.dbGroupMap.clear(), r2.msgExtraMap.clear(), r2.sessionID = void 0, r2.serverUserID = void 0, r2.controls = void 0, t2 && (this.engineConfigMap.delete(e2), this.eventBusMap.delete(e2)));
        }, u.prototype.fetchZGLogConfig = function() {
          return [(this.advancedConfig.geoFence.host.detaillog || o.B[1].host.detaillog) + "/zglog/zip", this.advancedConfig.geoFence.host.logreport || o.B[1].host.logreport];
        }, u.prototype.fetchZGLogWhitelistUrl = function() {
          return (this.advancedConfig.geoFence.host.detaillog || o.B[1].host.detaillog) + "/zglog/whitelist?";
        }, u.prototype.startSyncRemoteConfig = function(e2, t2, r2) {
          var n2 = this, i2 = this.engineConfigMap.get(t2);
          return i2.cloudTimer || (i2.cloudTimer = setInterval(function() {
            i2.token && n2.syncRemoteConfig(e2, i2);
          }, 36e5)), this.syncRemoteConfig(e2, i2, r2);
        }, u.prototype.syncRemoteConfig = function(e2, t2, r2) {
          return r2 = { appid: t2.appID, id_name: t2.user.userID, product: "ZIM", files: ["biz_conf"], param: { platform: "1", sdk_version: "" + this.deviceInfo.sdk_ver }, timestamp: Date.now(), biztype: 0, deviceid: i.i, compress: false, mode: "online", token: r2 || t2.token }, e2.sendHttpRequest({ url: "/cloud-setting/get", method: "POST" }, r2, 10).then(function(e3) {
            if (!(e3 && e3.data && e3.data.biz_conf && e3.data.biz_conf.data))
              return false;
            var r3 = (n2 = e3.data.biz_conf.data).qps, n2 = n2.req_to, i2 = (a2 = s(String(r3.send_msg).split("~"), 2))[0], a2 = a2[1];
            i2 = (a2 = (r3.send_msg = 1e3 * Number(a2) / Number(i2), s(String(r3.send_barrage_msg).split("~"), 2)))[0], a2 = a2[1], i2 = (a2 = (r3.send_barrage_msg = 1e3 * Number(a2) / Number(i2), s(r3.get_room_user_attrs.split("/"), 2)))[0], r3 = a2[1];
            return o.m.get_user_attribute_qps = +i2, o.m.get_user_attribute_interval = 1e3 * +r3, n2.def = 1e3 * n2.def, n2.send_msg = 1e3 * n2.send_msg, Object.assign(t2.cloudSetting, e3.data.biz_conf.data), true;
          });
        }, u.prototype.onNetworkStatusChange = function() {
          var e2, t2, r2 = this, n2 = { wifi: 2, "2g": 3, "3g": 4, "4g": 5, "5g": 5, unknown: 32 };
          function o2(e3) {
            return e3.toLowerCase().replace("-", "");
          }
          i.p ? (i.p.getNetworkType({ success: function(e3) {
            r2.netType = o2(e3.networkType || "unknown"), r2.deviceInfo.net_type = n2[r2.netType] || n2.unknown;
          } }), i.p.onNetworkStatusChange(function(e3) {
            r2.netType = o2(e3.networkType || "unknown"), r2.deviceInfo.net_type = n2[r2.netType] || n2.unknown, r2.emitNetworkChange(e3.isConnected);
          })) : ((e2 = navigator.connection || navigator.mozConnection || navigator.webkitConnection) && (this.netType = o2(e2.type || e2.effectiveType || "unknown"), this.deviceInfo.net_type = n2[this.netType] || n2.unknown, e2.addEventListener("change", function() {
            r2.netType = o2(e2.type || e2.effectiveType || "unknown"), r2.deviceInfo.net_type = n2[r2.netType] || n2.unknown;
          })), t2 = function() {
            return r2.emitNetworkChange(navigator.onLine);
          }, window.addEventListener("online", t2), window.addEventListener("offline", t2));
        }, u.prototype.emitNetworkChange = function(e2) {
          var t2 = this;
          this.eventBusMap.forEach(function(r2) {
            return r2.exec(o.u.INetworkChange, e2, t2.netType);
          });
        }, u);
        function u(e2) {
          this.engineConfigMap = /* @__PURE__ */ new Map(), this.eventBusMap = /* @__PURE__ */ new Map(), this.advancedConfig = { zim_cross_platform: "", zim_product_source: "", geoFence: { reg: /(https?:\/\/)?([a-zA-Z0-9.-]+)\.([a-zA-Z]{2,})((\/[a-zA-Z0-9#]+\/?)*)/, type: o.C.None, areas: [], id: 0, host: { accesshub: "", logreport: "", detaillog: "", fileproxy: "" }, dispatch: { domain: "", host: "" } } }, this.serverOffsetTime = 0, this.netType = "", this.deviceInfo = { sdk_ver: e2.split(".").reverse().reduce(function(e3, t2, r2) {
            return e3 + +t2 * Math.pow(100, r2);
          }, 0), term_type: i.p ? 7 : 6, device_id: i.i, net_type: 32 }, this.onNetworkStatusChange();
        }
      }, function(e, t) {
      }, function(e, t, r) {
        var n;
        e.exports = (e = r(5), n = e.lib.WordArray, e.enc.Base64 = { stringify: function(e2) {
          for (var t2 = e2.words, r2 = e2.sigBytes, n2 = this._map, i = (e2.clamp(), []), o = 0; o < r2; o += 3)
            for (var s = (t2[o >>> 2] >>> 24 - o % 4 * 8 & 255) << 16 | (t2[o + 1 >>> 2] >>> 24 - (o + 1) % 4 * 8 & 255) << 8 | t2[o + 2 >>> 2] >>> 24 - (o + 2) % 4 * 8 & 255, a = 0; a < 4 && o + 0.75 * a < r2; a++)
              i.push(n2.charAt(s >>> 6 * (3 - a) & 63));
          var u = n2.charAt(64);
          if (u)
            for (; i.length % 4; )
              i.push(u);
          return i.join("");
        }, parse: function(e2) {
          var t2 = e2.length, r2 = this._map;
          if (!(i = this._reverseMap))
            for (var i = this._reverseMap = [], o = 0; o < r2.length; o++)
              i[r2.charCodeAt(o)] = o;
          var s = r2.charAt(64);
          return s && -1 !== (s = e2.indexOf(s)) && (t2 = s), function(e3, t3, r3) {
            for (var i2, o2, s2 = [], a = 0, u = 0; u < t3; u++)
              u % 4 && (i2 = r3[e3.charCodeAt(u - 1)] << u % 4 * 2, o2 = r3[e3.charCodeAt(u)] >>> 6 - u % 4 * 2, s2[a >>> 2] |= (i2 | o2) << 24 - a % 4 * 8, a++);
            return n.create(s2, a);
          }(e2, t2, i);
        }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, e.enc.Base64);
      }, function(e, t, r) {
        var n, i, o, s;
        e.exports = (e = r(5), s = (r = e).lib, n = s.WordArray, i = s.Hasher, s = r.algo, o = [], s = s.SHA1 = i.extend({ _doReset: function() {
          this._hash = new n.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
        }, _doProcessBlock: function(e2, t2) {
          for (var r2 = this._hash.words, n2 = r2[0], i2 = r2[1], s2 = r2[2], a = r2[3], u = r2[4], c = 0; c < 80; c++) {
            c < 16 ? o[c] = 0 | e2[t2 + c] : (l = o[c - 3] ^ o[c - 8] ^ o[c - 14] ^ o[c - 16], o[c] = l << 1 | l >>> 31);
            var l = (n2 << 5 | n2 >>> 27) + u + o[c];
            l += c < 20 ? 1518500249 + (i2 & s2 | ~i2 & a) : c < 40 ? 1859775393 + (i2 ^ s2 ^ a) : c < 60 ? (i2 & s2 | i2 & a | s2 & a) - 1894007588 : (i2 ^ s2 ^ a) - 899497514, u = a, a = s2, s2 = i2 << 30 | i2 >>> 2, i2 = n2, n2 = l;
          }
          r2[0] = r2[0] + n2 | 0, r2[1] = r2[1] + i2 | 0, r2[2] = r2[2] + s2 | 0, r2[3] = r2[3] + a | 0, r2[4] = r2[4] + u | 0;
        }, _doFinalize: function() {
          var e2 = this._data, t2 = e2.words, r2 = 8 * this._nDataBytes, n2 = 8 * e2.sigBytes;
          return t2[n2 >>> 5] |= 128 << 24 - n2 % 32, t2[14 + (64 + n2 >>> 9 << 4)] = Math.floor(r2 / 4294967296), t2[15 + (64 + n2 >>> 9 << 4)] = r2, e2.sigBytes = 4 * t2.length, this._process(), this._hash;
        }, clone: function() {
          var e2 = i.clone.call(this);
          return e2._hash = this._hash.clone(), e2;
        } }), r.SHA1 = i._createHelper(s), r.HmacSHA1 = i._createHmacHelper(s), e.SHA1);
      }, function(e, t, r) {
        var n;
        e.exports = (e = r(5), r = e.lib.Base, n = e.enc.Utf8, void (e.algo.HMAC = r.extend({ init: function(e2, t2) {
          e2 = this._hasher = new e2.init(), "string" == typeof t2 && (t2 = n.parse(t2));
          for (var r2 = e2.blockSize, i = 4 * r2, o = (e2 = ((t2 = t2.sigBytes > i ? e2.finalize(t2) : t2).clamp(), this._oKey = t2.clone()), t2 = this._iKey = t2.clone(), e2.words), s = t2.words, a = 0; a < r2; a++)
            o[a] ^= 1549556828, s[a] ^= 909522486;
          e2.sigBytes = t2.sigBytes = i, this.reset();
        }, reset: function() {
          var e2 = this._hasher;
          e2.reset(), e2.update(this._iKey);
        }, update: function(e2) {
          return this._hasher.update(e2), this;
        }, finalize: function(e2) {
          var t2 = this._hasher;
          e2 = t2.finalize(e2);
          return t2.reset(), t2.finalize(this._oKey.clone().concat(e2));
        } })));
      }, function(e, t, r) {
        var n, i, o, s, a, u, c, l, d, p, h, f;
        e.exports = (e = r(5), r(22), void (e.lib.Cipher || (r = (e = e).lib, n = r.Base, i = r.WordArray, o = r.BufferedBlockAlgorithm, (d = e.enc).Utf8, s = d.Base64, a = e.algo.EvpKDF, u = r.Cipher = o.extend({ cfg: n.extend(), createEncryptor: function(e2, t2) {
          return this.create(this._ENC_XFORM_MODE, e2, t2);
        }, createDecryptor: function(e2, t2) {
          return this.create(this._DEC_XFORM_MODE, e2, t2);
        }, init: function(e2, t2, r2) {
          this.cfg = this.cfg.extend(r2), this._xformMode = e2, this._key = t2, this.reset();
        }, reset: function() {
          o.reset.call(this), this._doReset();
        }, process: function(e2) {
          return this._append(e2), this._process();
        }, finalize: function(e2) {
          return e2 && this._append(e2), this._doFinalize();
        }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: /* @__PURE__ */ function() {
          function e2(e3) {
            return "string" == typeof e3 ? f : p;
          }
          return function(t2) {
            return { encrypt: function(r2, n2, i2) {
              return e2(n2).encrypt(t2, r2, n2, i2);
            }, decrypt: function(r2, n2, i2) {
              return e2(n2).decrypt(t2, r2, n2, i2);
            } };
          };
        }() }), r.StreamCipher = u.extend({ _doFinalize: function() {
          return this._process(true);
        }, blockSize: 1 }), d = e.mode = {}, c = r.BlockCipherMode = n.extend({ createEncryptor: function(e2, t2) {
          return this.Encryptor.create(e2, t2);
        }, createDecryptor: function(e2, t2) {
          return this.Decryptor.create(e2, t2);
        }, init: function(e2, t2) {
          this._cipher = e2, this._iv = t2;
        } }), d = d.CBC = function() {
          var e2 = c.extend();
          function t2(e3, t3, r2) {
            var n2, i2 = this._iv;
            i2 ? (n2 = i2, this._iv = void 0) : n2 = this._prevBlock;
            for (var o2 = 0; o2 < r2; o2++)
              e3[t3 + o2] ^= n2[o2];
          }
          return e2.Encryptor = e2.extend({ processBlock: function(e3, r2) {
            var n2 = this._cipher, i2 = n2.blockSize;
            t2.call(this, e3, r2, i2), n2.encryptBlock(e3, r2), this._prevBlock = e3.slice(r2, r2 + i2);
          } }), e2.Decryptor = e2.extend({ processBlock: function(e3, r2) {
            var n2 = this._cipher, i2 = n2.blockSize, o2 = e3.slice(r2, r2 + i2);
            n2.decryptBlock(e3, r2), t2.call(this, e3, r2, i2), this._prevBlock = o2;
          } }), e2;
        }(), h = (e.pad = {}).Pkcs7 = { pad: function(e2, t2) {
          for (var r2 = (t2 = 4 * t2) - e2.sigBytes % t2, n2 = r2 << 24 | r2 << 16 | r2 << 8 | r2, o2 = [], s2 = 0; s2 < r2; s2 += 4)
            o2.push(n2);
          t2 = i.create(o2, r2), e2.concat(t2);
        }, unpad: function(e2) {
          var t2 = 255 & e2.words[e2.sigBytes - 1 >>> 2];
          e2.sigBytes -= t2;
        } }, r.BlockCipher = u.extend({ cfg: u.cfg.extend({ mode: d, padding: h }), reset: function() {
          u.reset.call(this);
          var e2, t2 = (r2 = this.cfg).iv, r2 = r2.mode;
          this._xformMode == this._ENC_XFORM_MODE ? e2 = r2.createEncryptor : (e2 = r2.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == e2 ? this._mode.init(this, t2 && t2.words) : (this._mode = e2.call(r2, this, t2 && t2.words), this._mode.__creator = e2);
        }, _doProcessBlock: function(e2, t2) {
          this._mode.processBlock(e2, t2);
        }, _doFinalize: function() {
          var e2, t2 = this.cfg.padding;
          return this._xformMode == this._ENC_XFORM_MODE ? (t2.pad(this._data, this.blockSize), e2 = this._process(true)) : (e2 = this._process(true), t2.unpad(e2)), e2;
        }, blockSize: 4 }), l = r.CipherParams = n.extend({ init: function(e2) {
          this.mixIn(e2);
        }, toString: function(e2) {
          return (e2 || this.formatter).stringify(this);
        } }), d = (e.format = {}).OpenSSL = { stringify: function(e2) {
          var t2 = e2.ciphertext;
          return (e2 = (e2 = e2.salt) ? i.create([1398893684, 1701076831]).concat(e2).concat(t2) : t2).toString(s);
        }, parse: function(e2) {
          var t2, r2 = (e2 = s.parse(e2)).words;
          return 1398893684 == r2[0] && 1701076831 == r2[1] && (t2 = i.create(r2.slice(2, 4)), r2.splice(0, 4), e2.sigBytes -= 16), l.create({ ciphertext: e2, salt: t2 });
        } }, p = r.SerializableCipher = n.extend({ cfg: n.extend({ format: d }), encrypt: function(e2, t2, r2, n2) {
          n2 = this.cfg.extend(n2);
          t2 = (i2 = e2.createEncryptor(r2, n2)).finalize(t2);
          var i2 = i2.cfg;
          return l.create({ ciphertext: t2, key: r2, iv: i2.iv, algorithm: e2, mode: i2.mode, padding: i2.padding, blockSize: e2.blockSize, formatter: n2.format });
        }, decrypt: function(e2, t2, r2, n2) {
          return n2 = this.cfg.extend(n2), t2 = this._parse(t2, n2.format), e2.createDecryptor(r2, n2).finalize(t2.ciphertext);
        }, _parse: function(e2, t2) {
          return "string" == typeof e2 ? t2.parse(e2, this) : e2;
        } }), h = (e.kdf = {}).OpenSSL = { execute: function(e2, t2, r2, n2) {
          return n2 = n2 || i.random(8), e2 = a.create({ keySize: t2 + r2 }).compute(e2, n2), r2 = i.create(e2.words.slice(t2), 4 * r2), e2.sigBytes = 4 * t2, l.create({ key: e2, iv: r2, salt: n2 });
        } }, f = r.PasswordBasedCipher = p.extend({ cfg: p.cfg.extend({ kdf: h }), encrypt: function(e2, t2, r2, n2) {
          return r2 = (n2 = this.cfg.extend(n2)).kdf.execute(r2, e2.keySize, e2.ivSize), n2.iv = r2.iv, (e2 = p.encrypt.call(this, e2, t2, r2.key, n2)).mixIn(r2), e2;
        }, decrypt: function(e2, t2, r2, n2) {
          return n2 = this.cfg.extend(n2), t2 = this._parse(t2, n2.format), r2 = n2.kdf.execute(r2, e2.keySize, e2.ivSize, t2.salt), n2.iv = r2.iv, p.decrypt.call(this, e2, t2, r2.key, n2);
        } }))));
      }, function(e, t, r) {
        var n = { "./ZIMFileStoreBase": 40, "./ZIMFileStoreBase.ts": 40, "./ZIMFileStoreImpl": 41, "./ZIMFileStoreImpl.ts": 41, "./ZIMIDBImpl": 42, "./ZIMIDBImpl.ts": 42 };
        function i(e2) {
          return e2 = o(e2), r(e2);
        }
        function o(e2) {
          if (r.o(n, e2))
            return n[e2];
          throw (e2 = new Error("Cannot find module '" + e2 + "'")).code = "MODULE_NOT_FOUND", e2;
        }
        i.keys = function() {
          return Object.keys(n);
        }, i.resolve = o, (e.exports = i).id = 100;
      }, function(e, t, r) {
        "use strict";
        var n = t;
        function i() {
          n.util._configure(), n.Writer._configure(n.BufferWriter), n.Reader._configure(n.BufferReader);
        }
        n.build = "minimal", n.Writer = r(43), n.BufferWriter = r(110), n.Reader = r(44), n.BufferReader = r(111), n.util = r(10), n.rpc = r(112), n.roots = r(114), n.configure = i, i();
      }, function(e, t, r) {
        "use strict";
        e.exports = function(e2, t2) {
          for (var r2 = new Array(arguments.length - 1), n = 0, i = 2, o = true; i < arguments.length; )
            r2[n++] = arguments[i++];
          return new Promise(function(i2, s) {
            r2[n] = function(e3) {
              if (o)
                if (o = false, e3)
                  s(e3);
                else {
                  for (var t3 = new Array(arguments.length - 1), r3 = 0; r3 < t3.length; )
                    t3[r3++] = arguments[r3];
                  i2.apply(null, t3);
                }
            };
            try {
              e2.apply(t2 || null, r2);
            } catch (e3) {
              o && (o = false, s(e3));
            }
          });
        };
      }, function(e, t, r) {
        "use strict";
        t.length = function(e2) {
          var t2 = e2.length;
          if (!t2)
            return 0;
          for (var r2 = 0; 1 < --t2 % 4 && "=" === e2.charAt(t2); )
            ++r2;
          return Math.ceil(3 * e2.length) / 4 - r2;
        };
        for (var n = new Array(64), i = new Array(123), o = 0; o < 64; )
          i[n[o] = o < 26 ? o + 65 : o < 52 ? o + 71 : o < 62 ? o - 4 : o - 59 | 43] = o++;
        t.encode = function(e2, t2, r2) {
          for (var i2, o2 = null, s2 = [], a = 0, u = 0; t2 < r2; ) {
            var c = e2[t2++];
            switch (u) {
              case 0:
                s2[a++] = n[c >> 2], i2 = (3 & c) << 4, u = 1;
                break;
              case 1:
                s2[a++] = n[i2 | c >> 4], i2 = (15 & c) << 2, u = 2;
                break;
              case 2:
                s2[a++] = n[i2 | c >> 6], s2[a++] = n[63 & c], u = 0;
            }
            8191 < a && ((o2 = o2 || []).push(String.fromCharCode.apply(String, s2)), a = 0);
          }
          return u && (s2[a++] = n[i2], s2[a++] = 61, 1 === u && (s2[a++] = 61)), o2 ? (a && o2.push(String.fromCharCode.apply(String, s2.slice(0, a))), o2.join("")) : String.fromCharCode.apply(String, s2.slice(0, a));
        };
        var s = "invalid encoding";
        t.decode = function(e2, t2, r2) {
          for (var n2, o2 = r2, a = 0, u = 0; u < e2.length; ) {
            var c = e2.charCodeAt(u++);
            if (61 === c && 1 < a)
              break;
            if (void 0 === (c = i[c]))
              throw Error(s);
            switch (a) {
              case 0:
                n2 = c, a = 1;
                break;
              case 1:
                t2[r2++] = n2 << 2 | (48 & c) >> 4, n2 = c, a = 2;
                break;
              case 2:
                t2[r2++] = (15 & n2) << 4 | (60 & c) >> 2, n2 = c, a = 3;
                break;
              case 3:
                t2[r2++] = (3 & n2) << 6 | c, a = 0;
            }
          }
          if (1 === a)
            throw Error(s);
          return r2 - o2;
        }, t.test = function(e2) {
          return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e2);
        };
      }, function(e, t, r) {
        "use strict";
        function n() {
          this._listeners = {};
        }
        (e.exports = n).prototype.on = function(e2, t2, r2) {
          return (this._listeners[e2] || (this._listeners[e2] = [])).push({ fn: t2, ctx: r2 || this }), this;
        }, n.prototype.off = function(e2, t2) {
          if (void 0 === e2)
            this._listeners = {};
          else if (void 0 === t2)
            this._listeners[e2] = [];
          else
            for (var r2 = this._listeners[e2], n2 = 0; n2 < r2.length; )
              r2[n2].fn === t2 ? r2.splice(n2, 1) : ++n2;
          return this;
        }, n.prototype.emit = function(e2) {
          var t2 = this._listeners[e2];
          if (t2) {
            for (var r2 = [], n2 = 1; n2 < arguments.length; )
              r2.push(arguments[n2++]);
            for (n2 = 0; n2 < t2.length; )
              t2[n2].fn.apply(t2[n2++].ctx, r2);
          }
          return this;
        };
      }, function(e, t, r) {
        "use strict";
        function n(e2) {
          function t2(e3, t3, r3, n3) {
            var i2 = t3 < 0 ? 1 : 0;
            0 === (t3 = i2 ? -t3 : t3) ? e3(0 < 1 / t3 ? 0 : 2147483648, r3, n3) : isNaN(t3) ? e3(2143289344, r3, n3) : e3(34028234663852886e22 < t3 ? (i2 << 31 | 2139095040) >>> 0 : t3 < 11754943508222875e-54 ? (i2 << 31 | Math.round(t3 / 1401298464324817e-60)) >>> 0 : (i2 << 31 | (e3 = Math.floor(Math.log(t3) / Math.LN2)) + 127 << 23 | 8388607 & Math.round(t3 * Math.pow(2, -e3) * 8388608)) >>> 0, r3, n3);
          }
          function r2(e3, t3, r3) {
            return t3 = 2 * ((e3 = e3(t3, r3)) >> 31) + 1, r3 = e3 >>> 23 & 255, e3 &= 8388607, 255 == r3 ? e3 ? NaN : 1 / 0 * t3 : 0 == r3 ? 1401298464324817e-60 * t3 * e3 : t3 * Math.pow(2, r3 - 150) * (8388608 + e3);
          }
          function n2(e3, t3, r3) {
            d[0] = e3, t3[r3] = p[0], t3[r3 + 1] = p[1], t3[r3 + 2] = p[2], t3[r3 + 3] = p[3];
          }
          function u(e3, t3, r3) {
            d[0] = e3, t3[r3] = p[3], t3[r3 + 1] = p[2], t3[r3 + 2] = p[1], t3[r3 + 3] = p[0];
          }
          function c(e3, t3) {
            return p[0] = e3[t3], p[1] = e3[t3 + 1], p[2] = e3[t3 + 2], p[3] = e3[t3 + 3], d[0];
          }
          function l(e3, t3) {
            return p[3] = e3[t3], p[2] = e3[t3 + 1], p[1] = e3[t3 + 2], p[0] = e3[t3 + 3], d[0];
          }
          var d, p, h, f, g;
          function m(e3, t3, r3, n3, i2, o2) {
            var s2, a2, u2 = n3 < 0 ? 1 : 0;
            0 === (n3 = u2 ? -n3 : n3) ? (e3(0, i2, o2 + t3), e3(0 < 1 / n3 ? 0 : 2147483648, i2, o2 + r3)) : isNaN(n3) ? (e3(0, i2, o2 + t3), e3(2146959360, i2, o2 + r3)) : 17976931348623157e292 < n3 ? (e3(0, i2, o2 + t3), e3((u2 << 31 | 2146435072) >>> 0, i2, o2 + r3)) : n3 < 22250738585072014e-324 ? (e3((s2 = n3 / 5e-324) >>> 0, i2, o2 + t3), e3((u2 << 31 | s2 / 4294967296) >>> 0, i2, o2 + r3)) : (1024 === (a2 = Math.floor(Math.log(n3) / Math.LN2)) && (a2 = 1023), e3(4503599627370496 * (s2 = n3 * Math.pow(2, -a2)) >>> 0, i2, o2 + t3), e3((u2 << 31 | a2 + 1023 << 20 | 1048576 * s2 & 1048575) >>> 0, i2, o2 + r3));
          }
          function _(e3, t3, r3, n3, i2) {
            return t3 = e3(n3, i2 + t3), n3 = 2 * ((e3 = e3(n3, i2 + r3)) >> 31) + 1, r3 = 4294967296 * (1048575 & e3) + t3, 2047 == (i2 = e3 >>> 20 & 2047) ? r3 ? NaN : 1 / 0 * n3 : 0 == i2 ? 5e-324 * n3 * r3 : n3 * Math.pow(2, i2 - 1075) * (r3 + 4503599627370496);
          }
          function b(e3, t3, r3) {
            h[0] = e3, t3[r3] = f[0], t3[r3 + 1] = f[1], t3[r3 + 2] = f[2], t3[r3 + 3] = f[3], t3[r3 + 4] = f[4], t3[r3 + 5] = f[5], t3[r3 + 6] = f[6], t3[r3 + 7] = f[7];
          }
          function v(e3, t3, r3) {
            h[0] = e3, t3[r3] = f[7], t3[r3 + 1] = f[6], t3[r3 + 2] = f[5], t3[r3 + 3] = f[4], t3[r3 + 4] = f[3], t3[r3 + 5] = f[2], t3[r3 + 6] = f[1], t3[r3 + 7] = f[0];
          }
          function y(e3, t3) {
            return f[0] = e3[t3], f[1] = e3[t3 + 1], f[2] = e3[t3 + 2], f[3] = e3[t3 + 3], f[4] = e3[t3 + 4], f[5] = e3[t3 + 5], f[6] = e3[t3 + 6], f[7] = e3[t3 + 7], h[0];
          }
          function M(e3, t3) {
            return f[7] = e3[t3], f[6] = e3[t3 + 1], f[5] = e3[t3 + 2], f[4] = e3[t3 + 3], f[3] = e3[t3 + 4], f[2] = e3[t3 + 5], f[1] = e3[t3 + 6], f[0] = e3[t3 + 7], h[0];
          }
          return "undefined" != typeof Float32Array ? (d = new Float32Array([-0]), g = 128 === (p = new Uint8Array(d.buffer))[3], e2.writeFloatLE = g ? n2 : u, e2.writeFloatBE = g ? u : n2, e2.readFloatLE = g ? c : l, e2.readFloatBE = g ? l : c) : (e2.writeFloatLE = t2.bind(null, i), e2.writeFloatBE = t2.bind(null, o), e2.readFloatLE = r2.bind(null, s), e2.readFloatBE = r2.bind(null, a)), "undefined" != typeof Float64Array ? (h = new Float64Array([-0]), g = 128 === (f = new Uint8Array(h.buffer))[7], e2.writeDoubleLE = g ? b : v, e2.writeDoubleBE = g ? v : b, e2.readDoubleLE = g ? y : M, e2.readDoubleBE = g ? M : y) : (e2.writeDoubleLE = m.bind(null, i, 0, 4), e2.writeDoubleBE = m.bind(null, o, 4, 0), e2.readDoubleLE = _.bind(null, s, 0, 4), e2.readDoubleBE = _.bind(null, a, 4, 0)), e2;
        }
        function i(e2, t2, r2) {
          t2[r2] = 255 & e2, t2[r2 + 1] = e2 >>> 8 & 255, t2[r2 + 2] = e2 >>> 16 & 255, t2[r2 + 3] = e2 >>> 24;
        }
        function o(e2, t2, r2) {
          t2[r2] = e2 >>> 24, t2[r2 + 1] = e2 >>> 16 & 255, t2[r2 + 2] = e2 >>> 8 & 255, t2[r2 + 3] = 255 & e2;
        }
        function s(e2, t2) {
          return (e2[t2] | e2[t2 + 1] << 8 | e2[t2 + 2] << 16 | e2[t2 + 3] << 24) >>> 0;
        }
        function a(e2, t2) {
          return (e2[t2] << 24 | e2[t2 + 1] << 16 | e2[t2 + 2] << 8 | e2[t2 + 3]) >>> 0;
        }
        e.exports = n(n);
      }, function(module, exports, __webpack_require__) {
        "use strict";
        function inquire(moduleName) {
          try {
            var mod = eval("quire".replace(/^/, "re"))(moduleName);
            if (mod && (mod.length || Object.keys(mod).length))
              return mod;
          } catch (e) {
          }
          return null;
        }
        module.exports = inquire;
      }, function(e, t, r) {
        "use strict";
        t.length = function(e2) {
          for (var t2, r2 = 0, n = 0; n < e2.length; ++n)
            (t2 = e2.charCodeAt(n)) < 128 ? r2 += 1 : t2 < 2048 ? r2 += 2 : 55296 == (64512 & t2) && 56320 == (64512 & e2.charCodeAt(n + 1)) ? (++n, r2 += 4) : r2 += 3;
          return r2;
        }, t.read = function(e2, t2, r2) {
          if (r2 - t2 < 1)
            return "";
          for (var n, i = null, o = [], s = 0; t2 < r2; )
            (n = e2[t2++]) < 128 ? o[s++] = n : 191 < n && n < 224 ? o[s++] = (31 & n) << 6 | 63 & e2[t2++] : 239 < n && n < 365 ? (n = ((7 & n) << 18 | (63 & e2[t2++]) << 12 | (63 & e2[t2++]) << 6 | 63 & e2[t2++]) - 65536, o[s++] = 55296 + (n >> 10), o[s++] = 56320 + (1023 & n)) : o[s++] = (15 & n) << 12 | (63 & e2[t2++]) << 6 | 63 & e2[t2++], 8191 < s && ((i = i || []).push(String.fromCharCode.apply(String, o)), s = 0);
          return i ? (s && i.push(String.fromCharCode.apply(String, o.slice(0, s))), i.join("")) : String.fromCharCode.apply(String, o.slice(0, s));
        }, t.write = function(e2, t2, r2) {
          for (var n, i, o = r2, s = 0; s < e2.length; ++s)
            (n = e2.charCodeAt(s)) < 128 ? t2[r2++] = n : (n < 2048 ? t2[r2++] = n >> 6 | 192 : (55296 == (64512 & n) && 56320 == (64512 & (i = e2.charCodeAt(s + 1))) ? (++s, t2[r2++] = (n = 65536 + ((1023 & n) << 10) + (1023 & i)) >> 18 | 240, t2[r2++] = n >> 12 & 63 | 128) : t2[r2++] = n >> 12 | 224, t2[r2++] = n >> 6 & 63 | 128), t2[r2++] = 63 & n | 128);
          return r2 - o;
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = function(e2, t2, r2) {
          var n = r2 || 8192, i = n >>> 1, o = null, s = n;
          return function(r3) {
            return r3 < 1 || i < r3 ? e2(r3) : (n < s + r3 && (o = e2(n), s = 0), r3 = t2.call(o, s, s += r3), 7 & s && (s = 1 + (7 | s)), r3);
          };
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = i;
        var n = r(10);
        function i(e2, t2) {
          this.lo = e2 >>> 0, this.hi = t2 >>> 0;
        }
        var o = i.zero = new i(0, 0), s = (o.toNumber = function() {
          return 0;
        }, o.zzEncode = o.zzDecode = function() {
          return this;
        }, o.length = function() {
          return 1;
        }, i.zeroHash = "\0\0\0\0\0\0\0\0", i.fromNumber = function(e2) {
          if (0 === e2)
            return o;
          var t2 = e2 < 0, r2 = (e2 = t2 ? -e2 : e2) >>> 0;
          e2 = (e2 - r2) / 4294967296 >>> 0;
          return t2 && (e2 = ~e2 >>> 0, r2 = ~r2 >>> 0, 4294967295 < ++r2 && (r2 = 0, 4294967295 < ++e2 && (e2 = 0))), new i(r2, e2);
        }, i.from = function(e2) {
          if ("number" == typeof e2)
            return i.fromNumber(e2);
          if (n.isString(e2)) {
            if (!n.Long)
              return i.fromNumber(parseInt(e2, 10));
            e2 = n.Long.fromString(e2);
          }
          return e2.low || e2.high ? new i(e2.low >>> 0, e2.high >>> 0) : o;
        }, i.prototype.toNumber = function(e2) {
          var t2;
          return !e2 && this.hi >>> 31 ? (e2 = 1 + ~this.lo >>> 0, t2 = ~this.hi >>> 0, -(e2 + 4294967296 * (t2 = e2 ? t2 : t2 + 1 >>> 0))) : this.lo + 4294967296 * this.hi;
        }, i.prototype.toLong = function(e2) {
          return n.Long ? new n.Long(0 | this.lo, 0 | this.hi, Boolean(e2)) : { low: 0 | this.lo, high: 0 | this.hi, unsigned: Boolean(e2) };
        }, String.prototype.charCodeAt);
        i.fromHash = function(e2) {
          return "\0\0\0\0\0\0\0\0" === e2 ? o : new i((s.call(e2, 0) | s.call(e2, 1) << 8 | s.call(e2, 2) << 16 | s.call(e2, 3) << 24) >>> 0, (s.call(e2, 4) | s.call(e2, 5) << 8 | s.call(e2, 6) << 16 | s.call(e2, 7) << 24) >>> 0);
        }, i.prototype.toHash = function() {
          return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
        }, i.prototype.zzEncode = function() {
          var e2 = this.hi >> 31;
          return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e2) >>> 0, this.lo = (this.lo << 1 ^ e2) >>> 0, this;
        }, i.prototype.zzDecode = function() {
          var e2 = -(1 & this.lo);
          return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e2) >>> 0, this.hi = (this.hi >>> 1 ^ e2) >>> 0, this;
        }, i.prototype.length = function() {
          var e2 = this.lo, t2 = (this.lo >>> 28 | this.hi << 4) >>> 0, r2 = this.hi >>> 24;
          return 0 == r2 ? 0 == t2 ? e2 < 16384 ? e2 < 128 ? 1 : 2 : e2 < 2097152 ? 3 : 4 : t2 < 16384 ? t2 < 128 ? 5 : 6 : t2 < 2097152 ? 7 : 8 : r2 < 128 ? 9 : 10;
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = o;
        var n = r(43), i = ((o.prototype = Object.create(n.prototype)).constructor = o, r(10));
        function o() {
          n.call(this);
        }
        function s(e2, t2, r2) {
          e2.length < 40 ? i.utf8.write(e2, t2, r2) : t2.utf8Write ? t2.utf8Write(e2, r2) : t2.write(e2, r2);
        }
        o._configure = function() {
          o.alloc = i._Buffer_allocUnsafe, o.writeBytesBuffer = i.Buffer && i.Buffer.prototype instanceof Uint8Array && "set" === i.Buffer.prototype.set.name ? function(e2, t2, r2) {
            t2.set(e2, r2);
          } : function(e2, t2, r2) {
            if (e2.copy)
              e2.copy(t2, r2, 0, e2.length);
            else
              for (var n2 = 0; n2 < e2.length; )
                t2[r2++] = e2[n2++];
          };
        }, o.prototype.bytes = function(e2) {
          var t2 = (e2 = i.isString(e2) ? i._Buffer_from(e2, "base64") : e2).length >>> 0;
          return this.uint32(t2), t2 && this._push(o.writeBytesBuffer, t2, e2), this;
        }, o.prototype.string = function(e2) {
          var t2 = i.Buffer.byteLength(e2);
          return this.uint32(t2), t2 && this._push(s, t2, e2), this;
        }, o._configure();
      }, function(e, t, r) {
        "use strict";
        e.exports = o;
        var n = r(44), i = ((o.prototype = Object.create(n.prototype)).constructor = o, r(10));
        function o(e2) {
          n.call(this, e2);
        }
        o._configure = function() {
          i.Buffer && (o.prototype._slice = i.Buffer.prototype.slice);
        }, o.prototype.string = function() {
          var e2 = this.uint32();
          return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e2, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e2, this.len));
        }, o._configure();
      }, function(e, t, r) {
        "use strict";
        t.Service = r(113);
      }, function(e, t, r) {
        "use strict";
        e.exports = i;
        var n = r(10);
        function i(e2, t2, r2) {
          if ("function" != typeof e2)
            throw TypeError("rpcImpl must be a function");
          n.EventEmitter.call(this), this.rpcImpl = e2, this.requestDelimited = Boolean(t2), this.responseDelimited = Boolean(r2);
        }
        ((i.prototype = Object.create(n.EventEmitter.prototype)).constructor = i).prototype.rpcCall = function e2(t2, r2, i2, o, s) {
          if (!o)
            throw TypeError("request must be specified");
          var a = this;
          if (!s)
            return n.asPromise(e2, a, t2, r2, i2, o);
          if (a.rpcImpl)
            try {
              return a.rpcImpl(t2, r2[a.requestDelimited ? "encodeDelimited" : "encode"](o).finish(), function(e3, r3) {
                if (e3)
                  return a.emit("error", e3, t2), s(e3);
                if (null !== r3) {
                  if (!(r3 instanceof i2))
                    try {
                      r3 = i2[a.responseDelimited ? "decodeDelimited" : "decode"](r3);
                    } catch (e4) {
                      return a.emit("error", e4, t2), s(e4);
                    }
                  return a.emit("data", r3, t2), s(null, r3);
                }
                a.end(true);
              });
            } catch (e3) {
              return a.emit("error", e3, t2), void setTimeout(function() {
                s(e3);
              }, 0);
            }
          else
            setTimeout(function() {
              s(Error("already ended"));
            }, 0);
        }, i.prototype.end = function(e2) {
          return this.rpcImpl && (e2 || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this;
        };
      }, function(e, t, r) {
        "use strict";
        e.exports = {};
      }, function(e, t, r) {
        var n = { "./formdata": 50, "./formdata.ts": 50, "./zego.fileHandler": 51, "./zego.fileHandler.ts": 51, "./zego.storeHandler": 52, "./zego.storeHandler.ts": 52 };
        function i(e2) {
          return e2 = o(e2), r(e2);
        }
        function o(e2) {
          if (r.o(n, e2))
            return n[e2];
          throw (e2 = new Error("Cannot find module '" + e2 + "'")).code = "MODULE_NOT_FOUND", e2;
        }
        i.keys = function() {
          return Object.keys(n);
        }, i.resolve = o, (e.exports = i).id = 115;
      }, function(e, t, r) {
        "use strict";
        (function(e2) {
          var n = r(117), i = r(118), o = r(119);
          function s() {
            return u.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
          }
          function a(e3, t2) {
            if (s() < t2)
              throw new RangeError("Invalid typed array length");
            return u.TYPED_ARRAY_SUPPORT ? (e3 = new Uint8Array(t2)).__proto__ = u.prototype : (e3 = null === e3 ? new u(t2) : e3).length = t2, e3;
          }
          function u(e3, t2, r2) {
            if (!(u.TYPED_ARRAY_SUPPORT || this instanceof u))
              return new u(e3, t2, r2);
            if ("number" != typeof e3)
              return c(this, e3, t2, r2);
            if ("string" == typeof t2)
              throw new Error("If encoding is specified then the first argument must be a string");
            return d(this, e3);
          }
          function c(e3, t2, r2, n2) {
            if ("number" == typeof t2)
              throw new TypeError('"value" argument must not be a number');
            if ("undefined" != typeof ArrayBuffer && t2 instanceof ArrayBuffer) {
              var i2 = e3, s2 = t2, c2 = r2;
              if (s2.byteLength, c2 < 0 || s2.byteLength < c2)
                throw new RangeError("'offset' is out of bounds");
              if (s2.byteLength < c2 + (n2 || 0))
                throw new RangeError("'length' is out of bounds");
              return s2 = void 0 === c2 && void 0 === n2 ? new Uint8Array(s2) : void 0 === n2 ? new Uint8Array(s2, c2) : new Uint8Array(s2, c2, n2), u.TYPED_ARRAY_SUPPORT ? (i2 = s2).__proto__ = u.prototype : i2 = p(i2, s2), i2;
            }
            if ("string" != typeof t2) {
              if (c2 = e3, n2 = t2, u.isBuffer(n2))
                return 0 === (c2 = a(c2, s2 = 0 | h(n2.length))).length || n2.copy(c2, 0, 0, s2), c2;
              if (n2) {
                if ("undefined" != typeof ArrayBuffer && n2.buffer instanceof ArrayBuffer || "length" in n2)
                  return "number" != typeof n2.length || function(e4) {
                    return e4 != e4;
                  }(n2.length) ? a(c2, 0) : p(c2, n2);
                if ("Buffer" === n2.type && o(n2.data))
                  return p(c2, n2.data);
              }
              throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
            }
            if (i2 = e3, n2 = t2, e3 = r2, !u.isEncoding(e3 = "string" == typeof e3 && "" !== e3 ? e3 : "utf8"))
              throw new TypeError('"encoding" must be a valid string encoding');
            return (n2 = (i2 = a(i2, t2 = 0 | f(n2, e3))).write(n2, e3)) !== t2 ? i2.slice(0, n2) : i2;
          }
          function l(e3) {
            if ("number" != typeof e3)
              throw new TypeError('"size" argument must be a number');
            if (e3 < 0)
              throw new RangeError('"size" argument must not be negative');
          }
          function d(e3, t2) {
            if (l(t2), e3 = a(e3, t2 < 0 ? 0 : 0 | h(t2)), !u.TYPED_ARRAY_SUPPORT)
              for (var r2 = 0; r2 < t2; ++r2)
                e3[r2] = 0;
            return e3;
          }
          function p(e3, t2) {
            var r2 = t2.length < 0 ? 0 : 0 | h(t2.length);
            e3 = a(e3, r2);
            for (var n2 = 0; n2 < r2; n2 += 1)
              e3[n2] = 255 & t2[n2];
            return e3;
          }
          function h(e3) {
            if (e3 >= s())
              throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + s().toString(16) + " bytes");
            return 0 | e3;
          }
          function f(e3, t2) {
            if (u.isBuffer(e3))
              return e3.length;
            if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(e3) || e3 instanceof ArrayBuffer))
              return e3.byteLength;
            var r2 = (e3 = "string" != typeof e3 ? "" + e3 : e3).length;
            if (0 === r2)
              return 0;
            for (var n2 = false; ; )
              switch (t2) {
                case "ascii":
                case "latin1":
                case "binary":
                  return r2;
                case "utf8":
                case "utf-8":
                case void 0:
                  return x(e3).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return 2 * r2;
                case "hex":
                  return r2 >>> 1;
                case "base64":
                  return T(e3).length;
                default:
                  if (n2)
                    return x(e3).length;
                  t2 = ("" + t2).toLowerCase(), n2 = true;
              }
          }
          function g(e3, t2, r2) {
            var i2, o2 = false;
            if ((t2 = void 0 === t2 || t2 < 0 ? 0 : t2) > this.length)
              return "";
            if ((r2 = void 0 === r2 || r2 > this.length ? this.length : r2) <= 0)
              return "";
            if ((r2 >>>= 0) <= (t2 >>>= 0))
              return "";
            for (e3 = e3 || "utf8"; ; )
              switch (e3) {
                case "hex":
                  var s2 = t2, a2 = r2, u2 = this.length;
                  (!a2 || a2 < 0 || u2 < a2) && (a2 = u2);
                  for (var c2 = "", l2 = s2 = !s2 || s2 < 0 ? 0 : s2; l2 < a2; ++l2)
                    c2 += function(e4) {
                      return e4 < 16 ? "0" + e4.toString(16) : e4.toString(16);
                    }(this[l2]);
                  return c2;
                case "utf8":
                case "utf-8":
                  return M(this, t2, r2);
                case "ascii":
                  u2 = t2;
                  var d2 = r2, p2 = "";
                  d2 = Math.min(this.length, d2);
                  for (var h2 = u2; h2 < d2; ++h2)
                    p2 += String.fromCharCode(127 & this[h2]);
                  return p2;
                case "latin1":
                case "binary":
                  s2 = t2;
                  var f2 = r2, g2 = "";
                  f2 = Math.min(this.length, f2);
                  for (var m2 = s2; m2 < f2; ++m2)
                    g2 += String.fromCharCode(this[m2]);
                  return g2;
                case "base64":
                  return _2 = this, i2 = r2, 0 === (b2 = t2) && i2 === _2.length ? n.fromByteArray(_2) : n.fromByteArray(_2.slice(b2, i2));
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  for (var _2 = t2, b2 = r2, v2 = this.slice(_2, b2), y2 = "", k2 = 0; k2 < v2.length; k2 += 2)
                    y2 += String.fromCharCode(v2[k2] + 256 * v2[k2 + 1]);
                  return y2;
                default:
                  if (o2)
                    throw new TypeError("Unknown encoding: " + e3);
                  e3 = (e3 + "").toLowerCase(), o2 = true;
              }
          }
          function m(e3, t2, r2) {
            var n2 = e3[t2];
            e3[t2] = e3[r2], e3[r2] = n2;
          }
          function _(e3, t2, r2, n2, i2) {
            if (0 === e3.length)
              return -1;
            if ("string" == typeof r2 ? (n2 = r2, r2 = 0) : 2147483647 < r2 ? r2 = 2147483647 : r2 < -2147483648 && (r2 = -2147483648), r2 = +r2, (r2 = (r2 = isNaN(r2) ? i2 ? 0 : e3.length - 1 : r2) < 0 ? e3.length + r2 : r2) >= e3.length) {
              if (i2)
                return -1;
              r2 = e3.length - 1;
            } else if (r2 < 0) {
              if (!i2)
                return -1;
              r2 = 0;
            }
            if ("string" == typeof t2 && (t2 = u.from(t2, n2)), u.isBuffer(t2))
              return 0 === t2.length ? -1 : b(e3, t2, r2, n2, i2);
            if ("number" == typeof t2)
              return t2 &= 255, u.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? (i2 ? Uint8Array.prototype.indexOf : Uint8Array.prototype.lastIndexOf).call(e3, t2, r2) : b(e3, [t2], r2, n2, i2);
            throw new TypeError("val must be string, number or Buffer");
          }
          function b(e3, t2, r2, n2, i2) {
            var o2 = 1, s2 = e3.length, a2 = t2.length;
            if (void 0 !== n2 && ("ucs2" === (n2 = String(n2).toLowerCase()) || "ucs-2" === n2 || "utf16le" === n2 || "utf-16le" === n2)) {
              if (e3.length < 2 || t2.length < 2)
                return -1;
              s2 /= o2 = 2, a2 /= 2, r2 /= 2;
            }
            function u2(e4, t3) {
              return 1 === o2 ? e4[t3] : e4.readUInt16BE(t3 * o2);
            }
            if (i2)
              for (var c2 = -1, l2 = r2; l2 < s2; l2++)
                if (u2(e3, l2) === u2(t2, -1 === c2 ? 0 : l2 - c2)) {
                  if (l2 - (c2 = -1 === c2 ? l2 : c2) + 1 === a2)
                    return c2 * o2;
                } else
                  -1 !== c2 && (l2 -= l2 - c2), c2 = -1;
            else
              for (l2 = r2 = s2 < r2 + a2 ? s2 - a2 : r2; 0 <= l2; l2--) {
                for (var d2 = true, p2 = 0; p2 < a2; p2++)
                  if (u2(e3, l2 + p2) !== u2(t2, p2)) {
                    d2 = false;
                    break;
                  }
                if (d2)
                  return l2;
              }
            return -1;
          }
          function v(e3, t2, r2, n2) {
            return L(function(e4) {
              for (var t3 = [], r3 = 0; r3 < e4.length; ++r3)
                t3.push(255 & e4.charCodeAt(r3));
              return t3;
            }(t2), e3, r2, n2);
          }
          function y(e3, t2, r2, n2) {
            return L(function(e4, t3) {
              for (var r3, n3, i2 = [], o2 = 0; o2 < e4.length && !((t3 -= 2) < 0); ++o2)
                r3 = (n3 = e4.charCodeAt(o2)) >> 8, n3 %= 256, i2.push(n3), i2.push(r3);
              return i2;
            }(t2, e3.length - r2), e3, r2, n2);
          }
          function M(e3, t2, r2) {
            r2 = Math.min(e3.length, r2);
            for (var n2 = [], i2 = t2; i2 < r2; ) {
              var o2, s2, a2, u2, c2 = e3[i2], l2 = null, d2 = 239 < c2 ? 4 : 223 < c2 ? 3 : 191 < c2 ? 2 : 1;
              if (i2 + d2 <= r2)
                switch (d2) {
                  case 1:
                    c2 < 128 && (l2 = c2);
                    break;
                  case 2:
                    128 == (192 & (o2 = e3[i2 + 1])) && 127 < (u2 = (31 & c2) << 6 | 63 & o2) && (l2 = u2);
                    break;
                  case 3:
                    o2 = e3[i2 + 1], s2 = e3[i2 + 2], 128 == (192 & o2) && 128 == (192 & s2) && 2047 < (u2 = (15 & c2) << 12 | (63 & o2) << 6 | 63 & s2) && (u2 < 55296 || 57343 < u2) && (l2 = u2);
                    break;
                  case 4:
                    o2 = e3[i2 + 1], s2 = e3[i2 + 2], a2 = e3[i2 + 3], 128 == (192 & o2) && 128 == (192 & s2) && 128 == (192 & a2) && 65535 < (u2 = (15 & c2) << 18 | (63 & o2) << 12 | (63 & s2) << 6 | 63 & a2) && u2 < 1114112 && (l2 = u2);
                }
              null === l2 ? (l2 = 65533, d2 = 1) : 65535 < l2 && (l2 -= 65536, n2.push(l2 >>> 10 & 1023 | 55296), l2 = 56320 | 1023 & l2), n2.push(l2), i2 += d2;
            }
            var p2 = n2, h2 = p2.length;
            if (h2 <= k)
              return String.fromCharCode.apply(String, p2);
            for (var f2 = "", g2 = 0; g2 < h2; )
              f2 += String.fromCharCode.apply(String, p2.slice(g2, g2 += k));
            return f2;
          }
          t.Buffer = u, t.SlowBuffer = function(e3) {
            return +e3 != e3 && (e3 = 0), u.alloc(+e3);
          }, t.INSPECT_MAX_BYTES = 50, u.TYPED_ARRAY_SUPPORT = void 0 !== e2.TYPED_ARRAY_SUPPORT ? e2.TYPED_ARRAY_SUPPORT : function() {
            try {
              var e3 = new Uint8Array(1);
              return e3.__proto__ = { __proto__: Uint8Array.prototype, foo: function() {
                return 42;
              } }, 42 === e3.foo() && "function" == typeof e3.subarray && 0 === e3.subarray(1, 1).byteLength;
            } catch (e4) {
              return false;
            }
          }(), t.kMaxLength = s(), u.poolSize = 8192, u._augment = function(e3) {
            return e3.__proto__ = u.prototype, e3;
          }, u.from = function(e3, t2, r2) {
            return c(null, e3, t2, r2);
          }, u.TYPED_ARRAY_SUPPORT && (u.prototype.__proto__ = Uint8Array.prototype, u.__proto__ = Uint8Array, "undefined" != typeof Symbol && Symbol.species && u[Symbol.species] === u && Object.defineProperty(u, Symbol.species, { value: null, configurable: true })), u.alloc = function(e3, t2, r2) {
            return n2 = null, t2 = t2, r2 = r2, l(e3 = e3), e3 <= 0 || void 0 === t2 ? a(n2, e3) : "string" == typeof r2 ? a(n2, e3).fill(t2, r2) : a(n2, e3).fill(t2);
            var n2;
          }, u.allocUnsafe = function(e3) {
            return d(null, e3);
          }, u.allocUnsafeSlow = function(e3) {
            return d(null, e3);
          }, u.isBuffer = function(e3) {
            return !(null == e3 || !e3._isBuffer);
          }, u.compare = function(e3, t2) {
            if (!u.isBuffer(e3) || !u.isBuffer(t2))
              throw new TypeError("Arguments must be Buffers");
            if (e3 === t2)
              return 0;
            for (var r2 = e3.length, n2 = t2.length, i2 = 0, o2 = Math.min(r2, n2); i2 < o2; ++i2)
              if (e3[i2] !== t2[i2]) {
                r2 = e3[i2], n2 = t2[i2];
                break;
              }
            return r2 < n2 ? -1 : n2 < r2 ? 1 : 0;
          }, u.isEncoding = function(e3) {
            switch (String(e3).toLowerCase()) {
              case "hex":
              case "utf8":
              case "utf-8":
              case "ascii":
              case "latin1":
              case "binary":
              case "base64":
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return true;
              default:
                return false;
            }
          }, u.concat = function(e3, t2) {
            if (!o(e3))
              throw new TypeError('"list" argument must be an Array of Buffers');
            if (0 === e3.length)
              return u.alloc(0);
            if (void 0 === t2)
              for (i2 = t2 = 0; i2 < e3.length; ++i2)
                t2 += e3[i2].length;
            for (var r2 = u.allocUnsafe(t2), n2 = 0, i2 = 0; i2 < e3.length; ++i2) {
              var s2 = e3[i2];
              if (!u.isBuffer(s2))
                throw new TypeError('"list" argument must be an Array of Buffers');
              s2.copy(r2, n2), n2 += s2.length;
            }
            return r2;
          }, u.byteLength = f, u.prototype._isBuffer = true, u.prototype.swap16 = function() {
            var e3 = this.length;
            if (e3 % 2 != 0)
              throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var t2 = 0; t2 < e3; t2 += 2)
              m(this, t2, t2 + 1);
            return this;
          }, u.prototype.swap32 = function() {
            var e3 = this.length;
            if (e3 % 4 != 0)
              throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var t2 = 0; t2 < e3; t2 += 4)
              m(this, t2, t2 + 3), m(this, t2 + 1, t2 + 2);
            return this;
          }, u.prototype.swap64 = function() {
            var e3 = this.length;
            if (e3 % 8 != 0)
              throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var t2 = 0; t2 < e3; t2 += 8)
              m(this, t2, t2 + 7), m(this, t2 + 1, t2 + 6), m(this, t2 + 2, t2 + 5), m(this, t2 + 3, t2 + 4);
            return this;
          }, u.prototype.toString = function() {
            var e3 = 0 | this.length;
            return 0 == e3 ? "" : 0 === arguments.length ? M(this, 0, e3) : g.apply(this, arguments);
          }, u.prototype.equals = function(e3) {
            if (u.isBuffer(e3))
              return this === e3 || 0 === u.compare(this, e3);
            throw new TypeError("Argument must be a Buffer");
          }, u.prototype.inspect = function() {
            var e3 = "", r2 = t.INSPECT_MAX_BYTES;
            return 0 < this.length && (e3 = this.toString("hex", 0, r2).match(/.{2}/g).join(" "), this.length > r2 && (e3 += " ... ")), "<Buffer " + e3 + ">";
          }, u.prototype.compare = function(e3, t2, r2, n2, i2) {
            if (!u.isBuffer(e3))
              throw new TypeError("Argument must be a Buffer");
            if (void 0 === r2 && (r2 = e3 ? e3.length : 0), void 0 === n2 && (n2 = 0), void 0 === i2 && (i2 = this.length), (t2 = void 0 === t2 ? 0 : t2) < 0 || r2 > e3.length || n2 < 0 || i2 > this.length)
              throw new RangeError("out of range index");
            if (i2 <= n2 && r2 <= t2)
              return 0;
            if (i2 <= n2)
              return -1;
            if (r2 <= t2)
              return 1;
            if (this === e3)
              return 0;
            for (var o2 = (i2 >>>= 0) - (n2 >>>= 0), s2 = (r2 >>>= 0) - (t2 >>>= 0), a2 = Math.min(o2, s2), c2 = this.slice(n2, i2), l2 = e3.slice(t2, r2), d2 = 0; d2 < a2; ++d2)
              if (c2[d2] !== l2[d2]) {
                o2 = c2[d2], s2 = l2[d2];
                break;
              }
            return o2 < s2 ? -1 : s2 < o2 ? 1 : 0;
          }, u.prototype.includes = function(e3, t2, r2) {
            return -1 !== this.indexOf(e3, t2, r2);
          }, u.prototype.indexOf = function(e3, t2, r2) {
            return _(this, e3, t2, r2, true);
          }, u.prototype.lastIndexOf = function(e3, t2, r2) {
            return _(this, e3, t2, r2, false);
          }, u.prototype.write = function(e3, t2, r2, n2) {
            if (void 0 === t2)
              n2 = "utf8", r2 = this.length, t2 = 0;
            else if (void 0 === r2 && "string" == typeof t2)
              n2 = t2, r2 = this.length, t2 = 0;
            else {
              if (!isFinite(t2))
                throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
              t2 |= 0, isFinite(r2) ? (r2 |= 0, void 0 === n2 && (n2 = "utf8")) : (n2 = r2, r2 = void 0);
            }
            var i2 = this.length - t2;
            if ((void 0 === r2 || i2 < r2) && (r2 = i2), 0 < e3.length && (r2 < 0 || t2 < 0) || t2 > this.length)
              throw new RangeError("Attempt to write outside buffer bounds");
            n2 = n2 || "utf8";
            for (var o2, s2, a2, u2 = false; ; )
              switch (n2) {
                case "hex":
                  var c2 = e3, l2 = t2, d2 = r2, p2 = (l2 = Number(l2) || 0, this.length - l2);
                  if ((!d2 || p2 < (d2 = Number(d2))) && (d2 = p2), (p2 = c2.length) % 2 != 0)
                    throw new TypeError("Invalid hex string");
                  p2 / 2 < d2 && (d2 = p2 / 2);
                  for (var h2 = 0; h2 < d2; ++h2) {
                    var f2 = parseInt(c2.substr(2 * h2, 2), 16);
                    if (isNaN(f2))
                      return h2;
                    this[l2 + h2] = f2;
                  }
                  return h2;
                case "utf8":
                case "utf-8":
                  return p2 = t2, a2 = r2, L(x(e3, (s2 = this).length - p2), s2, p2, a2);
                case "ascii":
                  return v(this, e3, t2, r2);
                case "latin1":
                case "binary":
                  return v(this, e3, t2, r2);
                case "base64":
                  return s2 = this, a2 = t2, o2 = r2, L(T(e3), s2, a2, o2);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return y(this, e3, t2, r2);
                default:
                  if (u2)
                    throw new TypeError("Unknown encoding: " + n2);
                  n2 = ("" + n2).toLowerCase(), u2 = true;
              }
          }, u.prototype.toJSON = function() {
            return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
          };
          var k = 4096;
          function C(e3, t2, r2) {
            if (e3 % 1 != 0 || e3 < 0)
              throw new RangeError("offset is not uint");
            if (r2 < e3 + t2)
              throw new RangeError("Trying to access beyond buffer length");
          }
          function I(e3, t2, r2, n2, i2, o2) {
            if (!u.isBuffer(e3))
              throw new TypeError('"buffer" argument must be a Buffer instance');
            if (i2 < t2 || t2 < o2)
              throw new RangeError('"value" argument is out of bounds');
            if (r2 + n2 > e3.length)
              throw new RangeError("Index out of range");
          }
          function S(e3, t2, r2, n2) {
            t2 < 0 && (t2 = 65535 + t2 + 1);
            for (var i2 = 0, o2 = Math.min(e3.length - r2, 2); i2 < o2; ++i2)
              e3[r2 + i2] = (t2 & 255 << 8 * (n2 ? i2 : 1 - i2)) >>> 8 * (n2 ? i2 : 1 - i2);
          }
          function D(e3, t2, r2, n2) {
            t2 < 0 && (t2 = 4294967295 + t2 + 1);
            for (var i2 = 0, o2 = Math.min(e3.length - r2, 4); i2 < o2; ++i2)
              e3[r2 + i2] = t2 >>> 8 * (n2 ? i2 : 3 - i2) & 255;
          }
          function q(e3, t2, r2, n2) {
            if (r2 + n2 > e3.length)
              throw new RangeError("Index out of range");
            if (r2 < 0)
              throw new RangeError("Index out of range");
          }
          function w(e3, t2, r2, n2, o2) {
            return o2 || q(e3, 0, r2, 4), i.write(e3, t2, r2, n2, 23, 4), r2 + 4;
          }
          function A(e3, t2, r2, n2, o2) {
            return o2 || q(e3, 0, r2, 8), i.write(e3, t2, r2, n2, 52, 8), r2 + 8;
          }
          u.prototype.slice = function(e3, t2) {
            var r2 = this.length;
            if ((e3 = ~~e3) < 0 ? (e3 += r2) < 0 && (e3 = 0) : r2 < e3 && (e3 = r2), (t2 = void 0 === t2 ? r2 : ~~t2) < 0 ? (t2 += r2) < 0 && (t2 = 0) : r2 < t2 && (t2 = r2), t2 < e3 && (t2 = e3), u.TYPED_ARRAY_SUPPORT)
              (i2 = this.subarray(e3, t2)).__proto__ = u.prototype;
            else
              for (var n2 = t2 - e3, i2 = new u(n2, void 0), o2 = 0; o2 < n2; ++o2)
                i2[o2] = this[o2 + e3];
            return i2;
          }, u.prototype.readUIntLE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || C(e3, t2, this.length);
            for (var n2 = this[e3], i2 = 1, o2 = 0; ++o2 < t2 && (i2 *= 256); )
              n2 += this[e3 + o2] * i2;
            return n2;
          }, u.prototype.readUIntBE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || C(e3, t2, this.length);
            for (var n2 = this[e3 + --t2], i2 = 1; 0 < t2 && (i2 *= 256); )
              n2 += this[e3 + --t2] * i2;
            return n2;
          }, u.prototype.readUInt8 = function(e3, t2) {
            return t2 || C(e3, 1, this.length), this[e3];
          }, u.prototype.readUInt16LE = function(e3, t2) {
            return t2 || C(e3, 2, this.length), this[e3] | this[e3 + 1] << 8;
          }, u.prototype.readUInt16BE = function(e3, t2) {
            return t2 || C(e3, 2, this.length), this[e3] << 8 | this[e3 + 1];
          }, u.prototype.readUInt32LE = function(e3, t2) {
            return t2 || C(e3, 4, this.length), (this[e3] | this[e3 + 1] << 8 | this[e3 + 2] << 16) + 16777216 * this[e3 + 3];
          }, u.prototype.readUInt32BE = function(e3, t2) {
            return t2 || C(e3, 4, this.length), 16777216 * this[e3] + (this[e3 + 1] << 16 | this[e3 + 2] << 8 | this[e3 + 3]);
          }, u.prototype.readIntLE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || C(e3, t2, this.length);
            for (var n2 = this[e3], i2 = 1, o2 = 0; ++o2 < t2 && (i2 *= 256); )
              n2 += this[e3 + o2] * i2;
            return (i2 *= 128) <= n2 && (n2 -= Math.pow(2, 8 * t2)), n2;
          }, u.prototype.readIntBE = function(e3, t2, r2) {
            e3 |= 0, t2 |= 0, r2 || C(e3, t2, this.length);
            for (var n2 = t2, i2 = 1, o2 = this[e3 + --n2]; 0 < n2 && (i2 *= 256); )
              o2 += this[e3 + --n2] * i2;
            return (i2 *= 128) <= o2 && (o2 -= Math.pow(2, 8 * t2)), o2;
          }, u.prototype.readInt8 = function(e3, t2) {
            return t2 || C(e3, 1, this.length), 128 & this[e3] ? -1 * (255 - this[e3] + 1) : this[e3];
          }, u.prototype.readInt16LE = function(e3, t2) {
            return t2 || C(e3, 2, this.length), 32768 & (t2 = this[e3] | this[e3 + 1] << 8) ? 4294901760 | t2 : t2;
          }, u.prototype.readInt16BE = function(e3, t2) {
            return t2 || C(e3, 2, this.length), 32768 & (t2 = this[e3 + 1] | this[e3] << 8) ? 4294901760 | t2 : t2;
          }, u.prototype.readInt32LE = function(e3, t2) {
            return t2 || C(e3, 4, this.length), this[e3] | this[e3 + 1] << 8 | this[e3 + 2] << 16 | this[e3 + 3] << 24;
          }, u.prototype.readInt32BE = function(e3, t2) {
            return t2 || C(e3, 4, this.length), this[e3] << 24 | this[e3 + 1] << 16 | this[e3 + 2] << 8 | this[e3 + 3];
          }, u.prototype.readFloatLE = function(e3, t2) {
            return t2 || C(e3, 4, this.length), i.read(this, e3, true, 23, 4);
          }, u.prototype.readFloatBE = function(e3, t2) {
            return t2 || C(e3, 4, this.length), i.read(this, e3, false, 23, 4);
          }, u.prototype.readDoubleLE = function(e3, t2) {
            return t2 || C(e3, 8, this.length), i.read(this, e3, true, 52, 8);
          }, u.prototype.readDoubleBE = function(e3, t2) {
            return t2 || C(e3, 8, this.length), i.read(this, e3, false, 52, 8);
          }, u.prototype.writeUIntLE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, r2 |= 0, n2 || I(this, e3, t2, r2, Math.pow(2, 8 * r2) - 1, 0);
            var i2 = 1, o2 = 0;
            for (this[t2] = 255 & e3; ++o2 < r2 && (i2 *= 256); )
              this[t2 + o2] = e3 / i2 & 255;
            return t2 + r2;
          }, u.prototype.writeUIntBE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, r2 |= 0, n2 || I(this, e3, t2, r2, Math.pow(2, 8 * r2) - 1, 0);
            var i2 = r2 - 1, o2 = 1;
            for (this[t2 + i2] = 255 & e3; 0 <= --i2 && (o2 *= 256); )
              this[t2 + i2] = e3 / o2 & 255;
            return t2 + r2;
          }, u.prototype.writeUInt8 = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 1, 255, 0), u.TYPED_ARRAY_SUPPORT || (e3 = Math.floor(e3)), this[t2] = 255 & e3, t2 + 1;
          }, u.prototype.writeUInt16LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 2, 65535, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8) : S(this, e3, t2, true), t2 + 2;
          }, u.prototype.writeUInt16BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 2, 65535, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 8, this[t2 + 1] = 255 & e3) : S(this, e3, t2, false), t2 + 2;
          }, u.prototype.writeUInt32LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 4, 4294967295, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2 + 3] = e3 >>> 24, this[t2 + 2] = e3 >>> 16, this[t2 + 1] = e3 >>> 8, this[t2] = 255 & e3) : D(this, e3, t2, true), t2 + 4;
          }, u.prototype.writeUInt32BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 4, 4294967295, 0), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 24, this[t2 + 1] = e3 >>> 16, this[t2 + 2] = e3 >>> 8, this[t2 + 3] = 255 & e3) : D(this, e3, t2, false), t2 + 4;
          }, u.prototype.writeIntLE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, n2 || I(this, e3, t2, r2, (n2 = Math.pow(2, 8 * r2 - 1)) - 1, -n2);
            var i2 = 0, o2 = 1, s2 = 0;
            for (this[t2] = 255 & e3; ++i2 < r2 && (o2 *= 256); )
              e3 < 0 && 0 === s2 && 0 !== this[t2 + i2 - 1] && (s2 = 1), this[t2 + i2] = (e3 / o2 >> 0) - s2 & 255;
            return t2 + r2;
          }, u.prototype.writeIntBE = function(e3, t2, r2, n2) {
            e3 = +e3, t2 |= 0, n2 || I(this, e3, t2, r2, (n2 = Math.pow(2, 8 * r2 - 1)) - 1, -n2);
            var i2 = r2 - 1, o2 = 1, s2 = 0;
            for (this[t2 + i2] = 255 & e3; 0 <= --i2 && (o2 *= 256); )
              e3 < 0 && 0 === s2 && 0 !== this[t2 + i2 + 1] && (s2 = 1), this[t2 + i2] = (e3 / o2 >> 0) - s2 & 255;
            return t2 + r2;
          }, u.prototype.writeInt8 = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 1, 127, -128), u.TYPED_ARRAY_SUPPORT || (e3 = Math.floor(e3)), this[t2] = 255 & (e3 = e3 < 0 ? 255 + e3 + 1 : e3), t2 + 1;
          }, u.prototype.writeInt16LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 2, 32767, -32768), u.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8) : S(this, e3, t2, true), t2 + 2;
          }, u.prototype.writeInt16BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 2, 32767, -32768), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 8, this[t2 + 1] = 255 & e3) : S(this, e3, t2, false), t2 + 2;
          }, u.prototype.writeInt32LE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 4, 2147483647, -2147483648), u.TYPED_ARRAY_SUPPORT ? (this[t2] = 255 & e3, this[t2 + 1] = e3 >>> 8, this[t2 + 2] = e3 >>> 16, this[t2 + 3] = e3 >>> 24) : D(this, e3, t2, true), t2 + 4;
          }, u.prototype.writeInt32BE = function(e3, t2, r2) {
            return e3 = +e3, t2 |= 0, r2 || I(this, e3, t2, 4, 2147483647, -2147483648), e3 < 0 && (e3 = 4294967295 + e3 + 1), u.TYPED_ARRAY_SUPPORT ? (this[t2] = e3 >>> 24, this[t2 + 1] = e3 >>> 16, this[t2 + 2] = e3 >>> 8, this[t2 + 3] = 255 & e3) : D(this, e3, t2, false), t2 + 4;
          }, u.prototype.writeFloatLE = function(e3, t2, r2) {
            return w(this, e3, t2, true, r2);
          }, u.prototype.writeFloatBE = function(e3, t2, r2) {
            return w(this, e3, t2, false, r2);
          }, u.prototype.writeDoubleLE = function(e3, t2, r2) {
            return A(this, e3, t2, true, r2);
          }, u.prototype.writeDoubleBE = function(e3, t2, r2) {
            return A(this, e3, t2, false, r2);
          }, u.prototype.copy = function(e3, t2, r2, n2) {
            if (r2 = r2 || 0, n2 || 0 === n2 || (n2 = this.length), t2 >= e3.length && (t2 = e3.length), (n2 = 0 < n2 && n2 < r2 ? r2 : n2) === r2)
              return 0;
            if (0 === e3.length || 0 === this.length)
              return 0;
            if ((t2 = t2 || 0) < 0)
              throw new RangeError("targetStart out of bounds");
            if (r2 < 0 || r2 >= this.length)
              throw new RangeError("sourceStart out of bounds");
            if (n2 < 0)
              throw new RangeError("sourceEnd out of bounds");
            n2 > this.length && (n2 = this.length);
            var i2, o2 = (n2 = e3.length - t2 < n2 - r2 ? e3.length - t2 + r2 : n2) - r2;
            if (this === e3 && r2 < t2 && t2 < n2)
              for (i2 = o2 - 1; 0 <= i2; --i2)
                e3[i2 + t2] = this[i2 + r2];
            else if (o2 < 1e3 || !u.TYPED_ARRAY_SUPPORT)
              for (i2 = 0; i2 < o2; ++i2)
                e3[i2 + t2] = this[i2 + r2];
            else
              Uint8Array.prototype.set.call(e3, this.subarray(r2, r2 + o2), t2);
            return o2;
          }, u.prototype.fill = function(e3, t2, r2, n2) {
            if ("string" == typeof e3) {
              var i2;
              if ("string" == typeof t2 ? (n2 = t2, t2 = 0, r2 = this.length) : "string" == typeof r2 && (n2 = r2, r2 = this.length), 1 !== e3.length || (i2 = e3.charCodeAt(0)) < 256 && (e3 = i2), void 0 !== n2 && "string" != typeof n2)
                throw new TypeError("encoding must be a string");
              if ("string" == typeof n2 && !u.isEncoding(n2))
                throw new TypeError("Unknown encoding: " + n2);
            } else
              "number" == typeof e3 && (e3 &= 255);
            if (t2 < 0 || this.length < t2 || this.length < r2)
              throw new RangeError("Out of range index");
            if (r2 <= t2)
              return this;
            if (t2 >>>= 0, r2 = void 0 === r2 ? this.length : r2 >>> 0, "number" == typeof (e3 = e3 || 0))
              for (a2 = t2; a2 < r2; ++a2)
                this[a2] = e3;
            else
              for (var o2 = u.isBuffer(e3) ? e3 : x(new u(e3, n2).toString()), s2 = o2.length, a2 = 0; a2 < r2 - t2; ++a2)
                this[a2 + t2] = o2[a2 % s2];
            return this;
          };
          var R = /[^+\/0-9A-Za-z-_]/g;
          function x(e3, t2) {
            t2 = t2 || 1 / 0;
            for (var r2, n2 = e3.length, i2 = null, o2 = [], s2 = 0; s2 < n2; ++s2) {
              if (55295 < (r2 = e3.charCodeAt(s2)) && r2 < 57344) {
                if (!i2) {
                  if (56319 < r2) {
                    -1 < (t2 -= 3) && o2.push(239, 191, 189);
                    continue;
                  }
                  if (s2 + 1 === n2) {
                    -1 < (t2 -= 3) && o2.push(239, 191, 189);
                    continue;
                  }
                  i2 = r2;
                  continue;
                }
                if (r2 < 56320) {
                  -1 < (t2 -= 3) && o2.push(239, 191, 189), i2 = r2;
                  continue;
                }
                r2 = 65536 + (i2 - 55296 << 10 | r2 - 56320);
              } else
                i2 && -1 < (t2 -= 3) && o2.push(239, 191, 189);
              if (i2 = null, r2 < 128) {
                if (--t2 < 0)
                  break;
                o2.push(r2);
              } else if (r2 < 2048) {
                if ((t2 -= 2) < 0)
                  break;
                o2.push(r2 >> 6 | 192, 63 & r2 | 128);
              } else if (r2 < 65536) {
                if ((t2 -= 3) < 0)
                  break;
                o2.push(r2 >> 12 | 224, r2 >> 6 & 63 | 128, 63 & r2 | 128);
              } else {
                if (!(r2 < 1114112))
                  throw new Error("Invalid code point");
                if ((t2 -= 4) < 0)
                  break;
                o2.push(r2 >> 18 | 240, r2 >> 12 & 63 | 128, r2 >> 6 & 63 | 128, 63 & r2 | 128);
              }
            }
            return o2;
          }
          function T(e3) {
            return n.toByteArray(function(e4) {
              var t2;
              if ((e4 = ((t2 = e4).trim ? t2.trim() : t2.replace(/^\s+|\s+$/g, "")).replace(R, "")).length < 2)
                return "";
              for (; e4.length % 4 != 0; )
                e4 += "=";
              return e4;
            }(e3));
          }
          function L(e3, t2, r2, n2) {
            for (var i2 = 0; i2 < n2 && !(i2 + r2 >= t2.length || i2 >= e3.length); ++i2)
              t2[i2 + r2] = e3[i2];
            return i2;
          }
        }).call(this, r(11));
      }, function(e, t, r) {
        "use strict";
        t.byteLength = function(e2) {
          return 3 * ((e2 = c(e2))[0] + (e2 = e2[1])) / 4 - e2;
        }, t.toByteArray = function(e2) {
          var t2, r2, n2 = (s2 = c(e2))[0], s2 = s2[1], a2 = new o(function(e3, t3) {
            return 3 * (e3 + t3) / 4 - t3;
          }(n2, s2)), u2 = 0, l = 0 < s2 ? n2 - 4 : n2;
          for (r2 = 0; r2 < l; r2 += 4)
            t2 = i[e2.charCodeAt(r2)] << 18 | i[e2.charCodeAt(r2 + 1)] << 12 | i[e2.charCodeAt(r2 + 2)] << 6 | i[e2.charCodeAt(r2 + 3)], a2[u2++] = t2 >> 16 & 255, a2[u2++] = t2 >> 8 & 255, a2[u2++] = 255 & t2;
          return 2 === s2 && (t2 = i[e2.charCodeAt(r2)] << 2 | i[e2.charCodeAt(r2 + 1)] >> 4, a2[u2++] = 255 & t2), 1 === s2 && (t2 = i[e2.charCodeAt(r2)] << 10 | i[e2.charCodeAt(r2 + 1)] << 4 | i[e2.charCodeAt(r2 + 2)] >> 2, a2[u2++] = t2 >> 8 & 255, a2[u2++] = 255 & t2), a2;
        }, t.fromByteArray = function(e2) {
          for (var t2, r2 = e2.length, i2 = r2 % 3, o2 = [], s2 = 0, a2 = r2 - i2; s2 < a2; s2 += 16383)
            o2.push(function(e3, t3, r3) {
              for (var i3, o3 = [], s3 = t3; s3 < r3; s3 += 3)
                i3 = (e3[s3] << 16 & 16711680) + (e3[s3 + 1] << 8 & 65280) + (255 & e3[s3 + 2]), o3.push(function(e4) {
                  return n[e4 >> 18 & 63] + n[e4 >> 12 & 63] + n[e4 >> 6 & 63] + n[63 & e4];
                }(i3));
              return o3.join("");
            }(e2, s2, a2 < s2 + 16383 ? a2 : s2 + 16383));
          return 1 == i2 ? (t2 = e2[r2 - 1], o2.push(n[t2 >> 2] + n[t2 << 4 & 63] + "==")) : 2 == i2 && (t2 = (e2[r2 - 2] << 8) + e2[r2 - 1], o2.push(n[t2 >> 10] + n[t2 >> 4 & 63] + n[t2 << 2 & 63] + "=")), o2.join("");
        };
        for (var n = [], i = [], o = "undefined" != typeof Uint8Array ? Uint8Array : Array, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = 0, u = s.length; a < u; ++a)
          n[a] = s[a], i[s.charCodeAt(a)] = a;
        function c(e2) {
          var t2 = e2.length;
          if (0 < t2 % 4)
            throw new Error("Invalid string. Length must be a multiple of 4");
          return t2 = (e2 = -1 === (e2 = e2.indexOf("=")) ? t2 : e2) === t2 ? 0 : 4 - e2 % 4, [e2, t2];
        }
        i["-".charCodeAt(0)] = 62, i["_".charCodeAt(0)] = 63;
      }, function(e, t) {
        t.read = function(e2, t2, r, n, i) {
          var o, s, a = 8 * i - n - 1, u = (1 << a) - 1, c = u >> 1, l = -7, d = r ? i - 1 : 0, p = r ? -1 : 1;
          i = e2[t2 + d];
          for (d += p, o = i & (1 << -l) - 1, i >>= -l, l += a; 0 < l; o = 256 * o + e2[t2 + d], d += p, l -= 8)
            ;
          for (s = o & (1 << -l) - 1, o >>= -l, l += n; 0 < l; s = 256 * s + e2[t2 + d], d += p, l -= 8)
            ;
          if (0 === o)
            o = 1 - c;
          else {
            if (o === u)
              return s ? NaN : 1 / 0 * (i ? -1 : 1);
            s += Math.pow(2, n), o -= c;
          }
          return (i ? -1 : 1) * s * Math.pow(2, o - n);
        }, t.write = function(e2, t2, r, n, i, o) {
          var s, a, u = 8 * o - i - 1, c = (1 << u) - 1, l = c >> 1, d = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0, p = n ? 0 : o - 1, h = n ? 1 : -1;
          o = t2 < 0 || 0 === t2 && 1 / t2 < 0 ? 1 : 0;
          for (t2 = Math.abs(t2), isNaN(t2) || t2 === 1 / 0 ? (a = isNaN(t2) ? 1 : 0, s = c) : (s = Math.floor(Math.log(t2) / Math.LN2), t2 * (n = Math.pow(2, -s)) < 1 && (s--, n *= 2), 2 <= (t2 += 1 <= s + l ? d / n : d * Math.pow(2, 1 - l)) * n && (s++, n /= 2), c <= s + l ? (a = 0, s = c) : 1 <= s + l ? (a = (t2 * n - 1) * Math.pow(2, i), s += l) : (a = t2 * Math.pow(2, l - 1) * Math.pow(2, i), s = 0)); 8 <= i; e2[r + p] = 255 & a, p += h, a /= 256, i -= 8)
            ;
          for (s = s << i | a, u += i; 0 < u; e2[r + p] = 255 & s, p += h, s /= 256, u -= 8)
            ;
          e2[r + p - h] |= 128 * o;
        };
      }, function(e, t) {
        var r = {}.toString;
        e.exports = Array.isArray || function(e2) {
          return "[object Array]" == r.call(e2);
        };
      }, function(e, t, r) {
        (function(e2) {
          var n = void 0 !== e2 && e2 || "undefined" != typeof self && self || window, i = Function.prototype.apply;
          function o(e3, t2) {
            this._id = e3, this._clearFn = t2;
          }
          t.setTimeout = function() {
            return new o(i.call(setTimeout, n, arguments), clearTimeout);
          }, t.setInterval = function() {
            return new o(i.call(setInterval, n, arguments), clearInterval);
          }, t.clearTimeout = t.clearInterval = function(e3) {
            e3 && e3.close();
          }, o.prototype.unref = o.prototype.ref = function() {
          }, o.prototype.close = function() {
            this._clearFn.call(n, this._id);
          }, t.enroll = function(e3, t2) {
            clearTimeout(e3._idleTimeoutId), e3._idleTimeout = t2;
          }, t.unenroll = function(e3) {
            clearTimeout(e3._idleTimeoutId), e3._idleTimeout = -1;
          }, t._unrefActive = t.active = function(e3) {
            clearTimeout(e3._idleTimeoutId);
            var t2 = e3._idleTimeout;
            0 <= t2 && (e3._idleTimeoutId = setTimeout(function() {
              e3._onTimeout && e3._onTimeout();
            }, t2));
          }, r(121), t.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== e2 && e2.setImmediate || this && this.setImmediate, t.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== e2 && e2.clearImmediate || this && this.clearImmediate;
        }).call(this, r(11));
      }, function(e, t, r) {
        (function(e2, t2) {
          !function(e3, r2) {
            "use strict";
            var n, i, o, s, a, u, c, l;
            function d(e4) {
              delete i[e4];
            }
            function p(e4) {
              if (o)
                setTimeout(p, 0, e4);
              else {
                var t3 = i[e4];
                if (t3) {
                  o = true;
                  try {
                    var r3 = t3, n2 = r3.callback, s2 = r3.args;
                    switch (s2.length) {
                      case 0:
                        n2();
                        break;
                      case 1:
                        n2(s2[0]);
                        break;
                      case 2:
                        n2(s2[0], s2[1]);
                        break;
                      case 3:
                        n2(s2[0], s2[1], s2[2]);
                        break;
                      default:
                        n2.apply(void 0, s2);
                    }
                  } finally {
                    d(e4), o = false;
                  }
                }
              }
            }
            e3.setImmediate || (n = 1, o = !(i = {}), s = e3.document, l = (l = Object.getPrototypeOf && Object.getPrototypeOf(e3)) && l.setTimeout ? l : e3, "[object process]" === {}.toString.call(e3.process) ? a = function(e4) {
              t2.nextTick(function() {
                p(e4);
              });
            } : function() {
              var t3, r3;
              if (e3.postMessage && !e3.importScripts)
                return t3 = true, r3 = e3.onmessage, e3.onmessage = function() {
                  t3 = false;
                }, e3.postMessage("", "*"), e3.onmessage = r3, t3;
            }() ? function() {
              function t3(t4) {
                t4.source === e3 && "string" == typeof t4.data && 0 === t4.data.indexOf(r3) && p(+t4.data.slice(r3.length));
              }
              var r3 = "setImmediate$" + Math.random() + "$";
              e3.addEventListener ? e3.addEventListener("message", t3, false) : e3.attachEvent("onmessage", t3), a = function(t4) {
                e3.postMessage(r3 + t4, "*");
              };
            }() : a = e3.MessageChannel ? ((c = new MessageChannel()).port1.onmessage = function(e4) {
              p(e4.data);
            }, function(e4) {
              c.port2.postMessage(e4);
            }) : s && "onreadystatechange" in s.createElement("script") ? (u = s.documentElement, function(e4) {
              var t3 = s.createElement("script");
              t3.onreadystatechange = function() {
                p(e4), t3.onreadystatechange = null, u.removeChild(t3), t3 = null;
              }, u.appendChild(t3);
            }) : function(e4) {
              setTimeout(p, 0, e4);
            }, l.setImmediate = function(e4) {
              "function" != typeof e4 && (e4 = new Function("" + e4));
              for (var t3 = new Array(arguments.length - 1), r3 = 0; r3 < t3.length; r3++)
                t3[r3] = arguments[r3 + 1];
              return i[n] = { callback: e4, args: t3 }, a(n), n++;
            }, l.clearImmediate = d);
          }("undefined" == typeof self ? void 0 === e2 ? this : e2 : self);
        }).call(this, r(11), r(53));
      }]);
    });
  }
});
export default require_zego_zim_web();
//# sourceMappingURL=zego-zim-web.js.map
